(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function e(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=e(o);fetch(o.href,u)}})();function Xw(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Xm={exports:{}},pu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pE;function Zw(){if(pE)return pu;pE=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var d in o)d!=="key"&&(u[d]=o[d])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:h,ref:o!==void 0?o:null,props:u}}return pu.Fragment=t,pu.jsx=e,pu.jsxs=e,pu}var _E;function Ww(){return _E||(_E=1,Xm.exports=Zw()),Xm.exports}var q=Ww(),Zm={exports:{}},Ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yE;function Jw(){if(yE)return Ct;yE=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.iterator;function S(x){return x===null||typeof x!="object"?null:(x=T&&x[T]||x["@@iterator"],typeof x=="function"?x:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,H={};function Q(x,tt,ot){this.props=x,this.context=tt,this.refs=H,this.updater=ot||V}Q.prototype.isReactComponent={},Q.prototype.setState=function(x,tt){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,tt,"setState")},Q.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function dt(){}dt.prototype=Q.prototype;function it(x,tt,ot){this.props=x,this.context=tt,this.refs=H,this.updater=ot||V}var lt=it.prototype=new dt;lt.constructor=it,G(lt,Q.prototype),lt.isPureReactComponent=!0;var Tt=Array.isArray,ht={H:null,A:null,T:null,S:null},yt=Object.prototype.hasOwnProperty;function O(x,tt,ot,ut,ct,It){return ot=It.ref,{$$typeof:s,type:x,key:tt,ref:ot!==void 0?ot:null,props:It}}function I(x,tt){return O(x.type,tt,void 0,void 0,void 0,x.props)}function w(x){return typeof x=="object"&&x!==null&&x.$$typeof===s}function R(x){var tt={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(ot){return tt[ot]})}var N=/\/+/g;function L(x,tt){return typeof x=="object"&&x!==null&&x.key!=null?R(""+x.key):tt.toString(36)}function C(){}function le(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(C,C):(x.status="pending",x.then(function(tt){x.status==="pending"&&(x.status="fulfilled",x.value=tt)},function(tt){x.status==="pending"&&(x.status="rejected",x.reason=tt)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function Kt(x,tt,ot,ut,ct){var It=typeof x;(It==="undefined"||It==="boolean")&&(x=null);var Dt=!1;if(x===null)Dt=!0;else switch(It){case"bigint":case"string":case"number":Dt=!0;break;case"object":switch(x.$$typeof){case s:case t:Dt=!0;break;case E:return Dt=x._init,Kt(Dt(x._payload),tt,ot,ut,ct)}}if(Dt)return ct=ct(x),Dt=ut===""?"."+L(x,0):ut,Tt(ct)?(ot="",Dt!=null&&(ot=Dt.replace(N,"$&/")+"/"),Kt(ct,tt,ot,"",function(de){return de})):ct!=null&&(w(ct)&&(ct=I(ct,ot+(ct.key==null||x&&x.key===ct.key?"":(""+ct.key).replace(N,"$&/")+"/")+Dt)),tt.push(ct)),1;Dt=0;var Se=ut===""?".":ut+":";if(Tt(x))for(var qt=0;qt<x.length;qt++)ut=x[qt],It=Se+L(ut,qt),Dt+=Kt(ut,tt,ot,It,ct);else if(qt=S(x),typeof qt=="function")for(x=qt.call(x),qt=0;!(ut=x.next()).done;)ut=ut.value,It=Se+L(ut,qt++),Dt+=Kt(ut,tt,ot,It,ct);else if(It==="object"){if(typeof x.then=="function")return Kt(le(x),tt,ot,ut,ct);throw tt=String(x),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.")}return Dt}function rt(x,tt,ot){if(x==null)return x;var ut=[],ct=0;return Kt(x,ut,"","",function(It){return tt.call(ot,It,ct++)}),ut}function Et(x){if(x._status===-1){var tt=x._result;tt=tt(),tt.then(function(ot){(x._status===0||x._status===-1)&&(x._status=1,x._result=ot)},function(ot){(x._status===0||x._status===-1)&&(x._status=2,x._result=ot)}),x._status===-1&&(x._status=0,x._result=tt)}if(x._status===1)return x._result.default;throw x._result}var et=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var tt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(tt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)};function wt(){}return Ct.Children={map:rt,forEach:function(x,tt,ot){rt(x,function(){tt.apply(this,arguments)},ot)},count:function(x){var tt=0;return rt(x,function(){tt++}),tt},toArray:function(x){return rt(x,function(tt){return tt})||[]},only:function(x){if(!w(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},Ct.Component=Q,Ct.Fragment=e,Ct.Profiler=o,Ct.PureComponent=it,Ct.StrictMode=r,Ct.Suspense=g,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ht,Ct.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ct.cache=function(x){return function(){return x.apply(null,arguments)}},Ct.cloneElement=function(x,tt,ot){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var ut=G({},x.props),ct=x.key,It=void 0;if(tt!=null)for(Dt in tt.ref!==void 0&&(It=void 0),tt.key!==void 0&&(ct=""+tt.key),tt)!yt.call(tt,Dt)||Dt==="key"||Dt==="__self"||Dt==="__source"||Dt==="ref"&&tt.ref===void 0||(ut[Dt]=tt[Dt]);var Dt=arguments.length-2;if(Dt===1)ut.children=ot;else if(1<Dt){for(var Se=Array(Dt),qt=0;qt<Dt;qt++)Se[qt]=arguments[qt+2];ut.children=Se}return O(x.type,ct,void 0,void 0,It,ut)},Ct.createContext=function(x){return x={$$typeof:h,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:u,_context:x},x},Ct.createElement=function(x,tt,ot){var ut,ct={},It=null;if(tt!=null)for(ut in tt.key!==void 0&&(It=""+tt.key),tt)yt.call(tt,ut)&&ut!=="key"&&ut!=="__self"&&ut!=="__source"&&(ct[ut]=tt[ut]);var Dt=arguments.length-2;if(Dt===1)ct.children=ot;else if(1<Dt){for(var Se=Array(Dt),qt=0;qt<Dt;qt++)Se[qt]=arguments[qt+2];ct.children=Se}if(x&&x.defaultProps)for(ut in Dt=x.defaultProps,Dt)ct[ut]===void 0&&(ct[ut]=Dt[ut]);return O(x,It,void 0,void 0,null,ct)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(x){return{$$typeof:d,render:x}},Ct.isValidElement=w,Ct.lazy=function(x){return{$$typeof:E,_payload:{_status:-1,_result:x},_init:Et}},Ct.memo=function(x,tt){return{$$typeof:p,type:x,compare:tt===void 0?null:tt}},Ct.startTransition=function(x){var tt=ht.T,ot={};ht.T=ot;try{var ut=x(),ct=ht.S;ct!==null&&ct(ot,ut),typeof ut=="object"&&ut!==null&&typeof ut.then=="function"&&ut.then(wt,et)}catch(It){et(It)}finally{ht.T=tt}},Ct.unstable_useCacheRefresh=function(){return ht.H.useCacheRefresh()},Ct.use=function(x){return ht.H.use(x)},Ct.useActionState=function(x,tt,ot){return ht.H.useActionState(x,tt,ot)},Ct.useCallback=function(x,tt){return ht.H.useCallback(x,tt)},Ct.useContext=function(x){return ht.H.useContext(x)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(x,tt){return ht.H.useDeferredValue(x,tt)},Ct.useEffect=function(x,tt){return ht.H.useEffect(x,tt)},Ct.useId=function(){return ht.H.useId()},Ct.useImperativeHandle=function(x,tt,ot){return ht.H.useImperativeHandle(x,tt,ot)},Ct.useInsertionEffect=function(x,tt){return ht.H.useInsertionEffect(x,tt)},Ct.useLayoutEffect=function(x,tt){return ht.H.useLayoutEffect(x,tt)},Ct.useMemo=function(x,tt){return ht.H.useMemo(x,tt)},Ct.useOptimistic=function(x,tt){return ht.H.useOptimistic(x,tt)},Ct.useReducer=function(x,tt,ot){return ht.H.useReducer(x,tt,ot)},Ct.useRef=function(x){return ht.H.useRef(x)},Ct.useState=function(x){return ht.H.useState(x)},Ct.useSyncExternalStore=function(x,tt,ot){return ht.H.useSyncExternalStore(x,tt,ot)},Ct.useTransition=function(){return ht.H.useTransition()},Ct.version="19.0.0",Ct}var vE;function bf(){return vE||(vE=1,Zm.exports=Jw()),Zm.exports}var Ke=bf(),Wm={exports:{}},_u={},Jm={exports:{}},tg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EE;function tI(){return EE||(EE=1,function(s){function t(rt,Et){var et=rt.length;rt.push(Et);t:for(;0<et;){var wt=et-1>>>1,x=rt[wt];if(0<o(x,Et))rt[wt]=Et,rt[et]=x,et=wt;else break t}}function e(rt){return rt.length===0?null:rt[0]}function r(rt){if(rt.length===0)return null;var Et=rt[0],et=rt.pop();if(et!==Et){rt[0]=et;t:for(var wt=0,x=rt.length,tt=x>>>1;wt<tt;){var ot=2*(wt+1)-1,ut=rt[ot],ct=ot+1,It=rt[ct];if(0>o(ut,et))ct<x&&0>o(It,ut)?(rt[wt]=It,rt[ct]=et,wt=ct):(rt[wt]=ut,rt[ot]=et,wt=ot);else if(ct<x&&0>o(It,et))rt[wt]=It,rt[ct]=et,wt=ct;else break t}}return Et}function o(rt,Et){var et=rt.sortIndex-Et.sortIndex;return et!==0?et:rt.id-Et.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,d=h.now();s.unstable_now=function(){return h.now()-d}}var g=[],p=[],E=1,T=null,S=3,V=!1,G=!1,H=!1,Q=typeof setTimeout=="function"?setTimeout:null,dt=typeof clearTimeout=="function"?clearTimeout:null,it=typeof setImmediate<"u"?setImmediate:null;function lt(rt){for(var Et=e(p);Et!==null;){if(Et.callback===null)r(p);else if(Et.startTime<=rt)r(p),Et.sortIndex=Et.expirationTime,t(g,Et);else break;Et=e(p)}}function Tt(rt){if(H=!1,lt(rt),!G)if(e(g)!==null)G=!0,le();else{var Et=e(p);Et!==null&&Kt(Tt,Et.startTime-rt)}}var ht=!1,yt=-1,O=5,I=-1;function w(){return!(s.unstable_now()-I<O)}function R(){if(ht){var rt=s.unstable_now();I=rt;var Et=!0;try{t:{G=!1,H&&(H=!1,dt(yt),yt=-1),V=!0;var et=S;try{e:{for(lt(rt),T=e(g);T!==null&&!(T.expirationTime>rt&&w());){var wt=T.callback;if(typeof wt=="function"){T.callback=null,S=T.priorityLevel;var x=wt(T.expirationTime<=rt);if(rt=s.unstable_now(),typeof x=="function"){T.callback=x,lt(rt),Et=!0;break e}T===e(g)&&r(g),lt(rt)}else r(g);T=e(g)}if(T!==null)Et=!0;else{var tt=e(p);tt!==null&&Kt(Tt,tt.startTime-rt),Et=!1}}break t}finally{T=null,S=et,V=!1}Et=void 0}}finally{Et?N():ht=!1}}}var N;if(typeof it=="function")N=function(){it(R)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,C=L.port2;L.port1.onmessage=R,N=function(){C.postMessage(null)}}else N=function(){Q(R,0)};function le(){ht||(ht=!0,N())}function Kt(rt,Et){yt=Q(function(){rt(s.unstable_now())},Et)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(rt){rt.callback=null},s.unstable_continueExecution=function(){G||V||(G=!0,le())},s.unstable_forceFrameRate=function(rt){0>rt||125<rt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<rt?Math.floor(1e3/rt):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_getFirstCallbackNode=function(){return e(g)},s.unstable_next=function(rt){switch(S){case 1:case 2:case 3:var Et=3;break;default:Et=S}var et=S;S=Et;try{return rt()}finally{S=et}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(rt,Et){switch(rt){case 1:case 2:case 3:case 4:case 5:break;default:rt=3}var et=S;S=rt;try{return Et()}finally{S=et}},s.unstable_scheduleCallback=function(rt,Et,et){var wt=s.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?wt+et:wt):et=wt,rt){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=et+x,rt={id:E++,callback:Et,priorityLevel:rt,startTime:et,expirationTime:x,sortIndex:-1},et>wt?(rt.sortIndex=et,t(p,rt),e(g)===null&&rt===e(p)&&(H?(dt(yt),yt=-1):H=!0,Kt(Tt,et-wt))):(rt.sortIndex=x,t(g,rt),G||V||(G=!0,le())),rt},s.unstable_shouldYield=w,s.unstable_wrapCallback=function(rt){var Et=S;return function(){var et=S;S=Et;try{return rt.apply(this,arguments)}finally{S=et}}}}(tg)),tg}var TE;function eI(){return TE||(TE=1,Jm.exports=tI()),Jm.exports}var eg={exports:{}},nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AE;function nI(){if(AE)return nn;AE=1;var s=bf();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:p,implementation:E}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,nn.createPortal=function(g,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return u(g,p,null,E)},nn.flushSync=function(g){var p=h.T,E=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=p,r.p=E,r.d.f()}},nn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},nn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},nn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var E=p.as,T=d(E,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,V=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:V}):E==="script"&&r.d.X(g,{crossOrigin:T,integrity:S,fetchPriority:V,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},nn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=d(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},nn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,T=d(E,p.crossOrigin);r.d.L(g,E,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},nn.preloadModule=function(g,p){if(typeof g=="string")if(p){var E=d(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},nn.requestFormReset=function(g){r.d.r(g)},nn.unstable_batchedUpdates=function(g,p){return g(p)},nn.useFormState=function(g,p,E){return h.H.useFormState(g,p,E)},nn.useFormStatus=function(){return h.H.useHostTransitionStatus()},nn.version="19.0.0",nn}var bE;function iI(){if(bE)return eg.exports;bE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),eg.exports=nI(),eg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE;function rI(){if(SE)return _u;SE=1;var s=eI(),t=bf(),e=iI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}var u=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),V=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),dt=Symbol.for("react.memo"),it=Symbol.for("react.lazy"),lt=Symbol.for("react.offscreen"),Tt=Symbol.for("react.memo_cache_sentinel"),ht=Symbol.iterator;function yt(n){return n===null||typeof n!="object"?null:(n=ht&&n[ht]||n["@@iterator"],typeof n=="function"?n:null)}var O=Symbol.for("react.client.reference");function I(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===O?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case g:return"Fragment";case d:return"Portal";case E:return"Profiler";case p:return"StrictMode";case H:return"Suspense";case Q:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case V:return(n.displayName||"Context")+".Provider";case S:return(n._context.displayName||"Context")+".Consumer";case G:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case dt:return i=n.displayName||null,i!==null?i:I(n.type)||"Memo";case it:i=n._payload,n=n._init;try{return I(n(i))}catch{}}return null}var w=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=Object.assign,N,L;function C(n){if(N===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);N=i&&i[1]||"",L=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+N+n+L}var le=!1;function Kt(n,i){if(!n||le)return"";le=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(Y){var j=Y}Reflect.construct(n,[],W)}else{try{W.call()}catch(Y){j=Y}n.call(W.prototype)}}else{try{throw Error()}catch(Y){j=Y}(W=n())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(Y){if(Y&&j&&typeof Y.stack=="string")return[Y.stack,j.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),v=m[0],A=m[1];if(v&&A){var D=v.split(`
`),P=A.split(`
`);for(f=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;f<P.length&&!P[f].includes("DetermineComponentFrameRoot");)f++;if(l===D.length||f===P.length)for(l=D.length-1,f=P.length-1;1<=l&&0<=f&&D[l]!==P[f];)f--;for(;1<=l&&0<=f;l--,f--)if(D[l]!==P[f]){if(l!==1||f!==1)do if(l--,f--,0>f||D[l]!==P[f]){var $=`
`+D[l].replace(" at new "," at ");return n.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",n.displayName)),$}while(1<=l&&0<=f);break}}}finally{le=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?C(a):""}function rt(n){switch(n.tag){case 26:case 27:case 5:return C(n.type);case 16:return C("Lazy");case 13:return C("Suspense");case 19:return C("SuspenseList");case 0:case 15:return n=Kt(n.type,!1),n;case 11:return n=Kt(n.type.render,!1),n;case 1:return n=Kt(n.type,!0),n;default:return""}}function Et(n){try{var i="";do i+=rt(n),n=n.return;while(n);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function et(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,i.flags&4098&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function wt(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function x(n){if(et(n)!==n)throw Error(r(188))}function tt(n){var i=n.alternate;if(!i){if(i=et(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return x(f),n;if(m===l)return x(f),i;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=m;else{for(var v=!1,A=f.child;A;){if(A===a){v=!0,a=f,l=m;break}if(A===l){v=!0,l=f,a=m;break}A=A.sibling}if(!v){for(A=m.child;A;){if(A===a){v=!0,a=m,l=f;break}if(A===l){v=!0,l=m,a=f;break}A=A.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function ot(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=ot(n),i!==null)return i;n=n.sibling}return null}var ut=Array.isArray,ct=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,It={pending:!1,data:null,method:null,action:null},Dt=[],Se=-1;function qt(n){return{current:n}}function de(n){0>Se||(n.current=Dt[Se],Dt[Se]=null,Se--)}function Yt(n,i){Se++,Dt[Se]=n.current,n.current=i}var ln=qt(null),Vi=qt(null),On=qt(null),dr=qt(null);function mr(n,i){switch(Yt(On,i),Yt(Vi,n),Yt(ln,null),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)&&(i=i.namespaceURI)?Hv(i):0;break;default:if(n=n===8?i.parentNode:i,i=n.tagName,n=n.namespaceURI)n=Hv(n),i=Kv(n,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}de(ln),Yt(ln,i)}function xi(){de(ln),de(Vi),de(On)}function hl(n){n.memoizedState!==null&&Yt(dr,n);var i=ln.current,a=Kv(i,n.type);i!==a&&(Yt(Vi,n),Yt(ln,a))}function Ca(n){Vi.current===n&&(de(ln),de(Vi)),dr.current===n&&(de(dr),hu._currentValue=It)}var Va=Object.prototype.hasOwnProperty,bs=s.unstable_scheduleCallback,xa=s.unstable_cancelCallback,Wf=s.unstable_shouldYield,fl=s.unstable_requestPaint,yn=s.unstable_now,fc=s.unstable_getCurrentPriorityLevel,Ve=s.unstable_ImmediatePriority,ke=s.unstable_UserBlockingPriority,Ni=s.unstable_NormalPriority,dc=s.unstable_LowPriority,dl=s.unstable_IdlePriority,Jf=s.log,Ss=s.unstable_setDisableYieldValue,gr=null,tn=null;function ml(n){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(gr,n,void 0,(n.current.flags&128)===128)}catch{}}function si(n){if(typeof Jf=="function"&&Ss(n),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(gr,n)}catch{}}var un=Math.clz32?Math.clz32:gc,gl=Math.log,mc=Math.LN2;function gc(n){return n>>>=0,n===0?32:31-(gl(n)/mc|0)|0}var ai=128,pr=4194304;function Wn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Mn(n,i){var a=n.pendingLanes;if(a===0)return 0;var l=0,f=n.suspendedLanes,m=n.pingedLanes,v=n.warmLanes;n=n.finishedLanes!==0;var A=a&134217727;return A!==0?(a=A&~f,a!==0?l=Wn(a):(m&=A,m!==0?l=Wn(m):n||(v=A&~v,v!==0&&(l=Wn(v))))):(A=a&~f,A!==0?l=Wn(A):m!==0?l=Wn(m):n||(v=a&~v,v!==0&&(l=Wn(v)))),l===0?0:i!==0&&i!==l&&!(i&f)&&(f=l&-l,v=i&-i,f>=v||f===32&&(v&4194176)!==0)?i:l}function _r(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Na(n,i){switch(n){case 1:case 2:case 4:case 8:return i+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pl(){var n=ai;return ai<<=1,!(ai&4194176)&&(ai=128),n}function yr(){var n=pr;return pr<<=1,!(pr&62914560)&&(pr=4194304),n}function Oa(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function ve(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function pc(n,i,a,l,f,m){var v=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var A=n.entanglements,D=n.expirationTimes,P=n.hiddenUpdates;for(a=v&~a;0<a;){var $=31-un(a),W=1<<$;A[$]=0,D[$]=-1;var j=P[$];if(j!==null)for(P[$]=null,$=0;$<j.length;$++){var Y=j[$];Y!==null&&(Y.lane&=-536870913)}a&=~W}l!==0&&vr(n,l,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(v&~i))}function vr(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-un(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194218}function Er(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-un(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function _c(n){return n&=-n,2<n?8<n?n&134217727?32:268435456:8:2}function yc(){var n=ct.p;return n!==0?n:(n=window.event,n===void 0?32:cE(n.type))}function Tr(n,i){var a=ct.p;try{return ct.p=n,i()}finally{ct.p=a}}var oi=Math.random().toString(36).slice(2),Ue="__reactFiber$"+oi,xe="__reactProps$"+oi,Oi="__reactContainer$"+oi,ws="__reactEvents$"+oi,Ma="__reactListeners$"+oi,li="__reactHandles$"+oi,_l="__reactResources$"+oi,Ar="__reactMarker$"+oi;function Is(n){delete n[Ue],delete n[xe],delete n[ws],delete n[Ma],delete n[li]}function Jn(n){var i=n[Ue];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Oi]||a[Ue]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=$v(n);n!==null;){if(a=n[Ue])return a;n=$v(n)}return i}n=a,a=n.parentNode}return null}function Mi(n){if(n=n[Ue]||n[Oi]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function br(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function Sr(n){var i=n[_l];return i||(i=n[_l]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ue(n){n[Ar]=!0}var yl=new Set,Pa={};function Sn(n,i){vn(n,i),vn(n+"Capture",i)}function vn(n,i){for(Pa[n]=i,n=0;n<i.length;n++)yl.add(i[n])}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),td=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vl={},El={};function vc(n){return Va.call(El,n)?!0:Va.call(vl,n)?!1:td.test(n)?El[n]=!0:(vl[n]=!0,!1)}function wr(n,i,a){if(vc(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function Ir(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function Pn(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}function cn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ec(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ed(n){var i=Ec(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),l=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){l=""+v,m.call(this,v)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Rs(n){n._valueTracker||(n._valueTracker=ed(n))}function Tl(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=Ec(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function La(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Pi=/[\n"\\]/g;function me(n){return n.replace(Pi,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Rr(n,i,a,l,f,m,v,A){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),i!=null?v==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+cn(i)):n.value!==""+cn(i)&&(n.value=""+cn(i)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),i!=null?ka(n,v,cn(i)):a!=null?ka(n,v,cn(a)):l!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+cn(A):n.removeAttribute("name")}function Ds(n,i,a,l,f,m,v,A){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),i!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;a=a!=null?""+cn(a):"",i=i!=null?""+cn(i):a,A||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=A?n.checked:!!l,n.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v)}function ka(n,i,a){i==="number"&&La(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function jt(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+cn(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Cs(n,i,a){if(i!=null&&(i=""+cn(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+cn(a):""}function Dr(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(ut(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=cn(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function Ln(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var nd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Al(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||nd.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function Tc(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Al(n,f,l)}else for(var m in i)i.hasOwnProperty(m)&&Al(n,m,i[m])}function bl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var id=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ui(n){return rd.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var kn=null;function Ua(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Li=null,ki=null;function Ui(n){var i=Mi(n);if(i&&(n=i.stateNode)){var a=n[xe]||null;t:switch(n=i.stateNode,i.type){case"input":if(Rr(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+me(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[xe]||null;if(!f)throw Error(r(90));Rr(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&Tl(l)}break t;case"textarea":Cs(n,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&jt(n,!!a.multiple,i,!1)}}}var Sl=!1;function Ac(n,i,a){if(Sl)return n(i,a);Sl=!0;try{var l=n(i);return l}finally{if(Sl=!1,(Li!==null||ki!==null)&&(dh(),Li&&(i=Li,n=ki,ki=Li=null,Ui(i),n)))for(i=0;i<n.length;i++)Ui(n[i])}}function Vs(n,i){var a=n.stateNode;if(a===null)return null;var l=a[xe]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break t;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Un=!1;if(wn)try{var xs={};Object.defineProperty(xs,"passive",{get:function(){Un=!0}}),window.addEventListener("test",xs,xs),window.removeEventListener("test",xs,xs)}catch{Un=!1}var ci=null,Cr=null,Bi=null;function wl(){if(Bi)return Bi;var n,i=Cr,a=i.length,l,f="value"in ci?ci.value:ci.textContent,m=f.length;for(n=0;n<a&&i[n]===f[n];n++);var v=a-n;for(l=1;l<=v&&i[a-l]===f[m-l];l++);return Bi=f.slice(n,1<l?1-l:void 0)}function hi(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function fi(){return!0}function Il(){return!1}function Be(n){function i(a,l,f,m,v){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?fi:Il,this.isPropagationStopped=Il,this}return R(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=fi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=fi)},persist:function(){},isPersistent:fi}),i}var Qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ba=Be(Qt),Ns=R({},Qt,{view:0,detail:0}),bc=Be(Ns),za,qa,di,Os=R({},Ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ls,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==di&&(di&&n.type==="mousemove"?(za=n.screenX-di.screenX,qa=n.screenY-di.screenY):qa=za=0,di=n),za)},movementY:function(n){return"movementY"in n?n.movementY:qa}}),Bn=Be(Os),Sc=R({},Os,{dataTransfer:0}),sd=Be(Sc),Ms=R({},Ns,{relatedTarget:0}),ja=Be(Ms),Rl=R({},Qt,{animationName:0,elapsedTime:0,pseudoElement:0}),Fa=Be(Rl),wc=R({},Qt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ga=Be(wc),ad=R({},Qt,{data:0}),Dl=Be(ad),Ps={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ic={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Rc[n])?!!i[n]:!1}function Ls(){return Cl}var Dc=R({},Ns,{key:function(n){if(n.key){var i=Ps[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=hi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ic[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ls,charCode:function(n){return n.type==="keypress"?hi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?hi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ha=Be(Dc),Cc=R({},Os,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vl=Be(Cc),zi=R({},Ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ls}),Vc=Be(zi),xc=R({},Qt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nc=Be(xc),Oc=R({},Os,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ka=Be(Oc),hn=R({},Qt,{newState:0,oldState:0}),Mc=Be(hn),Pc=[9,13,27,32],mi=wn&&"CompositionEvent"in window,c=null;wn&&"documentMode"in document&&(c=document.documentMode);var _=wn&&"TextEvent"in window&&!c,y=wn&&(!mi||c&&8<c&&11>=c),b=" ",U=!1;function K(n,i){switch(n){case"keyup":return Pc.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nt(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var kt=!1;function Ne(n,i){switch(n){case"compositionend":return nt(i);case"keypress":return i.which!==32?null:(U=!0,b);case"textInput":return n=i.data,n===b&&U?null:n;default:return null}}function Ut(n,i){if(kt)return n==="compositionend"||!mi&&K(n,i)?(n=wl(),Bi=Cr=ci=null,kt=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return y&&i.locale!=="ko"?null:i.data;default:return null}}var ze={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oe(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!ze[n.type]:i==="textarea"}function qi(n,i,a,l){Li?ki?ki.push(l):ki=[l]:Li=l,i=yh(i,"onChange"),0<i.length&&(a=new Ba("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var Qe=null,gi=null;function xl(n){zv(n,0)}function Lc(n){var i=br(n);if(Tl(i))return n}function g_(n,i){if(n==="change")return i}var p_=!1;if(wn){var od;if(wn){var ld="oninput"in document;if(!ld){var __=document.createElement("div");__.setAttribute("oninput","return;"),ld=typeof __.oninput=="function"}od=ld}else od=!1;p_=od&&(!document.documentMode||9<document.documentMode)}function y_(){Qe&&(Qe.detachEvent("onpropertychange",v_),gi=Qe=null)}function v_(n){if(n.propertyName==="value"&&Lc(gi)){var i=[];qi(i,gi,n,Ua(n)),Ac(xl,i)}}function IS(n,i,a){n==="focusin"?(y_(),Qe=i,gi=a,Qe.attachEvent("onpropertychange",v_)):n==="focusout"&&y_()}function RS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Lc(gi)}function DS(n,i){if(n==="click")return Lc(i)}function CS(n,i){if(n==="input"||n==="change")return Lc(i)}function VS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var In=typeof Object.is=="function"?Object.is:VS;function Nl(n,i){if(In(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Va.call(i,f)||!In(n[f],i[f]))return!1}return!0}function E_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function T_(n,i){var a=E_(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=E_(a)}}function A_(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?A_(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function b_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=La(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=La(n.document)}return i}function ud(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function xS(n,i){var a=b_(i);i=n.focusedElem;var l=n.selectionRange;if(a!==i&&i&&i.ownerDocument&&A_(i.ownerDocument.documentElement,i)){if(l!==null&&ud(i)){if(n=l.start,a=l.end,a===void 0&&(a=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(a,i.value.length);else if(a=(n=i.ownerDocument||document)&&n.defaultView||window,a.getSelection){a=a.getSelection();var f=i.textContent.length,m=Math.min(l.start,f);l=l.end===void 0?m:Math.min(l.end,f),!a.extend&&m>l&&(f=l,l=m,m=f),f=T_(i,m);var v=T_(i,l);f&&v&&(a.rangeCount!==1||a.anchorNode!==f.node||a.anchorOffset!==f.offset||a.focusNode!==v.node||a.focusOffset!==v.offset)&&(n=n.createRange(),n.setStart(f.node,f.offset),a.removeAllRanges(),m>l?(a.addRange(n),a.extend(v.node,v.offset)):(n.setEnd(v.node,v.offset),a.addRange(n)))}}for(n=[],a=i;a=a.parentNode;)a.nodeType===1&&n.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<n.length;i++)a=n[i],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var NS=wn&&"documentMode"in document&&11>=document.documentMode,Qa=null,cd=null,Ol=null,hd=!1;function S_(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;hd||Qa==null||Qa!==La(l)||(l=Qa,"selectionStart"in l&&ud(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ol&&Nl(Ol,l)||(Ol=l,l=yh(cd,"onSelect"),0<l.length&&(i=new Ba("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=Qa)))}function ks(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Ya={animationend:ks("Animation","AnimationEnd"),animationiteration:ks("Animation","AnimationIteration"),animationstart:ks("Animation","AnimationStart"),transitionrun:ks("Transition","TransitionRun"),transitionstart:ks("Transition","TransitionStart"),transitioncancel:ks("Transition","TransitionCancel"),transitionend:ks("Transition","TransitionEnd")},fd={},w_={};wn&&(w_=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function Us(n){if(fd[n])return fd[n];if(!Ya[n])return n;var i=Ya[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in w_)return fd[n]=i[a];return n}var I_=Us("animationend"),R_=Us("animationiteration"),D_=Us("animationstart"),OS=Us("transitionrun"),MS=Us("transitionstart"),PS=Us("transitioncancel"),C_=Us("transitionend"),V_=new Map,x_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function ti(n,i){V_.set(n,i),Sn(i,[n])}var zn=[],$a=0,dd=0;function kc(){for(var n=$a,i=dd=$a=0;i<n;){var a=zn[i];zn[i++]=null;var l=zn[i];zn[i++]=null;var f=zn[i];zn[i++]=null;var m=zn[i];if(zn[i++]=null,l!==null&&f!==null){var v=l.pending;v===null?f.next=f:(f.next=v.next,v.next=f),l.pending=f}m!==0&&N_(a,f,m)}}function Uc(n,i,a,l){zn[$a++]=n,zn[$a++]=i,zn[$a++]=a,zn[$a++]=l,dd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function md(n,i,a,l){return Uc(n,i,a,l),Bc(n)}function Vr(n,i){return Uc(n,null,null,i),Bc(n)}function N_(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=n.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;f&&i!==null&&n.tag===3&&(m=n.stateNode,f=31-un(a),m=m.hiddenUpdates,n=m[f],n===null?m[f]=[i]:n.push(i),i.lane=a|536870912)}function Bc(n){if(50<ru)throw ru=0,Em=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Xa={},O_=new WeakMap;function qn(n,i){if(typeof n=="object"&&n!==null){var a=O_.get(n);return a!==void 0?a:(i={value:n,source:i,stack:Et(i)},O_.set(n,i),i)}return{value:n,source:i,stack:Et(i)}}var Za=[],Wa=0,zc=null,qc=0,jn=[],Fn=0,Bs=null,ji=1,Fi="";function zs(n,i){Za[Wa++]=qc,Za[Wa++]=zc,zc=n,qc=i}function M_(n,i,a){jn[Fn++]=ji,jn[Fn++]=Fi,jn[Fn++]=Bs,Bs=n;var l=ji;n=Fi;var f=32-un(l)-1;l&=~(1<<f),a+=1;var m=32-un(i)+f;if(30<m){var v=f-f%5;m=(l&(1<<v)-1).toString(32),l>>=v,f-=v,ji=1<<32-un(i)+f|a<<f|l,Fi=m+n}else ji=1<<m|a<<f|l,Fi=n}function gd(n){n.return!==null&&(zs(n,1),M_(n,1,0))}function pd(n){for(;n===zc;)zc=Za[--Wa],Za[Wa]=null,qc=Za[--Wa],Za[Wa]=null;for(;n===Bs;)Bs=jn[--Fn],jn[Fn]=null,Fi=jn[--Fn],jn[Fn]=null,ji=jn[--Fn],jn[Fn]=null}var fn=null,Ye=null,Ft=!1,ei=null,pi=!1,_d=Error(r(519));function qs(n){var i=Error(r(418,""));throw Ll(qn(i,n)),_d}function P_(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[Ue]=n,i[xe]=l,a){case"dialog":Pt("cancel",i),Pt("close",i);break;case"iframe":case"object":case"embed":Pt("load",i);break;case"video":case"audio":for(a=0;a<au.length;a++)Pt(au[a],i);break;case"source":Pt("error",i);break;case"img":case"image":case"link":Pt("error",i),Pt("load",i);break;case"details":Pt("toggle",i);break;case"input":Pt("invalid",i),Ds(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Rs(i);break;case"select":Pt("invalid",i);break;case"textarea":Pt("invalid",i),Dr(i,l.value,l.defaultValue,l.children),Rs(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Gv(i.textContent,a)?(l.popover!=null&&(Pt("beforetoggle",i),Pt("toggle",i)),l.onScroll!=null&&Pt("scroll",i),l.onScrollEnd!=null&&Pt("scrollend",i),l.onClick!=null&&(i.onclick=vh),i=!0):i=!1,i||qs(n)}function L_(n){for(fn=n.return;fn;)switch(fn.tag){case 3:case 27:pi=!0;return;case 5:case 13:pi=!1;return;default:fn=fn.return}}function Ml(n){if(n!==fn)return!1;if(!Ft)return L_(n),Ft=!0,!1;var i=!1,a;if((a=n.tag!==3&&n.tag!==27)&&((a=n.tag===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||km(n.type,n.memoizedProps)),a=!a),a&&(i=!0),i&&Ye&&qs(n),L_(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));t:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(i===0){Ye=ii(n.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;n=n.nextSibling}Ye=null}}else Ye=fn?ii(n.stateNode.nextSibling):null;return!0}function Pl(){Ye=fn=null,Ft=!1}function Ll(n){ei===null?ei=[n]:ei.push(n)}var kl=Error(r(460)),k_=Error(r(474)),yd={then:function(){}};function U_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function jc(){}function B_(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(jc,jc),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,n===kl?Error(r(483)):n;default:if(typeof i.status=="string")i.then(jc,jc);else{if(n=te,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,n===kl?Error(r(483)):n}throw Ul=i,kl}}var Ul=null;function z_(){if(Ul===null)throw Error(r(459));var n=Ul;return Ul=null,n}var Ja=null,Bl=0;function Fc(n){var i=Bl;return Bl+=1,Ja===null&&(Ja=[]),B_(Ja,n,i)}function zl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Gc(n,i){throw i.$$typeof===u?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function q_(n){var i=n._init;return i(n._payload)}function j_(n){function i(k,M){if(n){var z=k.deletions;z===null?(k.deletions=[M],k.flags|=16):z.push(M)}}function a(k,M){if(!n)return null;for(;M!==null;)i(k,M),M=M.sibling;return null}function l(k){for(var M=new Map;k!==null;)k.key!==null?M.set(k.key,k):M.set(k.index,k),k=k.sibling;return M}function f(k,M){return k=jr(k,M),k.index=0,k.sibling=null,k}function m(k,M,z){return k.index=z,n?(z=k.alternate,z!==null?(z=z.index,z<M?(k.flags|=33554434,M):z):(k.flags|=33554434,M)):(k.flags|=1048576,M)}function v(k){return n&&k.alternate===null&&(k.flags|=33554434),k}function A(k,M,z,X){return M===null||M.tag!==6?(M=fm(z,k.mode,X),M.return=k,M):(M=f(M,z),M.return=k,M)}function D(k,M,z,X){var mt=z.type;return mt===g?$(k,M,z.props.children,X,z.key):M!==null&&(M.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===it&&q_(mt)===M.type)?(M=f(M,z.props),zl(M,z),M.return=k,M):(M=lh(z.type,z.key,z.props,null,k.mode,X),zl(M,z),M.return=k,M)}function P(k,M,z,X){return M===null||M.tag!==4||M.stateNode.containerInfo!==z.containerInfo||M.stateNode.implementation!==z.implementation?(M=dm(z,k.mode,X),M.return=k,M):(M=f(M,z.children||[]),M.return=k,M)}function $(k,M,z,X,mt){return M===null||M.tag!==7?(M=Zs(z,k.mode,X,mt),M.return=k,M):(M=f(M,z),M.return=k,M)}function W(k,M,z){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=fm(""+M,k.mode,z),M.return=k,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case h:return z=lh(M.type,M.key,M.props,null,k.mode,z),zl(z,M),z.return=k,z;case d:return M=dm(M,k.mode,z),M.return=k,M;case it:var X=M._init;return M=X(M._payload),W(k,M,z)}if(ut(M)||yt(M))return M=Zs(M,k.mode,z,null),M.return=k,M;if(typeof M.then=="function")return W(k,Fc(M),z);if(M.$$typeof===V)return W(k,sh(k,M),z);Gc(k,M)}return null}function j(k,M,z,X){var mt=M!==null?M.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return mt!==null?null:A(k,M,""+z,X);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case h:return z.key===mt?D(k,M,z,X):null;case d:return z.key===mt?P(k,M,z,X):null;case it:return mt=z._init,z=mt(z._payload),j(k,M,z,X)}if(ut(z)||yt(z))return mt!==null?null:$(k,M,z,X,null);if(typeof z.then=="function")return j(k,M,Fc(z),X);if(z.$$typeof===V)return j(k,M,sh(k,z),X);Gc(k,z)}return null}function Y(k,M,z,X,mt){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return k=k.get(z)||null,A(M,k,""+X,mt);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case h:return k=k.get(X.key===null?z:X.key)||null,D(M,k,X,mt);case d:return k=k.get(X.key===null?z:X.key)||null,P(M,k,X,mt);case it:var xt=X._init;return X=xt(X._payload),Y(k,M,z,X,mt)}if(ut(X)||yt(X))return k=k.get(z)||null,$(M,k,X,mt,null);if(typeof X.then=="function")return Y(k,M,z,Fc(X),mt);if(X.$$typeof===V)return Y(k,M,z,sh(M,X),mt);Gc(M,X)}return null}function pt(k,M,z,X){for(var mt=null,xt=null,vt=M,At=M=0,Fe=null;vt!==null&&At<z.length;At++){vt.index>At?(Fe=vt,vt=null):Fe=vt.sibling;var Gt=j(k,vt,z[At],X);if(Gt===null){vt===null&&(vt=Fe);break}n&&vt&&Gt.alternate===null&&i(k,vt),M=m(Gt,M,At),xt===null?mt=Gt:xt.sibling=Gt,xt=Gt,vt=Fe}if(At===z.length)return a(k,vt),Ft&&zs(k,At),mt;if(vt===null){for(;At<z.length;At++)vt=W(k,z[At],X),vt!==null&&(M=m(vt,M,At),xt===null?mt=vt:xt.sibling=vt,xt=vt);return Ft&&zs(k,At),mt}for(vt=l(vt);At<z.length;At++)Fe=Y(vt,k,At,z[At],X),Fe!==null&&(n&&Fe.alternate!==null&&vt.delete(Fe.key===null?At:Fe.key),M=m(Fe,M,At),xt===null?mt=Fe:xt.sibling=Fe,xt=Fe);return n&&vt.forEach(function($r){return i(k,$r)}),Ft&&zs(k,At),mt}function St(k,M,z,X){if(z==null)throw Error(r(151));for(var mt=null,xt=null,vt=M,At=M=0,Fe=null,Gt=z.next();vt!==null&&!Gt.done;At++,Gt=z.next()){vt.index>At?(Fe=vt,vt=null):Fe=vt.sibling;var $r=j(k,vt,Gt.value,X);if($r===null){vt===null&&(vt=Fe);break}n&&vt&&$r.alternate===null&&i(k,vt),M=m($r,M,At),xt===null?mt=$r:xt.sibling=$r,xt=$r,vt=Fe}if(Gt.done)return a(k,vt),Ft&&zs(k,At),mt;if(vt===null){for(;!Gt.done;At++,Gt=z.next())Gt=W(k,Gt.value,X),Gt!==null&&(M=m(Gt,M,At),xt===null?mt=Gt:xt.sibling=Gt,xt=Gt);return Ft&&zs(k,At),mt}for(vt=l(vt);!Gt.done;At++,Gt=z.next())Gt=Y(vt,k,At,Gt.value,X),Gt!==null&&(n&&Gt.alternate!==null&&vt.delete(Gt.key===null?At:Gt.key),M=m(Gt,M,At),xt===null?mt=Gt:xt.sibling=Gt,xt=Gt);return n&&vt.forEach(function($w){return i(k,$w)}),Ft&&zs(k,At),mt}function _e(k,M,z,X){if(typeof z=="object"&&z!==null&&z.type===g&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case h:t:{for(var mt=z.key;M!==null;){if(M.key===mt){if(mt=z.type,mt===g){if(M.tag===7){a(k,M.sibling),X=f(M,z.props.children),X.return=k,k=X;break t}}else if(M.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===it&&q_(mt)===M.type){a(k,M.sibling),X=f(M,z.props),zl(X,z),X.return=k,k=X;break t}a(k,M);break}else i(k,M);M=M.sibling}z.type===g?(X=Zs(z.props.children,k.mode,X,z.key),X.return=k,k=X):(X=lh(z.type,z.key,z.props,null,k.mode,X),zl(X,z),X.return=k,k=X)}return v(k);case d:t:{for(mt=z.key;M!==null;){if(M.key===mt)if(M.tag===4&&M.stateNode.containerInfo===z.containerInfo&&M.stateNode.implementation===z.implementation){a(k,M.sibling),X=f(M,z.children||[]),X.return=k,k=X;break t}else{a(k,M);break}else i(k,M);M=M.sibling}X=dm(z,k.mode,X),X.return=k,k=X}return v(k);case it:return mt=z._init,z=mt(z._payload),_e(k,M,z,X)}if(ut(z))return pt(k,M,z,X);if(yt(z)){if(mt=yt(z),typeof mt!="function")throw Error(r(150));return z=mt.call(z),St(k,M,z,X)}if(typeof z.then=="function")return _e(k,M,Fc(z),X);if(z.$$typeof===V)return _e(k,M,sh(k,z),X);Gc(k,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,M!==null&&M.tag===6?(a(k,M.sibling),X=f(M,z),X.return=k,k=X):(a(k,M),X=fm(z,k.mode,X),X.return=k,k=X),v(k)):a(k,M)}return function(k,M,z,X){try{Bl=0;var mt=_e(k,M,z,X);return Ja=null,mt}catch(vt){if(vt===kl)throw vt;var xt=Qn(29,vt,null,k.mode);return xt.lanes=X,xt.return=k,xt}finally{}}}var js=j_(!0),F_=j_(!1),to=qt(null),Hc=qt(0);function G_(n,i){n=tr,Yt(Hc,n),Yt(to,i),tr=n|i.baseLanes}function vd(){Yt(Hc,tr),Yt(to,to.current)}function Ed(){tr=Hc.current,de(to),de(Hc)}var Gn=qt(null),_i=null;function xr(n){var i=n.alternate;Yt(Me,Me.current&1),Yt(Gn,n),_i===null&&(i===null||to.current!==null||i.memoizedState!==null)&&(_i=n)}function H_(n){if(n.tag===22){if(Yt(Me,Me.current),Yt(Gn,n),_i===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(_i=n)}}else Nr()}function Nr(){Yt(Me,Me.current),Yt(Gn,Gn.current)}function Gi(n){de(Gn),_i===n&&(_i=null),de(Me)}var Me=qt(0);function Kc(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var LS=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},kS=s.unstable_scheduleCallback,US=s.unstable_NormalPriority,Pe={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Td(){return{controller:new LS,data:new Map,refCount:0}}function ql(n){n.refCount--,n.refCount===0&&kS(US,function(){n.controller.abort()})}var jl=null,Ad=0,eo=0,no=null;function BS(n,i){if(jl===null){var a=jl=[];Ad=0,eo=Dm(),no={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ad++,i.then(K_,K_),i}function K_(){if(--Ad===0&&jl!==null){no!==null&&(no.status="fulfilled");var n=jl;jl=null,eo=0,no=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function zS(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Q_=w.S;w.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&BS(n,i),Q_!==null&&Q_(n,i)};var Fs=qt(null);function bd(){var n=Fs.current;return n!==null?n:te.pooledCache}function Qc(n,i){i===null?Yt(Fs,Fs.current):Yt(Fs,i.pool)}function Y_(){var n=bd();return n===null?null:{parent:Pe._currentValue,pool:n}}var Or=0,Vt=null,Zt=null,we=null,Yc=!1,io=!1,Gs=!1,$c=0,Fl=0,ro=null,qS=0;function Ee(){throw Error(r(321))}function Sd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!In(n[a],i[a]))return!1;return!0}function wd(n,i,a,l,f,m){return Or=m,Vt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,w.H=n===null||n.memoizedState===null?Hs:Mr,Gs=!1,m=a(l,f),Gs=!1,io&&(m=X_(i,a,l,f)),$_(n),m}function $_(n){w.H=yi;var i=Zt!==null&&Zt.next!==null;if(Or=0,we=Zt=Vt=null,Yc=!1,Fl=0,ro=null,i)throw Error(r(300));n===null||qe||(n=n.dependencies,n!==null&&rh(n)&&(qe=!0))}function X_(n,i,a,l){Vt=n;var f=0;do{if(io&&(ro=null),Fl=0,io=!1,25<=f)throw Error(r(301));if(f+=1,we=Zt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}w.H=Ks,m=i(a,l)}while(io);return m}function jS(){var n=w.H,i=n.useState()[0];return i=typeof i.then=="function"?Gl(i):i,n=n.useState()[0],(Zt!==null?Zt.memoizedState:null)!==n&&(Vt.flags|=1024),i}function Id(){var n=$c!==0;return $c=0,n}function Rd(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function Dd(n){if(Yc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Yc=!1}Or=0,we=Zt=Vt=null,io=!1,Fl=$c=0,ro=null}function En(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?Vt.memoizedState=we=n:we=we.next=n,we}function Ie(){if(Zt===null){var n=Vt.alternate;n=n!==null?n.memoizedState:null}else n=Zt.next;var i=we===null?Vt.memoizedState:we.next;if(i!==null)we=i,Zt=n;else{if(n===null)throw Vt.alternate===null?Error(r(467)):Error(r(310));Zt=n,n={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},we===null?Vt.memoizedState=we=n:we=we.next=n}return we}var Xc;Xc=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Gl(n){var i=Fl;return Fl+=1,ro===null&&(ro=[]),n=B_(ro,n,i),i=Vt,(we===null?i.memoizedState:we.next)===null&&(i=i.alternate,w.H=i===null||i.memoizedState===null?Hs:Mr),n}function Zc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Gl(n);if(n.$$typeof===V)return en(n)}throw Error(r(438,String(n)))}function Cd(n){var i=null,a=Vt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Vt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Xc(),Vt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=Tt;return i.index++,a}function Hi(n,i){return typeof i=="function"?i(n):i}function Wc(n){var i=Ie();return Vd(i,Zt,n)}function Vd(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,m=l.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}i.baseQueue=f=m,l.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{i=f.next;var A=v=null,D=null,P=i,$=!1;do{var W=P.lane&-536870913;if(W!==P.lane?(Bt&W)===W:(Or&W)===W){var j=P.revertLane;if(j===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),W===eo&&($=!0);else if((Or&j)===j){P=P.next,j===eo&&($=!0);continue}else W={lane:0,revertLane:P.revertLane,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},D===null?(A=D=W,v=m):D=D.next=W,Vt.lanes|=j,Fr|=j;W=P.action,Gs&&a(m,W),m=P.hasEagerState?P.eagerState:a(m,W)}else j={lane:W,revertLane:P.revertLane,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},D===null?(A=D=j,v=m):D=D.next=j,Vt.lanes|=W,Fr|=W;P=P.next}while(P!==null&&P!==i);if(D===null?v=m:D.next=A,!In(m,n.memoizedState)&&(qe=!0,$&&(a=no,a!==null)))throw a;n.memoizedState=m,n.baseState=v,n.baseQueue=D,l.lastRenderedState=m}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function xd(n){var i=Ie(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,m=i.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do m=n(m,v.action),v=v.next;while(v!==f);In(m,i.memoizedState)||(qe=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,l]}function Z_(n,i,a){var l=Vt,f=Ie(),m=Ft;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=i();var v=!In((Zt||f).memoizedState,a);if(v&&(f.memoizedState=a,qe=!0),f=f.queue,Md(ty.bind(null,l,f,n),[n]),f.getSnapshot!==i||v||we!==null&&we.memoizedState.tag&1){if(l.flags|=2048,so(9,J_.bind(null,l,f,a,i),{destroy:void 0},null),te===null)throw Error(r(349));m||Or&60||W_(l,i,a)}return a}function W_(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Vt.updateQueue,i===null?(i=Xc(),Vt.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function J_(n,i,a,l){i.value=a,i.getSnapshot=l,ey(i)&&ny(n)}function ty(n,i,a){return a(function(){ey(i)&&ny(n)})}function ey(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!In(n,a)}catch{return!0}}function ny(n){var i=Vr(n,2);i!==null&&dn(i,n,2)}function Nd(n){var i=En();if(typeof n=="function"){var a=n;if(n=a(),Gs){si(!0);try{a()}finally{si(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:n},i}function iy(n,i,a,l){return n.baseState=a,Vd(n,Zt,typeof l=="function"?l:Hi)}function FS(n,i,a,l,f){if(eh(n))throw Error(r(485));if(n=i.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};w.T!==null?a(!0):m.isTransition=!1,l(m),a=i.pending,a===null?(m.next=i.pending=m,ry(i,m)):(m.next=a.next,i.pending=a.next=m)}}function ry(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var m=w.T,v={};w.T=v;try{var A=a(f,l),D=w.S;D!==null&&D(v,A),sy(n,i,A)}catch(P){Od(n,i,P)}finally{w.T=m}}else try{m=a(f,l),sy(n,i,m)}catch(P){Od(n,i,P)}}function sy(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){ay(n,i,l)},function(l){return Od(n,i,l)}):ay(n,i,a)}function ay(n,i,a){i.status="fulfilled",i.value=a,oy(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,ry(n,a)))}function Od(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,oy(i),i=i.next;while(i!==l)}n.action=null}function oy(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function ly(n,i){return i}function uy(n,i){if(Ft){var a=te.formState;if(a!==null){t:{var l=Vt;if(Ft){if(Ye){e:{for(var f=Ye,m=pi;f.nodeType!==8;){if(!m){f=null;break e}if(f=ii(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ye=ii(f.nextSibling),l=f.data==="F!";break t}}qs(l)}l=!1}l&&(i=a[0])}}return a=En(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ly,lastRenderedState:i},a.queue=l,a=Ry.bind(null,Vt,l),l.dispatch=a,l=Nd(!1),m=Bd.bind(null,Vt,!1,l.queue),l=En(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=FS.bind(null,Vt,f,m,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function cy(n){var i=Ie();return hy(i,Zt,n)}function hy(n,i,a){i=Vd(n,i,ly)[0],n=Wc(Hi)[0],i=typeof i=="object"&&i!==null&&typeof i.then=="function"?Gl(i):i;var l=Ie(),f=l.queue,m=f.dispatch;return a!==l.memoizedState&&(Vt.flags|=2048,so(9,GS.bind(null,f,a),{destroy:void 0},null)),[i,m,n]}function GS(n,i){n.action=i}function fy(n){var i=Ie(),a=Zt;if(a!==null)return hy(i,a,n);Ie(),i=i.memoizedState,a=Ie();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function so(n,i,a,l){return n={tag:n,create:i,inst:a,deps:l,next:null},i=Vt.updateQueue,i===null&&(i=Xc(),Vt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function dy(){return Ie().memoizedState}function Jc(n,i,a,l){var f=En();Vt.flags|=n,f.memoizedState=so(1|i,a,{destroy:void 0},l===void 0?null:l)}function th(n,i,a,l){var f=Ie();l=l===void 0?null:l;var m=f.memoizedState.inst;Zt!==null&&l!==null&&Sd(l,Zt.memoizedState.deps)?f.memoizedState=so(i,a,m,l):(Vt.flags|=n,f.memoizedState=so(1|i,a,m,l))}function my(n,i){Jc(8390656,8,n,i)}function Md(n,i){th(2048,8,n,i)}function gy(n,i){return th(4,2,n,i)}function py(n,i){return th(4,4,n,i)}function _y(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function yy(n,i,a){a=a!=null?a.concat([n]):null,th(4,4,_y.bind(null,i,n),a)}function Pd(){}function vy(n,i){var a=Ie();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Sd(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function Ey(n,i){var a=Ie();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Sd(i,l[1]))return l[0];if(l=n(),Gs){si(!0);try{n()}finally{si(!1)}}return a.memoizedState=[l,i],l}function Ld(n,i,a){return a===void 0||Or&1073741824?n.memoizedState=i:(n.memoizedState=a,n=Av(),Vt.lanes|=n,Fr|=n,a)}function Ty(n,i,a,l){return In(a,i)?a:to.current!==null?(n=Ld(n,a,l),In(n,i)||(qe=!0),n):Or&42?(n=Av(),Vt.lanes|=n,Fr|=n,i):(qe=!0,n.memoizedState=a)}function Ay(n,i,a,l,f){var m=ct.p;ct.p=m!==0&&8>m?m:8;var v=w.T,A={};w.T=A,Bd(n,!1,i,a);try{var D=f(),P=w.S;if(P!==null&&P(A,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var $=zS(D,l);Hl(n,i,$,Vn(n))}else Hl(n,i,l,Vn(n))}catch(W){Hl(n,i,{then:function(){},status:"rejected",reason:W},Vn())}finally{ct.p=m,w.T=v}}function HS(){}function kd(n,i,a,l){if(n.tag!==5)throw Error(r(476));var f=by(n).queue;Ay(n,f,i,It,a===null?HS:function(){return Sy(n),a(l)})}function by(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:It,baseState:It,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:It},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Sy(n){var i=by(n).next.queue;Hl(n,i,{},Vn())}function Ud(){return en(hu)}function wy(){return Ie().memoizedState}function Iy(){return Ie().memoizedState}function KS(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=Vn();n=kr(a);var l=Ur(i,n,a);l!==null&&(dn(l,i,a),Yl(l,i,a)),i={cache:Td()},n.payload=i;return}i=i.return}}function QS(n,i,a){var l=Vn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},eh(n)?Dy(i,a):(a=md(n,i,a,l),a!==null&&(dn(a,n,l),Cy(a,i,l)))}function Ry(n,i,a){var l=Vn();Hl(n,i,a,l)}function Hl(n,i,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(eh(n))Dy(i,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var v=i.lastRenderedState,A=m(v,a);if(f.hasEagerState=!0,f.eagerState=A,In(A,v))return Uc(n,i,f,0),te===null&&kc(),!1}catch{}finally{}if(a=md(n,i,f,l),a!==null)return dn(a,n,l),Cy(a,i,l),!0}return!1}function Bd(n,i,a,l){if(l={lane:2,revertLane:Dm(),action:l,hasEagerState:!1,eagerState:null,next:null},eh(n)){if(i)throw Error(r(479))}else i=md(n,a,l,2),i!==null&&dn(i,n,2)}function eh(n){var i=n.alternate;return n===Vt||i!==null&&i===Vt}function Dy(n,i){io=Yc=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Cy(n,i,a){if(a&4194176){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,Er(n,a)}}var yi={readContext:en,use:Zc,useCallback:Ee,useContext:Ee,useEffect:Ee,useImperativeHandle:Ee,useLayoutEffect:Ee,useInsertionEffect:Ee,useMemo:Ee,useReducer:Ee,useRef:Ee,useState:Ee,useDebugValue:Ee,useDeferredValue:Ee,useTransition:Ee,useSyncExternalStore:Ee,useId:Ee};yi.useCacheRefresh=Ee,yi.useMemoCache=Ee,yi.useHostTransitionStatus=Ee,yi.useFormState=Ee,yi.useActionState=Ee,yi.useOptimistic=Ee;var Hs={readContext:en,use:Zc,useCallback:function(n,i){return En().memoizedState=[n,i===void 0?null:i],n},useContext:en,useEffect:my,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,Jc(4194308,4,_y.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Jc(4194308,4,n,i)},useInsertionEffect:function(n,i){Jc(4,2,n,i)},useMemo:function(n,i){var a=En();i=i===void 0?null:i;var l=n();if(Gs){si(!0);try{n()}finally{si(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=En();if(a!==void 0){var f=a(i);if(Gs){si(!0);try{a(i)}finally{si(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=QS.bind(null,Vt,n),[l.memoizedState,n]},useRef:function(n){var i=En();return n={current:n},i.memoizedState=n},useState:function(n){n=Nd(n);var i=n.queue,a=Ry.bind(null,Vt,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:Pd,useDeferredValue:function(n,i){var a=En();return Ld(a,n,i)},useTransition:function(){var n=Nd(!1);return n=Ay.bind(null,Vt,n.queue,!0,!1),En().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=Vt,f=En();if(Ft){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),te===null)throw Error(r(349));Bt&60||W_(l,i,a)}f.memoizedState=a;var m={value:a,getSnapshot:i};return f.queue=m,my(ty.bind(null,l,m,n),[n]),l.flags|=2048,so(9,J_.bind(null,l,m,a,i),{destroy:void 0},null),a},useId:function(){var n=En(),i=te.identifierPrefix;if(Ft){var a=Fi,l=ji;a=(l&~(1<<32-un(l)-1)).toString(32)+a,i=":"+i+"R"+a,a=$c++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=qS++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},useCacheRefresh:function(){return En().memoizedState=KS.bind(null,Vt)}};Hs.useMemoCache=Cd,Hs.useHostTransitionStatus=Ud,Hs.useFormState=uy,Hs.useActionState=uy,Hs.useOptimistic=function(n){var i=En();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Bd.bind(null,Vt,!0,a),a.dispatch=i,[n,i]};var Mr={readContext:en,use:Zc,useCallback:vy,useContext:en,useEffect:Md,useImperativeHandle:yy,useInsertionEffect:gy,useLayoutEffect:py,useMemo:Ey,useReducer:Wc,useRef:dy,useState:function(){return Wc(Hi)},useDebugValue:Pd,useDeferredValue:function(n,i){var a=Ie();return Ty(a,Zt.memoizedState,n,i)},useTransition:function(){var n=Wc(Hi)[0],i=Ie().memoizedState;return[typeof n=="boolean"?n:Gl(n),i]},useSyncExternalStore:Z_,useId:wy};Mr.useCacheRefresh=Iy,Mr.useMemoCache=Cd,Mr.useHostTransitionStatus=Ud,Mr.useFormState=cy,Mr.useActionState=cy,Mr.useOptimistic=function(n,i){var a=Ie();return iy(a,Zt,n,i)};var Ks={readContext:en,use:Zc,useCallback:vy,useContext:en,useEffect:Md,useImperativeHandle:yy,useInsertionEffect:gy,useLayoutEffect:py,useMemo:Ey,useReducer:xd,useRef:dy,useState:function(){return xd(Hi)},useDebugValue:Pd,useDeferredValue:function(n,i){var a=Ie();return Zt===null?Ld(a,n,i):Ty(a,Zt.memoizedState,n,i)},useTransition:function(){var n=xd(Hi)[0],i=Ie().memoizedState;return[typeof n=="boolean"?n:Gl(n),i]},useSyncExternalStore:Z_,useId:wy};Ks.useCacheRefresh=Iy,Ks.useMemoCache=Cd,Ks.useHostTransitionStatus=Ud,Ks.useFormState=fy,Ks.useActionState=fy,Ks.useOptimistic=function(n,i){var a=Ie();return Zt!==null?iy(a,Zt,n,i):(a.baseState=n,[n,a.queue.dispatch])};function zd(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:R({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var qd={isMounted:function(n){return(n=n._reactInternals)?et(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var l=Vn(),f=kr(l);f.payload=i,a!=null&&(f.callback=a),i=Ur(n,f,l),i!==null&&(dn(i,n,l),Yl(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=Vn(),f=kr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Ur(n,f,l),i!==null&&(dn(i,n,l),Yl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Vn(),l=kr(a);l.tag=2,i!=null&&(l.callback=i),i=Ur(n,l,a),i!==null&&(dn(i,n,a),Yl(i,n,a))}};function Vy(n,i,a,l,f,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,m,v):i.prototype&&i.prototype.isPureReactComponent?!Nl(a,l)||!Nl(f,m):!0}function xy(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&qd.enqueueReplaceState(i,i.state,null)}function Qs(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=R({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}var nh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Ny(n){nh(n)}function Oy(n){console.error(n)}function My(n){nh(n)}function ih(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Py(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function jd(n,i,a){return a=kr(a),a.tag=3,a.payload={element:null},a.callback=function(){ih(n,i)},a}function Ly(n){return n=kr(n),n.tag=3,n}function ky(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;n.payload=function(){return f(m)},n.callback=function(){Py(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){Py(i,a,l),typeof f!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function YS(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ql(i,a,f,!0),a=Gn.current,a!==null){switch(a.tag){case 13:return _i===null?bm():a.alternate===null&&pe===0&&(pe=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===yd?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),wm(n,l,f)),!1;case 22:return a.flags|=65536,l===yd?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),wm(n,l,f)),!1}throw Error(r(435,a.tag))}return wm(n,l,f),bm(),!1}if(Ft)return i=Gn.current,i!==null?(!(i.flags&65536)&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==_d&&(n=Error(r(422),{cause:l}),Ll(qn(n,a)))):(l!==_d&&(i=Error(r(423),{cause:l}),Ll(qn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=qn(l,a),f=jd(n.stateNode,l,f),im(n,f),pe!==4&&(pe=2)),!1;var m=Error(r(520),{cause:l});if(m=qn(m,a),nu===null?nu=[m]:nu.push(m),pe!==4&&(pe=2),i===null)return!0;l=qn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=jd(a.stateNode,l,n),im(a,n),!1;case 1:if(i=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Gr===null||!Gr.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Ly(f),ky(f,n,a,l),im(a,f),!1}a=a.return}while(a!==null);return!1}var Uy=Error(r(461)),qe=!1;function $e(n,i,a,l){i.child=n===null?F_(i,null,a,l):js(i,n.child,a,l)}function By(n,i,a,l,f){a=a.render;var m=i.ref;if("ref"in l){var v={};for(var A in l)A!=="ref"&&(v[A]=l[A])}else v=l;return $s(i),l=wd(n,i,a,v,m,f),A=Id(),n!==null&&!qe?(Rd(n,i,f),Ki(n,i,f)):(Ft&&A&&gd(i),i.flags|=1,$e(n,i,l,f),i.child)}function zy(n,i,a,l,f){if(n===null){var m=a.type;return typeof m=="function"&&!hm(m)&&m.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=m,qy(n,i,m,l,f)):(n=lh(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,!Zd(n,f)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:Nl,a(v,l)&&n.ref===i.ref)return Ki(n,i,f)}return i.flags|=1,n=jr(m,l),n.ref=i.ref,n.return=i,i.child=n}function qy(n,i,a,l,f){if(n!==null){var m=n.memoizedProps;if(Nl(m,l)&&n.ref===i.ref)if(qe=!1,i.pendingProps=l=m,Zd(n,f))n.flags&131072&&(qe=!0);else return i.lanes=n.lanes,Ki(n,i,f)}return Fd(n,i,a,l,f)}function jy(n,i,a){var l=i.pendingProps,f=l.children,m=(i.stateNode._pendingVisibility&2)!==0,v=n!==null?n.memoizedState:null;if(Kl(n,i),l.mode==="hidden"||m){if(i.flags&128){if(l=v!==null?v.baseLanes|a:a,n!==null){for(f=i.child=n.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;i.childLanes=m&~l}else i.childLanes=0,i.child=null;return Fy(n,i,l,a)}if(a&536870912)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Qc(i,v!==null?v.cachePool:null),v!==null?G_(i,v):vd(),H_(i);else return i.lanes=i.childLanes=536870912,Fy(n,i,v!==null?v.baseLanes|a:a,a)}else v!==null?(Qc(i,v.cachePool),G_(i,v),Nr(),i.memoizedState=null):(n!==null&&Qc(i,null),vd(),Nr());return $e(n,i,f,a),i.child}function Fy(n,i,a,l){var f=bd();return f=f===null?null:{parent:Pe._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},n!==null&&Qc(i,null),vd(),H_(i),n!==null&&Ql(n,i,l,!0),null}function Kl(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=2097664);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=2097664)}}function Fd(n,i,a,l,f){return $s(i),a=wd(n,i,a,l,void 0,f),l=Id(),n!==null&&!qe?(Rd(n,i,f),Ki(n,i,f)):(Ft&&l&&gd(i),i.flags|=1,$e(n,i,a,f),i.child)}function Gy(n,i,a,l,f,m){return $s(i),i.updateQueue=null,a=X_(i,l,a,f),$_(n),l=Id(),n!==null&&!qe?(Rd(n,i,m),Ki(n,i,m)):(Ft&&l&&gd(i),i.flags|=1,$e(n,i,a,m),i.child)}function Hy(n,i,a,l,f){if($s(i),i.stateNode===null){var m=Xa,v=a.contextType;typeof v=="object"&&v!==null&&(m=en(v)),m=new a(l,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=qd,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=l,m.state=i.memoizedState,m.refs={},em(i),v=a.contextType,m.context=typeof v=="object"&&v!==null?en(v):Xa,m.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(zd(i,a,v,l),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&qd.enqueueReplaceState(m,m.state,null),Xl(i,l,m,f),$l(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){m=i.stateNode;var A=i.memoizedProps,D=Qs(a,A);m.props=D;var P=m.context,$=a.contextType;v=Xa,typeof $=="object"&&$!==null&&(v=en($));var W=a.getDerivedStateFromProps;$=typeof W=="function"||typeof m.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,$||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A||P!==v)&&xy(i,m,l,v),Lr=!1;var j=i.memoizedState;m.state=j,Xl(i,l,m,f),$l(),P=i.memoizedState,A||j!==P||Lr?(typeof W=="function"&&(zd(i,a,W,l),P=i.memoizedState),(D=Lr||Vy(i,a,D,l,j,P,v))?($||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=P),m.props=l,m.state=P,m.context=v,l=D):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{m=i.stateNode,nm(n,i),v=i.memoizedProps,$=Qs(a,v),m.props=$,W=i.pendingProps,j=m.context,P=a.contextType,D=Xa,typeof P=="object"&&P!==null&&(D=en(P)),A=a.getDerivedStateFromProps,(P=typeof A=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==W||j!==D)&&xy(i,m,l,D),Lr=!1,j=i.memoizedState,m.state=j,Xl(i,l,m,f),$l();var Y=i.memoizedState;v!==W||j!==Y||Lr||n!==null&&n.dependencies!==null&&rh(n.dependencies)?(typeof A=="function"&&(zd(i,a,A,l),Y=i.memoizedState),($=Lr||Vy(i,a,$,l,j,Y,D)||n!==null&&n.dependencies!==null&&rh(n.dependencies))?(P||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,Y,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,Y,D)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&j===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&j===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=Y),m.props=l,m.state=Y,m.context=D,l=$):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&j===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&j===n.memoizedState||(i.flags|=1024),l=!1)}return m=l,Kl(n,i),l=(i.flags&128)!==0,m||l?(m=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,n!==null&&l?(i.child=js(i,n.child,null,f),i.child=js(i,null,a,f)):$e(n,i,a,f),i.memoizedState=m.state,n=i.child):n=Ki(n,i,f),n}function Ky(n,i,a,l){return Pl(),i.flags|=256,$e(n,i,a,l),i.child}var Gd={dehydrated:null,treeContext:null,retryLane:0};function Hd(n){return{baseLanes:n,cachePool:Y_()}}function Kd(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Yn),n}function Qy(n,i,a){var l=i.pendingProps,f=!1,m=(i.flags&128)!==0,v;if((v=m)||(v=n!==null&&n.memoizedState===null?!1:(Me.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,n===null){if(Ft){if(f?xr(i):Nr(),Ft){var A=Ye,D;if(D=A){t:{for(D=A,A=pi;D.nodeType!==8;){if(!A){A=null;break t}if(D=ii(D.nextSibling),D===null){A=null;break t}}A=D}A!==null?(i.memoizedState={dehydrated:A,treeContext:Bs!==null?{id:ji,overflow:Fi}:null,retryLane:536870912},D=Qn(18,null,null,0),D.stateNode=A,D.return=i,i.child=D,fn=i,Ye=null,D=!0):D=!1}D||qs(i)}if(A=i.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return A.data==="$!"?i.lanes=16:i.lanes=536870912,null;Gi(i)}return A=l.children,l=l.fallback,f?(Nr(),f=i.mode,A=Yd({mode:"hidden",children:A},f),l=Zs(l,f,a,null),A.return=i,l.return=i,A.sibling=l,i.child=A,f=i.child,f.memoizedState=Hd(a),f.childLanes=Kd(n,v,a),i.memoizedState=Gd,l):(xr(i),Qd(i,A))}if(D=n.memoizedState,D!==null&&(A=D.dehydrated,A!==null)){if(m)i.flags&256?(xr(i),i.flags&=-257,i=$d(n,i,a)):i.memoizedState!==null?(Nr(),i.child=n.child,i.flags|=128,i=null):(Nr(),f=l.fallback,A=i.mode,l=Yd({mode:"visible",children:l.children},A),f=Zs(f,A,a,null),f.flags|=2,l.return=i,f.return=i,l.sibling=f,i.child=l,js(i,n.child,null,a),l=i.child,l.memoizedState=Hd(a),l.childLanes=Kd(n,v,a),i.memoizedState=Gd,i=f);else if(xr(i),A.data==="$!"){if(v=A.nextSibling&&A.nextSibling.dataset,v)var P=v.dgst;v=P,l=Error(r(419)),l.stack="",l.digest=v,Ll({value:l,source:null,stack:null}),i=$d(n,i,a)}else if(qe||Ql(n,i,a,!1),v=(a&n.childLanes)!==0,qe||v){if(v=te,v!==null){if(l=a&-a,l&42)l=1;else switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=64;break;case 268435456:l=134217728;break;default:l=0}if(l=l&(v.suspendedLanes|a)?0:l,l!==0&&l!==D.retryLane)throw D.retryLane=l,Vr(n,l),dn(v,n,l),Uy}A.data==="$?"||bm(),i=$d(n,i,a)}else A.data==="$?"?(i.flags|=128,i.child=n.child,i=uw.bind(null,n),A._reactRetry=i,i=null):(n=D.treeContext,Ye=ii(A.nextSibling),fn=i,Ft=!0,ei=null,pi=!1,n!==null&&(jn[Fn++]=ji,jn[Fn++]=Fi,jn[Fn++]=Bs,ji=n.id,Fi=n.overflow,Bs=i),i=Qd(i,l.children),i.flags|=4096);return i}return f?(Nr(),f=l.fallback,A=i.mode,D=n.child,P=D.sibling,l=jr(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&31457280,P!==null?f=jr(P,f):(f=Zs(f,A,a,null),f.flags|=2),f.return=i,l.return=i,l.sibling=f,i.child=l,l=f,f=i.child,A=n.child.memoizedState,A===null?A=Hd(a):(D=A.cachePool,D!==null?(P=Pe._currentValue,D=D.parent!==P?{parent:P,pool:P}:D):D=Y_(),A={baseLanes:A.baseLanes|a,cachePool:D}),f.memoizedState=A,f.childLanes=Kd(n,v,a),i.memoizedState=Gd,l):(xr(i),a=n.child,n=a.sibling,a=jr(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(v=i.deletions,v===null?(i.deletions=[n],i.flags|=16):v.push(n)),i.child=a,i.memoizedState=null,a)}function Qd(n,i){return i=Yd({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Yd(n,i){return vv(n,i,0,null)}function $d(n,i,a){return js(i,n.child,null,a),n=Qd(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Yy(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),Jd(n.return,i,a)}function Xd(n,i,a,l,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=a,m.tailMode=f)}function $y(n,i,a){var l=i.pendingProps,f=l.revealOrder,m=l.tail;if($e(n,i,l.children,a),l=Me.current,l&2)l=l&1|2,i.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Yy(n,a,i);else if(n.tag===19)Yy(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(Yt(Me,l),f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&Kc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Xd(i,!1,f,a,m);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Kc(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Xd(i,!0,a,null,m);break;case"together":Xd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ki(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Fr|=i.lanes,!(a&i.childLanes))if(n!==null){if(Ql(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=jr(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=jr(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Zd(n,i){return n.lanes&i?!0:(n=n.dependencies,!!(n!==null&&rh(n)))}function $S(n,i,a){switch(i.tag){case 3:mr(i,i.stateNode.containerInfo),Pr(i,Pe,n.memoizedState.cache),Pl();break;case 27:case 5:hl(i);break;case 4:mr(i,i.stateNode.containerInfo);break;case 10:Pr(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(xr(i),i.flags|=128,null):a&i.child.childLanes?Qy(n,i,a):(xr(i),n=Ki(n,i,a),n!==null?n.sibling:null);xr(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ql(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return $y(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Yt(Me,Me.current),l)break;return null;case 22:case 23:return i.lanes=0,jy(n,i,a);case 24:Pr(i,Pe,n.memoizedState.cache)}return Ki(n,i,a)}function Xy(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)qe=!0;else{if(!Zd(n,a)&&!(i.flags&128))return qe=!1,$S(n,i,a);qe=!!(n.flags&131072)}else qe=!1,Ft&&i.flags&1048576&&M_(i,qc,i.index);switch(i.lanes=0,i.tag){case 16:t:{n=i.pendingProps;var l=i.elementType,f=l._init;if(l=f(l._payload),i.type=l,typeof l=="function")hm(l)?(n=Qs(l,n),i.tag=1,i=Hy(null,i,l,n,a)):(i.tag=0,i=Fd(null,i,l,n,a));else{if(l!=null){if(f=l.$$typeof,f===G){i.tag=11,i=By(null,i,l,n,a);break t}else if(f===dt){i.tag=14,i=zy(null,i,l,n,a);break t}}throw i=I(l)||l,Error(r(306,i,""))}}return i;case 0:return Fd(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Qs(l,i.pendingProps),Hy(n,i,l,f,a);case 3:t:{if(mr(i,i.stateNode.containerInfo),n===null)throw Error(r(387));var m=i.pendingProps;f=i.memoizedState,l=f.element,nm(n,i),Xl(i,m,null,a);var v=i.memoizedState;if(m=v.cache,Pr(i,Pe,m),m!==f.cache&&tm(i,[Pe],a,!0),$l(),m=v.element,f.isDehydrated)if(f={element:m,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=Ky(n,i,m,a);break t}else if(m!==l){l=qn(Error(r(424)),i),Ll(l),i=Ky(n,i,m,a);break t}else for(Ye=ii(i.stateNode.containerInfo.firstChild),fn=i,Ft=!0,ei=null,pi=!0,a=F_(i,null,m,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Pl(),m===l){i=Ki(n,i,a);break t}$e(n,i,m,a)}i=i.child}return i;case 26:return Kl(n,i),n===null?(a=Jv(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ft||(a=i.type,n=i.pendingProps,l=Eh(On.current).createElement(a),l[Ue]=i,l[xe]=n,Xe(l,a,n),ue(l),i.stateNode=l):i.memoizedState=Jv(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return hl(i),n===null&&Ft&&(l=i.stateNode=Xv(i.type,i.pendingProps,On.current),fn=i,pi=!0,Ye=ii(l.firstChild)),l=i.pendingProps.children,n!==null||Ft?$e(n,i,l,a):i.child=js(i,null,l,a),Kl(n,i),i.child;case 5:return n===null&&Ft&&((f=l=Ye)&&(l=ww(l,i.type,i.pendingProps,pi),l!==null?(i.stateNode=l,fn=i,Ye=ii(l.firstChild),pi=!1,f=!0):f=!1),f||qs(i)),hl(i),f=i.type,m=i.pendingProps,v=n!==null?n.memoizedProps:null,l=m.children,km(f,m)?l=null:v!==null&&km(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=wd(n,i,jS,null,null,a),hu._currentValue=f),Kl(n,i),$e(n,i,l,a),i.child;case 6:return n===null&&Ft&&((n=a=Ye)&&(a=Iw(a,i.pendingProps,pi),a!==null?(i.stateNode=a,fn=i,Ye=null,n=!0):n=!1),n||qs(i)),null;case 13:return Qy(n,i,a);case 4:return mr(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=js(i,null,l,a):$e(n,i,l,a),i.child;case 11:return By(n,i,i.type,i.pendingProps,a);case 7:return $e(n,i,i.pendingProps,a),i.child;case 8:return $e(n,i,i.pendingProps.children,a),i.child;case 12:return $e(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Pr(i,i.type,l.value),$e(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,$s(i),f=en(f),l=l(f),i.flags|=1,$e(n,i,l,a),i.child;case 14:return zy(n,i,i.type,i.pendingProps,a);case 15:return qy(n,i,i.type,i.pendingProps,a);case 19:return $y(n,i,a);case 22:return jy(n,i,a);case 24:return $s(i),l=en(Pe),n===null?(f=bd(),f===null&&(f=te,m=Td(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),i.memoizedState={parent:l,cache:f},em(i),Pr(i,Pe,f)):(n.lanes&a&&(nm(n,i),Xl(i,null,null,a),$l()),f=n.memoizedState,m=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Pr(i,Pe,l)):(l=m.cache,Pr(i,Pe,l),l!==f.cache&&tm(i,[Pe],a,!0))),$e(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}var Wd=qt(null),Ys=null,Qi=null;function Pr(n,i,a){Yt(Wd,i._currentValue),i._currentValue=a}function Yi(n){n._currentValue=Wd.current,de(Wd)}function Jd(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function tm(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;t:for(;m!==null;){var A=m;m=f;for(var D=0;D<i.length;D++)if(A.context===i[D]){m.lanes|=a,A=m.alternate,A!==null&&(A.lanes|=a),Jd(m.return,a,n),l||(v=null);break t}m=A.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(r(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),Jd(v,a,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Ql(n,i,a,l){n=null;for(var f=i,m=!1;f!==null;){if(!m){if(f.flags&524288)m=!0;else if(f.flags&262144)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var A=f.type;In(f.pendingProps.value,v.value)||(n!==null?n.push(A):n=[A])}}else if(f===dr.current){if(v=f.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(hu):n=[hu])}f=f.return}n!==null&&tm(i,n,a,l),i.flags|=262144}function rh(n){for(n=n.firstContext;n!==null;){if(!In(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function $s(n){Ys=n,Qi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function en(n){return Zy(Ys,n)}function sh(n,i){return Ys===null&&$s(n),Zy(n,i)}function Zy(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Qi===null){if(n===null)throw Error(r(308));Qi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Qi=Qi.next=i;return a}var Lr=!1;function em(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function kr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ur(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,he&2){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Bc(n),N_(n,null,a),i}return Uc(n,l,i,a),Bc(n)}function Yl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194176)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,Er(n,a)}}function im(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?f=m=i:m=m.next=i}else f=m=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var rm=!1;function $l(){if(rm){var n=no;if(n!==null)throw n}}function Xl(n,i,a,l){rm=!1;var f=n.updateQueue;Lr=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var D=A,P=D.next;D.next=null,v===null?m=P:v.next=P,v=D;var $=n.alternate;$!==null&&($=$.updateQueue,A=$.lastBaseUpdate,A!==v&&(A===null?$.firstBaseUpdate=P:A.next=P,$.lastBaseUpdate=D))}if(m!==null){var W=f.baseState;v=0,$=P=D=null,A=m;do{var j=A.lane&-536870913,Y=j!==A.lane;if(Y?(Bt&j)===j:(l&j)===j){j!==0&&j===eo&&(rm=!0),$!==null&&($=$.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var pt=n,St=A;j=i;var _e=a;switch(St.tag){case 1:if(pt=St.payload,typeof pt=="function"){W=pt.call(_e,W,j);break t}W=pt;break t;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=St.payload,j=typeof pt=="function"?pt.call(_e,W,j):pt,j==null)break t;W=R({},W,j);break t;case 2:Lr=!0}}j=A.callback,j!==null&&(n.flags|=64,Y&&(n.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[j]:Y.push(j))}else Y={lane:j,tag:A.tag,payload:A.payload,callback:A.callback,next:null},$===null?(P=$=Y,D=W):$=$.next=Y,v|=j;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;Y=A,A=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);$===null&&(D=W),f.baseState=D,f.firstBaseUpdate=P,f.lastBaseUpdate=$,m===null&&(f.shared.lanes=0),Fr|=v,n.lanes=v,n.memoizedState=W}}function Wy(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function Jy(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Wy(a[n],i)}function Zl(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var m=a.create,v=a.inst;l=m(),v.destroy=l}a=a.next}while(a!==f)}}catch(A){Jt(i,i.return,A)}}function Br(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&n)===n){var v=l.inst,A=v.destroy;if(A!==void 0){v.destroy=void 0,f=i;var D=a;try{A()}catch(P){Jt(f,D,P)}}}l=l.next}while(l!==m)}}catch(P){Jt(i,i.return,P)}}function tv(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{Jy(i,a)}catch(l){Jt(n,n.return,l)}}}function ev(n,i,a){a.props=Qs(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){Jt(n,i,l)}}function Xs(n,i){try{var a=n.ref;if(a!==null){var l=n.stateNode;switch(n.tag){case 26:case 27:case 5:var f=l;break;default:f=l}typeof a=="function"?n.refCleanup=a(f):a.current=f}}catch(m){Jt(n,i,m)}}function Rn(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Jt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Jt(n,i,f)}else a.current=null}function nv(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Jt(n,n.return,f)}}function iv(n,i,a){try{var l=n.stateNode;Ew(l,n.type,a,i),l[xe]=i}catch(f){Jt(n,n.return,f)}}function rv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27||n.tag===4}function sm(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||rv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==27&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function am(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=vh));else if(l!==4&&l!==27&&(n=n.child,n!==null))for(am(n,i,a),n=n.sibling;n!==null;)am(n,i,a),n=n.sibling}function ah(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&l!==27&&(n=n.child,n!==null))for(ah(n,i,a),n=n.sibling;n!==null;)ah(n,i,a),n=n.sibling}var $i=!1,ge=!1,om=!1,sv=typeof WeakSet=="function"?WeakSet:Set,je=null,av=!1;function XS(n,i){if(n=n.containerInfo,Pm=Ih,n=b_(n),ud(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else t:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break t}var v=0,A=-1,D=-1,P=0,$=0,W=n,j=null;e:for(;;){for(var Y;W!==a||f!==0&&W.nodeType!==3||(A=v+f),W!==m||l!==0&&W.nodeType!==3||(D=v+l),W.nodeType===3&&(v+=W.nodeValue.length),(Y=W.firstChild)!==null;)j=W,W=Y;for(;;){if(W===n)break e;if(j===a&&++P===f&&(A=v),j===m&&++$===l&&(D=v),(Y=W.nextSibling)!==null)break;W=j,j=W.parentNode}W=Y}a=A===-1||D===-1?null:{start:A,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Lm={focusedElem:n,selectionRange:a},Ih=!1,je=i;je!==null;)if(i=je,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,je=n;else for(;je!==null;){switch(i=je,m=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if(n&1024&&m!==null){n=void 0,a=i,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var pt=Qs(a.type,f,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(pt,m),l.__reactInternalSnapshotBeforeUpdate=n}catch(St){Jt(a,a.return,St)}}break;case 3:if(n&1024){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)zm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":zm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(n&1024)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,je=n;break}je=i.return}return pt=av,av=!1,pt}function ov(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Zi(n,a),l&4&&Zl(5,a);break;case 1:if(Zi(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(A){Jt(a,a.return,A)}else{var f=Qs(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(A){Jt(a,a.return,A)}}l&64&&tv(a),l&512&&Xs(a,a.return);break;case 3:if(Zi(n,a),l&64&&(l=a.updateQueue,l!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Jy(l,n)}catch(A){Jt(a,a.return,A)}}break;case 26:Zi(n,a),l&512&&Xs(a,a.return);break;case 27:case 5:Zi(n,a),i===null&&l&4&&nv(a),l&512&&Xs(a,a.return);break;case 12:Zi(n,a);break;case 13:Zi(n,a),l&4&&cv(n,a);break;case 22:if(f=a.memoizedState!==null||$i,!f){i=i!==null&&i.memoizedState!==null||ge;var m=$i,v=ge;$i=f,(ge=i)&&!v?zr(n,a,(a.subtreeFlags&8772)!==0):Zi(n,a),$i=m,ge=v}l&512&&(a.memoizedProps.mode==="manual"?Xs(a,a.return):Rn(a,a.return));break;default:Zi(n,a)}}function lv(n){var i=n.alternate;i!==null&&(n.alternate=null,lv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Is(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Re=null,Dn=!1;function Xi(n,i,a){for(a=a.child;a!==null;)uv(n,i,a),a=a.sibling}function uv(n,i,a){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(gr,a)}catch{}switch(a.tag){case 26:ge||Rn(a,i),Xi(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ge||Rn(a,i);var l=Re,f=Dn;for(Re=a.stateNode,Xi(n,i,a),a=a.stateNode,i=a.attributes;i.length;)a.removeAttributeNode(i[0]);Is(a),Re=l,Dn=f;break;case 5:ge||Rn(a,i);case 6:f=Re;var m=Dn;if(Re=null,Xi(n,i,a),Re=f,Dn=m,Re!==null)if(Dn)try{n=Re,l=a.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)}catch(v){Jt(a,i,v)}else try{Re.removeChild(a.stateNode)}catch(v){Jt(a,i,v)}break;case 18:Re!==null&&(Dn?(i=Re,a=a.stateNode,i.nodeType===8?Bm(i.parentNode,a):i.nodeType===1&&Bm(i,a),gu(i)):Bm(Re,a.stateNode));break;case 4:l=Re,f=Dn,Re=a.stateNode.containerInfo,Dn=!0,Xi(n,i,a),Re=l,Dn=f;break;case 0:case 11:case 14:case 15:ge||Br(2,a,i),ge||Br(4,a,i),Xi(n,i,a);break;case 1:ge||(Rn(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&ev(a,i,l)),Xi(n,i,a);break;case 21:Xi(n,i,a);break;case 22:ge||Rn(a,i),ge=(l=ge)||a.memoizedState!==null,Xi(n,i,a),ge=l;break;default:Xi(n,i,a)}}function cv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{gu(n)}catch(a){Jt(i,i.return,a)}}function ZS(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new sv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new sv),i;default:throw Error(r(435,n.tag))}}function lm(n,i){var a=ZS(n);i.forEach(function(l){var f=cw.bind(null,n,l);a.has(l)||(a.add(l),l.then(f,f))})}function Hn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=n,v=i,A=v;t:for(;A!==null;){switch(A.tag){case 27:case 5:Re=A.stateNode,Dn=!1;break t;case 3:Re=A.stateNode.containerInfo,Dn=!0;break t;case 4:Re=A.stateNode.containerInfo,Dn=!0;break t}A=A.return}if(Re===null)throw Error(r(160));uv(m,v,f),Re=null,Dn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)hv(i,n),i=i.sibling}var ni=null;function hv(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Hn(i,n),Kn(n),l&4&&(Br(3,n,n.return),Zl(3,n),Br(5,n,n.return));break;case 1:Hn(i,n),Kn(n),l&512&&(ge||a===null||Rn(a,a.return)),l&64&&$i&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ni;if(Hn(i,n),Kn(n),l&512&&(ge||a===null||Rn(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){t:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ar]||m[Ue]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),Xe(m,l,a),m[Ue]=n,ue(m),l=m;break t;case"link":var v=nE("link","href",f).get(l+(a.href||""));if(v){for(var A=0;A<v.length;A++)if(m=v[A],m.getAttribute("href")===(a.href==null?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(A,1);break e}}m=f.createElement(l),Xe(m,l,a),f.head.appendChild(m);break;case"meta":if(v=nE("meta","content",f).get(l+(a.content||""))){for(A=0;A<v.length;A++)if(m=v[A],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(A,1);break e}}m=f.createElement(l),Xe(m,l,a),f.head.appendChild(m);break;default:throw Error(r(468,l))}m[Ue]=n,ue(m),l=m}n.stateNode=l}else iE(f,n.type,n.stateNode);else n.stateNode=eE(f,l,n.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?iE(f,n.type,n.stateNode):eE(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&iv(n,n.memoizedProps,a.memoizedProps)}break;case 27:if(l&4&&n.alternate===null){f=n.stateNode,m=n.memoizedProps;try{for(var D=f.firstChild;D;){var P=D.nextSibling,$=D.nodeName;D[Ar]||$==="HEAD"||$==="BODY"||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&D.rel.toLowerCase()==="stylesheet"||f.removeChild(D),D=P}for(var W=n.type,j=f.attributes;j.length;)f.removeAttributeNode(j[0]);Xe(f,W,m),f[Ue]=n,f[xe]=m}catch(pt){Jt(n,n.return,pt)}}case 5:if(Hn(i,n),Kn(n),l&512&&(ge||a===null||Rn(a,a.return)),n.flags&32){f=n.stateNode;try{Ln(f,"")}catch(pt){Jt(n,n.return,pt)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,iv(n,f,a!==null?a.memoizedProps:f)),l&1024&&(om=!0);break;case 6:if(Hn(i,n),Kn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(pt){Jt(n,n.return,pt)}}break;case 3:if(bh=null,f=ni,ni=Th(i.containerInfo),Hn(i,n),ni=f,Kn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{gu(i.containerInfo)}catch(pt){Jt(n,n.return,pt)}om&&(om=!1,fv(n));break;case 4:l=ni,ni=Th(n.stateNode.containerInfo),Hn(i,n),Kn(n),ni=l;break;case 12:Hn(i,n),Kn(n);break;case 13:Hn(i,n),Kn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(_m=yn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,lm(n,l)));break;case 22:if(l&512&&(ge||a===null||Rn(a,a.return)),D=n.memoizedState!==null,P=a!==null&&a.memoizedState!==null,$=$i,W=ge,$i=$||D,ge=W||P,Hn(i,n),ge=W,$i=$,Kn(n),i=n.stateNode,i._current=n,i._visibility&=-3,i._visibility|=i._pendingVisibility&2,l&8192&&(i._visibility=D?i._visibility&-2:i._visibility|1,D&&(i=$i||ge,a===null||P||i||ao(n)),n.memoizedProps===null||n.memoizedProps.mode!=="manual"))t:for(a=null,i=n;;){if(i.tag===5||i.tag===26||i.tag===27){if(a===null){P=a=i;try{if(f=P.stateNode,D)m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{v=P.stateNode,A=P.memoizedProps.style;var Y=A!=null&&A.hasOwnProperty("display")?A.display:null;v.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(pt){Jt(P,P.return,pt)}}}else if(i.tag===6){if(a===null){P=i;try{P.stateNode.nodeValue=D?"":P.memoizedProps}catch(pt){Jt(P,P.return,pt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,lm(n,a))));break;case 19:Hn(i,n),Kn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,lm(n,l)));break;case 21:break;default:Hn(i,n),Kn(n)}}function Kn(n){var i=n.flags;if(i&2){try{if(n.tag!==27){t:{for(var a=n.return;a!==null;){if(rv(a)){var l=a;break t}a=a.return}throw Error(r(160))}switch(l.tag){case 27:var f=l.stateNode,m=sm(n);ah(n,m,f);break;case 5:var v=l.stateNode;l.flags&32&&(Ln(v,""),l.flags&=-33);var A=sm(n);ah(n,A,v);break;case 3:case 4:var D=l.stateNode.containerInfo,P=sm(n);am(n,P,D);break;default:throw Error(r(161))}}}catch($){Jt(n,n.return,$)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function fv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;fv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Zi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ov(n,i.alternate,i),i=i.sibling}function ao(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Br(4,i,i.return),ao(i);break;case 1:Rn(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&ev(i,i.return,a),ao(i);break;case 26:case 27:case 5:Rn(i,i.return),ao(i);break;case 22:Rn(i,i.return),i.memoizedState===null&&ao(i);break;default:ao(i)}n=n.sibling}}function zr(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,m=i,v=m.flags;switch(m.tag){case 0:case 11:case 15:zr(f,m,a),Zl(4,m);break;case 1:if(zr(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(P){Jt(l,l.return,P)}if(l=m,f=l.updateQueue,f!==null){var A=l.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)Wy(D[f],A)}catch(P){Jt(l,l.return,P)}}a&&v&64&&tv(m),Xs(m,m.return);break;case 26:case 27:case 5:zr(f,m,a),a&&l===null&&v&4&&nv(m),Xs(m,m.return);break;case 12:zr(f,m,a);break;case 13:zr(f,m,a),a&&v&4&&cv(f,m);break;case 22:m.memoizedState===null&&zr(f,m,a),Xs(m,m.return);break;default:zr(f,m,a)}i=i.sibling}}function um(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&ql(a))}function cm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ql(n))}function qr(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)dv(n,i,a,l),i=i.sibling}function dv(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:qr(n,i,a,l),f&2048&&Zl(9,i);break;case 3:qr(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ql(n)));break;case 12:if(f&2048){qr(n,i,a,l),n=i.stateNode;try{var m=i.memoizedProps,v=m.id,A=m.onPostCommit;typeof A=="function"&&A(v,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){Jt(i,i.return,D)}}else qr(n,i,a,l);break;case 23:break;case 22:m=i.stateNode,i.memoizedState!==null?m._visibility&4?qr(n,i,a,l):Wl(n,i):m._visibility&4?qr(n,i,a,l):(m._visibility|=4,oo(n,i,a,l,(i.subtreeFlags&10256)!==0)),f&2048&&um(i.alternate,i);break;case 24:qr(n,i,a,l),f&2048&&cm(i.alternate,i);break;default:qr(n,i,a,l)}}function oo(n,i,a,l,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=n,v=i,A=a,D=l,P=v.flags;switch(v.tag){case 0:case 11:case 15:oo(m,v,A,D,f),Zl(8,v);break;case 23:break;case 22:var $=v.stateNode;v.memoizedState!==null?$._visibility&4?oo(m,v,A,D,f):Wl(m,v):($._visibility|=4,oo(m,v,A,D,f)),f&&P&2048&&um(v.alternate,v);break;case 24:oo(m,v,A,D,f),f&&P&2048&&cm(v.alternate,v);break;default:oo(m,v,A,D,f)}i=i.sibling}}function Wl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:Wl(a,l),f&2048&&um(l.alternate,l);break;case 24:Wl(a,l),f&2048&&cm(l.alternate,l);break;default:Wl(a,l)}i=i.sibling}}var Jl=8192;function lo(n){if(n.subtreeFlags&Jl)for(n=n.child;n!==null;)mv(n),n=n.sibling}function mv(n){switch(n.tag){case 26:lo(n),n.flags&Jl&&n.memoizedState!==null&&Bw(ni,n.memoizedState,n.memoizedProps);break;case 5:lo(n);break;case 3:case 4:var i=ni;ni=Th(n.stateNode.containerInfo),lo(n),ni=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=Jl,Jl=16777216,lo(n),Jl=i):lo(n));break;default:lo(n)}}function gv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function tu(n){var i=n.deletions;if(n.flags&16){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];je=l,_v(l,n)}gv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)pv(n),n=n.sibling}function pv(n){switch(n.tag){case 0:case 11:case 15:tu(n),n.flags&2048&&Br(9,n,n.return);break;case 3:tu(n);break;case 12:tu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&4&&(n.return===null||n.return.tag!==13)?(i._visibility&=-5,oh(n)):tu(n);break;default:tu(n)}}function oh(n){var i=n.deletions;if(n.flags&16){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];je=l,_v(l,n)}gv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Br(8,i,i.return),oh(i);break;case 22:a=i.stateNode,a._visibility&4&&(a._visibility&=-5,oh(i));break;default:oh(i)}n=n.sibling}}function _v(n,i){for(;je!==null;){var a=je;switch(a.tag){case 0:case 11:case 15:Br(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ql(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,je=l;else t:for(a=n;je!==null;){l=je;var f=l.sibling,m=l.return;if(lv(l),l===a){je=null;break t}if(f!==null){f.return=m,je=f;break t}je=m}}}function WS(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(n,i,a,l){return new WS(n,i,a,l)}function hm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function jr(n,i){var a=n.alternate;return a===null?(a=Qn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&31457280,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function yv(n,i){n.flags&=31457282;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function lh(n,i,a,l,f,m){var v=0;if(l=n,typeof n=="function")hm(n)&&(v=1);else if(typeof n=="string")v=kw(n,a,ln.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case g:return Zs(a.children,f,m,i);case p:v=8,f|=24;break;case E:return n=Qn(12,a,i,f|2),n.elementType=E,n.lanes=m,n;case H:return n=Qn(13,a,i,f),n.elementType=H,n.lanes=m,n;case Q:return n=Qn(19,a,i,f),n.elementType=Q,n.lanes=m,n;case lt:return vv(a,f,m,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case T:case V:v=10;break t;case S:v=9;break t;case G:v=11;break t;case dt:v=14;break t;case it:v=16,l=null;break t}v=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=Qn(v,a,i,f),i.elementType=n,i.type=l,i.lanes=m,i}function Zs(n,i,a,l){return n=Qn(7,n,l,i),n.lanes=a,n}function vv(n,i,a,l){n=Qn(22,n,l,i),n.elementType=lt,n.lanes=a;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var m=f._current;if(m===null)throw Error(r(456));if(!(f._pendingVisibility&2)){var v=Vr(m,2);v!==null&&(f._pendingVisibility|=2,dn(v,m,2))}},attach:function(){var m=f._current;if(m===null)throw Error(r(456));if(f._pendingVisibility&2){var v=Vr(m,2);v!==null&&(f._pendingVisibility&=-3,dn(v,m,2))}}};return n.stateNode=f,n}function fm(n,i,a){return n=Qn(6,n,null,i),n.lanes=a,n}function dm(n,i,a){return i=Qn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function Wi(n){n.flags|=4}function Ev(n,i){if(i.type!=="stylesheet"||i.state.loading&4)n.flags&=-16777217;else if(n.flags|=16777216,!rE(i)){if(i=Gn.current,i!==null&&((Bt&4194176)===Bt?_i!==null:(Bt&62914560)!==Bt&&!(Bt&536870912)||i!==_i))throw Ul=yd,k_;n.flags|=8192}}function uh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?yr():536870912,n.lanes|=i,co|=i)}function eu(n,i){if(!Ft)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function ce(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&31457280,l|=f.flags&31457280,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function JS(n,i,a){var l=i.pendingProps;switch(pd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ce(i),null;case 1:return ce(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Yi(Pe),xi(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Ml(i)?Wi(i):n===null||n.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,ei!==null&&(Tm(ei),ei=null))),ce(i),null;case 26:return a=i.memoizedState,n===null?(Wi(i),a!==null?(ce(i),Ev(i,a)):(ce(i),i.flags&=-16777217)):a?a!==n.memoizedState?(Wi(i),ce(i),Ev(i,a)):(ce(i),i.flags&=-16777217):(n.memoizedProps!==l&&Wi(i),ce(i),i.flags&=-16777217),null;case 27:Ca(i),a=On.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Wi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ce(i),null}n=ln.current,Ml(i)?P_(i):(n=Xv(f,l,a),i.stateNode=n,Wi(i))}return ce(i),null;case 5:if(Ca(i),a=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Wi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ce(i),null}if(n=ln.current,Ml(i))P_(i);else{switch(f=Eh(On.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}n[Ue]=i,n[xe]=l;t:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break t;for(;f.sibling===null;){if(f.return===null||f.return===i)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;t:switch(Xe(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&Wi(i)}}return ce(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&Wi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=On.current,Ml(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=fn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Ue]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Gv(n.nodeValue,a)),n||qs(i)}else n=Eh(n).createTextNode(l),n[Ue]=i,i.stateNode=n}return ce(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Ml(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ue]=i}else Pl(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;ce(i),f=!1}else ei!==null&&(Tm(ei),ei=null),f=!0;if(!f)return i.flags&256?(Gi(i),i):(Gi(i),null)}if(Gi(i),i.flags&128)return i.lanes=a,i;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)}return a!==n&&a&&(i.child.flags|=8192),uh(i,i.updateQueue),ce(i),null;case 4:return xi(),n===null&&Nm(i.stateNode.containerInfo),ce(i),null;case 10:return Yi(i.type),ce(i),null;case 19:if(de(Me),f=i.memoizedState,f===null)return ce(i),null;if(l=(i.flags&128)!==0,m=f.rendering,m===null)if(l)eu(f,!1);else{if(pe!==0||n!==null&&n.flags&128)for(n=i.child;n!==null;){if(m=Kc(n),m!==null){for(i.flags|=128,eu(f,!1),n=m.updateQueue,i.updateQueue=n,uh(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)yv(a,n),a=a.sibling;return Yt(Me,Me.current&1|2),i.child}n=n.sibling}f.tail!==null&&yn()>ch&&(i.flags|=128,l=!0,eu(f,!1),i.lanes=4194304)}else{if(!l)if(n=Kc(m),n!==null){if(i.flags|=128,l=!0,n=n.updateQueue,i.updateQueue=n,uh(i,n),eu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Ft)return ce(i),null}else 2*yn()-f.renderingStartTime>ch&&a!==536870912&&(i.flags|=128,l=!0,eu(f,!1),i.lanes=4194304);f.isBackwards?(m.sibling=i.child,i.child=m):(n=f.last,n!==null?n.sibling=m:i.child=m,f.last=m)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=yn(),i.sibling=null,n=Me.current,Yt(Me,l?n&1|2:n&1),i):(ce(i),null);case 22:case 23:return Gi(i),Ed(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?a&536870912&&!(i.flags&128)&&(ce(i),i.subtreeFlags&6&&(i.flags|=8192)):ce(i),a=i.updateQueue,a!==null&&uh(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&de(Fs),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Yi(Pe),ce(i),null;case 25:return null}throw Error(r(156,i.tag))}function tw(n,i){switch(pd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Yi(Pe),xi(),n=i.flags,n&65536&&!(n&128)?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Ca(i),null;case 13:if(Gi(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Pl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return de(Me),null;case 4:return xi(),null;case 10:return Yi(i.type),null;case 22:case 23:return Gi(i),Ed(),n!==null&&de(Fs),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Yi(Pe),null;case 25:return null;default:return null}}function Tv(n,i){switch(pd(i),i.tag){case 3:Yi(Pe),xi();break;case 26:case 27:case 5:Ca(i);break;case 4:xi();break;case 13:Gi(i);break;case 19:de(Me);break;case 10:Yi(i.type);break;case 22:case 23:Gi(i),Ed(),n!==null&&de(Fs);break;case 24:Yi(Pe)}}var ew={getCacheForType:function(n){var i=en(Pe),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a}},nw=typeof WeakMap=="function"?WeakMap:Map,he=0,te=null,Nt=null,Bt=0,ee=0,Cn=null,Ji=!1,uo=!1,mm=!1,tr=0,pe=0,Fr=0,Ws=0,gm=0,Yn=0,co=0,nu=null,vi=null,pm=!1,_m=0,ch=1/0,hh=null,Gr=null,fh=!1,Js=null,iu=0,ym=0,vm=null,ru=0,Em=null;function Vn(){if(he&2&&Bt!==0)return Bt&-Bt;if(w.T!==null){var n=eo;return n!==0?n:Dm()}return yc()}function Av(){Yn===0&&(Yn=!(Bt&536870912)||Ft?pl():536870912);var n=Gn.current;return n!==null&&(n.flags|=32),Yn}function dn(n,i,a){(n===te&&ee===2||n.cancelPendingCommit!==null)&&(ho(n,0),er(n,Bt,Yn,!1)),ve(n,a),(!(he&2)||n!==te)&&(n===te&&(!(he&2)&&(Ws|=a),pe===4&&er(n,Bt,Yn,!1)),Ei(n))}function bv(n,i,a){if(he&6)throw Error(r(327));var l=!a&&(i&60)===0&&(i&n.expiredLanes)===0||_r(n,i),f=l?sw(n,i):Sm(n,i,!0),m=l;do{if(f===0){uo&&!l&&er(n,i,0,!1);break}else if(f===6)er(n,i,0,!Ji);else{if(a=n.current.alternate,m&&!iw(a)){f=Sm(n,i,!1),m=!1;continue}if(f===2){if(m=i,n.errorRecoveryDisabledLanes&m)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var A=n;f=nu;var D=A.current.memoizedState.isDehydrated;if(D&&(ho(A,v).flags|=256),v=Sm(A,v,!1),v!==2){if(mm&&!D){A.errorRecoveryDisabledLanes|=m,Ws|=m,f=4;break t}m=vi,vi=f,m!==null&&Tm(m)}f=v}if(m=!1,f!==2)continue}}if(f===1){ho(n,0),er(n,i,0,!0);break}t:{switch(l=n,f){case 0:case 1:throw Error(r(345));case 4:if((i&4194176)===i){er(l,i,Yn,!Ji);break t}break;case 2:vi=null;break;case 3:case 5:break;default:throw Error(r(329))}if(l.finishedWork=a,l.finishedLanes=i,(i&62914560)===i&&(m=_m+300-yn(),10<m)){if(er(l,i,Yn,!Ji),Mn(l,0)!==0)break t;l.timeoutHandle=Qv(Sv.bind(null,l,a,vi,hh,pm,i,Yn,Ws,co,Ji,2,-0,0),m);break t}Sv(l,a,vi,hh,pm,i,Yn,Ws,co,Ji,0,-0,0)}}break}while(!0);Ei(n)}function Tm(n){vi===null?vi=n:vi.push.apply(vi,n)}function Sv(n,i,a,l,f,m,v,A,D,P,$,W,j){var Y=i.subtreeFlags;if((Y&8192||(Y&16785408)===16785408)&&(cu={stylesheets:null,count:0,unsuspend:Uw},mv(i),i=zw(),i!==null)){n.cancelPendingCommit=i(xv.bind(null,n,a,l,f,v,A,D,1,W,j)),er(n,m,v,!P);return}xv(n,a,l,f,v,A,D,$,W,j)}function iw(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!In(m(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function er(n,i,a,l){i&=~gm,i&=~Ws,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var m=31-un(f),v=1<<m;l[m]=-1,f&=~v}a!==0&&vr(n,a,i)}function dh(){return he&6?!0:(su(0),!1)}function Am(){if(Nt!==null){if(ee===0)var n=Nt.return;else n=Nt,Qi=Ys=null,Dd(n),Ja=null,Bl=0,n=Nt;for(;n!==null;)Tv(n.alternate,n),n=n.return;Nt=null}}function ho(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,Aw(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Am(),te=n,Nt=a=jr(n.current,null),Bt=i,ee=0,Cn=null,Ji=!1,uo=_r(n,i),mm=!1,co=Yn=gm=Ws=Fr=pe=0,vi=nu=null,pm=!1,i&8&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-un(l),m=1<<f;i|=n[f],l&=~m}return tr=i,kc(),a}function wv(n,i){Vt=null,w.H=yi,i===kl?(i=z_(),ee=3):i===k_?(i=z_(),ee=4):ee=i===Uy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Cn=i,Nt===null&&(pe=1,ih(n,qn(i,n.current)))}function Iv(){var n=w.H;return w.H=yi,n===null?yi:n}function Rv(){var n=w.A;return w.A=ew,n}function bm(){pe=4,Ji||(Bt&4194176)!==Bt&&Gn.current!==null||(uo=!0),!(Fr&134217727)&&!(Ws&134217727)||te===null||er(te,Bt,Yn,!1)}function Sm(n,i,a){var l=he;he|=2;var f=Iv(),m=Rv();(te!==n||Bt!==i)&&(hh=null,ho(n,i)),i=!1;var v=pe;t:do try{if(ee!==0&&Nt!==null){var A=Nt,D=Cn;switch(ee){case 8:Am(),v=6;break t;case 3:case 2:case 6:Gn.current===null&&(i=!0);var P=ee;if(ee=0,Cn=null,fo(n,A,D,P),a&&uo){v=0;break t}break;default:P=ee,ee=0,Cn=null,fo(n,A,D,P)}}rw(),v=pe;break}catch($){wv(n,$)}while(!0);return i&&n.shellSuspendCounter++,Qi=Ys=null,he=l,w.H=f,w.A=m,Nt===null&&(te=null,Bt=0,kc()),v}function rw(){for(;Nt!==null;)Dv(Nt)}function sw(n,i){var a=he;he|=2;var l=Iv(),f=Rv();te!==n||Bt!==i?(hh=null,ch=yn()+500,ho(n,i)):uo=_r(n,i);t:do try{if(ee!==0&&Nt!==null){i=Nt;var m=Cn;e:switch(ee){case 1:ee=0,Cn=null,fo(n,i,m,1);break;case 2:if(U_(m)){ee=0,Cn=null,Cv(i);break}i=function(){ee===2&&te===n&&(ee=7),Ei(n)},m.then(i,i);break t;case 3:ee=7;break t;case 4:ee=5;break t;case 7:U_(m)?(ee=0,Cn=null,Cv(i)):(ee=0,Cn=null,fo(n,i,m,7));break;case 5:var v=null;switch(Nt.tag){case 26:v=Nt.memoizedState;case 5:case 27:var A=Nt;if(!v||rE(v)){ee=0,Cn=null;var D=A.sibling;if(D!==null)Nt=D;else{var P=A.return;P!==null?(Nt=P,mh(P)):Nt=null}break e}}ee=0,Cn=null,fo(n,i,m,5);break;case 6:ee=0,Cn=null,fo(n,i,m,6);break;case 8:Am(),pe=6;break t;default:throw Error(r(462))}}aw();break}catch($){wv(n,$)}while(!0);return Qi=Ys=null,w.H=l,w.A=f,he=a,Nt!==null?0:(te=null,Bt=0,kc(),pe)}function aw(){for(;Nt!==null&&!Wf();)Dv(Nt)}function Dv(n){var i=Xy(n.alternate,n,tr);n.memoizedProps=n.pendingProps,i===null?mh(n):Nt=i}function Cv(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=Gy(a,i,i.pendingProps,i.type,void 0,Bt);break;case 11:i=Gy(a,i,i.pendingProps,i.type.render,i.ref,Bt);break;case 5:Dd(i);default:Tv(a,i),i=Nt=yv(i,tr),i=Xy(a,i,tr)}n.memoizedProps=n.pendingProps,i===null?mh(n):Nt=i}function fo(n,i,a,l){Qi=Ys=null,Dd(i),Ja=null,Bl=0;var f=i.return;try{if(YS(n,f,i,a,Bt)){pe=1,ih(n,qn(a,n.current)),Nt=null;return}}catch(m){if(f!==null)throw Nt=f,m;pe=1,ih(n,qn(a,n.current)),Nt=null;return}i.flags&32768?(Ft||l===1?n=!0:uo||Bt&536870912?n=!1:(Ji=n=!0,(l===2||l===3||l===6)&&(l=Gn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Vv(i,n)):mh(i)}function mh(n){var i=n;do{if(i.flags&32768){Vv(i,Ji);return}n=i.return;var a=JS(i.alternate,i,tr);if(a!==null){Nt=a;return}if(i=i.sibling,i!==null){Nt=i;return}Nt=i=n}while(i!==null);pe===0&&(pe=5)}function Vv(n,i){do{var a=tw(n.alternate,n);if(a!==null){a.flags&=32767,Nt=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Nt=n;return}Nt=n=a}while(n!==null);pe=6,Nt=null}function xv(n,i,a,l,f,m,v,A,D,P){var $=w.T,W=ct.p;try{ct.p=2,w.T=null,ow(n,i,a,l,W,f,m,v,A,D,P)}finally{w.T=$,ct.p=W}}function ow(n,i,a,l,f,m,v,A){do mo();while(Js!==null);if(he&6)throw Error(r(327));var D=n.finishedWork;if(l=n.finishedLanes,D===null)return null;if(n.finishedWork=null,n.finishedLanes=0,D===n.current)throw Error(r(177));n.callbackNode=null,n.callbackPriority=0,n.cancelPendingCommit=null;var P=D.lanes|D.childLanes;if(P|=dd,pc(n,l,P,m,v,A),n===te&&(Nt=te=null,Bt=0),!(D.subtreeFlags&10256)&&!(D.flags&10256)||fh||(fh=!0,ym=P,vm=a,hw(Ni,function(){return mo(),null})),a=(D.flags&15990)!==0,D.subtreeFlags&15990||a?(a=w.T,w.T=null,m=ct.p,ct.p=2,v=he,he|=4,XS(n,D),hv(D,n),xS(Lm,n.containerInfo),Ih=!!Pm,Lm=Pm=null,n.current=D,ov(n,D.alternate,D),fl(),he=v,ct.p=m,w.T=a):n.current=D,fh?(fh=!1,Js=n,iu=l):Nv(n,P),P=n.pendingLanes,P===0&&(Gr=null),ml(D.stateNode),Ei(n),i!==null)for(f=n.onRecoverableError,D=0;D<i.length;D++)P=i[D],f(P.value,{componentStack:P.stack});return iu&3&&mo(),P=n.pendingLanes,l&4194218&&P&42?n===Em?ru++:(ru=0,Em=n):ru=0,su(0),null}function Nv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,ql(i)))}function mo(){if(Js!==null){var n=Js,i=ym;ym=0;var a=_c(iu),l=w.T,f=ct.p;try{if(ct.p=32>a?32:a,w.T=null,Js===null)var m=!1;else{a=vm,vm=null;var v=Js,A=iu;if(Js=null,iu=0,he&6)throw Error(r(331));var D=he;if(he|=4,pv(v.current),dv(v,v.current,A,a),he=D,su(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(gr,v)}catch{}m=!0}return m}finally{ct.p=f,w.T=l,Nv(n,i)}}return!1}function Ov(n,i,a){i=qn(a,i),i=jd(n.stateNode,i,2),n=Ur(n,i,2),n!==null&&(ve(n,2),Ei(n))}function Jt(n,i,a){if(n.tag===3)Ov(n,n,a);else for(;i!==null;){if(i.tag===3){Ov(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Gr===null||!Gr.has(l))){n=qn(a,n),a=Ly(2),l=Ur(i,a,2),l!==null&&(ky(a,l,i,n),ve(l,2),Ei(l));break}}i=i.return}}function wm(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new nw;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(mm=!0,f.add(a),n=lw.bind(null,n,i,a),i.then(n,n))}function lw(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,te===n&&(Bt&a)===a&&(pe===4||pe===3&&(Bt&62914560)===Bt&&300>yn()-_m?!(he&2)&&ho(n,0):gm|=a,co===Bt&&(co=0)),Ei(n)}function Mv(n,i){i===0&&(i=yr()),n=Vr(n,i),n!==null&&(ve(n,i),Ei(n))}function uw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Mv(n,a)}function cw(n,i){var a=0;switch(n.tag){case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),Mv(n,a)}function hw(n,i){return bs(n,i)}var gh=null,go=null,Im=!1,ph=!1,Rm=!1,ta=0;function Ei(n){n!==go&&n.next===null&&(go===null?gh=go=n:go=go.next=n),ph=!0,Im||(Im=!0,dw(fw))}function su(n,i){if(!Rm&&ph){Rm=!0;do for(var a=!1,l=gh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var v=l.suspendedLanes,A=l.pingedLanes;m=(1<<31-un(42|n)+1)-1,m&=f&~(v&~A),m=m&201326677?m&201326677|1:m?m|2:0}m!==0&&(a=!0,kv(l,m))}else m=Bt,m=Mn(l,l===te?m:0),!(m&3)||_r(l,m)||(a=!0,kv(l,m));l=l.next}while(a);Rm=!1}}function fw(){ph=Im=!1;var n=0;ta!==0&&(Tw()&&(n=ta),ta=0);for(var i=yn(),a=null,l=gh;l!==null;){var f=l.next,m=Pv(l,i);m===0?(l.next=null,a===null?gh=f:a.next=f,f===null&&(go=a)):(a=l,(n!==0||m&3)&&(ph=!0)),l=f}su(n)}function Pv(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var v=31-un(m),A=1<<v,D=f[v];D===-1?(!(A&a)||A&l)&&(f[v]=Na(A,i)):D<=i&&(n.expiredLanes|=A),m&=~A}if(i=te,a=Bt,a=Mn(n,n===i?a:0),l=n.callbackNode,a===0||n===i&&ee===2||n.cancelPendingCommit!==null)return l!==null&&l!==null&&xa(l),n.callbackNode=null,n.callbackPriority=0;if(!(a&3)||_r(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&xa(l),_c(a)){case 2:case 8:a=ke;break;case 32:a=Ni;break;case 268435456:a=dl;break;default:a=Ni}return l=Lv.bind(null,n),a=bs(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&xa(l),n.callbackPriority=2,n.callbackNode=null,2}function Lv(n,i){var a=n.callbackNode;if(mo()&&n.callbackNode!==a)return null;var l=Bt;return l=Mn(n,n===te?l:0),l===0?null:(bv(n,l,i),Pv(n,yn()),n.callbackNode!=null&&n.callbackNode===a?Lv.bind(null,n):null)}function kv(n,i){if(mo())return null;bv(n,i,!0)}function dw(n){bw(function(){he&6?bs(Ve,n):n()})}function Dm(){return ta===0&&(ta=pl()),ta}function Uv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ui(""+n)}function Bv(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function mw(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var m=Uv((f[xe]||null).action),v=l.submitter;v&&(i=(i=v[xe]||null)?Uv(i.formAction):v.getAttribute("formAction"),i!==null&&(m=i,v=null));var A=new Ba("action","action",null,l,f);n.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ta!==0){var D=v?Bv(f,v):new FormData(f);kd(a,{pending:!0,data:D,method:f.method,action:m},null,D)}}else typeof m=="function"&&(A.preventDefault(),D=v?Bv(f,v):new FormData(f),kd(a,{pending:!0,data:D,method:f.method,action:m},m,D))},currentTarget:f}]})}}for(var Cm=0;Cm<x_.length;Cm++){var Vm=x_[Cm],gw=Vm.toLowerCase(),pw=Vm[0].toUpperCase()+Vm.slice(1);ti(gw,"on"+pw)}ti(I_,"onAnimationEnd"),ti(R_,"onAnimationIteration"),ti(D_,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti(OS,"onTransitionRun"),ti(MS,"onTransitionStart"),ti(PS,"onTransitionCancel"),ti(C_,"onTransitionEnd"),vn("onMouseEnter",["mouseout","mouseover"]),vn("onMouseLeave",["mouseout","mouseover"]),vn("onPointerEnter",["pointerout","pointerover"]),vn("onPointerLeave",["pointerout","pointerover"]),Sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var au="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_w=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(au));function zv(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;t:{var m=void 0;if(i)for(var v=l.length-1;0<=v;v--){var A=l[v],D=A.instance,P=A.currentTarget;if(A=A.listener,D!==m&&f.isPropagationStopped())break t;m=A,f.currentTarget=P;try{m(f)}catch($){nh($)}f.currentTarget=null,m=D}else for(v=0;v<l.length;v++){if(A=l[v],D=A.instance,P=A.currentTarget,A=A.listener,D!==m&&f.isPropagationStopped())break t;m=A,f.currentTarget=P;try{m(f)}catch($){nh($)}f.currentTarget=null,m=D}}}}function Pt(n,i){var a=i[ws];a===void 0&&(a=i[ws]=new Set);var l=n+"__bubble";a.has(l)||(qv(i,n,2,!1),a.add(l))}function xm(n,i,a){var l=0;i&&(l|=4),qv(a,n,l,i)}var _h="_reactListening"+Math.random().toString(36).slice(2);function Nm(n){if(!n[_h]){n[_h]=!0,yl.forEach(function(a){a!=="selectionchange"&&(_w.has(a)||xm(a,!1,n),xm(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[_h]||(i[_h]=!0,xm("selectionchange",!1,i))}}function qv(n,i,a,l){switch(cE(i)){case 2:var f=Fw;break;case 8:f=Gw;break;default:f=Hm}a=f.bind(null,i,a,n),f=void 0,!Un||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Om(n,i,a,l,f){var m=l;if(!(i&1)&&!(i&2)&&l!==null)t:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var A=l.stateNode.containerInfo;if(A===f||A.nodeType===8&&A.parentNode===f)break;if(v===4)for(v=l.return;v!==null;){var D=v.tag;if((D===3||D===4)&&(D=v.stateNode.containerInfo,D===f||D.nodeType===8&&D.parentNode===f))return;v=v.return}for(;A!==null;){if(v=Jn(A),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){l=m=v;continue t}A=A.parentNode}}l=l.return}Ac(function(){var P=m,$=Ua(a),W=[];t:{var j=V_.get(n);if(j!==void 0){var Y=Ba,pt=n;switch(n){case"keypress":if(hi(a)===0)break t;case"keydown":case"keyup":Y=Ha;break;case"focusin":pt="focus",Y=ja;break;case"focusout":pt="blur",Y=ja;break;case"beforeblur":case"afterblur":Y=ja;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Bn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=sd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Vc;break;case I_:case R_:case D_:Y=Fa;break;case C_:Y=Nc;break;case"scroll":case"scrollend":Y=bc;break;case"wheel":Y=Ka;break;case"copy":case"cut":case"paste":Y=Ga;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Vl;break;case"toggle":case"beforetoggle":Y=Mc}var St=(i&4)!==0,_e=!St&&(n==="scroll"||n==="scrollend"),k=St?j!==null?j+"Capture":null:j;St=[];for(var M=P,z;M!==null;){var X=M;if(z=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||z===null||k===null||(X=Vs(M,k),X!=null&&St.push(ou(M,X,z))),_e)break;M=M.return}0<St.length&&(j=new Y(j,pt,null,a,$),W.push({event:j,listeners:St}))}}if(!(i&7)){t:{if(j=n==="mouseover"||n==="pointerover",Y=n==="mouseout"||n==="pointerout",j&&a!==kn&&(pt=a.relatedTarget||a.fromElement)&&(Jn(pt)||pt[Oi]))break t;if((Y||j)&&(j=$.window===$?$:(j=$.ownerDocument)?j.defaultView||j.parentWindow:window,Y?(pt=a.relatedTarget||a.toElement,Y=P,pt=pt?Jn(pt):null,pt!==null&&(_e=et(pt),St=pt.tag,pt!==_e||St!==5&&St!==27&&St!==6)&&(pt=null)):(Y=null,pt=P),Y!==pt)){if(St=Bn,X="onMouseLeave",k="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(St=Vl,X="onPointerLeave",k="onPointerEnter",M="pointer"),_e=Y==null?j:br(Y),z=pt==null?j:br(pt),j=new St(X,M+"leave",Y,a,$),j.target=_e,j.relatedTarget=z,X=null,Jn($)===P&&(St=new St(k,M+"enter",pt,a,$),St.target=z,St.relatedTarget=_e,X=St),_e=X,Y&&pt)e:{for(St=Y,k=pt,M=0,z=St;z;z=po(z))M++;for(z=0,X=k;X;X=po(X))z++;for(;0<M-z;)St=po(St),M--;for(;0<z-M;)k=po(k),z--;for(;M--;){if(St===k||k!==null&&St===k.alternate)break e;St=po(St),k=po(k)}St=null}else St=null;Y!==null&&jv(W,j,Y,St,!1),pt!==null&&_e!==null&&jv(W,_e,pt,St,!0)}}t:{if(j=P?br(P):window,Y=j.nodeName&&j.nodeName.toLowerCase(),Y==="select"||Y==="input"&&j.type==="file")var mt=g_;else if(Oe(j))if(p_)mt=CS;else{mt=RS;var xt=IS}else Y=j.nodeName,!Y||Y.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?P&&bl(P.elementType)&&(mt=g_):mt=DS;if(mt&&(mt=mt(n,P))){qi(W,mt,a,$);break t}xt&&xt(n,j,P),n==="focusout"&&P&&j.type==="number"&&P.memoizedProps.value!=null&&ka(j,"number",j.value)}switch(xt=P?br(P):window,n){case"focusin":(Oe(xt)||xt.contentEditable==="true")&&(Qa=xt,cd=P,Ol=null);break;case"focusout":Ol=cd=Qa=null;break;case"mousedown":hd=!0;break;case"contextmenu":case"mouseup":case"dragend":hd=!1,S_(W,a,$);break;case"selectionchange":if(NS)break;case"keydown":case"keyup":S_(W,a,$)}var vt;if(mi)t:{switch(n){case"compositionstart":var At="onCompositionStart";break t;case"compositionend":At="onCompositionEnd";break t;case"compositionupdate":At="onCompositionUpdate";break t}At=void 0}else kt?K(n,a)&&(At="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(At="onCompositionStart");At&&(y&&a.locale!=="ko"&&(kt||At!=="onCompositionStart"?At==="onCompositionEnd"&&kt&&(vt=wl()):(ci=$,Cr="value"in ci?ci.value:ci.textContent,kt=!0)),xt=yh(P,At),0<xt.length&&(At=new Dl(At,n,null,a,$),W.push({event:At,listeners:xt}),vt?At.data=vt:(vt=nt(a),vt!==null&&(At.data=vt)))),(vt=_?Ne(n,a):Ut(n,a))&&(At=yh(P,"onBeforeInput"),0<At.length&&(xt=new Dl("onBeforeInput","beforeinput",null,a,$),W.push({event:xt,listeners:At}),xt.data=vt)),mw(W,n,P,a,$)}zv(W,i)})}function ou(n,i,a){return{instance:n,listener:i,currentTarget:a}}function yh(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,m=f.stateNode;f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Vs(n,a),f!=null&&l.unshift(ou(n,f,m)),f=Vs(n,i),f!=null&&l.push(ou(n,f,m))),n=n.return}return l}function po(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function jv(n,i,a,l,f){for(var m=i._reactName,v=[];a!==null&&a!==l;){var A=a,D=A.alternate,P=A.stateNode;if(A=A.tag,D!==null&&D===l)break;A!==5&&A!==26&&A!==27||P===null||(D=P,f?(P=Vs(a,m),P!=null&&v.unshift(ou(a,P,D))):f||(P=Vs(a,m),P!=null&&v.push(ou(a,P,D)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var yw=/\r\n?/g,vw=/\u0000|\uFFFD/g;function Fv(n){return(typeof n=="string"?n:""+n).replace(yw,`
`).replace(vw,"")}function Gv(n,i){return i=Fv(i),Fv(n)===i}function vh(){}function Wt(n,i,a,l,f,m){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Ln(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Ln(n,""+l);break;case"className":Ir(n,"class",l);break;case"tabIndex":Ir(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ir(n,a,l);break;case"style":Tc(n,l,m);break;case"data":if(i!=="object"){Ir(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=ui(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(i!=="input"&&Wt(n,i,"name",f.name,f,null),Wt(n,i,"formEncType",f.formEncType,f,null),Wt(n,i,"formMethod",f.formMethod,f,null),Wt(n,i,"formTarget",f.formTarget,f,null)):(Wt(n,i,"encType",f.encType,f,null),Wt(n,i,"method",f.method,f,null),Wt(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=ui(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=vh);break;case"onScroll":l!=null&&Pt("scroll",n);break;case"onScrollEnd":l!=null&&Pt("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=ui(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Pt("beforetoggle",n),Pt("toggle",n),wr(n,"popover",l);break;case"xlinkActuate":Pn(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Pn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Pn(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Pn(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Pn(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Pn(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Pn(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Pn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Pn(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":wr(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=id.get(a)||a,wr(n,a,l))}}function Mm(n,i,a,l,f,m){switch(a){case"style":Tc(n,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Ln(n,l):(typeof l=="number"||typeof l=="bigint")&&Ln(n,""+l);break;case"onScroll":l!=null&&Pt("scroll",n);break;case"onScrollEnd":l!=null&&Pt("scrollend",n);break;case"onClick":l!=null&&(n.onclick=vh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pa.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),m=n[xe]||null,m=m!=null?m[a]:null,typeof m=="function"&&n.removeEventListener(i,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break t}a in n?n[a]=l:l===!0?n.setAttribute(a,""):wr(n,a,l)}}}function Xe(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pt("error",n),Pt("load",n);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Wt(n,i,m,v,a,null)}}f&&Wt(n,i,"srcSet",a.srcSet,a,null),l&&Wt(n,i,"src",a.src,a,null);return;case"input":Pt("invalid",n);var A=m=v=f=null,D=null,P=null;for(l in a)if(a.hasOwnProperty(l)){var $=a[l];if($!=null)switch(l){case"name":f=$;break;case"type":v=$;break;case"checked":D=$;break;case"defaultChecked":P=$;break;case"value":m=$;break;case"defaultValue":A=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,i));break;default:Wt(n,i,l,$,a,null)}}Ds(n,m,A,D,P,v,f,!1),Rs(n);return;case"select":Pt("invalid",n),l=v=m=null;for(f in a)if(a.hasOwnProperty(f)&&(A=a[f],A!=null))switch(f){case"value":m=A;break;case"defaultValue":v=A;break;case"multiple":l=A;default:Wt(n,i,f,A,a,null)}i=m,a=v,n.multiple=!!l,i!=null?jt(n,!!l,i,!1):a!=null&&jt(n,!!l,a,!0);return;case"textarea":Pt("invalid",n),m=f=l=null;for(v in a)if(a.hasOwnProperty(v)&&(A=a[v],A!=null))switch(v){case"value":l=A;break;case"defaultValue":f=A;break;case"children":m=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:Wt(n,i,v,A,a,null)}Dr(n,l,f,m),Rs(n);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Wt(n,i,D,l,a,null)}return;case"dialog":Pt("cancel",n),Pt("close",n);break;case"iframe":case"object":Pt("load",n);break;case"video":case"audio":for(l=0;l<au.length;l++)Pt(au[l],n);break;case"image":Pt("error",n),Pt("load",n);break;case"details":Pt("toggle",n);break;case"embed":case"source":case"link":Pt("error",n),Pt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in a)if(a.hasOwnProperty(P)&&(l=a[P],l!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Wt(n,i,P,l,a,null)}return;default:if(bl(i)){for($ in a)a.hasOwnProperty($)&&(l=a[$],l!==void 0&&Mm(n,i,$,l,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(l=a[A],l!=null&&Wt(n,i,A,l,a,null))}function Ew(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,A=null,D=null,P=null,$=null;for(Y in a){var W=a[Y];if(a.hasOwnProperty(Y)&&W!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":D=W;default:l.hasOwnProperty(Y)||Wt(n,i,Y,null,l,W)}}for(var j in l){var Y=l[j];if(W=a[j],l.hasOwnProperty(j)&&(Y!=null||W!=null))switch(j){case"type":m=Y;break;case"name":f=Y;break;case"checked":P=Y;break;case"defaultChecked":$=Y;break;case"value":v=Y;break;case"defaultValue":A=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,i));break;default:Y!==W&&Wt(n,i,j,Y,l,W)}}Rr(n,v,A,D,P,$,m,f);return;case"select":Y=v=A=j=null;for(m in a)if(D=a[m],a.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":Y=D;default:l.hasOwnProperty(m)||Wt(n,i,m,null,l,D)}for(f in l)if(m=l[f],D=a[f],l.hasOwnProperty(f)&&(m!=null||D!=null))switch(f){case"value":j=m;break;case"defaultValue":A=m;break;case"multiple":v=m;default:m!==D&&Wt(n,i,f,m,l,D)}i=A,a=v,l=Y,j!=null?jt(n,!!a,j,!1):!!l!=!!a&&(i!=null?jt(n,!!a,i,!0):jt(n,!!a,a?[]:"",!1));return;case"textarea":Y=j=null;for(A in a)if(f=a[A],a.hasOwnProperty(A)&&f!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Wt(n,i,A,null,l,f)}for(v in l)if(f=l[v],m=a[v],l.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":j=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&Wt(n,i,v,f,l,m)}Cs(n,j,Y);return;case"option":for(var pt in a)if(j=a[pt],a.hasOwnProperty(pt)&&j!=null&&!l.hasOwnProperty(pt))switch(pt){case"selected":n.selected=!1;break;default:Wt(n,i,pt,null,l,j)}for(D in l)if(j=l[D],Y=a[D],l.hasOwnProperty(D)&&j!==Y&&(j!=null||Y!=null))switch(D){case"selected":n.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:Wt(n,i,D,j,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var St in a)j=a[St],a.hasOwnProperty(St)&&j!=null&&!l.hasOwnProperty(St)&&Wt(n,i,St,null,l,j);for(P in l)if(j=l[P],Y=a[P],l.hasOwnProperty(P)&&j!==Y&&(j!=null||Y!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(137,i));break;default:Wt(n,i,P,j,l,Y)}return;default:if(bl(i)){for(var _e in a)j=a[_e],a.hasOwnProperty(_e)&&j!==void 0&&!l.hasOwnProperty(_e)&&Mm(n,i,_e,void 0,l,j);for($ in l)j=l[$],Y=a[$],!l.hasOwnProperty($)||j===Y||j===void 0&&Y===void 0||Mm(n,i,$,j,l,Y);return}}for(var k in a)j=a[k],a.hasOwnProperty(k)&&j!=null&&!l.hasOwnProperty(k)&&Wt(n,i,k,null,l,j);for(W in l)j=l[W],Y=a[W],!l.hasOwnProperty(W)||j===Y||j==null&&Y==null||Wt(n,i,W,j,l,Y)}var Pm=null,Lm=null;function Eh(n){return n.nodeType===9?n:n.ownerDocument}function Hv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kv(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function km(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Um=null;function Tw(){var n=window.event;return n&&n.type==="popstate"?n===Um?!1:(Um=n,!0):(Um=null,!1)}var Qv=typeof setTimeout=="function"?setTimeout:void 0,Aw=typeof clearTimeout=="function"?clearTimeout:void 0,Yv=typeof Promise=="function"?Promise:void 0,bw=typeof queueMicrotask=="function"?queueMicrotask:typeof Yv<"u"?function(n){return Yv.resolve(null).then(n).catch(Sw)}:Qv;function Sw(n){setTimeout(function(){throw n})}function Bm(n,i){var a=i,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(l===0){n.removeChild(f),gu(i);return}l--}else a!=="$"&&a!=="$?"&&a!=="$!"||l++;a=f}while(a);gu(i)}function zm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":zm(a),Is(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function ww(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Ar])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=ii(n.nextSibling),n===null)break}return null}function Iw(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=ii(n.nextSibling),n===null))return null;return n}function ii(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}function $v(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}function Xv(n,i,a){switch(i=Eh(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}var $n=new Map,Zv=new Set;function Th(n){return typeof n.getRootNode=="function"?n.getRootNode():n.ownerDocument}var nr=ct.d;ct.d={f:Rw,r:Dw,D:Cw,C:Vw,L:xw,m:Nw,X:Mw,S:Ow,M:Pw};function Rw(){var n=nr.f(),i=dh();return n||i}function Dw(n){var i=Mi(n);i!==null&&i.tag===5&&i.type==="form"?Sy(i):nr.r(n)}var _o=typeof document>"u"?null:document;function Wv(n,i,a){var l=_o;if(l&&typeof i=="string"&&i){var f=me(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Zv.has(f)||(Zv.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Xe(i,"link",n),ue(i),l.head.appendChild(i)))}}function Cw(n){nr.D(n),Wv("dns-prefetch",n,null)}function Vw(n,i){nr.C(n,i),Wv("preconnect",n,i)}function xw(n,i,a){nr.L(n,i,a);var l=_o;if(l&&n&&i){var f='link[rel="preload"][as="'+me(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+me(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+me(a.imageSizes)+'"]')):f+='[href="'+me(n)+'"]';var m=f;switch(i){case"style":m=yo(n);break;case"script":m=vo(n)}$n.has(m)||(n=R({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),$n.set(m,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(lu(m))||i==="script"&&l.querySelector(uu(m))||(i=l.createElement("link"),Xe(i,"link",n),ue(i),l.head.appendChild(i)))}}function Nw(n,i){nr.m(n,i);var a=_o;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+me(l)+'"][href="'+me(n)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=vo(n)}if(!$n.has(m)&&(n=R({rel:"modulepreload",href:n},i),$n.set(m,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(uu(m)))return}l=a.createElement("link"),Xe(l,"link",n),ue(l),a.head.appendChild(l)}}}function Ow(n,i,a){nr.S(n,i,a);var l=_o;if(l&&n){var f=Sr(l).hoistableStyles,m=yo(n);i=i||"default";var v=f.get(m);if(!v){var A={loading:0,preload:null};if(v=l.querySelector(lu(m)))A.loading=5;else{n=R({rel:"stylesheet",href:n,"data-precedence":i},a),(a=$n.get(m))&&qm(n,a);var D=v=l.createElement("link");ue(D),Xe(D,"link",n),D._p=new Promise(function(P,$){D.onload=P,D.onerror=$}),D.addEventListener("load",function(){A.loading|=1}),D.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Ah(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:A},f.set(m,v)}}}function Mw(n,i){nr.X(n,i);var a=_o;if(a&&n){var l=Sr(a).hoistableScripts,f=vo(n),m=l.get(f);m||(m=a.querySelector(uu(f)),m||(n=R({src:n,async:!0},i),(i=$n.get(f))&&jm(n,i),m=a.createElement("script"),ue(m),Xe(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function Pw(n,i){nr.M(n,i);var a=_o;if(a&&n){var l=Sr(a).hoistableScripts,f=vo(n),m=l.get(f);m||(m=a.querySelector(uu(f)),m||(n=R({src:n,async:!0,type:"module"},i),(i=$n.get(f))&&jm(n,i),m=a.createElement("script"),ue(m),Xe(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function Jv(n,i,a,l){var f=(f=On.current)?Th(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=yo(a.href),a=Sr(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=yo(a.href);var m=Sr(f).hoistableStyles,v=m.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,v),(m=f.querySelector(lu(n)))&&!m._p&&(v.instance=m,v.state.loading=5),$n.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},$n.set(n,a),m||Lw(f,n,a,v.state))),i&&l===null)throw Error(r(528,""));return v}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=vo(a),a=Sr(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function yo(n){return'href="'+me(n)+'"'}function lu(n){return'link[rel="stylesheet"]['+n+"]"}function tE(n){return R({},n,{"data-precedence":n.precedence,precedence:null})}function Lw(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Xe(i,"link",a),ue(i),n.head.appendChild(i))}function vo(n){return'[src="'+me(n)+'"]'}function uu(n){return"script[async]"+n}function eE(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+me(a.href)+'"]');if(l)return i.instance=l,ue(l),l;var f=R({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),ue(l),Xe(l,"style",f),Ah(l,a.precedence,n),i.instance=l;case"stylesheet":f=yo(a.href);var m=n.querySelector(lu(f));if(m)return i.state.loading|=4,i.instance=m,ue(m),m;l=tE(a),(f=$n.get(f))&&qm(l,f),m=(n.ownerDocument||n).createElement("link"),ue(m);var v=m;return v._p=new Promise(function(A,D){v.onload=A,v.onerror=D}),Xe(m,"link",l),i.state.loading|=4,Ah(m,a.precedence,n),i.instance=m;case"script":return m=vo(a.src),(f=n.querySelector(uu(m)))?(i.instance=f,ue(f),f):(l=a,(f=$n.get(m))&&(l=R({},a),jm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),ue(f),Xe(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&!(i.state.loading&4)&&(l=i.instance,i.state.loading|=4,Ah(l,a.precedence,n));return i.instance}function Ah(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,v=0;v<l.length;v++){var A=l[v];if(A.dataset.precedence===i)m=A;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function qm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function jm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var bh=null;function nE(n,i,a){if(bh===null){var l=new Map,f=bh=new Map;f.set(a,l)}else f=bh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var m=a[f];if(!(m[Ar]||m[Ue]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(i)||"";v=n+v;var A=l.get(v);A?A.push(m):l.set(v,[m])}}return l}function iE(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function kw(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function rE(n){return!(n.type==="stylesheet"&&!(n.state.loading&3))}var cu=null;function Uw(){}function Bw(n,i,a){if(cu===null)throw Error(r(475));var l=cu;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&!(i.state.loading&4)){if(i.instance===null){var f=yo(a.href),m=n.querySelector(lu(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=Sh.bind(l),n.then(l,l)),i.state.loading|=4,i.instance=m,ue(m);return}m=n.ownerDocument||n,a=tE(a),(f=$n.get(f))&&qm(a,f),m=m.createElement("link"),ue(m);var v=m;v._p=new Promise(function(A,D){v.onload=A,v.onerror=D}),Xe(m,"link",a),i.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,n),(n=i.state.preload)&&!(i.state.loading&3)&&(l.count++,i=Sh.bind(l),n.addEventListener("load",i),n.addEventListener("error",i))}}function zw(){if(cu===null)throw Error(r(475));var n=cu;return n.stylesheets&&n.count===0&&Fm(n,n.stylesheets),0<n.count?function(i){var a=setTimeout(function(){if(n.stylesheets&&Fm(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(a)}}:null}function Sh(){if(this.count--,this.count===0){if(this.stylesheets)Fm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var wh=null;function Fm(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,wh=new Map,i.forEach(qw,n),wh=null,Sh.call(n))}function qw(n,i){if(!(i.state.loading&4)){var a=wh.get(n);if(a)var l=a.get(null);else{a=new Map,wh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}f=i.instance,v=f.getAttribute("data-precedence"),m=a.get(v)||l,m===l&&a.set(null,f),a.set(v,f),this.count++,l=Sh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var hu={$$typeof:V,Provider:null,Consumer:null,_currentValue:It,_currentValue2:It,_threadCount:0};function jw(n,i,a,l,f,m,v,A){this.tag=1,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Oa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oa(0),this.hiddenUpdates=Oa(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function sE(n,i,a,l,f,m,v,A,D,P,$,W){return n=new jw(n,i,a,v,A,D,P,W),i=1,m===!0&&(i|=24),m=Qn(3,null,null,i),n.current=m,m.stateNode=n,i=Td(),i.refCount++,n.pooledCache=i,i.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:i},em(m),n}function aE(n){return n?(n=Xa,n):Xa}function oE(n,i,a,l,f,m){f=aE(f),l.context===null?l.context=f:l.pendingContext=f,l=kr(i),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Ur(n,l,i),a!==null&&(dn(a,n,i),Yl(a,n,i))}function lE(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Gm(n,i){lE(n,i),(n=n.alternate)&&lE(n,i)}function uE(n){if(n.tag===13){var i=Vr(n,67108864);i!==null&&dn(i,n,67108864),Gm(n,67108864)}}var Ih=!0;function Fw(n,i,a,l){var f=w.T;w.T=null;var m=ct.p;try{ct.p=2,Hm(n,i,a,l)}finally{ct.p=m,w.T=f}}function Gw(n,i,a,l){var f=w.T;w.T=null;var m=ct.p;try{ct.p=8,Hm(n,i,a,l)}finally{ct.p=m,w.T=f}}function Hm(n,i,a,l){if(Ih){var f=Km(l);if(f===null)Om(n,i,l,Rh,a),hE(n,l);else if(Kw(f,n,i,a,l))l.stopPropagation();else if(hE(n,l),i&4&&-1<Hw.indexOf(n)){for(;f!==null;){var m=Mi(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Wn(m.pendingLanes);if(v!==0){var A=m;for(A.pendingLanes|=2,A.entangledLanes|=2;v;){var D=1<<31-un(v);A.entanglements[1]|=D,v&=~D}Ei(m),!(he&6)&&(ch=yn()+500,su(0))}}break;case 13:A=Vr(m,2),A!==null&&dn(A,m,2),dh(),Gm(m,2)}if(m=Km(l),m===null&&Om(n,i,l,Rh,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else Om(n,i,l,null,a)}}function Km(n){return n=Ua(n),Qm(n)}var Rh=null;function Qm(n){if(Rh=null,n=Jn(n),n!==null){var i=et(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=wt(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Rh=n,null}function cE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fc()){case Ve:return 2;case ke:return 8;case Ni:case dc:return 32;case dl:return 268435456;default:return 32}default:return 32}}var Ym=!1,Hr=null,Kr=null,Qr=null,fu=new Map,du=new Map,Yr=[],Hw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hE(n,i){switch(n){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":fu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":du.delete(i.pointerId)}}function mu(n,i,a,l,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},i!==null&&(i=Mi(i),i!==null&&uE(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function Kw(n,i,a,l,f){switch(i){case"focusin":return Hr=mu(Hr,n,i,a,l,f),!0;case"dragenter":return Kr=mu(Kr,n,i,a,l,f),!0;case"mouseover":return Qr=mu(Qr,n,i,a,l,f),!0;case"pointerover":var m=f.pointerId;return fu.set(m,mu(fu.get(m)||null,n,i,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,du.set(m,mu(du.get(m)||null,n,i,a,l,f)),!0}return!1}function fE(n){var i=Jn(n.target);if(i!==null){var a=et(i);if(a!==null){if(i=a.tag,i===13){if(i=wt(a),i!==null){n.blockedOn=i,Tr(n.priority,function(){if(a.tag===13){var l=Vn(),f=Vr(a,l);f!==null&&dn(f,a,l),Gm(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Dh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Km(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);kn=l,a.target.dispatchEvent(l),kn=null}else return i=Mi(a),i!==null&&uE(i),n.blockedOn=a,!1;i.shift()}return!0}function dE(n,i,a){Dh(n)&&a.delete(i)}function Qw(){Ym=!1,Hr!==null&&Dh(Hr)&&(Hr=null),Kr!==null&&Dh(Kr)&&(Kr=null),Qr!==null&&Dh(Qr)&&(Qr=null),fu.forEach(dE),du.forEach(dE)}function Ch(n,i){n.blockedOn===i&&(n.blockedOn=null,Ym||(Ym=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Qw)))}var Vh=null;function mE(n){Vh!==n&&(Vh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Vh===n&&(Vh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(Qm(l||a)===null)continue;break}var m=Mi(a);m!==null&&(n.splice(i,3),i-=3,kd(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function gu(n){function i(D){return Ch(D,n)}Hr!==null&&Ch(Hr,n),Kr!==null&&Ch(Kr,n),Qr!==null&&Ch(Qr,n),fu.forEach(i),du.forEach(i);for(var a=0;a<Yr.length;a++){var l=Yr[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Yr.length&&(a=Yr[0],a.blockedOn===null);)fE(a),a.blockedOn===null&&Yr.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],v=f[xe]||null;if(typeof m=="function")v||mE(a);else if(v){var A=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[xe]||null)A=v.formAction;else if(Qm(f)!==null)continue}else A=v.action;typeof A=="function"?a[l+1]=A:(a.splice(l,3),l-=3),mE(a)}}}function $m(n){this._internalRoot=n}xh.prototype.render=$m.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Vn();oE(a,l,n,i,null,null)},xh.prototype.unmount=$m.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;n.tag===0&&mo(),oE(n.current,2,null,n,null,null),dh(),i[Oi]=null}};function xh(n){this._internalRoot=n}xh.prototype.unstable_scheduleHydration=function(n){if(n){var i=yc();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Yr.length&&i!==0&&i<Yr[a].priority;a++);Yr.splice(a,0,n),a===0&&fE(n)}};var gE=t.version;if(gE!=="19.0.0")throw Error(r(527,gE,"19.0.0"));ct.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=tt(i),n=n!==null?ot(n):null,n=n===null?null:n.stateNode,n};var Yw={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:w,findFiberByHostInstance:Jn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nh.isDisabled&&Nh.supportsFiber)try{gr=Nh.inject(Yw),tn=Nh}catch{}}return _u.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",f=Ny,m=Oy,v=My,A=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(A=i.unstable_transitionCallbacks)),i=sE(n,1,!1,null,null,a,l,f,m,v,A,null),n[Oi]=i.current,Nm(n.nodeType===8?n.parentNode:n),new $m(i)},_u.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,f="",m=Ny,v=Oy,A=My,D=null,P=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks),a.formState!==void 0&&(P=a.formState)),i=sE(n,1,!0,i,a??null,l,f,m,v,A,D,P),i.context=aE(null),a=i.current,l=Vn(),f=kr(l),f.callback=null,Ur(a,f,l),i.current.lanes=l,ve(i,l),Ei(i),n[Oi]=i.current,Nm(n),new xh(i)},_u.version="19.0.0",_u}var wE;function sI(){if(wE)return Wm.exports;wE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Wm.exports=rI(),Wm.exports}var aI=sI();function oI({items:s,handleSearch:t,searchTXT:e}){return q.jsx("input",{className:"finder",autoComplete:"off",placeholder:"BUSCAR SOCIO POR APELLIDO PATERNO...",onChange:r=>t(r,s),type:"search",value:e.replace(/(^\w{1})|(\s+\w{1})/g,r=>r.toUpperCase())})}function lI({editMode:s,msg:t,error:e,setMsg:r,setFinder:o,setError:u,setFinderMsg:h,setState:d,state:g,setEdit:p,setSearchTXT:E,postSocio:T,setGetDB:S,getDB:V,updateByIdDB:G,items:H}){const Q=new Intl.DateTimeFormat("es-MX",{dateStyle:"long"}),dt=(ot=0)=>Q.format(new Date(ot)),it=ot=>{const{name:ut,value:ct}=ot.target;d({...g,[ut]:ct})},lt=ot=>{const{name:ut,value:ct}=ot.target;let It=Date.parse(ct)+252e5;d({...g,[ut]:It})},{nombreDelSocio:Tt,apellidoPaterno:ht,apellidoMaterno:yt,curp:O,numeroDelSocio:I,domicilioDelSocio:w,clase:R,calibre:N,marca:L,modelo:C,matricula:le,folio:Kt,armasCortas:rt,armasLargas:Et,fechaDeInscripcion:et}=g,wt=ot=>{ot.preventDefault(),s?(p(null),r("Editado: "+g.nombreDelSocio),G(g.idDB,g)):(g.id=Date.now(),g.toggle=!0,g.armasArr=[],r("Nuevo Socio Añadido"),T(g)),o(null),u(!1),d({nombreDelSocio:"",apellidoPaterno:"",apellidoMaterno:"",curp:"",numeroDelSocio:"",domicilioDelSocio:"",clase:"",calibre:"",marca:"",modelo:"",matricula:"",folio:"",armasCortas:"",armasLargas:"",fechaDeInscripcion:0}),E(""),h(null),setTimeout(()=>{S(!V)},700)},x=()=>{u(!1),r("BASE DE DATOS SOCIOS")},tt=()=>{u(!1),r("BASE DE DATOS SOCIOS"),window.confirm("Do you want to go out?")&&(localStorage.removeItem("userSocio"),location.reload())};return q.jsxs("form",{onSubmit:wt,className:"formStyle0",children:[q.jsxs("div",{className:"formStyle1",children:[q.jsx("label",{className:s?"":"dn",children:"Numero Registro Del Club"}),q.jsx("input",{readOnly:!0,type:"text",autoComplete:"off",placeholder:"624"}),q.jsx("label",{className:s?"":"dn",children:"Domicilio Del Club"}),q.jsx("input",{readOnly:!0,type:"text",autoComplete:"off",placeholder:"San Luis Potosi No. 158, Col. San Benito, C. P. 83190, Hermosillo, Son.",name:"domicilioDelClub"}),q.jsx("label",{className:s?"":"dn",children:"Nombre Del Socio"}),q.jsx("input",{type:"text",autoComplete:"off",placeholder:"Nombre Del Socio",name:"nombreDelSocio",onChange:it,value:Tt.replace(/(^\w{1})|(\s+\w{1})/g,ot=>ot.toUpperCase()),required:!0}),q.jsx("label",{className:s?"":"dn",children:"Apellido Paterno"}),q.jsx("input",{type:"text",autoComplete:"off",placeholder:"Apellido Paterno",name:"apellidoPaterno",onChange:it,value:ht.replace(/(^\w{1})|(\s+\w{1})/g,ot=>ot.toUpperCase()),required:!0}),q.jsx("label",{className:s?"":"dn",children:"Apellido Materno"}),q.jsx("input",{type:"text",autoComplete:"off",placeholder:"Apellido Materno",name:"apellidoMaterno",onChange:it,value:yt.replace(/(^\w{1})|(\s+\w{1})/g,ot=>ot.toUpperCase()),required:!0}),q.jsx("label",{className:s?"":"dn",children:"CURP"}),q.jsx("input",{type:"text",autoComplete:"off",placeholder:"CURP",name:"curp",onChange:it,value:O,required:!0}),q.jsx("label",{className:s?"":"dn",children:"Numero Del Socio"}),q.jsx("input",{type:"text",autoComplete:"off",placeholder:"Numero Del Socio",name:"numeroDelSocio",onChange:it,value:I}),q.jsx("label",{className:s?"":"dn",children:"Domicilio Del Socio"}),q.jsx("input",{type:"text",autoComplete:"off",placeholder:"Domicilio Del Socio",name:"domicilioDelSocio",onChange:it,value:w,required:!0}),q.jsx("label",{className:s?"":"dn",children:"Fecha de Inscripción"}),q.jsx("input",{type:"date",autoComplete:"off",placeholder:"Fecha de Inscripción",name:"fechaDeInscripcion",onChange:ot=>lt(ot)})]}),q.jsxs("div",{className:"formStyle2",children:[q.jsx("label",{className:s?"":"dn",children:"Clase"}),q.jsx("input",{type:"text",autoComplete:"off",placeholder:"Clase",name:"clase",onChange:it,value:R}),q.jsx("label",{className:s?"":"dn",children:"Calibre"}),q.jsx("input",{type:"text",autoComplete:"off",placeholder:"Calibre",name:"calibre",onChange:it,value:N}),q.jsx("label",{className:s?"":"dn",children:"Marca"}),q.jsx("input",{type:"text",autoComplete:"off",placeholder:"Marca",name:"marca",onChange:it,value:L}),q.jsx("label",{className:s?"":"dn",children:"Modelo"}),q.jsx("input",{type:"text",autoComplete:"off",placeholder:"Modelo",name:"modelo",onChange:it,value:C}),q.jsx("label",{className:s?"":"dn",children:"Matricula"}),q.jsx("input",{type:"text",autoComplete:"off",placeholder:"Matricula",name:"matricula",onChange:it,value:le}),q.jsx("label",{className:s?"":"dn",children:"Folio"}),q.jsx("input",{type:"text",autoComplete:"off",placeholder:"Folio",name:"folio",onChange:it,value:Kt}),q.jsx("label",{className:s?"":"dn",children:"Arma Corta"}),q.jsx("input",{min:"0",step:"1",max:"1",type:"number",autoComplete:"off",placeholder:"Arma Corta",name:"armasCortas",onChange:it,value:rt}),q.jsx("label",{className:s?"":"dn",children:"Arma Larga"}),q.jsx("input",{min:"0",step:"1",max:"1",type:"number",autoComplete:"off",placeholder:"Arma Larga",name:"armasLargas",onChange:it,value:Et}),q.jsx("label",{className:s?"":"dn",children:"Fecha De Inscripcion"}),q.jsx("input",{className:"fechaDeInscripcion",readOnly:!0,type:"text",value:et===0?"Fecha de Inscripción":`Inscripción: ${dt(et)}`})]}),q.jsx("br",{}),q.jsxs("button",{type:"submit",children:[" ",s?"Editar":"Guardar"," "]}),q.jsx("br",{}),q.jsx("br",{}),e?q.jsx("div",{className:"divSombra",children:q.jsxs("p",{className:"msgError",children:[" ",e,q.jsx("button",{className:"buttonClose",onClick:x,children:"✘"})]})}):"",t?q.jsx("div",{className:"divSombra",children:q.jsxs("p",{className:"msg",onClick:tt,children:[" ",t]})}):""]})}function IE({i:s,el:t,setEdit:e,setState:r,setFinder:o,setMsg:u,deleteByIdDB:h,setGetDB:d,getDB:g,updateByIdDB:p,items:E}){const T=new Intl.DateTimeFormat("es-MX",{dateStyle:"long"}),S=et=>T.format(new Date(et)),[V,G]=Ke.useState(!0),[H,Q]=Ke.useState(!0),dt=et=>{window.confirm("Quieres Borrar a este Socio")&&(G(!V),h(et.idDB),o(null),u("Eliminado: "+et.nombreDelSocio),setTimeout(()=>{d(!g)},700))},it=et=>{if(window.confirm("Quieres Cambiar Status")){let wt=[];E.map(x=>{x.id===et.id&&(x.toggle=!x.toggle,wt.push(x))}),E.find(x=>x.id===et.id).toggle?u(`Marcado como Activo: ${et.nombreDelSocio}`):u(`Marcado como Inactivo: ${et.nombreDelSocio}`),p(et.idDB,wt[0]),setTimeout(()=>{d(!g)},700)}},lt=et=>{G(!V),window.scrollTo(0,0),u("Listo para Editar"),r(et),e(et)},Tt=et=>{Q(!H),window.scrollTo(0,0)},[ht,yt]=Ke.useState({clase:"",calibre:"",marca:"",modelo:"",matricula:"",folio:"",armasCortas:"",armasLargas:""}),{clase:O,calibre:I,marca:w,modelo:R,matricula:N,folio:L,armasCortas:C,armasLargas:le}=ht,Kt=et=>{const{name:wt,value:x}=et.target;yt({...ht,[wt]:x})},rt=et=>{let wt=[];E.map(x=>{x.id===et.id&&(x.armasArr.push(ht),wt.push(x))}),yt({clase:"",calibre:"",marca:"",modelo:"",matricula:"",folio:"",armasCortas:"",armasLargas:""}),Q(!H),p(et.idDB,wt[0]),setTimeout(()=>{d(!g)},700)},Et=()=>{window.scrollTo(0,0),G(!V)};return q.jsxs("div",{className:"item",children:[q.jsxs("div",{className:t.toggle?"c-pointer":"active c-pointer",onClick:Et,children:[t.nombreDelSocio," ",t.apellidoPaterno," ",t.apellidoMaterno]}),q.jsxs("modal",{className:V?"outModal":"inModal",children:[q.jsx("button",{className:"btnCerrarModal",onClick:()=>G(!V),children:"Cerrar ✕"}),q.jsx("input",{className:"dn",type:"button",id:t.id,onClick:()=>it(t)}),q.jsxs("label",{className:"labelItemToggle",htmlFor:t.id,children:[" ",t.toggle?" Activo":"Inactivo"," "]}),q.jsxs("div",{className:"modalContent",children:[q.jsxs("div",{children:[q.jsxs("p",{className:"name",children:[t.nombreDelSocio," "]}),q.jsxs("p",{className:"name",children:[" ",t.apellidoPaterno," ",t.apellidoMaterno," "]}),q.jsx("br",{}),q.jsxs("p",{children:[q.jsx("span",{children:"CURP:"})," ",t.curp]}),q.jsxs("p",{children:[q.jsx("span",{children:"Numero:"})," ",t.numeroDelSocio]}),q.jsxs("p",{children:[q.jsx("span",{children:"Domicilio:"})," ",t.domicilioDelSocio]}),q.jsx("p",{children:q.jsx("span",{children:"Fecha de Inscripción:"})}),q.jsxs("p",{children:[q.jsx("span",{})," ",S(t.fechaDeInscripcion)]})]}),q.jsxs("div",{children:[q.jsxs("p",{children:[q.jsx("span",{children:"Clase:"})," ",t.clase]}),q.jsxs("p",{children:[q.jsx("span",{children:"Calibre:"})," ",t.calibre]}),q.jsxs("p",{children:[q.jsx("span",{children:"Marca:"})," ",t.marca]}),q.jsxs("p",{children:[q.jsx("span",{children:"Modelo:"})," ",t.modelo]}),q.jsxs("p",{children:[q.jsx("span",{children:"Matricula:"})," ",t.matricula]}),q.jsxs("p",{children:[q.jsx("span",{children:"Folio:"})," ",t.folio]}),q.jsxs("p",{children:[q.jsx("span",{children:"Arma Corta:"})," ",t.armasCortas]}),q.jsxs("p",{children:[q.jsx("span",{children:"Arma Larga:"})," ",t.armasLargas]})]}),q.jsx("div",{className:"newArmas",children:t.armasArr.map((et,wt)=>q.jsxs("div",{children:[q.jsx("br",{}),q.jsxs("p",{children:[q.jsx("span",{children:"Clase:"})," ",et.clase]}),q.jsxs("p",{children:[q.jsx("span",{children:"Calibre:"})," ",et.calibre]}),q.jsxs("p",{children:[q.jsx("span",{children:"Marca:"})," ",et.marca]}),q.jsxs("p",{children:[q.jsx("span",{children:"Modelo:"})," ",et.modelo]}),q.jsxs("p",{children:[q.jsx("span",{children:"Matricula:"})," ",et.matricula]}),q.jsxs("p",{children:[q.jsx("span",{children:"Folio:"})," ",et.folio]}),q.jsxs("p",{children:[q.jsx("span",{children:"Arma Corta:"})," ",et.armasCortas]}),q.jsxs("p",{children:[q.jsx("span",{children:"Arma Larga:"})," ",et.armasLargas]})]},wt))})]}),q.jsx("button",{onClick:()=>dt(t),children:"Borrar"}),q.jsx("button",{onClick:()=>lt(t),children:"Editar"}),q.jsx("button",{onClick:()=>Tt(),children:"Añadir Arma"})]}),q.jsxs("modal",{className:H?"outModal":"inModal",children:[q.jsx("button",{className:"btnCerrarModal",onClick:()=>Q(!H),children:"Cerrar ✕"}),q.jsx("br",{}),q.jsx("div",{className:"modalContent",children:q.jsxs("div",{className:"formStyle2",children:[q.jsx("input",{type:"text",autoComplete:"off",placeholder:"Clase",name:"clase",onChange:Kt,value:O}),q.jsx("input",{type:"text",autoComplete:"off",placeholder:"Calibre",name:"calibre",onChange:Kt,value:I}),q.jsx("input",{type:"text",autoComplete:"off",placeholder:"Marca",name:"marca",onChange:Kt,value:w}),q.jsx("input",{type:"text",autoComplete:"off",placeholder:"Modelo",name:"modelo",onChange:Kt,value:R}),q.jsx("input",{type:"text",autoComplete:"off",placeholder:"Matricula",name:"matricula",onChange:Kt,value:N}),q.jsx("input",{type:"text",autoComplete:"off",placeholder:"Folio",name:"folio",onChange:Kt,value:L}),q.jsx("input",{type:"number",autoComplete:"off",placeholder:"Arma Corta",name:"armasCortas",onChange:Kt,value:C}),q.jsx("input",{type:"number",autoComplete:"off",placeholder:"Arma Larga",name:"armasLargas",onChange:Kt,value:le})]})}),q.jsxs("button",{className:"guardarArma",onClick:()=>rt(t),children:["Guardar Arma para ",t.nombreDelSocio]})]})]},s)}var Oh={},ng={exports:{}},ig,RE;function uI(){if(RE)return ig;RE=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ig=s,ig}var rg,DE;function cI(){if(DE)return rg;DE=1;var s=uI();function t(){}function e(){}return e.resetWarningCache=t,rg=function(){function r(h,d,g,p,E,T){if(T!==s){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}r.isRequired=r;function o(){return r}var u={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:e,resetWarningCache:t};return u.PropTypes=u,u},rg}var CE;function hI(){return CE||(CE=1,ng.exports=cI()()),ng.exports}var VE;function fI(){if(VE)return Oh;VE=1,Object.defineProperty(Oh,"__esModule",{value:!0});var s=function(){function S(V,G){for(var H=0;H<G.length;H++){var Q=G[H];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(V,Q.key,Q)}}return function(V,G,H){return G&&S(V.prototype,G),H&&S(V,H),V}}(),t=bf(),e=u(t),r=hI(),o=u(r);function u(S){return S&&S.__esModule?S:{default:S}}function h(S,V){if(!(S instanceof V))throw new TypeError("Cannot call a class as a function")}function d(S,V){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:S}function g(S,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);S.prototype=Object.create(V&&V.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(S,V):S.__proto__=V)}var p={table:o.default.string.isRequired,filename:o.default.string.isRequired,sheet:o.default.string.isRequired,id:o.default.string,className:o.default.string,buttonText:o.default.string},E={id:"button-download-as-xls",className:"button-download",buttonText:"Download"},T=function(S){g(V,S);function V(G){h(this,V);var H=d(this,(V.__proto__||Object.getPrototypeOf(V)).call(this,G));return H.handleDownload=H.handleDownload.bind(H),H}return s(V,[{key:"handleDownload",value:function(){if(!document||document.getElementById(this.props.table).nodeType!==1||document.getElementById(this.props.table).nodeName!=="TABLE")return null;var H=document.getElementById(this.props.table).outerHTML,Q=String(this.props.sheet),dt=String(this.props.filename)+".xls",it="data:application/vnd.ms-excel;base64,",lt='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta charset="UTF-8"><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body>{table}</body></html>',Tt={worksheet:Q||"Worksheet",table:H};if(window.navigator.msSaveOrOpenBlob){var ht=['<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta charset="UTF-8"><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body>'+H+"</body></html>"],yt=new Blob(ht);return document.getElementById("react-html-table-to-excel").click()(function(){window.navigator.msSaveOrOpenBlob(yt,dt)}),!0}var O=window.document.createElement("a");return O.href=it+V.base64(V.format(lt,Tt)),O.download=dt,document.body.appendChild(O),O.click(),document.body.removeChild(O),!0}},{key:"render",value:function(){return e.default.createElement("button",{id:this.props.id,className:this.props.className,type:"button",onClick:this.handleDownload},this.props.buttonText)}}],[{key:"base64",value:function(H){return window.btoa(unescape(encodeURIComponent(H)))}},{key:"format",value:function(H,Q){return H.replace(/{(\w+)}/g,function(dt,it){return Q[it]})}}]),V}(t.Component);return T.propTypes=p,T.defaultProps=E,Oh.default=T,Oh}var dI=fI();const mI=Xw(dI);function gI({setError:s,setMsg:t,setFinder:e,items:r}){const o=()=>{if(s(!1),r.length===0){t(null),s("No hay Socios Escritos");return}else t(`${r.length}, Todos los Socios`);e(null)},u=()=>{s(!1),r.some(E=>E.toggle===!0)?t(`${r.filter(E=>E.toggle===!0).length} Socios Activos`):(t(null),s("No hay Socios Activos")),e(r.filter(E=>E.toggle===!0))},h=()=>{s(!1),r.some(E=>E.toggle===!1)?t(`${r.filter(E=>E.toggle===!1).length} Socios Inactivos`):(t(null),s("No hay Socios Inactivos")),e(r.filter(E=>E.toggle===!1))},d=()=>{if(s(!1),r.length===0){t(null),s("No hay Socios Escritos para Ordenar");return}else t("Socios de Mayor a Menor por Fecha");let p=[...r];e(p.sort((E,T)=>E.id-T.id))},g=()=>{if(s(!1),r.length===0){t(null),s("No hay Socios Escritos para Ordenar");return}else t("Socios de Menor a Mayor por Fecha");let p=[...r];e(p.sort((E,T)=>T.id-E.id))};return q.jsxs("div",{className:"menuButtons",children:[q.jsx("button",{onClick:o,children:"TODOS"}),q.jsx("button",{onClick:u,children:"Activos"}),q.jsx("button",{onClick:h,children:"Inactivos"}),q.jsx("button",{onClick:d,children:"Fecha Min to Max"}),q.jsx("button",{onClick:g,children:"Fecha Max to Min"}),q.jsx("button",{className:"dn",onClick:()=>downloadExcel(r),children:"Download As Excel"}),q.jsx(mI,{id:"test-table-xls-button",className:"download-table-xls-button dn",table:"table-to-xls",filename:"tablexls",sheet:"tablexls",buttonText:"Download as XLS Completo"}),q.jsx("br",{}),q.jsx("br",{})]})}function pI(){const[s,t]=Ke.useState({nameLogin:"",passwordLogin:""}),{nameLogin:e,passwordLogin:r}=s,o=g=>{const{name:p,value:E}=g.target;t({...s,[p]:E.replace(/(^\w{1})|(\s+\w{1})/g,T=>T.toUpperCase())})},[u,h]=Ke.useState(!0),d=()=>{e==="Susana"&&r==="Susy123"?(localStorage.userSocio=e,h(!1)):alert("Nombre o Contraseña incorrecto")};return Ke.useEffect(()=>{localStorage.userSocio!==void 0&&h(!1)},[]),q.jsxs("div",{className:u?" inModalLogin modalLogin":" outModalLogin modalLogin",children:[q.jsx("h2",{children:"ENTRAR"}),q.jsx("h2",{children:"Socios Data Base"}),q.jsxs("div",{className:"loginContainer",children:[q.jsx("input",{className:"Login",autoComplete:"off",placeholder:"Nombre",onChange:g=>o(g),type:"text",name:"nameLogin",value:e}),q.jsx("input",{className:"Login",autoComplete:"off",placeholder:"Contraseña",onChange:g=>o(g),type:"password",name:"passwordLogin",value:r}),q.jsx("button",{className:"LoginButton",onClick:d,children:"Entrar"})]})]})}const _I=()=>{const[s,t]=Ke.useState(null),[e,r]=Ke.useState("");return[s,t,(u,h)=>{r(u.target.value),e.length>3&&t(h.filter(d=>d.apellidoPaterno.indexOf(e)>-1))},e,r]},yI=()=>{const[s,t]=Ke.useState(null),[e,r]=Ke.useState(null),[o,u]=Ke.useState("BASE DE DATOS SOCIOS");return[o,u,t,s,e,r]},vI=()=>{};var xE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0=function(s){const t=[];let e=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?t[e++]=o:o<2048?(t[e++]=o>>6|192,t[e++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),t[e++]=o>>18|240,t[e++]=o>>12&63|128,t[e++]=o>>6&63|128,t[e++]=o&63|128):(t[e++]=o>>12|224,t[e++]=o>>6&63|128,t[e++]=o&63|128)}return t},EI=function(s){const t=[];let e=0,r=0;for(;e<s.length;){const o=s[e++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[e++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[e++],h=s[e++],d=s[e++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|d&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[e++],h=s[e++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return t.join("")},g0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,d=h?s[o+1]:0,g=o+2<s.length,p=g?s[o+2]:0,E=u>>2,T=(u&3)<<4|d>>4;let S=(d&15)<<2|p>>6,V=p&63;g||(V=64,h||(S=64)),r.push(e[E],e[T],e[S],e[V])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(m0(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):EI(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=e[s.charAt(o++)],d=o<s.length?e[s.charAt(o)]:0;++o;const p=o<s.length?e[s.charAt(o)]:64;++o;const T=o<s.length?e[s.charAt(o)]:64;if(++o,u==null||d==null||p==null||T==null)throw new TI;const S=u<<2|d>>4;if(r.push(S),p!==64){const V=d<<4&240|p>>2;if(r.push(V),T!==64){const G=p<<6&192|T;r.push(G)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class TI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AI=function(s){const t=m0(s);return g0.encodeByteArray(t,!0)},Wh=function(s){return AI(s).replace(/\./g,"")},p0=function(s){try{return g0.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Jh(s,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const e=t;return new Date(e.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return t}for(const e in t)!t.hasOwnProperty(e)||!bI(e)||(s[e]=Jh(s[e],t[e]));return s}function bI(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI=()=>_0().__FIREBASE_DEFAULTS__,wI=()=>{if(typeof process>"u"||typeof xE>"u")return;const s=xE.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},II=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&p0(s[1]);return t&&JSON.parse(t)},Zg=()=>{try{return vI()||SI()||wI()||II()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},RI=s=>{var t,e;return(e=(t=Zg())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[s]},DI=s=>{const t=RI(s);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},y0=()=>{var s;return(s=Zg())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Wh(JSON.stringify(e)),Wh(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xI(){var s;const t=(s=Zg())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NI(){return typeof window<"u"||v0()}function v0(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function E0(){return!xI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T0(){try{return typeof indexedDB=="object"}catch{return!1}}function OI(){return new Promise((s,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),e||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{e=!1},o.onerror=()=>{var u;t(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="FirebaseError";class Sa extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=MI,Object.setPrototypeOf(this,Sa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sf.prototype.create)}}class Sf{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},o=`${this.service}/${t}`,u=this.errors[t],h=u?PI(u,r):"Error",d=`${this.serviceName}: ${h} (${o}).`;return new Sa(o,d,r)}}function PI(s,t){return s.replace(LI,(e,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const LI=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function Oo(s,t){if(s===t)return!0;const e=Object.keys(s),r=Object.keys(t);for(const o of e){if(!r.includes(o))return!1;const u=s[o],h=t[o];if(OE(u)&&OE(h)){if(!Oo(u,h))return!1}else if(u!==h)return!1}for(const o of r)if(!e.includes(o))return!1;return!0}function OE(s){return s!==null&&typeof s=="object"}function kI(s,t){const e=new UI(s,t);return e.subscribe.bind(e)}class UI{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let o;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");BI(t,["next","error","complete"])?o=t:o={next:t,error:e,complete:r},o.next===void 0&&(o.next=sg),o.error===void 0&&(o.error=sg),o.complete===void 0&&(o.complete=sg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BI(s,t){if(typeof s!="object"||s===null)return!1;for(const e of t)if(e in s&&typeof s[e]=="function")return!0;return!1}function sg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(s){return s&&s._delegate?s._delegate:s}class ma{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new CI;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:e});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(jI(t))try{this.getOrInitializeService({instanceIdentifier:na})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(e);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=na){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=na){return this.instances.has(t)}getOptions(t=na){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[u,h]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(u);r===d&&h.resolve(o)}return o}onInit(t,e){var r;const o=this.normalizeInstanceIdentifier(e),u=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;u.add(t),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&t(h,o),()=>{u.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const o of r)try{o(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qI(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=na){return this.component?this.component.multipleInstances?t:na:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qI(s){return s===na?void 0:s}function jI(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new zI(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg=[];var Lt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Lt||(Lt={}));const b0={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},FI=Lt.INFO,GI={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},HI=(s,t,...e)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),o=GI[t];if(o)console[o](`[${r}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Jg{constructor(t){this.name=t,this._logLevel=FI,this._logHandler=HI,this._userLogHandler=null,Wg.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Lt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?b0[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...t),this._logHandler(this,Lt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...t),this._logHandler(this,Lt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...t),this._logHandler(this,Lt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...t),this._logHandler(this,Lt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...t),this._logHandler(this,Lt.ERROR,...t)}}function KI(s){Wg.forEach(t=>{t.setLogLevel(s)})}function QI(s,t){for(const e of Wg){let r=null;t&&t.level&&(r=b0[t.level]),s===null?e.userLogHandler=null:e.userLogHandler=(o,u,...h)=>{const d=h.map(g=>{if(g==null)return null;if(typeof g=="string")return g;if(typeof g=="number"||typeof g=="boolean")return g.toString();if(g instanceof Error)return g.message;try{return JSON.stringify(g)}catch{return null}}).filter(g=>g).join(" ");u>=(r??o.logLevel)&&s({level:Lt[u].toLowerCase(),message:d,args:h,type:o.name})}}}const YI=(s,t)=>t.some(e=>s instanceof e);let ME,PE;function $I(){return ME||(ME=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XI(){return PE||(PE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const S0=new WeakMap,yg=new WeakMap,w0=new WeakMap,ag=new WeakMap,tp=new WeakMap;function ZI(s){const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{e(is(s.result)),o()},h=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return t.then(e=>{e instanceof IDBCursor&&S0.set(e,s)}).catch(()=>{}),tp.set(t,s),t}function WI(s){if(yg.has(s))return;const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{e(),o()},h=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});yg.set(s,t)}let vg={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return yg.get(s);if(t==="objectStoreNames")return s.objectStoreNames||w0.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return is(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function JI(s){vg=s(vg)}function tR(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=s.call(og(this),t,...e);return w0.set(r,t.sort?t.sort():[t]),is(r)}:XI().includes(s)?function(...t){return s.apply(og(this),t),is(S0.get(this))}:function(...t){return is(s.apply(og(this),t))}}function eR(s){return typeof s=="function"?tR(s):(s instanceof IDBTransaction&&WI(s),YI(s,$I())?new Proxy(s,vg):s)}function is(s){if(s instanceof IDBRequest)return ZI(s);if(ag.has(s))return ag.get(s);const t=eR(s);return t!==s&&(ag.set(s,t),tp.set(t,s)),t}const og=s=>tp.get(s);function nR(s,t,{blocked:e,upgrade:r,blocking:o,terminated:u}={}){const h=indexedDB.open(s,t),d=is(h);return r&&h.addEventListener("upgradeneeded",g=>{r(is(h.result),g.oldVersion,g.newVersion,is(h.transaction),g)}),e&&h.addEventListener("blocked",g=>e(g.oldVersion,g.newVersion,g)),d.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const iR=["get","getKey","getAll","getAllKeys","count"],rR=["put","add","delete","clear"],lg=new Map;function LE(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(lg.get(t))return lg.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,o=rR.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(o||iR.includes(e)))return;const u=async function(h,...d){const g=this.transaction(h,o?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[e](...d),o&&g.done]))[0]};return lg.set(t,u),u}JI(s=>({...s,get:(t,e,r)=>LE(t,e)||s.get(t,e,r),has:(t,e)=>!!LE(t,e)||s.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(aR(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function aR(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ef="@firebase/app",Eg="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=new Jg("@firebase/app"),oR="@firebase/app-compat",lR="@firebase/analytics-compat",uR="@firebase/analytics",cR="@firebase/app-check-compat",hR="@firebase/app-check",fR="@firebase/auth",dR="@firebase/auth-compat",mR="@firebase/database",gR="@firebase/data-connect",pR="@firebase/database-compat",_R="@firebase/functions",yR="@firebase/functions-compat",vR="@firebase/installations",ER="@firebase/installations-compat",TR="@firebase/messaging",AR="@firebase/messaging-compat",bR="@firebase/performance",SR="@firebase/performance-compat",wR="@firebase/remote-config",IR="@firebase/remote-config-compat",RR="@firebase/storage",DR="@firebase/storage-compat",CR="@firebase/firestore",VR="@firebase/vertexai",xR="@firebase/firestore-compat",NR="firebase",OR="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="[DEFAULT]",MR={[ef]:"fire-core",[oR]:"fire-core-compat",[uR]:"fire-analytics",[lR]:"fire-analytics-compat",[hR]:"fire-app-check",[cR]:"fire-app-check-compat",[fR]:"fire-auth",[dR]:"fire-auth-compat",[mR]:"fire-rtdb",[gR]:"fire-data-connect",[pR]:"fire-rtdb-compat",[_R]:"fire-fn",[yR]:"fire-fn-compat",[vR]:"fire-iid",[ER]:"fire-iid-compat",[TR]:"fire-fcm",[AR]:"fire-fcm-compat",[bR]:"fire-perf",[SR]:"fire-perf-compat",[wR]:"fire-rc",[IR]:"fire-rc-compat",[RR]:"fire-gcs",[DR]:"fire-gcs-compat",[CR]:"fire-fst",[xR]:"fire-fst-compat",[VR]:"fire-vertex","fire-js":"fire-js",[NR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=new Map,Mo=new Map,Po=new Map;function Mu(s,t){try{s.container.addComponent(t)}catch(e){sr.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function I0(s,t){s.container.addOrOverwriteComponent(t)}function Lo(s){const t=s.name;if(Po.has(t))return sr.debug(`There were multiple attempts to register component ${t}.`),!1;Po.set(t,s);for(const e of ls.values())Mu(e,s);for(const e of Mo.values())Mu(e,s);return!0}function ep(s,t){const e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}function PR(s,t,e=os){ep(s,t).clearInstance(e)}function R0(s){return s.options!==void 0}function D0(s){return s==null?!1:s.settings!==void 0}function LR(){Po.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zn=new Sf("app","Firebase",kR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let C0=class{constructor(t,e,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Zn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(s,t){const e=p0(s.split(".")[1]);if(e===null){console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`);return}if(JSON.parse(e).exp===void 0){console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`);return}const o=JSON.parse(e).exp*1e3,u=new Date().getTime();o-u<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`)}class UR extends C0{constructor(t,e,r,o){const u=e.automaticDataCollectionEnabled!==void 0?e.automaticDataCollectionEnabled:!1,h={name:r,automaticDataCollectionEnabled:u};if(t.apiKey!==void 0)super(t,h,o);else{const d=t;super(d.options,h,o)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:u},e),this._serverConfig.authIdToken&&kE(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&kE(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,e.releaseOnDeref=void 0,rr(ef,Eg,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(t){this.isDeleted||(this._refCount++,t!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(t,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){rp(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Zn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np=OR;function ip(s,t={}){let e=s;typeof t!="object"&&(t={name:t});const r=Object.assign({name:os,automaticDataCollectionEnabled:!1},t),o=r.name;if(typeof o!="string"||!o)throw Zn.create("bad-app-name",{appName:String(o)});if(e||(e=y0()),!e)throw Zn.create("no-options");const u=ls.get(o);if(u){if(Oo(e,u.options)&&Oo(r,u.config))return u;throw Zn.create("duplicate-app",{appName:o})}const h=new A0(o);for(const g of Po.values())h.addComponent(g);const d=new C0(e,r,h);return ls.set(o,d),d}function BR(s,t){if(NI()&&!v0())throw Zn.create("invalid-server-app-environment");t.automaticDataCollectionEnabled===void 0&&(t.automaticDataCollectionEnabled=!1);let e;R0(s)?e=s.options:e=s;const r=Object.assign(Object.assign({},t),e);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const o=p=>[...p].reduce((E,T)=>Math.imul(31,E)+T.charCodeAt(0)|0,0);if(t.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Zn.create("finalization-registry-not-supported",{});const u=""+o(JSON.stringify(r)),h=Mo.get(u);if(h)return h.incRefCount(t.releaseOnDeref),h;const d=new A0(u);for(const p of Po.values())d.addComponent(p);const g=new UR(e,t,u,d);return Mo.set(u,g),g}function V0(s=os){const t=ls.get(s);if(!t&&s===os&&y0())return ip();if(!t)throw Zn.create("no-app",{appName:s});return t}function zR(){return Array.from(ls.values())}async function rp(s){let t=!1;const e=s.name;ls.has(e)?(t=!0,ls.delete(e)):Mo.has(e)&&s.decRefCount()<=0&&(Mo.delete(e),t=!0),t&&(await Promise.all(s.container.getProviders().map(r=>r.delete())),s.isDeleted=!0)}function rr(s,t,e){var r;let o=(r=MR[s])!==null&&r!==void 0?r:s;e&&(o+=`-${e}`);const u=o.match(/\s|\//),h=t.match(/\s|\//);if(u||h){const d=[`Unable to register library "${o}" with version "${t}":`];u&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&d.push("and"),h&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),sr.warn(d.join(" "));return}Lo(new ma(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}function x0(s,t){if(s!==null&&typeof s!="function")throw Zn.create("invalid-log-argument");QI(s,t)}function N0(s){KI(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="firebase-heartbeat-database",jR=1,Pu="firebase-heartbeat-store";let ug=null;function O0(){return ug||(ug=nR(qR,jR,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Pu)}catch(e){console.warn(e)}}}}).catch(s=>{throw Zn.create("idb-open",{originalErrorMessage:s.message})})),ug}async function FR(s){try{const e=(await O0()).transaction(Pu),r=await e.objectStore(Pu).get(M0(s));return await e.done,r}catch(t){if(t instanceof Sa)sr.warn(t.message);else{const e=Zn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});sr.warn(e.message)}}}async function UE(s,t){try{const r=(await O0()).transaction(Pu,"readwrite");await r.objectStore(Pu).put(t,M0(s)),await r.done}catch(e){if(e instanceof Sa)sr.warn(e.message);else{const r=Zn.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});sr.warn(r.message)}}}function M0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=1024,HR=30;class KR{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new YR(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=BE();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>HR){const h=$R(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){sr.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=BE(),{heartbeatsToSend:r,unsentEntries:o}=QR(this._heartbeatsCache.heartbeats),u=Wh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(e){return sr.warn(e),""}}}function BE(){return new Date().toISOString().substring(0,10)}function QR(s,t=GR){const e=[];let r=s.slice();for(const o of s){const u=e.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),zE(e)>t){u.dates.pop();break}}else if(e.push({agent:o.agent,dates:[o.date]}),zE(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class YR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return T0()?OI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await FR(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const o=await this.read();return UE(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const o=await this.read();return UE(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function zE(s){return Wh(JSON.stringify({version:2,heartbeats:s})).length}function $R(s){if(s.length===0)return-1;let t=0,e=s[0].date;for(let r=1;r<s.length;r++)s[r].date<e&&(e=s[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(s){Lo(new ma("platform-logger",t=>new sR(t),"PRIVATE")),Lo(new ma("heartbeat",t=>new KR(t),"PRIVATE")),rr(ef,Eg,s),rr(ef,Eg,"esm2017"),rr("fire-js","")}XR("");const ZR=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Sa,SDK_VERSION:np,_DEFAULT_ENTRY_NAME:os,_addComponent:Mu,_addOrOverwriteComponent:I0,_apps:ls,_clearComponents:LR,_components:Po,_getProvider:ep,_isFirebaseApp:R0,_isFirebaseServerApp:D0,_registerComponent:Lo,_removeServiceInstance:PR,_serverApps:Mo,deleteApp:rp,getApp:V0,getApps:zR,initializeApp:ip,initializeServerApp:BR,onLog:x0,registerVersion:rr,setLogLevel:N0},Symbol.toStringTag,{value:"Module"}));var qE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rs,P0;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,I){function w(){}w.prototype=I.prototype,O.D=I.prototype,O.prototype=new w,O.prototype.constructor=O,O.C=function(R,N,L){for(var C=Array(arguments.length-2),le=2;le<arguments.length;le++)C[le-2]=arguments[le];return I.prototype[N].apply(R,C)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,I,w){w||(w=0);var R=Array(16);if(typeof I=="string")for(var N=0;16>N;++N)R[N]=I.charCodeAt(w++)|I.charCodeAt(w++)<<8|I.charCodeAt(w++)<<16|I.charCodeAt(w++)<<24;else for(N=0;16>N;++N)R[N]=I[w++]|I[w++]<<8|I[w++]<<16|I[w++]<<24;I=O.g[0],w=O.g[1],N=O.g[2];var L=O.g[3],C=I+(L^w&(N^L))+R[0]+3614090360&4294967295;I=w+(C<<7&4294967295|C>>>25),C=L+(N^I&(w^N))+R[1]+3905402710&4294967295,L=I+(C<<12&4294967295|C>>>20),C=N+(w^L&(I^w))+R[2]+606105819&4294967295,N=L+(C<<17&4294967295|C>>>15),C=w+(I^N&(L^I))+R[3]+3250441966&4294967295,w=N+(C<<22&4294967295|C>>>10),C=I+(L^w&(N^L))+R[4]+4118548399&4294967295,I=w+(C<<7&4294967295|C>>>25),C=L+(N^I&(w^N))+R[5]+1200080426&4294967295,L=I+(C<<12&4294967295|C>>>20),C=N+(w^L&(I^w))+R[6]+2821735955&4294967295,N=L+(C<<17&4294967295|C>>>15),C=w+(I^N&(L^I))+R[7]+4249261313&4294967295,w=N+(C<<22&4294967295|C>>>10),C=I+(L^w&(N^L))+R[8]+1770035416&4294967295,I=w+(C<<7&4294967295|C>>>25),C=L+(N^I&(w^N))+R[9]+2336552879&4294967295,L=I+(C<<12&4294967295|C>>>20),C=N+(w^L&(I^w))+R[10]+4294925233&4294967295,N=L+(C<<17&4294967295|C>>>15),C=w+(I^N&(L^I))+R[11]+2304563134&4294967295,w=N+(C<<22&4294967295|C>>>10),C=I+(L^w&(N^L))+R[12]+1804603682&4294967295,I=w+(C<<7&4294967295|C>>>25),C=L+(N^I&(w^N))+R[13]+4254626195&4294967295,L=I+(C<<12&4294967295|C>>>20),C=N+(w^L&(I^w))+R[14]+2792965006&4294967295,N=L+(C<<17&4294967295|C>>>15),C=w+(I^N&(L^I))+R[15]+1236535329&4294967295,w=N+(C<<22&4294967295|C>>>10),C=I+(N^L&(w^N))+R[1]+4129170786&4294967295,I=w+(C<<5&4294967295|C>>>27),C=L+(w^N&(I^w))+R[6]+3225465664&4294967295,L=I+(C<<9&4294967295|C>>>23),C=N+(I^w&(L^I))+R[11]+643717713&4294967295,N=L+(C<<14&4294967295|C>>>18),C=w+(L^I&(N^L))+R[0]+3921069994&4294967295,w=N+(C<<20&4294967295|C>>>12),C=I+(N^L&(w^N))+R[5]+3593408605&4294967295,I=w+(C<<5&4294967295|C>>>27),C=L+(w^N&(I^w))+R[10]+38016083&4294967295,L=I+(C<<9&4294967295|C>>>23),C=N+(I^w&(L^I))+R[15]+3634488961&4294967295,N=L+(C<<14&4294967295|C>>>18),C=w+(L^I&(N^L))+R[4]+3889429448&4294967295,w=N+(C<<20&4294967295|C>>>12),C=I+(N^L&(w^N))+R[9]+568446438&4294967295,I=w+(C<<5&4294967295|C>>>27),C=L+(w^N&(I^w))+R[14]+3275163606&4294967295,L=I+(C<<9&4294967295|C>>>23),C=N+(I^w&(L^I))+R[3]+4107603335&4294967295,N=L+(C<<14&4294967295|C>>>18),C=w+(L^I&(N^L))+R[8]+1163531501&4294967295,w=N+(C<<20&4294967295|C>>>12),C=I+(N^L&(w^N))+R[13]+2850285829&4294967295,I=w+(C<<5&4294967295|C>>>27),C=L+(w^N&(I^w))+R[2]+4243563512&4294967295,L=I+(C<<9&4294967295|C>>>23),C=N+(I^w&(L^I))+R[7]+1735328473&4294967295,N=L+(C<<14&4294967295|C>>>18),C=w+(L^I&(N^L))+R[12]+2368359562&4294967295,w=N+(C<<20&4294967295|C>>>12),C=I+(w^N^L)+R[5]+4294588738&4294967295,I=w+(C<<4&4294967295|C>>>28),C=L+(I^w^N)+R[8]+2272392833&4294967295,L=I+(C<<11&4294967295|C>>>21),C=N+(L^I^w)+R[11]+1839030562&4294967295,N=L+(C<<16&4294967295|C>>>16),C=w+(N^L^I)+R[14]+4259657740&4294967295,w=N+(C<<23&4294967295|C>>>9),C=I+(w^N^L)+R[1]+2763975236&4294967295,I=w+(C<<4&4294967295|C>>>28),C=L+(I^w^N)+R[4]+1272893353&4294967295,L=I+(C<<11&4294967295|C>>>21),C=N+(L^I^w)+R[7]+4139469664&4294967295,N=L+(C<<16&4294967295|C>>>16),C=w+(N^L^I)+R[10]+3200236656&4294967295,w=N+(C<<23&4294967295|C>>>9),C=I+(w^N^L)+R[13]+681279174&4294967295,I=w+(C<<4&4294967295|C>>>28),C=L+(I^w^N)+R[0]+3936430074&4294967295,L=I+(C<<11&4294967295|C>>>21),C=N+(L^I^w)+R[3]+3572445317&4294967295,N=L+(C<<16&4294967295|C>>>16),C=w+(N^L^I)+R[6]+76029189&4294967295,w=N+(C<<23&4294967295|C>>>9),C=I+(w^N^L)+R[9]+3654602809&4294967295,I=w+(C<<4&4294967295|C>>>28),C=L+(I^w^N)+R[12]+3873151461&4294967295,L=I+(C<<11&4294967295|C>>>21),C=N+(L^I^w)+R[15]+530742520&4294967295,N=L+(C<<16&4294967295|C>>>16),C=w+(N^L^I)+R[2]+3299628645&4294967295,w=N+(C<<23&4294967295|C>>>9),C=I+(N^(w|~L))+R[0]+4096336452&4294967295,I=w+(C<<6&4294967295|C>>>26),C=L+(w^(I|~N))+R[7]+1126891415&4294967295,L=I+(C<<10&4294967295|C>>>22),C=N+(I^(L|~w))+R[14]+2878612391&4294967295,N=L+(C<<15&4294967295|C>>>17),C=w+(L^(N|~I))+R[5]+4237533241&4294967295,w=N+(C<<21&4294967295|C>>>11),C=I+(N^(w|~L))+R[12]+1700485571&4294967295,I=w+(C<<6&4294967295|C>>>26),C=L+(w^(I|~N))+R[3]+2399980690&4294967295,L=I+(C<<10&4294967295|C>>>22),C=N+(I^(L|~w))+R[10]+4293915773&4294967295,N=L+(C<<15&4294967295|C>>>17),C=w+(L^(N|~I))+R[1]+2240044497&4294967295,w=N+(C<<21&4294967295|C>>>11),C=I+(N^(w|~L))+R[8]+1873313359&4294967295,I=w+(C<<6&4294967295|C>>>26),C=L+(w^(I|~N))+R[15]+4264355552&4294967295,L=I+(C<<10&4294967295|C>>>22),C=N+(I^(L|~w))+R[6]+2734768916&4294967295,N=L+(C<<15&4294967295|C>>>17),C=w+(L^(N|~I))+R[13]+1309151649&4294967295,w=N+(C<<21&4294967295|C>>>11),C=I+(N^(w|~L))+R[4]+4149444226&4294967295,I=w+(C<<6&4294967295|C>>>26),C=L+(w^(I|~N))+R[11]+3174756917&4294967295,L=I+(C<<10&4294967295|C>>>22),C=N+(I^(L|~w))+R[2]+718787259&4294967295,N=L+(C<<15&4294967295|C>>>17),C=w+(L^(N|~I))+R[9]+3951481745&4294967295,O.g[0]=O.g[0]+I&4294967295,O.g[1]=O.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,O.g[2]=O.g[2]+N&4294967295,O.g[3]=O.g[3]+L&4294967295}r.prototype.u=function(O,I){I===void 0&&(I=O.length);for(var w=I-this.blockSize,R=this.B,N=this.h,L=0;L<I;){if(N==0)for(;L<=w;)o(this,O,L),L+=this.blockSize;if(typeof O=="string"){for(;L<I;)if(R[N++]=O.charCodeAt(L++),N==this.blockSize){o(this,R),N=0;break}}else for(;L<I;)if(R[N++]=O[L++],N==this.blockSize){o(this,R),N=0;break}}this.h=N,this.o+=I},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var I=1;I<O.length-8;++I)O[I]=0;var w=8*this.o;for(I=O.length-8;I<O.length;++I)O[I]=w&255,w/=256;for(this.u(O),O=Array(16),I=w=0;4>I;++I)for(var R=0;32>R;R+=8)O[w++]=this.g[I]>>>R&255;return O};function u(O,I){var w=d;return Object.prototype.hasOwnProperty.call(w,O)?w[O]:w[O]=I(O)}function h(O,I){this.h=I;for(var w=[],R=!0,N=O.length-1;0<=N;N--){var L=O[N]|0;R&&L==I||(w[N]=L,R=!1)}this.g=w}var d={};function g(O){return-128<=O&&128>O?u(O,function(I){return new h([I|0],0>I?-1:0)}):new h([O|0],0>O?-1:0)}function p(O){if(isNaN(O)||!isFinite(O))return T;if(0>O)return Q(p(-O));for(var I=[],w=1,R=0;O>=w;R++)I[R]=O/w|0,w*=4294967296;return new h(I,0)}function E(O,I){if(O.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(O.charAt(0)=="-")return Q(E(O.substring(1),I));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=p(Math.pow(I,8)),R=T,N=0;N<O.length;N+=8){var L=Math.min(8,O.length-N),C=parseInt(O.substring(N,N+L),I);8>L?(L=p(Math.pow(I,L)),R=R.j(L).add(p(C))):(R=R.j(w),R=R.add(p(C)))}return R}var T=g(0),S=g(1),V=g(16777216);s=h.prototype,s.m=function(){if(H(this))return-Q(this).m();for(var O=0,I=1,w=0;w<this.g.length;w++){var R=this.i(w);O+=(0<=R?R:4294967296+R)*I,I*=4294967296}return O},s.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(G(this))return"0";if(H(this))return"-"+Q(this).toString(O);for(var I=p(Math.pow(O,6)),w=this,R="";;){var N=Tt(w,I).g;w=dt(w,N.j(I));var L=((0<w.g.length?w.g[0]:w.h)>>>0).toString(O);if(w=N,G(w))return L+R;for(;6>L.length;)L="0"+L;R=L+R}},s.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function G(O){if(O.h!=0)return!1;for(var I=0;I<O.g.length;I++)if(O.g[I]!=0)return!1;return!0}function H(O){return O.h==-1}s.l=function(O){return O=dt(this,O),H(O)?-1:G(O)?0:1};function Q(O){for(var I=O.g.length,w=[],R=0;R<I;R++)w[R]=~O.g[R];return new h(w,~O.h).add(S)}s.abs=function(){return H(this)?Q(this):this},s.add=function(O){for(var I=Math.max(this.g.length,O.g.length),w=[],R=0,N=0;N<=I;N++){var L=R+(this.i(N)&65535)+(O.i(N)&65535),C=(L>>>16)+(this.i(N)>>>16)+(O.i(N)>>>16);R=C>>>16,L&=65535,C&=65535,w[N]=C<<16|L}return new h(w,w[w.length-1]&-2147483648?-1:0)};function dt(O,I){return O.add(Q(I))}s.j=function(O){if(G(this)||G(O))return T;if(H(this))return H(O)?Q(this).j(Q(O)):Q(Q(this).j(O));if(H(O))return Q(this.j(Q(O)));if(0>this.l(V)&&0>O.l(V))return p(this.m()*O.m());for(var I=this.g.length+O.g.length,w=[],R=0;R<2*I;R++)w[R]=0;for(R=0;R<this.g.length;R++)for(var N=0;N<O.g.length;N++){var L=this.i(R)>>>16,C=this.i(R)&65535,le=O.i(N)>>>16,Kt=O.i(N)&65535;w[2*R+2*N]+=C*Kt,it(w,2*R+2*N),w[2*R+2*N+1]+=L*Kt,it(w,2*R+2*N+1),w[2*R+2*N+1]+=C*le,it(w,2*R+2*N+1),w[2*R+2*N+2]+=L*le,it(w,2*R+2*N+2)}for(R=0;R<I;R++)w[R]=w[2*R+1]<<16|w[2*R];for(R=I;R<2*I;R++)w[R]=0;return new h(w,0)};function it(O,I){for(;(O[I]&65535)!=O[I];)O[I+1]+=O[I]>>>16,O[I]&=65535,I++}function lt(O,I){this.g=O,this.h=I}function Tt(O,I){if(G(I))throw Error("division by zero");if(G(O))return new lt(T,T);if(H(O))return I=Tt(Q(O),I),new lt(Q(I.g),Q(I.h));if(H(I))return I=Tt(O,Q(I)),new lt(Q(I.g),I.h);if(30<O.g.length){if(H(O)||H(I))throw Error("slowDivide_ only works with positive integers.");for(var w=S,R=I;0>=R.l(O);)w=ht(w),R=ht(R);var N=yt(w,1),L=yt(R,1);for(R=yt(R,2),w=yt(w,2);!G(R);){var C=L.add(R);0>=C.l(O)&&(N=N.add(w),L=C),R=yt(R,1),w=yt(w,1)}return I=dt(O,N.j(I)),new lt(N,I)}for(N=T;0<=O.l(I);){for(w=Math.max(1,Math.floor(O.m()/I.m())),R=Math.ceil(Math.log(w)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),L=p(w),C=L.j(I);H(C)||0<C.l(O);)w-=R,L=p(w),C=L.j(I);G(L)&&(L=S),N=N.add(L),O=dt(O,C)}return new lt(N,O)}s.A=function(O){return Tt(this,O).h},s.and=function(O){for(var I=Math.max(this.g.length,O.g.length),w=[],R=0;R<I;R++)w[R]=this.i(R)&O.i(R);return new h(w,this.h&O.h)},s.or=function(O){for(var I=Math.max(this.g.length,O.g.length),w=[],R=0;R<I;R++)w[R]=this.i(R)|O.i(R);return new h(w,this.h|O.h)},s.xor=function(O){for(var I=Math.max(this.g.length,O.g.length),w=[],R=0;R<I;R++)w[R]=this.i(R)^O.i(R);return new h(w,this.h^O.h)};function ht(O){for(var I=O.g.length+1,w=[],R=0;R<I;R++)w[R]=O.i(R)<<1|O.i(R-1)>>>31;return new h(w,O.h)}function yt(O,I){var w=I>>5;I%=32;for(var R=O.g.length-w,N=[],L=0;L<R;L++)N[L]=0<I?O.i(L+w)>>>I|O.i(L+w+1)<<32-I:O.i(L+w);return new h(N,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,P0=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=p,h.fromString=E,rs=h}).apply(typeof qE<"u"?qE:typeof self<"u"?self:typeof window<"u"?window:{});var Mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var L0,bu,k0,jh,Tg,U0,B0,z0;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,_,y){return c==Array.prototype||c==Object.prototype||(c[_]=y.value),c};function e(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mh=="object"&&Mh];for(var _=0;_<c.length;++_){var y=c[_];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=e(this);function o(c,_){if(_)t:{var y=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var U=c[b];if(!(U in y))break t;y=y[U]}c=c[c.length-1],b=y[c],_=_(b),_!=b&&_!=null&&t(y,c,{configurable:!0,writable:!0,value:_})}}function u(c,_){c instanceof String&&(c+="");var y=0,b=!1,U={next:function(){if(!b&&y<c.length){var K=y++;return{value:_(K,c[K]),done:!1}}return b=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(c){return c||function(){return u(this,function(_,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},d=this||self;function g(c){var _=typeof c;return _=_!="object"?_:c?Array.isArray(c)?"array":_:"null",_=="array"||_=="object"&&typeof c.length=="number"}function p(c){var _=typeof c;return _=="object"&&c!=null||_=="function"}function E(c,_,y){return c.call.apply(c.bind,arguments)}function T(c,_,y){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,b),c.apply(_,U)}}return function(){return c.apply(_,arguments)}}function S(c,_,y){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:T,S.apply(null,arguments)}function V(c,_){var y=Array.prototype.slice.call(arguments,1);return function(){var b=y.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function G(c,_){function y(){}y.prototype=_.prototype,c.aa=_.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(b,U,K){for(var nt=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)nt[kt-2]=arguments[kt];return _.prototype[U].apply(b,nt)}}function H(c){const _=c.length;if(0<_){const y=Array(_);for(let b=0;b<_;b++)y[b]=c[b];return y}return[]}function Q(c,_){for(let y=1;y<arguments.length;y++){const b=arguments[y];if(g(b)){const U=c.length||0,K=b.length||0;c.length=U+K;for(let nt=0;nt<K;nt++)c[U+nt]=b[nt]}else c.push(b)}}class dt{constructor(_,y){this.i=_,this.j=y,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function it(c){return/^[\s\xa0]*$/.test(c)}function lt(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function Tt(c){return Tt[" "](c),c}Tt[" "]=function(){};var ht=lt().indexOf("Gecko")!=-1&&!(lt().toLowerCase().indexOf("webkit")!=-1&&lt().indexOf("Edge")==-1)&&!(lt().indexOf("Trident")!=-1||lt().indexOf("MSIE")!=-1)&&lt().indexOf("Edge")==-1;function yt(c,_,y){for(const b in c)_.call(y,c[b],b,c)}function O(c,_){for(const y in c)_.call(void 0,c[y],y,c)}function I(c){const _={};for(const y in c)_[y]=c[y];return _}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(c,_){let y,b;for(let U=1;U<arguments.length;U++){b=arguments[U];for(y in b)c[y]=b[y];for(let K=0;K<w.length;K++)y=w[K],Object.prototype.hasOwnProperty.call(b,y)&&(c[y]=b[y])}}function N(c){var _=1;c=c.split(":");const y=[];for(;0<_&&c.length;)y.push(c.shift()),_--;return c.length&&y.push(c.join(":")),y}function L(c){d.setTimeout(()=>{throw c},0)}function C(){var c=wt;let _=null;return c.g&&(_=c.g,c.g=c.g.next,c.g||(c.h=null),_.next=null),_}class le{constructor(){this.h=this.g=null}add(_,y){const b=Kt.get();b.set(_,y),this.h?this.h.next=b:this.g=b,this.h=b}}var Kt=new dt(()=>new rt,c=>c.reset());class rt{constructor(){this.next=this.g=this.h=null}set(_,y){this.h=_,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Et,et=!1,wt=new le,x=()=>{const c=d.Promise.resolve(void 0);Et=()=>{c.then(tt)}};var tt=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(y){L(y)}var _=Kt;_.j(c),100>_.h&&(_.h++,c.next=_.g,_.g=c)}et=!1};function ot(){this.s=this.s,this.C=this.C}ot.prototype.s=!1,ot.prototype.ma=function(){this.s||(this.s=!0,this.N())},ot.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ut(c,_){this.type=c,this.g=this.target=_,this.defaultPrevented=!1}ut.prototype.h=function(){this.defaultPrevented=!0};var ct=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,_=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};d.addEventListener("test",y,_),d.removeEventListener("test",y,_)}catch{}return c}();function It(c,_){if(ut.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=_,_=c.relatedTarget){if(ht){t:{try{Tt(_.nodeName);var U=!0;break t}catch{}U=!1}U||(_=null)}}else y=="mouseover"?_=c.fromElement:y=="mouseout"&&(_=c.toElement);this.relatedTarget=_,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Dt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&It.aa.h.call(this)}}G(It,ut);var Dt={2:"touch",3:"pen",4:"mouse"};It.prototype.h=function(){It.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Se="closure_listenable_"+(1e6*Math.random()|0),qt=0;function de(c,_,y,b,U){this.listener=c,this.proxy=null,this.src=_,this.type=y,this.capture=!!b,this.ha=U,this.key=++qt,this.da=this.fa=!1}function Yt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ln(c){this.src=c,this.g={},this.h=0}ln.prototype.add=function(c,_,y,b,U){var K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);var nt=On(c,_,b,U);return-1<nt?(_=c[nt],y||(_.fa=!1)):(_=new de(_,this.src,K,!!b,U),_.fa=y,c.push(_)),_};function Vi(c,_){var y=_.type;if(y in c.g){var b=c.g[y],U=Array.prototype.indexOf.call(b,_,void 0),K;(K=0<=U)&&Array.prototype.splice.call(b,U,1),K&&(Yt(_),c.g[y].length==0&&(delete c.g[y],c.h--))}}function On(c,_,y,b){for(var U=0;U<c.length;++U){var K=c[U];if(!K.da&&K.listener==_&&K.capture==!!y&&K.ha==b)return U}return-1}var dr="closure_lm_"+(1e6*Math.random()|0),mr={};function xi(c,_,y,b,U){if(Array.isArray(_)){for(var K=0;K<_.length;K++)xi(c,_[K],y,b,U);return null}return y=fc(y),c&&c[Se]?c.K(_,y,p(b)?!!b.capture:!1,U):hl(c,_,y,!1,b,U)}function hl(c,_,y,b,U,K){if(!_)throw Error("Invalid event type");var nt=p(U)?!!U.capture:!!U,kt=fl(c);if(kt||(c[dr]=kt=new ln(c)),y=kt.add(_,y,b,nt,K),y.proxy)return y;if(b=Ca(),y.proxy=b,b.src=c,b.listener=y,c.addEventListener)ct||(U=nt),U===void 0&&(U=!1),c.addEventListener(_.toString(),b,U);else if(c.attachEvent)c.attachEvent(xa(_.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Ca(){function c(y){return _.call(c.src,c.listener,y)}const _=Wf;return c}function Va(c,_,y,b,U){if(Array.isArray(_))for(var K=0;K<_.length;K++)Va(c,_[K],y,b,U);else b=p(b)?!!b.capture:!!b,y=fc(y),c&&c[Se]?(c=c.i,_=String(_).toString(),_ in c.g&&(K=c.g[_],y=On(K,y,b,U),-1<y&&(Yt(K[y]),Array.prototype.splice.call(K,y,1),K.length==0&&(delete c.g[_],c.h--)))):c&&(c=fl(c))&&(_=c.g[_.toString()],c=-1,_&&(c=On(_,y,b,U)),(y=-1<c?_[c]:null)&&bs(y))}function bs(c){if(typeof c!="number"&&c&&!c.da){var _=c.src;if(_&&_[Se])Vi(_.i,c);else{var y=c.type,b=c.proxy;_.removeEventListener?_.removeEventListener(y,b,c.capture):_.detachEvent?_.detachEvent(xa(y),b):_.addListener&&_.removeListener&&_.removeListener(b),(y=fl(_))?(Vi(y,c),y.h==0&&(y.src=null,_[dr]=null)):Yt(c)}}}function xa(c){return c in mr?mr[c]:mr[c]="on"+c}function Wf(c,_){if(c.da)c=!0;else{_=new It(_,this);var y=c.listener,b=c.ha||c.src;c.fa&&bs(c),c=y.call(b,_)}return c}function fl(c){return c=c[dr],c instanceof ln?c:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function fc(c){return typeof c=="function"?c:(c[yn]||(c[yn]=function(_){return c.handleEvent(_)}),c[yn])}function Ve(){ot.call(this),this.i=new ln(this),this.M=this,this.F=null}G(Ve,ot),Ve.prototype[Se]=!0,Ve.prototype.removeEventListener=function(c,_,y,b){Va(this,c,_,y,b)};function ke(c,_){var y,b=c.F;if(b)for(y=[];b;b=b.F)y.push(b);if(c=c.M,b=_.type||_,typeof _=="string")_=new ut(_,c);else if(_ instanceof ut)_.target=_.target||c;else{var U=_;_=new ut(b,c),R(_,U)}if(U=!0,y)for(var K=y.length-1;0<=K;K--){var nt=_.g=y[K];U=Ni(nt,b,!0,_)&&U}if(nt=_.g=c,U=Ni(nt,b,!0,_)&&U,U=Ni(nt,b,!1,_)&&U,y)for(K=0;K<y.length;K++)nt=_.g=y[K],U=Ni(nt,b,!1,_)&&U}Ve.prototype.N=function(){if(Ve.aa.N.call(this),this.i){var c=this.i,_;for(_ in c.g){for(var y=c.g[_],b=0;b<y.length;b++)Yt(y[b]);delete c.g[_],c.h--}}this.F=null},Ve.prototype.K=function(c,_,y,b){return this.i.add(String(c),_,!1,y,b)},Ve.prototype.L=function(c,_,y,b){return this.i.add(String(c),_,!0,y,b)};function Ni(c,_,y,b){if(_=c.i.g[String(_)],!_)return!0;_=_.concat();for(var U=!0,K=0;K<_.length;++K){var nt=_[K];if(nt&&!nt.da&&nt.capture==y){var kt=nt.listener,Ne=nt.ha||nt.src;nt.fa&&Vi(c.i,nt),U=kt.call(Ne,b)!==!1&&U}}return U&&!b.defaultPrevented}function dc(c,_,y){if(typeof c=="function")y&&(c=S(c,y));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(c,_||0)}function dl(c){c.g=dc(()=>{c.g=null,c.i&&(c.i=!1,dl(c))},c.l);const _=c.h;c.h=null,c.m.apply(null,_)}class Jf extends ot{constructor(_,y){super(),this.m=_,this.l=y,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:dl(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ss(c){ot.call(this),this.h=c,this.g={}}G(Ss,ot);var gr=[];function tn(c){yt(c.g,function(_,y){this.g.hasOwnProperty(y)&&bs(_)},c),c.g={}}Ss.prototype.N=function(){Ss.aa.N.call(this),tn(this)},Ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ml=d.JSON.stringify,si=d.JSON.parse,un=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function gl(){}gl.prototype.h=null;function mc(c){return c.h||(c.h=c.i())}function gc(){}var ai={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pr(){ut.call(this,"d")}G(pr,ut);function Wn(){ut.call(this,"c")}G(Wn,ut);var Mn={},_r=null;function Na(){return _r=_r||new Ve}Mn.La="serverreachability";function pl(c){ut.call(this,Mn.La,c)}G(pl,ut);function yr(c){const _=Na();ke(_,new pl(_))}Mn.STAT_EVENT="statevent";function Oa(c,_){ut.call(this,Mn.STAT_EVENT,c),this.stat=_}G(Oa,ut);function ve(c){const _=Na();ke(_,new Oa(_,c))}Mn.Ma="timingevent";function pc(c,_){ut.call(this,Mn.Ma,c),this.size=_}G(pc,ut);function vr(c,_){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},_)}function Er(){this.g=!0}Er.prototype.xa=function(){this.g=!1};function _c(c,_,y,b,U,K){c.info(function(){if(c.g)if(K)for(var nt="",kt=K.split("&"),Ne=0;Ne<kt.length;Ne++){var Ut=kt[Ne].split("=");if(1<Ut.length){var ze=Ut[0];Ut=Ut[1];var Oe=ze.split("_");nt=2<=Oe.length&&Oe[1]=="type"?nt+(ze+"="+Ut+"&"):nt+(ze+"=redacted&")}}else nt=null;else nt=K;return"XMLHTTP REQ ("+b+") [attempt "+U+"]: "+_+`
`+y+`
`+nt})}function yc(c,_,y,b,U,K,nt){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+U+"]: "+_+`
`+y+`
`+K+" "+nt})}function Tr(c,_,y,b){c.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ue(c,y)+(b?" "+b:"")})}function oi(c,_){c.info(function(){return"TIMEOUT: "+_})}Er.prototype.info=function(){};function Ue(c,_){if(!c.g)return _;if(!_)return null;try{var y=JSON.parse(_);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var b=y[c];if(!(2>b.length)){var U=b[1];if(Array.isArray(U)&&!(1>U.length)){var K=U[0];if(K!="noop"&&K!="stop"&&K!="close")for(var nt=1;nt<U.length;nt++)U[nt]=""}}}}return ml(y)}catch{return _}}var xe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ws;function Ma(){}G(Ma,gl),Ma.prototype.g=function(){return new XMLHttpRequest},Ma.prototype.i=function(){return{}},ws=new Ma;function li(c,_,y,b){this.j=c,this.i=_,this.l=y,this.R=b||1,this.U=new Ss(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _l}function _l(){this.i=null,this.g="",this.h=!1}var Ar={},Is={};function Jn(c,_,y){c.L=1,c.v=Cs(me(_)),c.m=y,c.P=!0,Mi(c,null)}function Mi(c,_){c.F=Date.now(),ue(c),c.A=me(c.v);var y=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),ki(y.i,"t",b),c.C=0,y=c.j.J,c.h=new _l,c.g=Nc(c.j,y?_:null,!c.m),0<c.O&&(c.M=new Jf(S(c.Y,c,c.g),c.O)),_=c.U,y=c.g,b=c.ca;var U="readystatechange";Array.isArray(U)||(U&&(gr[0]=U.toString()),U=gr);for(var K=0;K<U.length;K++){var nt=xi(y,U[K],b||_.handleEvent,!1,_.h||_);if(!nt)break;_.g[nt.key]=nt}_=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,_)):(c.u="GET",c.g.ea(c.A,c.u,null,_)),yr(),_c(c.i,c.u,c.A,c.l,c.R,c.m)}li.prototype.ca=function(c){c=c.target;const _=this.M;_&&Bn(c)==3?_.j():this.Y(c)},li.prototype.Y=function(c){try{if(c==this.g)t:{const Oe=Bn(this.g);var _=this.g.Ba();const qi=this.g.Z();if(!(3>Oe)&&(Oe!=3||this.g&&(this.h.h||this.g.oa()||Sc(this.g)))){this.J||Oe!=4||_==7||(_==8||0>=qi?yr(3):yr(2)),Pa(this);var y=this.g.Z();this.X=y;e:if(br(this)){var b=Sc(this.g);c="";var U=b.length,K=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vn(this),Sn(this);var nt="";break e}this.h.i=new d.TextDecoder}for(_=0;_<U;_++)this.h.h=!0,c+=this.h.i.decode(b[_],{stream:!(K&&_==U-1)});b.length=0,this.h.g+=c,this.C=0,nt=this.h.g}else nt=this.g.oa();if(this.o=y==200,yc(this.i,this.u,this.A,this.l,this.R,Oe,y),this.o){if(this.T&&!this.K){e:{if(this.g){var kt,Ne=this.g;if((kt=Ne.g?Ne.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!it(kt)){var Ut=kt;break e}}Ut=null}if(y=Ut)Tr(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wn(this,y);else{this.o=!1,this.s=3,ve(12),vn(this),Sn(this);break t}}if(this.P){y=!0;let Qe;for(;!this.J&&this.C<nt.length;)if(Qe=Sr(this,nt),Qe==Is){Oe==4&&(this.s=4,ve(14),y=!1),Tr(this.i,this.l,null,"[Incomplete Response]");break}else if(Qe==Ar){this.s=4,ve(15),Tr(this.i,this.l,nt,"[Invalid Chunk]"),y=!1;break}else Tr(this.i,this.l,Qe,null),wn(this,Qe);if(br(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||nt.length!=0||this.h.h||(this.s=1,ve(16),y=!1),this.o=this.o&&y,!y)Tr(this.i,this.l,nt,"[Invalid Chunked Response]"),vn(this),Sn(this);else if(0<nt.length&&!this.W){this.W=!0;var ze=this.j;ze.g==this&&ze.ba&&!ze.M&&(ze.j.info("Great, no buffering proxy detected. Bytes received: "+nt.length),Ls(ze),ze.M=!0,ve(11))}}else Tr(this.i,this.l,nt,null),wn(this,nt);Oe==4&&vn(this),this.o&&!this.J&&(Oe==4?Cc(this.j,this):(this.o=!1,ue(this)))}else sd(this.g),y==400&&0<nt.indexOf("Unknown SID")?(this.s=3,ve(12)):(this.s=0,ve(13)),vn(this),Sn(this)}}}catch{}finally{}};function br(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Sr(c,_){var y=c.C,b=_.indexOf(`
`,y);return b==-1?Is:(y=Number(_.substring(y,b)),isNaN(y)?Ar:(b+=1,b+y>_.length?Is:(_=_.slice(b,b+y),c.C=b+y,_)))}li.prototype.cancel=function(){this.J=!0,vn(this)};function ue(c){c.S=Date.now()+c.I,yl(c,c.I)}function yl(c,_){if(c.B!=null)throw Error("WatchDog timer not null");c.B=vr(S(c.ba,c),_)}function Pa(c){c.B&&(d.clearTimeout(c.B),c.B=null)}li.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(oi(this.i,this.A),this.L!=2&&(yr(),ve(17)),vn(this),this.s=2,Sn(this)):yl(this,this.S-c)};function Sn(c){c.j.G==0||c.J||Cc(c.j,c)}function vn(c){Pa(c);var _=c.M;_&&typeof _.ma=="function"&&_.ma(),c.M=null,tn(c.U),c.g&&(_=c.g,c.g=null,_.abort(),_.ma())}function wn(c,_){try{var y=c.j;if(y.G!=0&&(y.g==c||wr(y.h,c))){if(!c.K&&wr(y.h,c)&&y.G==3){try{var b=y.Da.g.parse(_)}catch{b=null}if(Array.isArray(b)&&b.length==3){var U=b;if(U[0]==0){t:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)Ha(y),Fa(y);else break t;Cl(y),ve(18)}}else y.za=U[1],0<y.za-y.T&&37500>U[2]&&y.F&&y.v==0&&!y.C&&(y.C=vr(S(y.Za,y),6e3));if(1>=vc(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else zi(y,11)}else if((c.K||y.g==c)&&Ha(y),!it(_))for(U=y.Da.g.parse(_),_=0;_<U.length;_++){let Ut=U[_];if(y.T=Ut[0],Ut=Ut[1],y.G==2)if(Ut[0]=="c"){y.K=Ut[1],y.ia=Ut[2];const ze=Ut[3];ze!=null&&(y.la=ze,y.j.info("VER="+y.la));const Oe=Ut[4];Oe!=null&&(y.Aa=Oe,y.j.info("SVER="+y.Aa));const qi=Ut[5];qi!=null&&typeof qi=="number"&&0<qi&&(b=1.5*qi,y.L=b,y.j.info("backChannelRequestTimeoutMs_="+b)),b=y;const Qe=c.g;if(Qe){const gi=Qe.g?Qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gi){var K=b.h;K.g||gi.indexOf("spdy")==-1&&gi.indexOf("quic")==-1&&gi.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Ir(K,K.h),K.h=null))}if(b.D){const xl=Qe.g?Qe.g.getResponseHeader("X-HTTP-Session-Id"):null;xl&&(b.ya=xl,jt(b.I,b.D,xl))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),b=y;var nt=c;if(b.qa=xc(b,b.J?b.ia:null,b.W),nt.K){Pn(b.h,nt);var kt=nt,Ne=b.L;Ne&&(kt.I=Ne),kt.B&&(Pa(kt),ue(kt)),b.g=nt}else Rc(b);0<y.i.length&&Ga(y)}else Ut[0]!="stop"&&Ut[0]!="close"||zi(y,7);else y.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?zi(y,7):Rl(y):Ut[0]!="noop"&&y.l&&y.l.ta(Ut),y.v=0)}}yr(4)}catch{}}var td=class{constructor(c,_){this.g=c,this.map=_}};function vl(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function El(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function vc(c){return c.h?1:c.g?c.g.size:0}function wr(c,_){return c.h?c.h==_:c.g?c.g.has(_):!1}function Ir(c,_){c.g?c.g.add(_):c.h=_}function Pn(c,_){c.h&&c.h==_?c.h=null:c.g&&c.g.has(_)&&c.g.delete(_)}vl.prototype.cancel=function(){if(this.i=cn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function cn(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let _=c.i;for(const y of c.g.values())_=_.concat(y.D);return _}return H(c.i)}function Ec(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(g(c)){for(var _=[],y=c.length,b=0;b<y;b++)_.push(c[b]);return _}_=[],y=0;for(b in c)_[y++]=c[b];return _}function ed(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(g(c)||typeof c=="string"){var _=[];c=c.length;for(var y=0;y<c;y++)_.push(y);return _}_=[],y=0;for(const b in c)_[y++]=b;return _}}}function Rs(c,_){if(c.forEach&&typeof c.forEach=="function")c.forEach(_,void 0);else if(g(c)||typeof c=="string")Array.prototype.forEach.call(c,_,void 0);else for(var y=ed(c),b=Ec(c),U=b.length,K=0;K<U;K++)_.call(void 0,b[K],y&&y[K],c)}var Tl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function La(c,_){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var b=c[y].indexOf("="),U=null;if(0<=b){var K=c[y].substring(0,b);U=c[y].substring(b+1)}else K=c[y];_(K,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Pi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Pi){this.h=c.h,Rr(this,c.j),this.o=c.o,this.g=c.g,Ds(this,c.s),this.l=c.l;var _=c.i,y=new ui;y.i=_.i,_.g&&(y.g=new Map(_.g),y.h=_.h),ka(this,y),this.m=c.m}else c&&(_=String(c).match(Tl))?(this.h=!1,Rr(this,_[1]||"",!0),this.o=Dr(_[2]||""),this.g=Dr(_[3]||"",!0),Ds(this,_[4]),this.l=Dr(_[5]||"",!0),ka(this,_[6]||"",!0),this.m=Dr(_[7]||"")):(this.h=!1,this.i=new ui(null,this.h))}Pi.prototype.toString=function(){var c=[],_=this.j;_&&c.push(Ln(_,Al,!0),":");var y=this.g;return(y||_=="file")&&(c.push("//"),(_=this.o)&&c.push(Ln(_,Al,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(Ln(y,y.charAt(0)=="/"?bl:Tc,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",Ln(y,rd)),c.join("")};function me(c){return new Pi(c)}function Rr(c,_,y){c.j=y?Dr(_,!0):_,c.j&&(c.j=c.j.replace(/:$/,""))}function Ds(c,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);c.s=_}else c.s=null}function ka(c,_,y){_ instanceof ui?(c.i=_,Sl(c.i,c.h)):(y||(_=Ln(_,id)),c.i=new ui(_,c.h))}function jt(c,_,y){c.i.set(_,y)}function Cs(c){return jt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Dr(c,_){return c?_?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ln(c,_,y){return typeof c=="string"?(c=encodeURI(c).replace(_,nd),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function nd(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Al=/[#\/\?@]/g,Tc=/[#\?:]/g,bl=/[#\?]/g,id=/[#\?@]/g,rd=/#/g;function ui(c,_){this.h=this.g=null,this.i=c||null,this.j=!!_}function kn(c){c.g||(c.g=new Map,c.h=0,c.i&&La(c.i,function(_,y){c.add(decodeURIComponent(_.replace(/\+/g," ")),y)}))}s=ui.prototype,s.add=function(c,_){kn(this),this.i=null,c=Ui(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(_),this.h+=1,this};function Ua(c,_){kn(c),_=Ui(c,_),c.g.has(_)&&(c.i=null,c.h-=c.g.get(_).length,c.g.delete(_))}function Li(c,_){return kn(c),_=Ui(c,_),c.g.has(_)}s.forEach=function(c,_){kn(this),this.g.forEach(function(y,b){y.forEach(function(U){c.call(_,U,b,this)},this)},this)},s.na=function(){kn(this);const c=Array.from(this.g.values()),_=Array.from(this.g.keys()),y=[];for(let b=0;b<_.length;b++){const U=c[b];for(let K=0;K<U.length;K++)y.push(_[b])}return y},s.V=function(c){kn(this);let _=[];if(typeof c=="string")Li(this,c)&&(_=_.concat(this.g.get(Ui(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)_=_.concat(c[y])}return _},s.set=function(c,_){return kn(this),this.i=null,c=Ui(this,c),Li(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[_]),this.h+=1,this},s.get=function(c,_){return c?(c=this.V(c),0<c.length?String(c[0]):_):_};function ki(c,_,y){Ua(c,_),0<y.length&&(c.i=null,c.g.set(Ui(c,_),H(y)),c.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],_=Array.from(this.g.keys());for(var y=0;y<_.length;y++){var b=_[y];const K=encodeURIComponent(String(b)),nt=this.V(b);for(b=0;b<nt.length;b++){var U=K;nt[b]!==""&&(U+="="+encodeURIComponent(String(nt[b]))),c.push(U)}}return this.i=c.join("&")};function Ui(c,_){return _=String(_),c.j&&(_=_.toLowerCase()),_}function Sl(c,_){_&&!c.j&&(kn(c),c.i=null,c.g.forEach(function(y,b){var U=b.toLowerCase();b!=U&&(Ua(this,b),ki(this,U,y))},c)),c.j=_}function Ac(c,_){const y=new Er;if(d.Image){const b=new Image;b.onload=V(Un,y,"TestLoadImage: loaded",!0,_,b),b.onerror=V(Un,y,"TestLoadImage: error",!1,_,b),b.onabort=V(Un,y,"TestLoadImage: abort",!1,_,b),b.ontimeout=V(Un,y,"TestLoadImage: timeout",!1,_,b),d.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else _(!1)}function Vs(c,_){const y=new Er,b=new AbortController,U=setTimeout(()=>{b.abort(),Un(y,"TestPingServer: timeout",!1,_)},1e4);fetch(c,{signal:b.signal}).then(K=>{clearTimeout(U),K.ok?Un(y,"TestPingServer: ok",!0,_):Un(y,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(U),Un(y,"TestPingServer: error",!1,_)})}function Un(c,_,y,b,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),b(y)}catch{}}function xs(){this.g=new un}function ci(c,_,y){const b=y||"";try{Rs(c,function(U,K){let nt=U;p(U)&&(nt=ml(U)),_.push(b+K+"="+encodeURIComponent(nt))})}catch(U){throw _.push(b+"type="+encodeURIComponent("_badmap")),U}}function Cr(c){this.l=c.Ub||null,this.j=c.eb||!1}G(Cr,gl),Cr.prototype.g=function(){return new Bi(this.l,this.j)},Cr.prototype.i=function(c){return function(){return c}}({});function Bi(c,_){Ve.call(this),this.D=c,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}G(Bi,Ve),s=Bi.prototype,s.open=function(c,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=_,this.readyState=1,fi(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(_.body=c),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hi(this)),this.readyState=0},s.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,fi(this)),this.g&&(this.readyState=3,fi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wl(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function wl(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}s.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var _=c.value?c.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!c.done}))&&(this.response=this.responseText+=_)}c.done?hi(this):fi(this),this.readyState==3&&wl(this)}},s.Ra=function(c){this.g&&(this.response=this.responseText=c,hi(this))},s.Qa=function(c){this.g&&(this.response=c,hi(this))},s.ga=function(){this.g&&hi(this)};function hi(c){c.readyState=4,c.l=null,c.j=null,c.v=null,fi(c)}s.setRequestHeader=function(c,_){this.u.append(c,_)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],_=this.h.entries();for(var y=_.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=_.next();return c.join(`\r
`)};function fi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Bi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Il(c){let _="";return yt(c,function(y,b){_+=b,_+=":",_+=y,_+=`\r
`}),_}function Be(c,_,y){t:{for(b in y){var b=!1;break t}b=!0}b||(y=Il(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):jt(c,_,y))}function Qt(c){Ve.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}G(Qt,Ve);var Ba=/^https?$/i,Ns=["POST","PUT"];s=Qt.prototype,s.Ha=function(c){this.J=c},s.ea=function(c,_,y,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);_=_?_.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ws.g(),this.v=this.o?mc(this.o):mc(ws),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(_,String(c),!0),this.B=!1}catch(K){bc(this,K);return}if(c=y||"",y=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var U in b)y.set(U,b[U]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const K of b.keys())y.set(K,b.get(K));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(y.keys()).find(K=>K.toLowerCase()=="content-type"),U=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ns,_,void 0))||b||U||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,nt]of y)this.g.setRequestHeader(K,nt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Os(this),this.u=!0,this.g.send(c),this.u=!1}catch(K){bc(this,K)}};function bc(c,_){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=_,c.m=5,za(c),di(c)}function za(c){c.A||(c.A=!0,ke(c,"complete"),ke(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ke(this,"complete"),ke(this,"abort"),di(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),di(this,!0)),Qt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?qa(this):this.bb())},s.bb=function(){qa(this)};function qa(c){if(c.h&&typeof h<"u"&&(!c.v[1]||Bn(c)!=4||c.Z()!=2)){if(c.u&&Bn(c)==4)dc(c.Ea,0,c);else if(ke(c,"readystatechange"),Bn(c)==4){c.h=!1;try{const nt=c.Z();t:switch(nt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var y;if(!(y=_)){var b;if(b=nt===0){var U=String(c.D).match(Tl)[1]||null;!U&&d.self&&d.self.location&&(U=d.self.location.protocol.slice(0,-1)),b=!Ba.test(U?U.toLowerCase():"")}y=b}if(y)ke(c,"complete"),ke(c,"success");else{c.m=6;try{var K=2<Bn(c)?c.g.statusText:""}catch{K=""}c.l=K+" ["+c.Z()+"]",za(c)}}finally{di(c)}}}}function di(c,_){if(c.g){Os(c);const y=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,_||ke(c,"ready");try{y.onreadystatechange=b}catch{}}}function Os(c){c.I&&(d.clearTimeout(c.I),c.I=null)}s.isActive=function(){return!!this.g};function Bn(c){return c.g?c.g.readyState:0}s.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(c){if(this.g){var _=this.g.responseText;return c&&_.indexOf(c)==0&&(_=_.substring(c.length)),si(_)}};function Sc(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function sd(c){const _={};c=(c.g&&2<=Bn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(it(c[b]))continue;var y=N(c[b]);const U=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const K=_[U]||[];_[U]=K,K.push(y)}O(_,function(b){return b.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ms(c,_,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||_}function ja(c){this.Aa=0,this.i=[],this.j=new Er,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ms("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ms("baseRetryDelayMs",5e3,c),this.cb=Ms("retryDelaySeedMs",1e4,c),this.Wa=Ms("forwardChannelMaxRetries",2,c),this.wa=Ms("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new vl(c&&c.concurrentRequestLimit),this.Da=new xs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=ja.prototype,s.la=8,s.G=1,s.connect=function(c,_,y,b){ve(0),this.W=c,this.H=_||{},y&&b!==void 0&&(this.H.OSID=y,this.H.OAID=b),this.F=this.X,this.I=xc(this,null,this.W),Ga(this)};function Rl(c){if(wc(c),c.G==3){var _=c.U++,y=me(c.I);if(jt(y,"SID",c.K),jt(y,"RID",_),jt(y,"TYPE","terminate"),Ps(c,y),_=new li(c,c.j,_),_.L=2,_.v=Cs(me(y)),y=!1,d.navigator&&d.navigator.sendBeacon)try{y=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!y&&d.Image&&(new Image().src=_.v,y=!0),y||(_.g=Nc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),ue(_)}Vc(c)}function Fa(c){c.g&&(Ls(c),c.g.cancel(),c.g=null)}function wc(c){Fa(c),c.u&&(d.clearTimeout(c.u),c.u=null),Ha(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function Ga(c){if(!El(c.h)&&!c.s){c.s=!0;var _=c.Ga;Et||x(),et||(Et(),et=!0),wt.add(_,c),c.B=0}}function ad(c,_){return vc(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=_.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=vr(S(c.Ga,c,_),Vl(c,c.B)),c.B++,!0)}s.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const U=new li(this,this.j,c);let K=this.o;if(this.S&&(K?(K=I(K),R(K,this.S)):K=this.S),this.m!==null||this.O||(U.H=K,K=null),this.P)t:{for(var _=0,y=0;y<this.i.length;y++){e:{var b=this.i[y];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break e}b=void 0}if(b===void 0)break;if(_+=b,4096<_){_=y;break t}if(_===4096||y===this.i.length-1){_=y+1;break t}}_=1e3}else _=1e3;_=Ic(this,U,_),y=me(this.I),jt(y,"RID",c),jt(y,"CVER",22),this.D&&jt(y,"X-HTTP-Session-Id",this.D),Ps(this,y),K&&(this.O?_="headers="+encodeURIComponent(String(Il(K)))+"&"+_:this.m&&Be(y,this.m,K)),Ir(this.h,U),this.Ua&&jt(y,"TYPE","init"),this.P?(jt(y,"$req",_),jt(y,"SID","null"),U.T=!0,Jn(U,y,null)):Jn(U,y,_),this.G=2}}else this.G==3&&(c?Dl(this,c):this.i.length==0||El(this.h)||Dl(this))};function Dl(c,_){var y;_?y=_.l:y=c.U++;const b=me(c.I);jt(b,"SID",c.K),jt(b,"RID",y),jt(b,"AID",c.T),Ps(c,b),c.m&&c.o&&Be(b,c.m,c.o),y=new li(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),_&&(c.i=_.D.concat(c.i)),_=Ic(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ir(c.h,y),Jn(y,b,_)}function Ps(c,_){c.H&&yt(c.H,function(y,b){jt(_,b,y)}),c.l&&Rs({},function(y,b){jt(_,b,y)})}function Ic(c,_,y){y=Math.min(c.i.length,y);var b=c.l?S(c.l.Na,c.l,c):null;t:{var U=c.i;let K=-1;for(;;){const nt=["count="+y];K==-1?0<y?(K=U[0].g,nt.push("ofs="+K)):K=0:nt.push("ofs="+K);let kt=!0;for(let Ne=0;Ne<y;Ne++){let Ut=U[Ne].g;const ze=U[Ne].map;if(Ut-=K,0>Ut)K=Math.max(0,U[Ne].g-100),kt=!1;else try{ci(ze,nt,"req"+Ut+"_")}catch{b&&b(ze)}}if(kt){b=nt.join("&");break t}}}return c=c.i.splice(0,y),_.D=c,b}function Rc(c){if(!c.g&&!c.u){c.Y=1;var _=c.Fa;Et||x(),et||(Et(),et=!0),wt.add(_,c),c.v=0}}function Cl(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=vr(S(c.Fa,c),Vl(c,c.v)),c.v++,!0)}s.Fa=function(){if(this.u=null,Dc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=vr(S(this.ab,this),c)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ve(10),Fa(this),Dc(this))};function Ls(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function Dc(c){c.g=new li(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var _=me(c.qa);jt(_,"RID","rpc"),jt(_,"SID",c.K),jt(_,"AID",c.T),jt(_,"CI",c.F?"0":"1"),!c.F&&c.ja&&jt(_,"TO",c.ja),jt(_,"TYPE","xmlhttp"),Ps(c,_),c.m&&c.o&&Be(_,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=Cs(me(_)),y.m=null,y.P=!0,Mi(y,c)}s.Za=function(){this.C!=null&&(this.C=null,Fa(this),Cl(this),ve(19))};function Ha(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Cc(c,_){var y=null;if(c.g==_){Ha(c),Ls(c),c.g=null;var b=2}else if(wr(c.h,_))y=_.D,Pn(c.h,_),b=1;else return;if(c.G!=0){if(_.o)if(b==1){y=_.m?_.m.length:0,_=Date.now()-_.F;var U=c.B;b=Na(),ke(b,new pc(b,y)),Ga(c)}else Rc(c);else if(U=_.s,U==3||U==0&&0<_.X||!(b==1&&ad(c,_)||b==2&&Cl(c)))switch(y&&0<y.length&&(_=c.h,_.i=_.i.concat(y)),U){case 1:zi(c,5);break;case 4:zi(c,10);break;case 3:zi(c,6);break;default:zi(c,2)}}}function Vl(c,_){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*_}function zi(c,_){if(c.j.info("Error code "+_),_==2){var y=S(c.fb,c),b=c.Xa;const U=!b;b=new Pi(b||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Rr(b,"https"),Cs(b),U?Ac(b.toString(),y):Vs(b.toString(),y)}else ve(2);c.G=0,c.l&&c.l.sa(_),Vc(c),wc(c)}s.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ve(2)):(this.j.info("Failed to ping google.com"),ve(1))};function Vc(c){if(c.G=0,c.ka=[],c.l){const _=cn(c.h);(_.length!=0||c.i.length!=0)&&(Q(c.ka,_),Q(c.ka,c.i),c.h.i.length=0,H(c.i),c.i.length=0),c.l.ra()}}function xc(c,_,y){var b=y instanceof Pi?me(y):new Pi(y);if(b.g!="")_&&(b.g=_+"."+b.g),Ds(b,b.s);else{var U=d.location;b=U.protocol,_=_?_+"."+U.hostname:U.hostname,U=+U.port;var K=new Pi(null);b&&Rr(K,b),_&&(K.g=_),U&&Ds(K,U),y&&(K.l=y),b=K}return y=c.D,_=c.ya,y&&_&&jt(b,y,_),jt(b,"VER",c.la),Ps(c,b),b}function Nc(c,_,y){if(_&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=c.Ca&&!c.pa?new Qt(new Cr({eb:y})):new Qt(c.pa),_.Ha(c.J),_}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oc(){}s=Oc.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Ka(){}Ka.prototype.g=function(c,_){return new hn(c,_)};function hn(c,_){Ve.call(this),this.g=new ja(_),this.l=c,this.h=_&&_.messageUrlParams||null,c=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(c?c["X-WebChannel-Content-Type"]=_.messageContentType:c={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(c?c["X-WebChannel-Client-Profile"]=_.va:c={"X-WebChannel-Client-Profile":_.va}),this.g.S=c,(c=_&&_.Sb)&&!it(c)&&(this.g.m=c),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!it(_)&&(this.g.D=_,c=this.h,c!==null&&_ in c&&(c=this.h,_ in c&&delete c[_])),this.j=new mi(this)}G(hn,Ve),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){Rl(this.g)},hn.prototype.o=function(c){var _=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=ml(c),c=y);_.i.push(new td(_.Ya++,c)),_.G==3&&Ga(_)},hn.prototype.N=function(){this.g.l=null,delete this.j,Rl(this.g),delete this.g,hn.aa.N.call(this)};function Mc(c){pr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var _=c.__sm__;if(_){t:{for(const y in _){c=y;break t}c=void 0}(this.i=c)&&(c=this.i,_=_!==null&&c in _?_[c]:void 0),this.data=_}else this.data=c}G(Mc,pr);function Pc(){Wn.call(this),this.status=1}G(Pc,Wn);function mi(c){this.g=c}G(mi,Oc),mi.prototype.ua=function(){ke(this.g,"a")},mi.prototype.ta=function(c){ke(this.g,new Mc(c))},mi.prototype.sa=function(c){ke(this.g,new Pc)},mi.prototype.ra=function(){ke(this.g,"b")},Ka.prototype.createWebChannel=Ka.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,z0=function(){return new Ka},B0=function(){return Na()},U0=Mn,Tg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xe.NO_ERROR=0,xe.TIMEOUT=8,xe.HTTP_ERROR=6,jh=xe,Oi.COMPLETE="complete",k0=Oi,gc.EventType=ai,ai.OPEN="a",ai.CLOSE="b",ai.ERROR="c",ai.MESSAGE="d",Ve.prototype.listen=Ve.prototype.K,bu=gc,Qt.prototype.listenOnce=Qt.prototype.L,Qt.prototype.getLastError=Qt.prototype.Ka,Qt.prototype.getLastErrorCode=Qt.prototype.Ba,Qt.prototype.getStatus=Qt.prototype.Z,Qt.prototype.getResponseJson=Qt.prototype.Oa,Qt.prototype.getResponseText=Qt.prototype.oa,Qt.prototype.send=Qt.prototype.ea,Qt.prototype.setWithCredentials=Qt.prototype.Ha,L0=Qt}).apply(typeof Mh<"u"?Mh:typeof self<"u"?self:typeof window<"u"?window:{});const jE="@firebase/firestore",FE="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}He.UNAUTHENTICATED=new He(null),He.GOOGLE_CREDENTIALS=new He("google-credentials-uid"),He.FIRST_PARTY=new He("first-party-uid"),He.MOCK_USER=new He("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let il="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new Jg("@firebase/firestore");function Io(){return us.logLevel}function WR(s){us.setLogLevel(s)}function J(s,...t){if(us.logLevel<=Lt.DEBUG){const e=t.map(sp);us.debug(`Firestore (${il}): ${s}`,...e)}}function Te(s,...t){if(us.logLevel<=Lt.ERROR){const e=t.map(sp);us.error(`Firestore (${il}): ${s}`,...e)}}function Ri(s,...t){if(us.logLevel<=Lt.WARN){const e=t.map(sp);us.warn(`Firestore (${il}): ${s}`,...e)}}function sp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(s="Unexpected state"){const t=`FIRESTORE (${il}) INTERNAL ASSERTION FAILED: `+s;throw Te(t),new Error(t)}function gt(s,t){s||ft()}function JR(s,t){s||ft()}function at(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Sa{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class t1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(He.UNAUTHENTICATED))}shutdown(){}}class e1{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class n1{constructor(t){this.t=t,this.currentUser=He.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){gt(this.o===void 0);let r=this.i;const o=g=>this.i!==r?(r=this.i,e(g)):Promise.resolve();let u=new Je;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Je,t.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=u;t.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},d=g=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>d(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Je)}},0),h()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(gt(typeof r.accessToken=="string"),new q0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return gt(t===null||typeof t=="string"),new He(t)}}class i1{constructor(t,e,r){this.l=t,this.h=e,this.P=r,this.type="FirstParty",this.user=He.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class r1{constructor(t,e,r){this.l=t,this.h=e,this.P=r}getToken(){return Promise.resolve(new i1(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(He.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class GE{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class s1{constructor(t,e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,D0(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){gt(this.o===void 0);const r=u=>{u.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.R;return this.R=u.token,J("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?e(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable(()=>r(u))};const o=u=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new GE(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(gt(typeof e.token=="string"),this.R=e.token,new GE(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<s;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=a1(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<e&&(r+=t.charAt(o[u]%62))}return r}}function bt(s,t){return s<t?-1:s>t?1:0}function ko(s,t,e){return s.length===t.length&&s.every((r,o)=>e(r,t[o]))}function F0(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE=-62135596800,KE=1e6;class oe{static now(){return oe.fromMillis(Date.now())}static fromDate(t){return oe.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*KE);return new oe(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<HE)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/KE}_compareTo(t){return this.seconds===t.seconds?bt(this.nanoseconds,t.nanoseconds):bt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-HE;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{static fromTimestamp(t){return new _t(t)}static min(){return new _t(new oe(0,0))}static max(){return new _t(new oe(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="__name__";class Ti{constructor(t,e,r){e===void 0?e=0:e>t.length&&ft(),r===void 0?r=t.length-e:r>t.length-e&&ft(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return Ti.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ti?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let o=0;o<r;o++){const u=Ti.compareSegments(t.get(o),e.get(o));if(u!==0)return u}return Math.sign(t.length-e.length)}static compareSegments(t,e){const r=Ti.isNumericId(t),o=Ti.isNumericId(e);return r&&!o?-1:!r&&o?1:r&&o?Ti.extractNumericId(t).compare(Ti.extractNumericId(e)):t<e?-1:t>e?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return rs.fromString(t.substring(4,t.length-2))}}class Ot extends Ti{construct(t,e,r){return new Ot(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new Z(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(o=>o.length>0))}return new Ot(e)}static emptyPath(){return new Ot([])}}const o1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class se extends Ti{construct(t,e,r){return new se(t,e,r)}static isValidIdentifier(t){return o1.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),se.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===QE}static keyField(){return new se([QE])}static fromServerFormat(t){const e=[];let r="",o=0;const u=()=>{if(r.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let h=!1;for(;o<t.length;){const d=t[o];if(d==="\\"){if(o+1===t.length)throw new Z(F.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Z(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,o+=2}else d==="`"?(h=!h,o++):d!=="."||h?(r+=d,o++):(u(),o++)}if(u(),h)throw new Z(F.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new se(e)}static emptyPath(){return new se([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(t){this.path=t}static fromPath(t){return new st(Ot.fromString(t))}static fromName(t){return new st(Ot.fromString(t).popFirst(5))}static empty(){return new st(Ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ot.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Ot.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new st(new Ot(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=-1;class nf{constructor(t,e,r,o){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=o}}function Ag(s){return s.fields.find(t=>t.kind===2)}function ia(s){return s.fields.filter(t=>t.kind!==2)}nf.UNKNOWN_ID=-1;class Fh{constructor(t,e){this.fieldPath=t,this.kind=e}}class Lu{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Lu(0,Nn.min())}}function G0(s,t){const e=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=_t.fromTimestamp(r===1e9?new oe(e+1,0):new oe(e,r));return new Nn(o,st.empty(),t)}function H0(s){return new Nn(s.readTime,s.key,Uo)}class Nn{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new Nn(_t.min(),st.empty(),Uo)}static max(){return new Nn(_t.max(),st.empty(),Uo)}}function ap(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=st.comparator(s.documentKey,t.documentKey),e!==0?e:bt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Q0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ys(s){if(s.code!==F.FAILED_PRECONDITION||s.message!==K0)throw s;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new B((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(e,u).next(r,o)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof B?e:B.resolve(e)}catch(e){return B.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):B.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):B.reject(e)}static resolve(t){return new B((e,r)=>{e(t)})}static reject(t){return new B((e,r)=>{r(t)})}static waitFor(t){return new B((e,r)=>{let o=0,u=0,h=!1;t.forEach(d=>{++o,d.next(()=>{++u,h&&u===o&&e()},g=>r(g))}),h=!0,u===o&&e()})}static or(t){let e=B.resolve(!1);for(const r of t)e=e.next(o=>o?B.resolve(o):r());return e}static forEach(t,e){const r=[];return t.forEach((o,u)=>{r.push(e.call(this,o,u))}),this.waitFor(r)}static mapArray(t,e){return new B((r,o)=>{const u=t.length,h=new Array(u);let d=0;for(let g=0;g<u;g++){const p=g;e(t[p]).next(E=>{h[p]=E,++d,d===u&&r(h)},E=>o(E))}})}static doWhile(t,e){return new B((r,o)=>{const u=()=>{t()===!0?e().next(()=>{u()},o):r()};u()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn="SimpleDb";class wf{static open(t,e,r,o){try{return new wf(e,t.transaction(o,r))}catch(u){throw new Ru(e,u)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.m=new Je,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{e.error?this.m.reject(new Ru(t,e.error)):this.m.resolve()},this.transaction.onerror=r=>{const o=op(r.target.error);this.m.reject(new Ru(t,o))}}get p(){return this.m.promise}abort(t){t&&this.m.reject(t),this.aborted||(J(xn,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new u1(e)}}class wi{static delete(t){return J(xn,"Removing database:",t),sa(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!T0())return!1;if(wi.v())return!0;const t=tf(),e=wi.C(t),r=0<e&&e<10,o=Y0(t),u=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||u)}static v(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,e){return t.store(e)}static C(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,e,r){this.name=t,this.version=e,this.O=r,wi.C(tf())===12.2&&Te("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(t){return this.db||(J(xn,"Opening database:",this.name),this.db=await new Promise((e,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const h=u.target.result;e(h)},o.onblocked=()=>{r(new Ru(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const h=u.target.error;h.name==="VersionError"?r(new Z(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):h.name==="InvalidStateError"?r(new Z(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h)):r(new Ru(t,h))},o.onupgradeneeded=u=>{J(xn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const h=u.target.result;this.O.B(h,o.transaction,u.oldVersion,this.version).next(()=>{J(xn,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}k(t){this.L=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,o){const u=e==="readonly";let h=0;for(;;){++h;try{this.db=await this.N(t);const d=wf.open(this.db,t,u?"readonly":"readwrite",r),g=o(d).next(p=>(d.S(),p)).catch(p=>(d.abort(p),B.reject(p))).toPromise();return g.catch(()=>{}),await d.p,g}catch(d){const g=d,p=g.name!=="FirebaseError"&&h<3;if(J(xn,"Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Y0(s){const t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class l1{constructor(t){this.q=t,this.$=!1,this.K=null}get isDone(){return this.$}get U(){return this.K}set cursor(t){this.q=t}done(){this.$=!0}W(t){this.K=t}delete(){return sa(this.q.delete())}}class Ru extends Z{constructor(t,e){super(F.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function vs(s){return s.name==="IndexedDbTransactionError"}class u1{constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(J(xn,"PUT",this.store.name,t,e),r=this.store.put(e,t)):(J(xn,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),sa(r)}add(t){return J(xn,"ADD",this.store.name,t,t),sa(this.store.add(t))}get(t){return sa(this.store.get(t)).next(e=>(e===void 0&&(e=null),J(xn,"GET",this.store.name,t,e),e))}delete(t){return J(xn,"DELETE",this.store.name,t),sa(this.store.delete(t))}count(){return J(xn,"COUNT",this.store.name),sa(this.store.count())}G(t,e){const r=this.options(t,e),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new B((h,d)=>{u.onerror=g=>{d(g.target.error)},u.onsuccess=g=>{h(g.target.result)}})}{const u=this.cursor(r),h=[];return this.j(u,(d,g)=>{h.push(g)}).next(()=>h)}}H(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new B((o,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{o(h.target.result)}})}J(t,e){J(xn,"DELETE ALL",this.store.name);const r=this.options(t,e);r.Y=!1;const o=this.cursor(r);return this.j(o,(u,h,d)=>d.delete())}Z(t,e){let r;e?r=t:(r={},e=t);const o=this.cursor(r);return this.j(o,e)}X(t){const e=this.cursor({});return new B((r,o)=>{e.onerror=u=>{const h=op(u.target.error);o(h)},e.onsuccess=u=>{const h=u.target.result;h?t(h.primaryKey,h.value).next(d=>{d?h.continue():r()}):r()}})}j(t,e){const r=[];return new B((o,u)=>{t.onerror=h=>{u(h.target.error)},t.onsuccess=h=>{const d=h.target.result;if(!d)return void o();const g=new l1(d),p=e(d.primaryKey,d.value,g);if(p instanceof B){const E=p.catch(T=>(g.done(),B.reject(T)));r.push(E)}g.isDone?o():g.U===null?d.continue():d.continue(g.U)}}).next(()=>B.waitFor(r))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.Y?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function sa(s){return new B((t,e)=>{s.onsuccess=r=>{const o=r.target.result;t(o)},s.onerror=r=>{const o=op(r.target.error);e(o)}})}let YE=!1;function op(s){const t=wi.C(tf());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(e)>=0){const r=new Z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return YE||(YE=!0,setTimeout(()=>{throw r},0)),r}}return s}const Du="IndexBackfiller";class c1{constructor(t,e){this.asyncQueue=t,this.ee=e,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(t){J(Du,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{const e=await this.ee.ne();J(Du,`Documents written: ${e}`)}catch(e){vs(e)?J(Du,"Ignoring IndexedDB error during index backfill: ",e):await ys(e)}await this.te(6e4)})}}class h1{constructor(t,e){this.localStore=t,this.persistence=e}async ne(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.re(e,t))}re(t,e){const r=new Set;let o=e,u=!0;return B.doWhile(()=>u===!0&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(h=>{if(h!==null&&!r.has(h))return J(Du,`Processing collection: ${h}`),this.ie(t,h,o).next(d=>{o-=d,r.add(h)});u=!1})).next(()=>e-o)}ie(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(o=>this.localStore.localDocuments.getNextDocuments(t,e,o,r).next(u=>{const h=u.changes;return this.localStore.indexManager.updateIndexEntries(t,h).next(()=>this.se(o,u)).next(d=>(J(Du,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>h.size)}))}se(t,e){let r=t;return e.changes.forEach((o,u)=>{const h=H0(u);ap(h,r)>0&&(r=h)}),new Nn(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.oe(r),this._e=r=>e.writeSequenceNumber(r))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}Tn.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=-1;function Wu(s){return s==null}function ku(s){return s===0&&1/s==-1/0}function $0(s){return typeof s=="number"&&Number.isInteger(s)&&!ku(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="";function an(s){let t="";for(let e=0;e<s.length;e++)t.length>0&&(t=$E(t)),t=f1(s.get(e),t);return $E(t)}function f1(s,t){let e=t;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":e+="";break;case rf:e+="";break;default:e+=u}}return e}function $E(s){return s+rf+""}function bi(s){const t=s.length;if(gt(t>=2),t===2)return gt(s.charAt(0)===rf&&s.charAt(1)===""),Ot.emptyPath();const e=t-2,r=[];let o="";for(let u=0;u<t;){const h=s.indexOf(rf,u);switch((h<0||h>e)&&ft(),s.charAt(h+1)){case"":const d=s.substring(u,h);let g;o.length===0?g=d:(o+=d,g=o,o=""),r.push(g);break;case"":o+=s.substring(u,h),o+="\0";break;case"":o+=s.substring(u,h+1);break;default:ft()}u=h+2}return new Ot(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="remoteDocuments",Ju="owner",Eo="owner",Uu="mutationQueues",d1="userId",ri="mutations",XE="batchId",ca="userMutationsIndex",ZE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(s,t){return[s,an(t)]}function X0(s,t,e){return[s,an(t),e]}const m1={},Bo="documentMutations",sf="remoteDocumentsV14",g1=["prefixPath","collectionGroup","readTime","documentId"],Hh="documentKeyIndex",p1=["prefixPath","collectionGroup","documentId"],Z0="collectionGroupIndex",_1=["collectionGroup","readTime","prefixPath","documentId"],Bu="remoteDocumentGlobal",bg="remoteDocumentGlobalKey",zo="targets",W0="queryTargetsIndex",y1=["canonicalId","targetId"],qo="targetDocuments",v1=["targetId","path"],lp="documentTargetsIndex",E1=["path","targetId"],af="targetGlobalKey",da="targetGlobal",zu="collectionParents",T1=["collectionId","parent"],jo="clientMetadata",A1="clientId",If="bundles",b1="bundleId",Rf="namedQueries",S1="name",up="indexConfiguration",w1="indexId",Sg="collectionGroupIndex",I1="collectionGroup",of="indexState",R1=["indexId","uid"],J0="sequenceNumberIndex",D1=["uid","sequenceNumber"],lf="indexEntries",C1=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tA="documentKeyIndex",V1=["indexId","uid","orderedDocumentKey"],Df="documentOverlays",x1=["userId","collectionPath","documentId"],wg="collectionPathOverlayIndex",N1=["userId","collectionPath","largestBatchId"],eA="collectionGroupOverlayIndex",O1=["userId","collectionGroup","largestBatchId"],cp="globals",M1="name",nA=[Uu,ri,Bo,ra,zo,Ju,da,qo,jo,Bu,zu,If,Rf],P1=[...nA,Df],iA=[Uu,ri,Bo,sf,zo,Ju,da,qo,jo,Bu,zu,If,Rf,Df],rA=iA,hp=[...rA,up,of,lf],L1=hp,k1=[...hp,cp];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig extends Q0{constructor(t,e){super(),this.ue=t,this.currentSequenceNumber=e}}function Le(s,t){const e=at(s);return wi.M(e.ue,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(s){let t=0;for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function Es(s,t){for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function sA(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t,e){this.comparator=t,this.root=e||Ze.EMPTY}insert(t,e){return new ne(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(t){return new ne(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return e+r.left.size;o<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ph(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ph(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ph(this.root,t,this.comparator,!0)}}class Ph{constructor(t,e,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=e?r(t.key,e):1,e&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ze{constructor(t,e,r,o,u){this.key=t,this.value=e,this.color=r??Ze.RED,this.left=o??Ze.EMPTY,this.right=u??Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,o,u){return new Ze(t??this.key,e??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,e,r),null):u===0?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(t,e,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,o=this;if(e(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,e),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),e(t,o.key)===0){if(o.right.isEmpty())return Ze.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,e))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const t=this.left.check();if(t!==this.right.check())throw ft();return t+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1;Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(t,e,r,o,u){return this}insert(t,e,r){return new Ze(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(t){this.comparator=t,this.data=new ne(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;e(o.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new JE(this.data.getIterator())}getIteratorFrom(t){return new JE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof Xt)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Xt(this.comparator);return e.data=t,e}}class JE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function To(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(t){this.fields=t,t.sort(se.comparator)}static empty(){return new An([])}unionWith(t){let e=new Xt(se.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new An(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ko(this.fields,t.fields,(e,r)=>e.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new aA("Invalid base64 string: "+u):u}}(t);return new ye(e)}static fromUint8Array(t){const e=function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u}(t);return new ye(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return bt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ye.EMPTY_BYTE_STRING=new ye("");const B1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(s){if(gt(!!s),typeof s=="string"){let t=0;const e=B1.exec(s);if(gt(!!e),e[1]){let o=e[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:re(s.seconds),nanos:re(s.nanos)}}function re(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function or(s){return typeof s=="string"?ye.fromBase64String(s):ye.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="server_timestamp",lA="__type__",uA="__previous_value__",cA="__local_write_time__";function Cf(s){var t,e;return((e=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[lA])===null||e===void 0?void 0:e.stringValue)===oA}function Vf(s){const t=s.mapValue.fields[uA];return Cf(t)?Vf(t):t}function qu(s){const t=ar(s.mapValue.fields[cA].timestampValue);return new oe(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(t,e,r,o,u,h,d,g,p){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=p}}const uf="(default)";class cs{constructor(t,e){this.projectId=t,this.database=e||uf}static empty(){return new cs("","")}get isDefaultDatabase(){return this.database===uf}isEqual(t){return t instanceof cs&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="__type__",hA="__max__",es={mapValue:{fields:{__type__:{stringValue:hA}}}},dp="__vector__",Fo="value",Kh={nullValue:"NULL_VALUE"};function hs(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Cf(s)?4:fA(s)?9007199254740991:xf(s)?10:11:ft()}function Di(s,t){if(s===t)return!0;const e=hs(s);if(e!==hs(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return qu(s).isEqual(qu(t));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=ar(o.timestampValue),d=ar(u.timestampValue);return h.seconds===d.seconds&&h.nanos===d.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(o,u){return or(o.bytesValue).isEqual(or(u.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(o,u){return re(o.geoPointValue.latitude)===re(u.geoPointValue.latitude)&&re(o.geoPointValue.longitude)===re(u.geoPointValue.longitude)}(s,t);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return re(o.integerValue)===re(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=re(o.doubleValue),d=re(u.doubleValue);return h===d?ku(h)===ku(d):isNaN(h)&&isNaN(d)}return!1}(s,t);case 9:return ko(s.arrayValue.values||[],t.arrayValue.values||[],Di);case 10:case 11:return function(o,u){const h=o.mapValue.fields||{},d=u.mapValue.fields||{};if(WE(h)!==WE(d))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(d[g]===void 0||!Di(h[g],d[g])))return!1;return!0}(s,t);default:return ft()}}function ju(s,t){return(s.values||[]).find(e=>Di(e,t))!==void 0}function fs(s,t){if(s===t)return 0;const e=hs(s),r=hs(t);if(e!==r)return bt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return bt(s.booleanValue,t.booleanValue);case 2:return function(u,h){const d=re(u.integerValue||u.doubleValue),g=re(h.integerValue||h.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(s,t);case 3:return tT(s.timestampValue,t.timestampValue);case 4:return tT(qu(s),qu(t));case 5:return bt(s.stringValue,t.stringValue);case 6:return function(u,h){const d=or(u),g=or(h);return d.compareTo(g)}(s.bytesValue,t.bytesValue);case 7:return function(u,h){const d=u.split("/"),g=h.split("/");for(let p=0;p<d.length&&p<g.length;p++){const E=bt(d[p],g[p]);if(E!==0)return E}return bt(d.length,g.length)}(s.referenceValue,t.referenceValue);case 8:return function(u,h){const d=bt(re(u.latitude),re(h.latitude));return d!==0?d:bt(re(u.longitude),re(h.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return eT(s.arrayValue,t.arrayValue);case 10:return function(u,h){var d,g,p,E;const T=u.fields||{},S=h.fields||{},V=(d=T[Fo])===null||d===void 0?void 0:d.arrayValue,G=(g=S[Fo])===null||g===void 0?void 0:g.arrayValue,H=bt(((p=V==null?void 0:V.values)===null||p===void 0?void 0:p.length)||0,((E=G==null?void 0:G.values)===null||E===void 0?void 0:E.length)||0);return H!==0?H:eT(V,G)}(s.mapValue,t.mapValue);case 11:return function(u,h){if(u===es.mapValue&&h===es.mapValue)return 0;if(u===es.mapValue)return 1;if(h===es.mapValue)return-1;const d=u.fields||{},g=Object.keys(d),p=h.fields||{},E=Object.keys(p);g.sort(),E.sort();for(let T=0;T<g.length&&T<E.length;++T){const S=bt(g[T],E[T]);if(S!==0)return S;const V=fs(d[g[T]],p[E[T]]);if(V!==0)return V}return bt(g.length,E.length)}(s.mapValue,t.mapValue);default:throw ft()}}function tT(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return bt(s,t);const e=ar(s),r=ar(t),o=bt(e.seconds,r.seconds);return o!==0?o:bt(e.nanos,r.nanos)}function eT(s,t){const e=s.values||[],r=t.values||[];for(let o=0;o<e.length&&o<r.length;++o){const u=fs(e[o],r[o]);if(u)return u}return bt(e.length,r.length)}function Go(s){return Rg(s)}function Rg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(e){const r=ar(e);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(e){return or(e).toBase64()}(s.bytesValue):"referenceValue"in s?function(e){return st.fromName(e).toString()}(s.referenceValue):"geoPointValue"in s?function(e){return`geo(${e.latitude},${e.longitude})`}(s.geoPointValue):"arrayValue"in s?function(e){let r="[",o=!0;for(const u of e.values||[])o?o=!1:r+=",",r+=Rg(u);return r+"]"}(s.arrayValue):"mapValue"in s?function(e){const r=Object.keys(e.fields||{}).sort();let o="{",u=!0;for(const h of r)u?u=!1:o+=",",o+=`${h}:${Rg(e.fields[h])}`;return o+"}"}(s.mapValue):ft()}function Qh(s){switch(hs(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Vf(s);return t?16+Qh(t):16;case 5:return 2*s.stringValue.length;case 6:return or(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,u)=>o+Qh(u),0)}(s.arrayValue);case 10:case 11:return function(r){let o=0;return Es(r.fields,(u,h)=>{o+=u.length+Qh(h)}),o}(s.mapValue);default:throw ft()}}function ga(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function Dg(s){return!!s&&"integerValue"in s}function Fu(s){return!!s&&"arrayValue"in s}function nT(s){return!!s&&"nullValue"in s}function iT(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Yh(s){return!!s&&"mapValue"in s}function xf(s){var t,e;return((e=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[fp])===null||e===void 0?void 0:e.stringValue)===dp}function Cu(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const t={mapValue:{fields:{}}};return Es(s.mapValue.fields,(e,r)=>t.mapValue.fields[e]=Cu(r)),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Cu(s.arrayValue.values[e]);return t}return Object.assign({},s)}function fA(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===hA}const dA={mapValue:{fields:{[fp]:{stringValue:dp},[Fo]:{arrayValue:{}}}}};function q1(s){return"nullValue"in s?Kh:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?ga(cs.empty(),st.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?xf(s)?dA:{mapValue:{}}:ft()}function j1(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?ga(cs.empty(),st.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?dA:"mapValue"in s?xf(s)?{mapValue:{}}:es:ft()}function rT(s,t){const e=fs(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?-1:!s.inclusive&&t.inclusive?1:0}function sT(s,t){const e=fs(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?1:!s.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t){this.value=t}static empty(){return new We({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!Yh(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Cu(e)}setAll(t){let e=se.emptyPath(),r={},o=[];t.forEach((h,d)=>{if(!e.isImmediateParentOf(d)){const g=this.getFieldsMap(e);this.applyChanges(g,r,o),r={},o=[],e=d.popLast()}h?r[d.lastSegment()]=Cu(h):o.push(d.lastSegment())});const u=this.getFieldsMap(e);this.applyChanges(u,r,o)}delete(t){const e=this.field(t.popLast());Yh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Di(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=e.mapValue.fields[t.get(r)];Yh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=o),e=o}return e.mapValue.fields}applyChanges(t,e,r){Es(e,(o,u)=>t[o]=u);for(const o of r)delete t[o]}clone(){return new We(Cu(this.value))}}function mA(s){const t=[];return Es(s.fields,(e,r)=>{const o=new se([e]);if(Yh(r)){const u=mA(r.mapValue).fields;if(u.length===0)t.push(o);else for(const h of u)t.push(o.child(h))}else t.push(o)}),new An(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t,e,r,o,u,h,d){this.key=t,this.documentType=e,this.version=r,this.readTime=o,this.createTime=u,this.data=h,this.documentState=d}static newInvalidDocument(t){return new ie(t,0,_t.min(),_t.min(),_t.min(),We.empty(),0)}static newFoundDocument(t,e,r,o){return new ie(t,1,e,_t.min(),r,o,0)}static newNoDocument(t,e){return new ie(t,2,e,_t.min(),_t.min(),We.empty(),0)}static newUnknownDocument(t,e){return new ie(t,3,e,_t.min(),_t.min(),We.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(_t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=We.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=We.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ie&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ie(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(t,e){this.position=t,this.inclusive=e}}function aT(s,t,e){let r=0;for(let o=0;o<s.position.length;o++){const u=t[o],h=s.position[o];if(u.field.isKeyField()?r=st.comparator(st.fromName(h.referenceValue),e.key):r=fs(h,e.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function oT(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!Di(s.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(t,e="asc"){this.field=t,this.dir=e}}function F1(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{}class Mt extends gA{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new G1(t,e,r):e==="array-contains"?new Q1(t,r):e==="in"?new TA(t,r):e==="not-in"?new Y1(t,r):e==="array-contains-any"?new $1(t,r):new Mt(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new H1(t,r):new K1(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(fs(e,this.value)):e!==null&&hs(this.value)===hs(e)&&this.matchesComparison(fs(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ft()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $t extends gA{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new $t(t,e)}matches(t){return Ho(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Ho(s){return s.op==="and"}function Cg(s){return s.op==="or"}function mp(s){return pA(s)&&Ho(s)}function pA(s){for(const t of s.filters)if(t instanceof $t)return!1;return!0}function Vg(s){if(s instanceof Mt)return s.field.canonicalString()+s.op.toString()+Go(s.value);if(mp(s))return s.filters.map(t=>Vg(t)).join(",");{const t=s.filters.map(e=>Vg(e)).join(",");return`${s.op}(${t})`}}function _A(s,t){return s instanceof Mt?function(r,o){return o instanceof Mt&&r.op===o.op&&r.field.isEqual(o.field)&&Di(r.value,o.value)}(s,t):s instanceof $t?function(r,o){return o instanceof $t&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((u,h,d)=>u&&_A(h,o.filters[d]),!0):!1}(s,t):void ft()}function yA(s,t){const e=s.filters.concat(t);return $t.create(e,s.op)}function vA(s){return s instanceof Mt?function(e){return`${e.field.canonicalString()} ${e.op} ${Go(e.value)}`}(s):s instanceof $t?function(e){return e.op.toString()+" {"+e.getFilters().map(vA).join(" ,")+"}"}(s):"Filter"}class G1 extends Mt{constructor(t,e,r){super(t,e,r),this.key=st.fromName(r.referenceValue)}matches(t){const e=st.comparator(t.key,this.key);return this.matchesComparison(e)}}class H1 extends Mt{constructor(t,e){super(t,"in",e),this.keys=EA("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class K1 extends Mt{constructor(t,e){super(t,"not-in",e),this.keys=EA("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function EA(s,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(r=>st.fromName(r.referenceValue))}class Q1 extends Mt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Fu(e)&&ju(e.arrayValue,this.value)}}class TA extends Mt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&ju(this.value.arrayValue,e)}}class Y1 extends Mt{constructor(t,e){super(t,"not-in",e)}matches(t){if(ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!ju(this.value.arrayValue,e)}}class $1 extends Mt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Fu(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>ju(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(t,e=null,r=[],o=[],u=null,h=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=d,this.le=null}}function xg(s,t=null,e=[],r=[],o=null,u=null,h=null){return new X1(s,t,e,r,o,u,h)}function pa(s){const t=at(s);if(t.le===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>Vg(r)).join(","),e+="|ob:",e+=t.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),Wu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>Go(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>Go(r)).join(",")),t.le=e}return t.le}function tc(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!F1(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!_A(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!oT(s.startAt,t.startAt)&&oT(s.endAt,t.endAt)}function cf(s){return st.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function hf(s,t){return s.filters.filter(e=>e instanceof Mt&&e.field.isEqual(t))}function lT(s,t,e){let r=Kh,o=!0;for(const u of hf(s,t)){let h=Kh,d=!0;switch(u.op){case"<":case"<=":h=q1(u.value);break;case"==":case"in":case">=":h=u.value;break;case">":h=u.value,d=!1;break;case"!=":case"not-in":h=Kh}rT({value:r,inclusive:o},{value:h,inclusive:d})<0&&(r=h,o=d)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const h=e.position[u];rT({value:r,inclusive:o},{value:h,inclusive:e.inclusive})<0&&(r=h,o=e.inclusive);break}}return{value:r,inclusive:o}}function uT(s,t,e){let r=es,o=!0;for(const u of hf(s,t)){let h=es,d=!0;switch(u.op){case">=":case">":h=j1(u.value),d=!1;break;case"==":case"in":case"<=":h=u.value;break;case"<":h=u.value,d=!1;break;case"!=":case"not-in":h=es}sT({value:r,inclusive:o},{value:h,inclusive:d})>0&&(r=h,o=d)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const h=e.position[u];sT({value:r,inclusive:o},{value:h,inclusive:e.inclusive})>0&&(r=h,o=e.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(t,e=null,r=[],o=[],u=null,h="F",d=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=d,this.endAt=g,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function AA(s,t,e,r,o,u,h,d){return new ur(s,t,e,r,o,u,h,d)}function rl(s){return new ur(s)}function cT(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function gp(s){return s.collectionGroup!==null}function xo(s){const t=at(s);if(t.he===null){t.he=[];const e=new Set;for(const u of t.explicitOrderBy)t.he.push(u),e.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(h){let d=new Xt(se.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(t).forEach(u=>{e.has(u.canonicalString())||u.isKeyField()||t.he.push(new Gu(u,r))}),e.has(se.keyField().canonicalString())||t.he.push(new Gu(se.keyField(),r))}return t.he}function pn(s){const t=at(s);return t.Pe||(t.Pe=Z1(t,xo(s))),t.Pe}function Z1(s,t){if(s.limitType==="F")return xg(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Gu(o.field,u)});const e=s.endAt?new ds(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new ds(s.startAt.position,s.startAt.inclusive):null;return xg(s.path,s.collectionGroup,t,s.filters,s.limit,e,r)}}function Ng(s,t){const e=s.filters.concat([t]);return new ur(s.path,s.collectionGroup,s.explicitOrderBy.slice(),e,s.limit,s.limitType,s.startAt,s.endAt)}function ff(s,t,e){return new ur(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function ec(s,t){return tc(pn(s),pn(t))&&s.limitType===t.limitType}function bA(s){return`${pa(pn(s))}|lt:${s.limitType}`}function Ro(s){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(o=>vA(o)).join(", ")}]`),Wu(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(o=>Go(o)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(o=>Go(o)).join(",")),`Target(${r})`}(pn(s))}; limitType=${s.limitType})`}function nc(s,t){return t.isFoundDocument()&&function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):st.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(s,t)&&function(r,o){for(const u of xo(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(s,t)&&function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0}(s,t)&&function(r,o){return!(r.startAt&&!function(h,d,g){const p=aT(h,d,g);return h.inclusive?p<=0:p<0}(r.startAt,xo(r),o)||r.endAt&&!function(h,d,g){const p=aT(h,d,g);return h.inclusive?p>=0:p>0}(r.endAt,xo(r),o))}(s,t)}function SA(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function wA(s){return(t,e)=>{let r=!1;for(const o of xo(s)){const u=W1(o,t,e);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function W1(s,t,e){const r=s.field.isKeyField()?st.comparator(t.key,e.key):function(u,h,d){const g=h.data.field(u),p=d.data.field(u);return g!==null&&p!==null?fs(g,p):ft()}(s.field,t,e);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ft()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,e]);o.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[e]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Es(this.inner,(e,r)=>{for(const[o,u]of r)t(o,u)})}isEmpty(){return sA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=new ne(st.comparator);function bn(){return J1}const IA=new ne(st.comparator);function Su(...s){let t=IA;for(const e of s)t=t.insert(e.key,e);return t}function RA(s){let t=IA;return s.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function Si(){return Vu()}function DA(){return Vu()}function Vu(){return new cr(s=>s.toString(),(s,t)=>s.isEqual(t))}const tD=new ne(st.comparator),eD=new Xt(st.comparator);function Rt(...s){let t=eD;for(const e of s)t=t.add(e);return t}const nD=new Xt(bt);function pp(){return nD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ku(t)?"-0":t}}function CA(s){return{integerValue:""+s}}function VA(s,t){return $0(t)?CA(t):_p(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(){this._=void 0}}function iD(s,t,e){return s instanceof Ko?function(o,u){const h={fields:{[lA]:{stringValue:oA},[cA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Cf(u)&&(u=Vf(u)),u&&(h.fields[uA]=u),{mapValue:h}}(e,t):s instanceof _a?NA(s,t):s instanceof ya?OA(s,t):function(o,u){const h=xA(o,u),d=hT(h)+hT(o.Ie);return Dg(h)&&Dg(o.Ie)?CA(d):_p(o.serializer,d)}(s,t)}function rD(s,t,e){return s instanceof _a?NA(s,t):s instanceof ya?OA(s,t):e}function xA(s,t){return s instanceof Qo?function(r){return Dg(r)||function(u){return!!u&&"doubleValue"in u}(r)}(t)?t:{integerValue:0}:null}class Ko extends Nf{}class _a extends Nf{constructor(t){super(),this.elements=t}}function NA(s,t){const e=MA(t);for(const r of s.elements)e.some(o=>Di(o,r))||e.push(r);return{arrayValue:{values:e}}}class ya extends Nf{constructor(t){super(),this.elements=t}}function OA(s,t){let e=MA(t);for(const r of s.elements)e=e.filter(o=>!Di(o,r));return{arrayValue:{values:e}}}class Qo extends Nf{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function hT(s){return re(s.integerValue||s.doubleValue)}function MA(s){return Fu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(t,e){this.field=t,this.transform=e}}function sD(s,t){return s.field.isEqual(t.field)&&function(r,o){return r instanceof _a&&o instanceof _a||r instanceof ya&&o instanceof ya?ko(r.elements,o.elements,Di):r instanceof Qo&&o instanceof Qo?Di(r.Ie,o.Ie):r instanceof Ko&&o instanceof Ko}(s.transform,t.transform)}class aD{constructor(t,e){this.version=t,this.transformResults=e}}class ae{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ae}static exists(t){return new ae(void 0,t)}static updateTime(t){return new ae(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function $h(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class Of{}function PA(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new al(s.key,ae.none()):new sl(s.key,s.data,ae.none());{const e=s.data,r=We.empty();let o=new Xt(se.comparator);for(let u of t.fields)if(!o.has(u)){let h=e.field(u);h===null&&u.length>1&&(u=u.popLast(),h=e.field(u)),h===null?r.delete(u):r.set(u,h),o=o.add(u)}return new hr(s.key,r,new An(o.toArray()),ae.none())}}function oD(s,t,e){s instanceof sl?function(o,u,h){const d=o.value.clone(),g=dT(o.fieldTransforms,u,h.transformResults);d.setAll(g),u.convertToFoundDocument(h.version,d).setHasCommittedMutations()}(s,t,e):s instanceof hr?function(o,u,h){if(!$h(o.precondition,u))return void u.convertToUnknownDocument(h.version);const d=dT(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(LA(o)),g.setAll(d),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(s,t,e):function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()}(0,t,e)}function xu(s,t,e,r){return s instanceof sl?function(u,h,d,g){if(!$h(u.precondition,h))return d;const p=u.value.clone(),E=mT(u.fieldTransforms,g,h);return p.setAll(E),h.convertToFoundDocument(h.version,p).setHasLocalMutations(),null}(s,t,e,r):s instanceof hr?function(u,h,d,g){if(!$h(u.precondition,h))return d;const p=mT(u.fieldTransforms,g,h),E=h.data;return E.setAll(LA(u)),E.setAll(p),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),d===null?null:d.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(T=>T.field))}(s,t,e,r):function(u,h,d){return $h(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):d}(s,t,e)}function lD(s,t){let e=null;for(const r of s.fieldTransforms){const o=t.data.field(r.field),u=xA(r.transform,o||null);u!=null&&(e===null&&(e=We.empty()),e.set(r.field,u))}return e||null}function fT(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&ko(r,o,(u,h)=>sD(u,h))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class sl extends Of{constructor(t,e,r,o=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class hr extends Of{constructor(t,e,r,o,u=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function LA(s){const t=new Map;return s.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=s.data.field(e);t.set(e,r)}}),t}function dT(s,t,e){const r=new Map;gt(s.length===e.length);for(let o=0;o<e.length;o++){const u=s[o],h=u.transform,d=t.data.field(u.field);r.set(u.field,rD(h,d,e[o]))}return r}function mT(s,t,e){const r=new Map;for(const o of s){const u=o.transform,h=e.data.field(o.field);r.set(o.field,iD(u,h,t))}return r}class al extends Of{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yp extends Of{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(t,e,r,o){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&oD(u,t,r[o])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=xu(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=xu(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=DA();return this.mutations.forEach(o=>{const u=t.get(o.key),h=u.overlayedDocument;let d=this.applyToLocalView(h,u.mutatedFields);d=e.has(o.key)?null:d;const g=PA(h,d);g!==null&&r.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(_t.min())}),r}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Rt())}isEqual(t){return this.batchId===t.batchId&&ko(this.mutations,t.mutations,(e,r)=>fT(e,r))&&ko(this.baseMutations,t.baseMutations,(e,r)=>fT(e,r))}}class Ep{constructor(t,e,r,o){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=o}static from(t,e,r){gt(t.mutations.length===r.length);let o=function(){return tD}();const u=t.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new Ep(t,e,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,zt;function kA(s){switch(s){case F.OK:return ft();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ft()}}function UA(s){if(s===void 0)return Te("GRPC error has no .code"),F.UNKNOWN;switch(s){case De.OK:return F.OK;case De.CANCELLED:return F.CANCELLED;case De.UNKNOWN:return F.UNKNOWN;case De.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case De.INTERNAL:return F.INTERNAL;case De.UNAVAILABLE:return F.UNAVAILABLE;case De.UNAUTHENTICATED:return F.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case De.NOT_FOUND:return F.NOT_FOUND;case De.ALREADY_EXISTS:return F.ALREADY_EXISTS;case De.PERMISSION_DENIED:return F.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case De.ABORTED:return F.ABORTED;case De.OUT_OF_RANGE:return F.OUT_OF_RANGE;case De.UNIMPLEMENTED:return F.UNIMPLEMENTED;case De.DATA_LOSS:return F.DATA_LOSS;default:return ft()}}(zt=De||(De={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=new rs([4294967295,4294967295],0);function gT(s){const t=BA().encode(s),e=new P0;return e.update(t),new Uint8Array(e.digest())}function pT(s){const t=new DataView(s.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new rs([e,r],0),new rs([o,u],0)]}class Ap{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new wu(`Invalid padding: ${e}`);if(r<0)throw new wu(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new wu(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new wu(`Invalid padding when bitmap length is 0: ${e}`);this.Ee=8*t.length-e,this.de=rs.fromNumber(this.Ee)}Ae(t,e,r){let o=t.add(e.multiply(rs.fromNumber(r)));return o.compare(cD)===1&&(o=new rs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const e=gT(t),[r,o]=pT(e);for(let u=0;u<this.hashCount;u++){const h=this.Ae(r,o,u);if(!this.Re(h))return!1}return!0}static create(t,e,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),h=new Ap(u,o,e);return r.forEach(d=>h.insert(d)),h}insert(t){if(this.Ee===0)return;const e=gT(t),[r,o]=pT(e);for(let u=0;u<this.hashCount;u++){const h=this.Ae(r,o,u);this.Ve(h)}}Ve(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(t,e,r,o,u){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const o=new Map;return o.set(t,sc.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new rc(_t.min(),o,new ne(bt),bn(),Rt())}}class sc{constructor(t,e,r,o,u){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new sc(r,e,Rt(),Rt(),Rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(t,e,r,o){this.me=t,this.removedTargetIds=e,this.key=r,this.fe=o}}class zA{constructor(t,e){this.targetId=t,this.ge=e}}class qA{constructor(t,e,r=ye.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=o}}class _T{constructor(){this.pe=0,this.ye=yT(),this.we=ye.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.we=t)}Fe(){let t=Rt(),e=Rt(),r=Rt();return this.ye.forEach((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:e=e.add(o);break;case 1:r=r.add(o);break;default:ft()}}),new sc(this.we,this.be,t,e,r)}Me(){this.Se=!1,this.ye=yT()}xe(t,e){this.Se=!0,this.ye=this.ye.insert(t,e)}Oe(t){this.Se=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,gt(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class hD{constructor(t){this.ke=t,this.qe=new Map,this.Qe=bn(),this.$e=Lh(),this.Ke=Lh(),this.Ue=new ne(bt)}We(t){for(const e of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(e,t.fe):this.ze(e,t.key,t.fe);for(const e of t.removedTargetIds)this.ze(e,t.key,t.fe)}je(t){this.forEachTarget(t,e=>{const r=this.He(e);switch(t.state){case 0:this.Je(e)&&r.Ce(t.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(t.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(e);break;case 3:this.Je(e)&&(r.Le(),r.Ce(t.resumeToken));break;case 4:this.Je(e)&&(this.Ye(e),r.Ce(t.resumeToken));break;default:ft()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.qe.forEach((r,o)=>{this.Je(o)&&e(o)})}Ze(t){const e=t.targetId,r=t.ge.count,o=this.Xe(e);if(o){const u=o.target;if(cf(u))if(r===0){const h=new st(u.path);this.ze(e,h,ie.newNoDocument(h,_t.min()))}else gt(r===1);else{const h=this.et(e);if(h!==r){const d=this.tt(t),g=d?this.nt(d,t,h):1;if(g!==0){this.Ye(e);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(e,p)}}}}}tt(t){const e=t.ge.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=e;let h,d;try{h=or(r).toUint8Array()}catch(g){if(g instanceof aA)return Ri("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new Ap(h,o,u)}catch(g){return Ri(g instanceof wu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.Ee===0?null:d}nt(t,e,r){return e.ge.count===r-this.st(t,e.targetId)?0:2}st(t,e){const r=this.ke.getRemoteKeysForTarget(e);let o=0;return r.forEach(u=>{const h=this.ke.it(),d=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;t.mightContain(d)||(this.ze(e,u,null),o++)}),o}ot(t){const e=new Map;this.qe.forEach((u,h)=>{const d=this.Xe(h);if(d){if(u.current&&cf(d.target)){const g=new st(d.target.path);this._t(g).has(h)||this.ut(h,g)||this.ze(h,g,ie.newNoDocument(g,t))}u.ve&&(e.set(h,u.Fe()),u.Me())}});let r=Rt();this.Ke.forEach((u,h)=>{let d=!0;h.forEachWhile(g=>{const p=this.Xe(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(u))}),this.Qe.forEach((u,h)=>h.setReadTime(t));const o=new rc(t,e,this.Ue,this.Qe,r);return this.Qe=bn(),this.$e=Lh(),this.Ke=Lh(),this.Ue=new ne(bt),o}Ge(t,e){if(!this.Je(t))return;const r=this.ut(t,e.key)?2:0;this.He(t).xe(e.key,r),this.Qe=this.Qe.insert(e.key,e),this.$e=this.$e.insert(e.key,this._t(e.key).add(t)),this.Ke=this.Ke.insert(e.key,this.ct(e.key).add(t))}ze(t,e,r){if(!this.Je(t))return;const o=this.He(t);this.ut(t,e)?o.xe(e,1):o.Oe(e),this.Ke=this.Ke.insert(e,this.ct(e).delete(t)),this.Ke=this.Ke.insert(e,this.ct(e).add(t)),r&&(this.Qe=this.Qe.insert(e,r))}removeTarget(t){this.qe.delete(t)}et(t){const e=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let e=this.qe.get(t);return e||(e=new _T,this.qe.set(t,e)),e}ct(t){let e=this.Ke.get(t);return e||(e=new Xt(bt),this.Ke=this.Ke.insert(t,e)),e}_t(t){let e=this.$e.get(t);return e||(e=new Xt(bt),this.$e=this.$e.insert(t,e)),e}Je(t){const e=this.Xe(t)!==null;return e||J("WatchChangeAggregator","Detected inactive target",t),e}Xe(t){const e=this.qe.get(t);return e&&e.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new _T),this.ke.getRemoteKeysForTarget(t).forEach(e=>{this.ze(t,e,null)})}ut(t,e){return this.ke.getRemoteKeysForTarget(t).has(e)}}function Lh(){return new ne(st.comparator)}function yT(){return new ne(st.comparator)}const fD={asc:"ASCENDING",desc:"DESCENDING"},dD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mD={and:"AND",or:"OR"};class gD{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Og(s,t){return s.useProto3Json||Wu(t)?t:{value:t}}function Yo(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function jA(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function pD(s,t){return Yo(s,t.toTimestamp())}function Ae(s){return gt(!!s),_t.fromTimestamp(function(e){const r=ar(e);return new oe(r.seconds,r.nanos)}(s))}function bp(s,t){return Mg(s,t).canonicalString()}function Mg(s,t){const e=function(o){return new Ot(["projects",o.projectId,"databases",o.database])}(s).child("documents");return t===void 0?e:e.child(t)}function FA(s){const t=Ot.fromString(s);return gt(JA(t)),t}function Hu(s,t){return bp(s.databaseId,t.path)}function Ii(s,t){const e=FA(t);if(e.get(1)!==s.databaseId.projectId)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new st(KA(e))}function GA(s,t){return bp(s.databaseId,t)}function HA(s){const t=FA(s);return t.length===4?Ot.emptyPath():KA(t)}function Pg(s){return new Ot(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function KA(s){return gt(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function vT(s,t,e){return{name:Hu(s,t),fields:e.value.mapValue.fields}}function QA(s,t,e){const r=Ii(s,t.name),o=Ae(t.updateTime),u=t.createTime?Ae(t.createTime):_t.min(),h=new We({mapValue:{fields:t.fields}}),d=ie.newFoundDocument(r,o,u,h);return e&&d.setHasCommittedMutations(),e?d.setHasCommittedMutations():d}function _D(s,t){return"found"in t?function(r,o){gt(!!o.found),o.found.name,o.found.updateTime;const u=Ii(r,o.found.name),h=Ae(o.found.updateTime),d=o.found.createTime?Ae(o.found.createTime):_t.min(),g=new We({mapValue:{fields:o.found.fields}});return ie.newFoundDocument(u,h,d,g)}(s,t):"missing"in t?function(r,o){gt(!!o.missing),gt(!!o.readTime);const u=Ii(r,o.missing),h=Ae(o.readTime);return ie.newNoDocument(u,h)}(s,t):ft()}function yD(s,t){let e;if("targetChange"in t){t.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ft()}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=function(p,E){return p.useProto3Json?(gt(E===void 0||typeof E=="string"),ye.fromBase64String(E||"")):(gt(E===void 0||E instanceof Buffer||E instanceof Uint8Array),ye.fromUint8Array(E||new Uint8Array))}(s,t.targetChange.resumeToken),h=t.targetChange.cause,d=h&&function(p){const E=p.code===void 0?F.UNKNOWN:UA(p.code);return new Z(E,p.message||"")}(h);e=new qA(r,o,u,d||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=Ii(s,r.document.name),u=Ae(r.document.updateTime),h=r.document.createTime?Ae(r.document.createTime):_t.min(),d=new We({mapValue:{fields:r.document.fields}}),g=ie.newFoundDocument(o,u,h,d),p=r.targetIds||[],E=r.removedTargetIds||[];e=new Xh(p,E,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=Ii(s,r.document),u=r.readTime?Ae(r.readTime):_t.min(),h=ie.newNoDocument(o,u),d=r.removedTargetIds||[];e=new Xh([],d,h.key,h)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=Ii(s,r.document),u=r.removedTargetIds||[];e=new Xh([],u,o,null)}else{if(!("filter"in t))return ft();{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,h=new uD(o,u),d=r.targetId;e=new zA(d,h)}}return e}function Ku(s,t){let e;if(t instanceof sl)e={update:vT(s,t.key,t.value)};else if(t instanceof al)e={delete:Hu(s,t.key)};else if(t instanceof hr)e={update:vT(s,t.key,t.data),updateMask:SD(t.fieldMask)};else{if(!(t instanceof yp))return ft();e={verify:Hu(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(u,h){const d=h.transform;if(d instanceof Ko)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof _a)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ya)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Qo)return{fieldPath:h.field.canonicalString(),increment:d.Ie};throw ft()}(0,r))),t.precondition.isNone||(e.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:pD(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ft()}(s,t.precondition)),e}function Lg(s,t){const e=t.currentDocument?function(u){return u.updateTime!==void 0?ae.updateTime(Ae(u.updateTime)):u.exists!==void 0?ae.exists(u.exists):ae.none()}(t.currentDocument):ae.none(),r=t.updateTransforms?t.updateTransforms.map(o=>function(h,d){let g=null;if("setToServerValue"in d)gt(d.setToServerValue==="REQUEST_TIME"),g=new Ko;else if("appendMissingElements"in d){const E=d.appendMissingElements.values||[];g=new _a(E)}else if("removeAllFromArray"in d){const E=d.removeAllFromArray.values||[];g=new ya(E)}else"increment"in d?g=new Qo(h,d.increment):ft();const p=se.fromServerFormat(d.fieldPath);return new ic(p,g)}(s,o)):[];if(t.update){t.update.name;const o=Ii(s,t.update.name),u=new We({mapValue:{fields:t.update.fields}});if(t.updateMask){const h=function(g){const p=g.fieldPaths||[];return new An(p.map(E=>se.fromServerFormat(E)))}(t.updateMask);return new hr(o,u,h,e,r)}return new sl(o,u,e,r)}if(t.delete){const o=Ii(s,t.delete);return new al(o,e)}if(t.verify){const o=Ii(s,t.verify);return new yp(o,e)}return ft()}function vD(s,t){return s&&s.length>0?(gt(t!==void 0),s.map(e=>function(o,u){let h=o.updateTime?Ae(o.updateTime):Ae(u);return h.isEqual(_t.min())&&(h=Ae(u)),new aD(h,o.transformResults||[])}(e,t))):[]}function YA(s,t){return{documents:[GA(s,t.path)]}}function $A(s,t){const e={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=GA(s,o);const u=function(p){if(p.length!==0)return WA($t.create(p,"and"))}(t.filters);u&&(e.structuredQuery.where=u);const h=function(p){if(p.length!==0)return p.map(E=>function(S){return{field:Do(S.field),direction:TD(S.dir)}}(E))}(t.orderBy);h&&(e.structuredQuery.orderBy=h);const d=Og(s,t.limit);return d!==null&&(e.structuredQuery.limit=d),t.startAt&&(e.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(t.endAt)),{ht:e,parent:o}}function XA(s){let t=HA(s.parent);const e=s.structuredQuery,r=e.from?e.from.length:0;let o=null;if(r>0){gt(r===1);const E=e.from[0];E.allDescendants?o=E.collectionId:t=t.child(E.collectionId)}let u=[];e.where&&(u=function(T){const S=ZA(T);return S instanceof $t&&mp(S)?S.getFilters():[S]}(e.where));let h=[];e.orderBy&&(h=function(T){return T.map(S=>function(G){return new Gu(Co(G.field),function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(G.direction))}(S))}(e.orderBy));let d=null;e.limit&&(d=function(T){let S;return S=typeof T=="object"?T.value:T,Wu(S)?null:S}(e.limit));let g=null;e.startAt&&(g=function(T){const S=!!T.before,V=T.values||[];return new ds(V,S)}(e.startAt));let p=null;return e.endAt&&(p=function(T){const S=!T.before,V=T.values||[];return new ds(V,S)}(e.endAt)),AA(t,o,h,u,d,"F",g,p)}function ED(s,t){const e=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ft()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function ZA(s){return s.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=Co(e.unaryFilter.field);return Mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Co(e.unaryFilter.field);return Mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Co(e.unaryFilter.field);return Mt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Co(e.unaryFilter.field);return Mt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}(s):s.fieldFilter!==void 0?function(e){return Mt.create(Co(e.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(e.fieldFilter.op),e.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(e){return $t.create(e.compositeFilter.filters.map(r=>ZA(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ft()}}(e.compositeFilter.op))}(s):ft()}function TD(s){return fD[s]}function AD(s){return dD[s]}function bD(s){return mD[s]}function Do(s){return{fieldPath:s.canonicalString()}}function Co(s){return se.fromServerFormat(s.fieldPath)}function WA(s){return s instanceof Mt?function(e){if(e.op==="=="){if(iT(e.value))return{unaryFilter:{field:Do(e.field),op:"IS_NAN"}};if(nT(e.value))return{unaryFilter:{field:Do(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(iT(e.value))return{unaryFilter:{field:Do(e.field),op:"IS_NOT_NAN"}};if(nT(e.value))return{unaryFilter:{field:Do(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Do(e.field),op:AD(e.op),value:e.value}}}(s):s instanceof $t?function(e){const r=e.getFilters().map(o=>WA(o));return r.length===1?r[0]:{compositeFilter:{op:bD(e.op),filters:r}}}(s):ft()}function SD(s){const t=[];return s.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function JA(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(t,e,r,o,u=_t.min(),h=_t.min(),d=ye.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(t){return new ir(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(t){this.Tt=t}}function wD(s,t){let e;if(t.document)e=QA(s.Tt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=st.fromSegments(t.noDocument.path),o=Ea(t.noDocument.readTime);e=ie.newNoDocument(r,o),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return ft();{const r=st.fromSegments(t.unknownDocument.path),o=Ea(t.unknownDocument.version);e=ie.newUnknownDocument(r,o)}}return t.readTime&&e.setReadTime(function(o){const u=new oe(o[0],o[1]);return _t.fromTimestamp(u)}(t.readTime)),e}function ET(s,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:df(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(u,h){return{name:Hu(u,h.key),fields:h.data.value.mapValue.fields,updateTime:Yo(u,h.version.toTimestamp()),createTime:Yo(u,h.createTime.toTimestamp())}}(s.Tt,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:va(t.version)};else{if(!t.isUnknownDocument())return ft();r.unknownDocument={path:e.path.toArray(),version:va(t.version)}}return r}function df(s){const t=s.toTimestamp();return[t.seconds,t.nanoseconds]}function va(s){const t=s.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ea(s){const t=new oe(s.seconds,s.nanoseconds);return _t.fromTimestamp(t)}function aa(s,t){const e=(t.baseMutations||[]).map(u=>Lg(s.Tt,u));for(let u=0;u<t.mutations.length-1;++u){const h=t.mutations[u];if(u+1<t.mutations.length&&t.mutations[u+1].transform!==void 0){const d=t.mutations[u+1];h.updateTransforms=d.transform.fieldTransforms,t.mutations.splice(u+1,1),++u}}const r=t.mutations.map(u=>Lg(s.Tt,u)),o=oe.fromMillis(t.localWriteTimeMs);return new vp(t.batchId,o,e,r)}function Iu(s){const t=Ea(s.readTime),e=s.lastLimboFreeSnapshotVersion!==void 0?Ea(s.lastLimboFreeSnapshotVersion):_t.min();let r;return r=function(u){return u.documents!==void 0}(s.query)?function(u){return gt(u.documents.length===1),pn(rl(HA(u.documents[0])))}(s.query):function(u){return pn(XA(u))}(s.query),new ir(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,t,e,ye.fromBase64String(s.resumeToken))}function eb(s,t){const e=va(t.snapshotVersion),r=va(t.lastLimboFreeSnapshotVersion);let o;o=cf(t.target)?YA(s.Tt,t.target):$A(s.Tt,t.target).ht;const u=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:pa(t.target),readTime:e,resumeToken:u,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Sp(s){const t=XA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?ff(t,t.limit,"L"):t}function cg(s,t){return new Tp(t.largestBatchId,Lg(s.Tt,t.overlayMutation))}function TT(s,t){const e=t.path.lastSegment();return[s,an(t.path.popLast()),e]}function AT(s,t,e,r){return{indexId:s,uid:t,sequenceNumber:e,readTime:va(r.readTime),documentKey:an(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{getBundleMetadata(t,e){return bT(t).get(e).next(r=>{if(r)return function(u){return{id:u.bundleId,createTime:Ea(u.createTime),version:u.version}}(r)})}saveBundleMetadata(t,e){return bT(t).put(function(o){return{bundleId:o.id,createTime:va(Ae(o.createTime)),version:o.version}}(e))}getNamedQuery(t,e){return ST(t).get(e).next(r=>{if(r)return function(u){return{name:u.name,query:Sp(u.bundledQuery),readTime:Ea(u.readTime)}}(r)})}saveNamedQuery(t,e){return ST(t).put(function(o){return{name:o.name,readTime:va(Ae(o.readTime)),bundledQuery:o.bundledQuery}}(e))}}function bT(s){return Le(s,If)}function ST(s){return Le(s,Rf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(t,e){this.serializer=t,this.userId=e}static It(t,e){const r=e.uid||"";return new Mf(t,r)}getOverlay(t,e){return yu(t).get(TT(this.userId,e)).next(r=>r?cg(this.serializer,r):null)}getOverlays(t,e){const r=Si();return B.forEach(e,o=>this.getOverlay(t,o).next(u=>{u!==null&&r.set(o,u)})).next(()=>r)}saveOverlays(t,e,r){const o=[];return r.forEach((u,h)=>{const d=new Tp(e,h);o.push(this.Et(t,d))}),B.waitFor(o)}removeOverlaysForBatchId(t,e,r){const o=new Set;e.forEach(h=>o.add(an(h.getCollectionPath())));const u=[];return o.forEach(h=>{const d=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(yu(t).J(wg,d))}),B.waitFor(u)}getOverlaysForCollection(t,e,r){const o=Si(),u=an(e),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return yu(t).G(wg,h).next(d=>{for(const g of d){const p=cg(this.serializer,g);o.set(p.getKey(),p)}return o})}getOverlaysForCollectionGroup(t,e,r,o){const u=Si();let h;const d=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return yu(t).Z({index:eA,range:d},(g,p,E)=>{const T=cg(this.serializer,p);u.size()<o||T.largestBatchId===h?(u.set(T.getKey(),T),h=T.largestBatchId):E.done()}).next(()=>u)}Et(t,e){return yu(t).put(function(o,u,h){const[d,g,p]=TT(u,h.mutation.key);return{userId:u,collectionPath:g,documentId:p,collectionGroup:h.mutation.key.getCollectionGroup(),largestBatchId:h.largestBatchId,overlayMutation:Ku(o.Tt,h.mutation)}}(this.serializer,this.userId,e))}}function yu(s){return Le(s,Df)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{dt(t){return Le(t,cp)}getSessionToken(t){return this.dt(t).get("sessionToken").next(e=>{const r=e==null?void 0:e.value;return r?ye.fromUint8Array(r):ye.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.dt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(){}At(t,e){this.Rt(t,e),e.Vt()}Rt(t,e){if("nullValue"in t)this.ft(e,5);else if("booleanValue"in t)this.ft(e,10),e.gt(t.booleanValue?1:0);else if("integerValue"in t)this.ft(e,15),e.gt(re(t.integerValue));else if("doubleValue"in t){const r=re(t.doubleValue);isNaN(r)?this.ft(e,13):(this.ft(e,15),ku(r)?e.gt(0):e.gt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.ft(e,20),typeof r=="string"&&(r=ar(r)),e.yt(`${r.seconds||""}`),e.gt(r.nanos||0)}else if("stringValue"in t)this.wt(t.stringValue,e),this.bt(e);else if("bytesValue"in t)this.ft(e,30),e.St(or(t.bytesValue)),this.bt(e);else if("referenceValue"in t)this.Dt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.ft(e,45),e.gt(r.latitude||0),e.gt(r.longitude||0)}else"mapValue"in t?fA(t)?this.ft(e,Number.MAX_SAFE_INTEGER):xf(t)?this.vt(t.mapValue,e):(this.Ct(t.mapValue,e),this.bt(e)):"arrayValue"in t?(this.Ft(t.arrayValue,e),this.bt(e)):ft()}wt(t,e){this.ft(e,25),this.Mt(t,e)}Mt(t,e){e.yt(t)}Ct(t,e){const r=t.fields||{};this.ft(e,55);for(const o of Object.keys(r))this.wt(o,e),this.Rt(r[o],e)}vt(t,e){var r,o;const u=t.fields||{};this.ft(e,53);const h=Fo,d=((o=(r=u[h].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.length)||0;this.ft(e,15),e.gt(re(d)),this.wt(h,e),this.Rt(u[h],e)}Ft(t,e){const r=t.values||[];this.ft(e,50);for(const o of r)this.Rt(o,e)}Dt(t,e){this.ft(e,37),st.fromName(t).path.forEach(r=>{this.ft(e,60),this.Mt(r,e)})}ft(t,e){t.gt(e)}bt(t){t.gt(2)}}oa.xt=new oa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=255;function DD(s){if(s===0)return 8;let t=0;return s>>4||(t+=4,s<<=4),s>>6||(t+=2,s<<=2),s>>7||(t+=1),t}function wT(s){const t=64-function(r){let o=0;for(let u=0;u<8;++u){const h=DD(255&r[u]);if(o+=h,h!==8)break}return o}(s);return Math.ceil(t/8)}class CD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Nt(r.value),r=e.next();this.Bt()}Lt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.kt(r.value),r=e.next();this.qt()}Qt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const o=e.codePointAt(0);this.Nt(240|o>>>18),this.Nt(128|63&o>>>12),this.Nt(128|63&o>>>6),this.Nt(128|63&o)}}this.Bt()}$t(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const o=e.codePointAt(0);this.kt(240|o>>>18),this.kt(128|63&o>>>12),this.kt(128|63&o>>>6),this.kt(128|63&o)}}this.qt()}Kt(t){const e=this.Ut(t),r=wT(e);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=255&e[o]}Gt(t){const e=this.Ut(t),r=wT(e);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=~(255&e[o])}zt(){this.jt(Ao),this.jt(255)}Ht(){this.Jt(Ao),this.Jt(255)}reset(){this.position=0}seed(t){this.Wt(t.length),this.buffer.set(t,this.position),this.position+=t.length}Yt(){return this.buffer.slice(0,this.position)}Ut(t){const e=function(u){const h=new DataView(new ArrayBuffer(8));return h.setFloat64(0,u,!1),new Uint8Array(h.buffer)}(t),r=!!(128&e[0]);e[0]^=r?255:128;for(let o=1;o<e.length;++o)e[o]^=r?255:0;return e}Nt(t){const e=255&t;e===0?(this.jt(0),this.jt(255)):e===Ao?(this.jt(Ao),this.jt(0)):this.jt(e)}kt(t){const e=255&t;e===0?(this.Jt(0),this.Jt(255)):e===Ao?(this.Jt(Ao),this.Jt(0)):this.Jt(t)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(t){this.Wt(1),this.buffer[this.position++]=t}Jt(t){this.Wt(1),this.buffer[this.position++]=~t}Wt(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class VD{constructor(t){this.Zt=t}St(t){this.Zt.Ot(t)}yt(t){this.Zt.Qt(t)}gt(t){this.Zt.Kt(t)}Vt(){this.Zt.zt()}}class xD{constructor(t){this.Zt=t}St(t){this.Zt.Lt(t)}yt(t){this.Zt.$t(t)}gt(t){this.Zt.Gt(t)}Vt(){this.Zt.Ht()}}class vu{constructor(){this.Zt=new CD,this.Xt=new VD(this.Zt),this.en=new xD(this.Zt)}seed(t){this.Zt.seed(t)}tn(t){return t===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(t,e,r,o){this.indexId=t,this.documentKey=e,this.arrayValue=r,this.directionalValue=o}nn(){const t=this.directionalValue.length,e=t===0||this.directionalValue[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.directionalValue,0),e!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new la(this.indexId,this.documentKey,this.arrayValue,r)}}function Xr(s,t){let e=s.indexId-t.indexId;return e!==0?e:(e=IT(s.arrayValue,t.arrayValue),e!==0?e:(e=IT(s.directionalValue,t.directionalValue),e!==0?e:st.comparator(s.documentKey,t.documentKey)))}function IT(s,t){for(let e=0;e<s.length&&e<t.length;++e){const r=s[e]-t[e];if(r!==0)return r}return s.length-t.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(t){this.rn=new Xt((e,r)=>se.comparator(e.field,r.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.sn=t.orderBy,this._n=[];for(const e of t.filters){const r=e;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(t){if(gt(t.collectionGroup===this.collectionId),this.an)return!1;const e=Ag(t);if(e!==void 0&&!this.cn(e))return!1;const r=ia(t);let o=new Set,u=0,h=0;for(;u<r.length&&this.cn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.rn.size>0){const d=this.rn.getIterator().getNext();if(!o.has(d.field.canonicalString())){const g=r[u];if(!this.ln(d,g)||!this.hn(this.sn[h++],g))return!1}++u}for(;u<r.length;++u){const d=r[u];if(h>=this.sn.length||!this.hn(this.sn[h++],d))return!1}return!0}Pn(){if(this.an)return null;let t=new Xt(se.comparator);const e=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new Fh(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new Fh(r.field,0))}for(const r of this.sn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new Fh(r.field,r.dir==="asc"?0:1)));return new nf(nf.UNKNOWN_ID,this.collectionId,e,Lu.empty())}cn(t){for(const e of this._n)if(this.ln(e,t))return!0;return!1}ln(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}hn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(s){var t,e;if(gt(s instanceof Mt||s instanceof $t),s instanceof Mt){if(s instanceof TA){const o=((e=(t=s.value.arrayValue)===null||t===void 0?void 0:t.values)===null||e===void 0?void 0:e.map(u=>Mt.create(s.field,"==",u)))||[];return $t.create(o,"or")}return s}const r=s.filters.map(o=>nb(o));return $t.create(r,s.op)}function ND(s){if(s.getFilters().length===0)return[];const t=Bg(nb(s));return gt(ib(t)),kg(t)||Ug(t)?[t]:t.getFilters()}function kg(s){return s instanceof Mt}function Ug(s){return s instanceof $t&&mp(s)}function ib(s){return kg(s)||Ug(s)||function(e){if(e instanceof $t&&Cg(e)){for(const r of e.getFilters())if(!kg(r)&&!Ug(r))return!1;return!0}return!1}(s)}function Bg(s){if(gt(s instanceof Mt||s instanceof $t),s instanceof Mt)return s;if(s.filters.length===1)return Bg(s.filters[0]);const t=s.filters.map(r=>Bg(r));let e=$t.create(t,s.op);return e=mf(e),ib(e)?e:(gt(e instanceof $t),gt(Ho(e)),gt(e.filters.length>1),e.filters.reduce((r,o)=>wp(r,o)))}function wp(s,t){let e;return gt(s instanceof Mt||s instanceof $t),gt(t instanceof Mt||t instanceof $t),e=s instanceof Mt?t instanceof Mt?function(o,u){return $t.create([o,u],"and")}(s,t):DT(s,t):t instanceof Mt?DT(t,s):function(o,u){if(gt(o.filters.length>0&&u.filters.length>0),Ho(o)&&Ho(u))return yA(o,u.getFilters());const h=Cg(o)?o:u,d=Cg(o)?u:o,g=h.filters.map(p=>wp(p,d));return $t.create(g,"or")}(s,t),mf(e)}function DT(s,t){if(Ho(t))return yA(t,s.getFilters());{const e=t.filters.map(r=>wp(s,r));return $t.create(e,"or")}}function mf(s){if(gt(s instanceof Mt||s instanceof $t),s instanceof Mt)return s;const t=s.getFilters();if(t.length===1)return mf(t[0]);if(pA(s))return s;const e=t.map(o=>mf(o)),r=[];return e.forEach(o=>{o instanceof Mt?r.push(o):o instanceof $t&&(o.op===s.op?r.push(...o.filters):r.push(o))}),r.length===1?r[0]:$t.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.Tn=new Ip}addToCollectionParentIndex(t,e){return this.Tn.add(e),B.resolve()}getCollectionParents(t,e){return B.resolve(this.Tn.getEntries(e))}addFieldIndex(t,e){return B.resolve()}deleteFieldIndex(t,e){return B.resolve()}deleteAllFieldIndexes(t){return B.resolve()}createTargetIndexes(t,e){return B.resolve()}getDocumentsMatchingTarget(t,e){return B.resolve(null)}getIndexType(t,e){return B.resolve(0)}getFieldIndexes(t,e){return B.resolve([])}getNextCollectionGroupToUpdate(t){return B.resolve(null)}getMinOffset(t,e){return B.resolve(Nn.min())}getMinOffsetFromCollectionGroup(t,e){return B.resolve(Nn.min())}updateCollectionGroup(t,e,r){return B.resolve()}updateIndexEntries(t,e){return B.resolve()}}class Ip{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e]||new Xt(Ot.comparator),u=!o.has(r);return this.index[e]=o.add(r),u}has(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e];return o&&o.has(r)}getEntries(t){return(this.index[t]||new Xt(Ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="IndexedDbIndexManager",kh=new Uint8Array(0);class MD{constructor(t,e){this.databaseId=e,this.In=new Ip,this.En=new cr(r=>pa(r),(r,o)=>tc(r,o)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.In.has(e)){const r=e.lastSegment(),o=e.popLast();t.addOnCommittedListener(()=>{this.In.add(e)});const u={collectionId:r,parent:an(o)};return VT(t).put(u)}return B.resolve()}getCollectionParents(t,e){const r=[],o=IDBKeyRange.bound([e,""],[F0(e),""],!1,!0);return VT(t).G(o).next(u=>{for(const h of u){if(h.collectionId!==e)break;r.push(bi(h.parent))}return r})}addFieldIndex(t,e){const r=Eu(t),o=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])}}(e);delete o.indexId;const u=r.add(o);if(e.indexState){const h=So(t);return u.next(d=>{h.put(AT(d,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return u.next()}deleteFieldIndex(t,e){const r=Eu(t),o=So(t),u=bo(t);return r.delete(e.indexId).next(()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=Eu(t),r=bo(t),o=So(t);return e.J().next(()=>r.J()).next(()=>o.J())}createTargetIndexes(t,e){return B.forEach(this.dn(e),r=>this.getIndexType(t,r).next(o=>{if(o===0||o===1){const u=new RT(r).Pn();if(u!=null)return this.addFieldIndex(t,u)}}))}getDocumentsMatchingTarget(t,e){const r=bo(t);let o=!0;const u=new Map;return B.forEach(this.dn(e),h=>this.An(t,h).next(d=>{o&&(o=!!d),u.set(h,d)})).next(()=>{if(o){let h=Rt();const d=[];return B.forEach(u,(g,p)=>{J(CT,`Using index ${function(lt){return`id=${lt.indexId}|cg=${lt.collectionGroup}|f=${lt.fields.map(Tt=>`${Tt.fieldPath}:${Tt.kind}`).join(",")}`}(g)} to execute ${pa(e)}`);const E=function(lt,Tt){const ht=Ag(Tt);if(ht===void 0)return null;for(const yt of hf(lt,ht.fieldPath))switch(yt.op){case"array-contains-any":return yt.value.arrayValue.values||[];case"array-contains":return[yt.value]}return null}(p,g),T=function(lt,Tt){const ht=new Map;for(const yt of ia(Tt))for(const O of hf(lt,yt.fieldPath))switch(O.op){case"==":case"in":ht.set(yt.fieldPath.canonicalString(),O.value);break;case"not-in":case"!=":return ht.set(yt.fieldPath.canonicalString(),O.value),Array.from(ht.values())}return null}(p,g),S=function(lt,Tt){const ht=[];let yt=!0;for(const O of ia(Tt)){const I=O.kind===0?lT(lt,O.fieldPath,lt.startAt):uT(lt,O.fieldPath,lt.startAt);ht.push(I.value),yt&&(yt=I.inclusive)}return new ds(ht,yt)}(p,g),V=function(lt,Tt){const ht=[];let yt=!0;for(const O of ia(Tt)){const I=O.kind===0?uT(lt,O.fieldPath,lt.endAt):lT(lt,O.fieldPath,lt.endAt);ht.push(I.value),yt&&(yt=I.inclusive)}return new ds(ht,yt)}(p,g),G=this.Rn(g,p,S),H=this.Rn(g,p,V),Q=this.Vn(g,p,T),dt=this.mn(g.indexId,E,G,S.inclusive,H,V.inclusive,Q);return B.forEach(dt,it=>r.H(it,e.limit).next(lt=>{lt.forEach(Tt=>{const ht=st.fromSegments(Tt.documentKey);h.has(ht)||(h=h.add(ht),d.push(ht))})}))}).next(()=>d)}return B.resolve(null)})}dn(t){let e=this.En.get(t);return e||(t.filters.length===0?e=[t]:e=ND($t.create(t.filters,"and")).map(r=>xg(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt)),this.En.set(t,e),e)}mn(t,e,r,o,u,h,d){const g=(e!=null?e.length:1)*Math.max(r.length,u.length),p=g/(e!=null?e.length:1),E=[];for(let T=0;T<g;++T){const S=e?this.fn(e[T/p]):kh,V=this.gn(t,S,r[T%p],o),G=this.pn(t,S,u[T%p],h),H=d.map(Q=>this.gn(t,S,Q,!0));E.push(...this.createRange(V,G,H))}return E}gn(t,e,r,o){const u=new la(t,st.empty(),e,r);return o?u:u.nn()}pn(t,e,r,o){const u=new la(t,st.empty(),e,r);return o?u.nn():u}An(t,e){const r=new RT(e),o=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,o).next(u=>{let h=null;for(const d of u)r.un(d)&&(!h||d.fields.length>h.fields.length)&&(h=d);return h})}getIndexType(t,e){let r=2;const o=this.dn(e);return B.forEach(o,u=>this.An(t,u).next(h=>{h?r!==0&&h.fields.length<function(g){let p=new Xt(se.comparator),E=!1;for(const T of g.filters)for(const S of T.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?E=!0:p=p.add(S.field));for(const T of g.orderBy)T.field.isKeyField()||(p=p.add(T.field));return p.size+(E?1:0)}(u)&&(r=1):r=0})).next(()=>function(h){return h.limit!==null}(e)&&o.length>1&&r===2?1:r)}yn(t,e){const r=new vu;for(const o of ia(t)){const u=e.data.field(o.fieldPath);if(u==null)return null;const h=r.tn(o.kind);oa.xt.At(u,h)}return r.Yt()}fn(t){const e=new vu;return oa.xt.At(t,e.tn(0)),e.Yt()}wn(t,e){const r=new vu;return oa.xt.At(ga(this.databaseId,e),r.tn(function(u){const h=ia(u);return h.length===0?0:h[h.length-1].kind}(t))),r.Yt()}Vn(t,e,r){if(r===null)return[];let o=[];o.push(new vu);let u=0;for(const h of ia(t)){const d=r[u++];for(const g of o)if(this.bn(e,h.fieldPath)&&Fu(d))o=this.Sn(o,h,d);else{const p=g.tn(h.kind);oa.xt.At(d,p)}}return this.Dn(o)}Rn(t,e,r){return this.Vn(t,e,r.position)}Dn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].Yt();return e}Sn(t,e,r){const o=[...t],u=[];for(const h of r.arrayValue.values||[])for(const d of o){const g=new vu;g.seed(d.Yt()),oa.xt.At(h,g.tn(e.kind)),u.push(g)}return u}bn(t,e){return!!t.filters.find(r=>r instanceof Mt&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(t,e){const r=Eu(t),o=So(t);return(e?r.G(Sg,IDBKeyRange.bound(e,e)):r.G()).next(u=>{const h=[];return B.forEach(u,d=>o.get([d.indexId,this.uid]).next(g=>{h.push(function(E,T){const S=T?new Lu(T.sequenceNumber,new Nn(Ea(T.readTime),new st(bi(T.documentKey)),T.largestBatchId)):Lu.empty(),V=E.fields.map(([G,H])=>new Fh(se.fromServerFormat(G),H));return new nf(E.indexId,E.collectionGroup,V,S)}(d,g))})).next(()=>h)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:bt(r.collectionGroup,o.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const o=Eu(t),u=So(t);return this.vn(t).next(h=>o.G(Sg,IDBKeyRange.bound(e,e)).next(d=>B.forEach(d,g=>u.put(AT(g.indexId,this.uid,h,r)))))}updateIndexEntries(t,e){const r=new Map;return B.forEach(e,(o,u)=>{const h=r.get(o.collectionGroup);return(h?B.resolve(h):this.getFieldIndexes(t,o.collectionGroup)).next(d=>(r.set(o.collectionGroup,d),B.forEach(d,g=>this.Cn(t,o,g).next(p=>{const E=this.Fn(u,g);return p.isEqual(E)?B.resolve():this.Mn(t,u,g,p,E)}))))})}xn(t,e,r,o){return bo(t).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.wn(r,e.key),documentKey:e.key.path.toArray()})}On(t,e,r,o){return bo(t).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.wn(r,e.key),e.key.path.toArray()])}Cn(t,e,r){const o=bo(t);let u=new Xt(Xr);return o.Z({index:tA,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,e)])},(h,d)=>{u=u.add(new la(r.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>u)}Fn(t,e){let r=new Xt(Xr);const o=this.yn(e,t);if(o==null)return r;const u=Ag(e);if(u!=null){const h=t.data.field(u.fieldPath);if(Fu(h))for(const d of h.arrayValue.values||[])r=r.add(new la(e.indexId,t.key,this.fn(d),o))}else r=r.add(new la(e.indexId,t.key,kh,o));return r}Mn(t,e,r,o,u){J(CT,"Updating index entries for document '%s'",e.key);const h=[];return function(g,p,E,T,S){const V=g.getIterator(),G=p.getIterator();let H=To(V),Q=To(G);for(;H||Q;){let dt=!1,it=!1;if(H&&Q){const lt=E(H,Q);lt<0?it=!0:lt>0&&(dt=!0)}else H!=null?it=!0:dt=!0;dt?(T(Q),Q=To(G)):it?(S(H),H=To(V)):(H=To(V),Q=To(G))}}(o,u,Xr,d=>{h.push(this.xn(t,e,r,d))},d=>{h.push(this.On(t,e,r,d))}),B.waitFor(h)}vn(t){let e=1;return So(t).Z({index:J0,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),e=o.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((h,d)=>Xr(h,d)).filter((h,d,g)=>!d||Xr(h,g[d-1])!==0);const o=[];o.push(t);for(const h of r){const d=Xr(h,t),g=Xr(h,e);if(d===0)o[0]=t.nn();else if(d>0&&g<0)o.push(h),o.push(h.nn());else if(g>0)break}o.push(e);const u=[];for(let h=0;h<o.length;h+=2){if(this.Nn(o[h],o[h+1]))return[];const d=[o[h].indexId,this.uid,o[h].arrayValue,o[h].directionalValue,kh,[]],g=[o[h+1].indexId,this.uid,o[h+1].arrayValue,o[h+1].directionalValue,kh,[]];u.push(IDBKeyRange.bound(d,g))}return u}Nn(t,e){return Xr(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(xT)}getMinOffset(t,e){return B.mapArray(this.dn(e),r=>this.An(t,r).next(o=>o||ft())).next(xT)}}function VT(s){return Le(s,zu)}function bo(s){return Le(s,lf)}function Eu(s){return Le(s,up)}function So(s){return Le(s,of)}function xT(s){gt(s.length!==0);let t=s[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;ap(o,t)<0&&(t=o),e<o.largestBatchId&&(e=o.largestBatchId)}return new Nn(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rb=41943040;class sn{static withCacheSize(t){return new sn(t,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(s,t,e){const r=s.store(ri),o=s.store(Bo),u=[],h=IDBKeyRange.only(e.batchId);let d=0;const g=r.Z({range:h},(E,T,S)=>(d++,S.delete()));u.push(g.next(()=>{gt(d===1)}));const p=[];for(const E of e.mutations){const T=X0(t,E.key.path,e.batchId);u.push(o.delete(T)),p.push(E.key)}return B.waitFor(u).next(()=>p)}function gf(s){if(!s)return 0;let t;if(s.document)t=s.document;else if(s.unknownDocument)t=s.unknownDocument;else{if(!s.noDocument)throw ft();t=s.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(rb,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);class Pf{constructor(t,e,r,o){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=o,this.Bn={}}static It(t,e,r,o){gt(t.uid!=="");const u=t.isAuthenticated()?t.uid:"";return new Pf(u,e,r,o)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zr(t).Z({index:ca,range:r},(o,u,h)=>{e=!1,h.done()}).next(()=>e)}addMutationBatch(t,e,r,o){const u=Vo(t),h=Zr(t);return h.add({}).next(d=>{gt(typeof d=="number");const g=new vp(d,e,r,o),p=function(V,G,H){const Q=H.baseMutations.map(it=>Ku(V.Tt,it)),dt=H.mutations.map(it=>Ku(V.Tt,it));return{userId:G,batchId:H.batchId,localWriteTimeMs:H.localWriteTime.toMillis(),baseMutations:Q,mutations:dt}}(this.serializer,this.userId,g),E=[];let T=new Xt((S,V)=>bt(S.canonicalString(),V.canonicalString()));for(const S of o){const V=X0(this.userId,S.key.path,d);T=T.add(S.key.path.popLast()),E.push(h.put(p)),E.push(u.put(V,m1))}return T.forEach(S=>{E.push(this.indexManager.addToCollectionParentIndex(t,S))}),t.addOnCommittedListener(()=>{this.Bn[d]=g.keys()}),B.waitFor(E).next(()=>g)})}lookupMutationBatch(t,e){return Zr(t).get(e).next(r=>r?(gt(r.userId===this.userId),aa(this.serializer,r)):null)}Ln(t,e){return this.Bn[e]?B.resolve(this.Bn[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const o=r.keys();return this.Bn[e]=o,o}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Zr(t).Z({index:ca,range:o},(h,d,g)=>{d.userId===this.userId&&(gt(d.batchId>=r),u=aa(this.serializer,d)),g.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ss;return Zr(t).Z({index:ca,range:e,reverse:!0},(o,u,h)=>{r=u.batchId,h.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,ss],[this.userId,Number.POSITIVE_INFINITY]);return Zr(t).G(ca,e).next(r=>r.map(o=>aa(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=Gh(this.userId,e.path),o=IDBKeyRange.lowerBound(r),u=[];return Vo(t).Z({range:o},(h,d,g)=>{const[p,E,T]=h,S=bi(E);if(p===this.userId&&e.path.isEqual(S))return Zr(t).get(T).next(V=>{if(!V)throw ft();gt(V.userId===this.userId),u.push(aa(this.serializer,V))});g.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Xt(bt);const o=[];return e.forEach(u=>{const h=Gh(this.userId,u.path),d=IDBKeyRange.lowerBound(h),g=Vo(t).Z({range:d},(p,E,T)=>{const[S,V,G]=p,H=bi(V);S===this.userId&&u.path.isEqual(H)?r=r.add(G):T.done()});o.push(g)}),B.waitFor(o).next(()=>this.kn(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1,u=Gh(this.userId,r),h=IDBKeyRange.lowerBound(u);let d=new Xt(bt);return Vo(t).Z({range:h},(g,p,E)=>{const[T,S,V]=g,G=bi(S);T===this.userId&&r.isPrefixOf(G)?G.length===o&&(d=d.add(V)):E.done()}).next(()=>this.kn(t,d))}kn(t,e){const r=[],o=[];return e.forEach(u=>{o.push(Zr(t).get(u).next(h=>{if(h===null)throw ft();gt(h.userId===this.userId),r.push(aa(this.serializer,h))}))}),B.waitFor(o).next(()=>r)}removeMutationBatch(t,e){return sb(t.ue,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this.qn(e.batchId)}),B.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(t,o))))}qn(t){delete this.Bn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return B.resolve();const r=IDBKeyRange.lowerBound(function(h){return[h]}(this.userId)),o=[];return Vo(t).Z({range:r},(u,h,d)=>{if(u[0]===this.userId){const g=bi(u[1]);o.push(g)}else d.done()}).next(()=>{gt(o.length===0)})})}containsKey(t,e){return ab(t,this.userId,e)}Qn(t){return ob(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:ss,lastStreamToken:""})}}function ab(s,t,e){const r=Gh(t,e.path),o=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return Vo(s).Z({range:u,Y:!0},(d,g,p)=>{const[E,T,S]=d;E===t&&T===o&&(h=!0),p.done()}).next(()=>h)}function Zr(s){return Le(s,ri)}function Vo(s){return Le(s,Bo)}function ob(s){return Le(s,Uu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Kn(){return new Ta(0)}static Un(){return new Ta(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.Wn(t).next(e=>{const r=new Ta(e.highestTargetId);return e.highestTargetId=r.next(),this.Gn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Wn(t).next(e=>_t.fromTimestamp(new oe(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Wn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.Wn(t).next(o=>(o.highestListenSequenceNumber=e,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),e>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=e),this.Gn(t,o)))}addTargetData(t,e){return this.zn(t,e).next(()=>this.Wn(t).next(r=>(r.targetCount+=1,this.jn(e,r),this.Gn(t,r))))}updateTargetData(t,e){return this.zn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>wo(t).delete(e.targetId)).next(()=>this.Wn(t)).next(r=>(gt(r.targetCount>0),r.targetCount-=1,this.Gn(t,r)))}removeTargets(t,e,r){let o=0;const u=[];return wo(t).Z((h,d)=>{const g=Iu(d);g.sequenceNumber<=e&&r.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(t,g)))}).next(()=>B.waitFor(u)).next(()=>o)}forEachTarget(t,e){return wo(t).Z((r,o)=>{const u=Iu(o);e(u)})}Wn(t){return OT(t).get(af).next(e=>(gt(e!==null),e))}Gn(t,e){return OT(t).put(af,e)}zn(t,e){return wo(t).put(eb(this.serializer,e))}jn(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.Wn(t).next(e=>e.targetCount)}getTargetData(t,e){const r=pa(e),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return wo(t).Z({range:o,index:W0},(h,d,g)=>{const p=Iu(d);tc(e,p.target)&&(u=p,g.done())}).next(()=>u)}addMatchingKeys(t,e,r){const o=[],u=ts(t);return e.forEach(h=>{const d=an(h.path);o.push(u.put({targetId:r,path:d})),o.push(this.referenceDelegate.addReference(t,r,h))}),B.waitFor(o)}removeMatchingKeys(t,e,r){const o=ts(t);return B.forEach(e,u=>{const h=an(u.path);return B.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(t,r,u)])})}removeMatchingKeysForTargetId(t,e){const r=ts(t),o=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),o=ts(t);let u=Rt();return o.Z({range:r,Y:!0},(h,d,g)=>{const p=bi(h[1]),E=new st(p);u=u.add(E)}).next(()=>u)}containsKey(t,e){const r=an(e.path),o=IDBKeyRange.bound([r],[F0(r)],!1,!0);let u=0;return ts(t).Z({index:lp,Y:!0,range:o},([h,d],g,p)=>{h!==0&&(u++,p.done())}).next(()=>u>0)}lt(t,e){return wo(t).get(e).next(r=>r?Iu(r):null)}}function wo(s){return Le(s,zo)}function OT(s){return Le(s,da)}function ts(s){return Le(s,qo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="LruGarbageCollector",LD=1048576;function PT([s,t],[e,r]){const o=bt(s,e);return o===0?bt(t,r):o}class kD{constructor(t){this.Hn=t,this.buffer=new Xt(PT),this.Jn=0}Yn(){return++this.Jn}Zn(t){const e=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();PT(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class lb{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){J(MT,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){vs(e)?J(MT,"Ignoring IndexedDB error during garbage collection: ",e):await ys(e)}await this.er(3e5)})}}class UD{constructor(t,e){this.tr=t,this.params=e}calculateTargetCount(t,e){return this.tr.nr(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(e===0)return B.resolve(Tn.ae);const r=new kD(e);return this.tr.forEachTarget(t,o=>r.Zn(o.sequenceNumber)).next(()=>this.tr.rr(t,o=>r.Zn(o))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.tr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.tr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(NT)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NT):this.ir(t,e))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,e){let r,o,u,h,d,g,p;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(t,o))).next(T=>(r=T,d=Date.now(),this.removeTargets(t,r,e))).next(T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(t,r))).next(T=>(p=Date.now(),Io()<=Lt.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(d-h)+`ms
	Removed ${u} targets in `+(g-d)+`ms
	Removed ${T} documents in `+(p-g)+`ms
Total Duration: ${p-E}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T})))}}function ub(s,t){return new UD(s,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(t,e){this.db=t,this.garbageCollector=ub(this,e)}nr(t){const e=this.sr(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(o=>r+o))}sr(t){let e=0;return this.rr(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}rr(t,e){return this._r(t,(r,o)=>e(o))}addReference(t,e,r){return Uh(t,r)}removeReference(t,e,r){return Uh(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return Uh(t,e)}ar(t,e){return function(o,u){let h=!1;return ob(o).X(d=>ab(o,d,u).next(g=>(g&&(h=!0),B.resolve(!g)))).next(()=>h)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this._r(t,(h,d)=>{if(d<=e){const g=this.ar(t,h).next(p=>{if(!p)return u++,r.getEntry(t,h).next(()=>(r.removeEntry(h,_t.min()),ts(t).delete(function(T){return[0,an(T.path)]}(h))))});o.push(g)}}).next(()=>B.waitFor(o)).next(()=>r.apply(t)).next(()=>u)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return Uh(t,e)}_r(t,e){const r=ts(t);let o,u=Tn.ae;return r.Z({index:lp},([h,d],{path:g,sequenceNumber:p})=>{h===0?(u!==Tn.ae&&e(new st(bi(o)),u),u=p,o=g):u=Tn.ae}).next(()=>{u!==Tn.ae&&e(new st(bi(o)),u)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Uh(s,t){return ts(s).put(function(r,o){return{targetId:0,path:an(r.path),sequenceNumber:o}}(t,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(){this.changes=new cr(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ie.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?B.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return ea(t).put(r)}removeEntry(t,e,r){return ea(t).delete(function(u,h){const d=u.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],df(h),d[d.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.ur(t,r)))}getEntry(t,e){let r=ie.newInvalidDocument(e);return ea(t).Z({index:Hh,range:IDBKeyRange.only(Tu(e))},(o,u)=>{r=this.cr(e,u)}).next(()=>r)}lr(t,e){let r={size:0,document:ie.newInvalidDocument(e)};return ea(t).Z({index:Hh,range:IDBKeyRange.only(Tu(e))},(o,u)=>{r={document:this.cr(e,u),size:gf(u)}}).next(()=>r)}getEntries(t,e){let r=bn();return this.hr(t,e,(o,u)=>{const h=this.cr(o,u);r=r.insert(o,h)}).next(()=>r)}Pr(t,e){let r=bn(),o=new ne(st.comparator);return this.hr(t,e,(u,h)=>{const d=this.cr(u,h);r=r.insert(u,d),o=o.insert(u,gf(h))}).next(()=>({documents:r,Tr:o}))}hr(t,e,r){if(e.isEmpty())return B.resolve();let o=new Xt(UT);e.forEach(g=>o=o.add(g));const u=IDBKeyRange.bound(Tu(o.first()),Tu(o.last())),h=o.getIterator();let d=h.getNext();return ea(t).Z({index:Hh,range:u},(g,p,E)=>{const T=st.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;d&&UT(d,T)<0;)r(d,null),d=h.getNext();d&&d.isEqual(T)&&(r(d,p),d=h.hasNext()?h.getNext():null),d?E.W(Tu(d)):E.done()}).next(()=>{for(;d;)r(d,null),d=h.hasNext()?h.getNext():null})}getDocumentsMatchingQuery(t,e,r,o,u){const h=e.path,d=[h.popLast().toArray(),h.lastSegment(),df(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[h.popLast().toArray(),h.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ea(t).G(IDBKeyRange.bound(d,g,!0)).next(p=>{u==null||u.incrementDocumentReadCount(p.length);let E=bn();for(const T of p){const S=this.cr(st.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);S.isFoundDocument()&&(nc(e,S)||o.has(S.key))&&(E=E.insert(S.key,S))}return E})}getAllFromCollectionGroup(t,e,r,o){let u=bn();const h=kT(e,r),d=kT(e,Nn.max());return ea(t).Z({index:Z0,range:IDBKeyRange.bound(h,d,!0)},(g,p,E)=>{const T=this.cr(st.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);u=u.insert(T.key,T),u.size===o&&E.done()}).next(()=>u)}newChangeBuffer(t){return new qD(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return LT(t).get(bg).next(e=>(gt(!!e),e))}ur(t,e){return LT(t).put(bg,e)}cr(t,e){if(e){const r=wD(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(_t.min())))return r}return ie.newInvalidDocument(t)}}function hb(s){return new zD(s)}class qD extends cb{constructor(t,e){super(),this.Ir=t,this.trackRemovals=e,this.Er=new cr(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(t){const e=[];let r=0,o=new Xt((u,h)=>bt(u.canonicalString(),h.canonicalString()));return this.changes.forEach((u,h)=>{const d=this.Er.get(u);if(e.push(this.Ir.removeEntry(t,u,d.readTime)),h.isValidDocument()){const g=ET(this.Ir.serializer,h);o=o.add(u.path.popLast());const p=gf(g);r+=p-d.size,e.push(this.Ir.addEntry(t,u,g))}else if(r-=d.size,this.trackRemovals){const g=ET(this.Ir.serializer,h.convertToNoDocument(_t.min()));e.push(this.Ir.addEntry(t,u,g))}}),o.forEach(u=>{e.push(this.Ir.indexManager.addToCollectionParentIndex(t,u))}),e.push(this.Ir.updateMetadata(t,r)),B.waitFor(e)}getFromCache(t,e){return this.Ir.lr(t,e).next(r=>(this.Er.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.Ir.Pr(t,e).next(({documents:r,Tr:o})=>(o.forEach((u,h)=>{this.Er.set(u,{size:h,readTime:r.get(u).readTime})}),r))}}function LT(s){return Le(s,Bu)}function ea(s){return Le(s,sf)}function Tu(s){const t=s.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function kT(s,t){const e=t.documentKey.path.toArray();return[s,df(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function UT(s,t){const e=s.path.toArray(),r=t.path.toArray();let o=0;for(let u=0;u<e.length-2&&u<r.length-2;++u)if(o=bt(e[u],r[u]),o)return o;return o=bt(e.length,r.length),o||(o=bt(e[e.length-2],r[r.length-2]),o||bt(e[e.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(t,e,r,o){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next(o=>(r=o,this.remoteDocumentCache.getEntry(t,e))).next(o=>(r!==null&&xu(r.mutation,o,An.empty(),oe.now()),o))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.getLocalViewOfDocuments(t,r,Rt()).next(()=>r))}getLocalViewOfDocuments(t,e,r=Rt()){const o=Si();return this.populateOverlays(t,o,e).next(()=>this.computeViews(t,e,o,r).next(u=>{let h=Su();return u.forEach((d,g)=>{h=h.insert(d,g.overlayedDocument)}),h}))}getOverlayedDocuments(t,e){const r=Si();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,Rt()))}populateOverlays(t,e,r){const o=[];return r.forEach(u=>{e.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(t,o).next(u=>{u.forEach((h,d)=>{e.set(h,d)})})}computeViews(t,e,r,o){let u=bn();const h=Vu(),d=function(){return Vu()}();return e.forEach((g,p)=>{const E=r.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof hr)?u=u.insert(p.key,p):E!==void 0?(h.set(p.key,E.mutation.getFieldMask()),xu(E.mutation,p,E.mutation.getFieldMask(),oe.now())):h.set(p.key,An.empty())}),this.recalculateAndSaveOverlays(t,u).next(g=>(g.forEach((p,E)=>h.set(p,E)),e.forEach((p,E)=>{var T;return d.set(p,new jD(E,(T=h.get(p))!==null&&T!==void 0?T:null))}),d))}recalculateAndSaveOverlays(t,e){const r=Vu();let o=new ne((h,d)=>h-d),u=Rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(h=>{for(const d of h)d.keys().forEach(g=>{const p=e.get(g);if(p===null)return;let E=r.get(g)||An.empty();E=d.applyToLocalView(p,E),r.set(g,E);const T=(o.get(d.batchId)||Rt()).add(g);o=o.insert(d.batchId,T)})}).next(()=>{const h=[],d=o.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),p=g.key,E=g.value,T=DA();E.forEach(S=>{if(!u.has(S)){const V=PA(e.get(S),r.get(S));V!==null&&T.set(S,V),u=u.add(S)}}),h.push(this.documentOverlayCache.saveOverlays(t,p,T))}return B.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,e,r,o){return function(h){return st.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):gp(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,o):this.getDocumentsMatchingCollectionQuery(t,e,r,o)}getNextDocuments(t,e,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,o).next(u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,o-u.size):B.resolve(Si());let d=Uo,g=u;return h.next(p=>B.forEach(p,(E,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),u.get(E)?B.resolve():this.remoteDocumentCache.getEntry(t,E).next(S=>{g=g.insert(E,S)}))).next(()=>this.populateOverlays(t,p,u)).next(()=>this.computeViews(t,g,p,Rt())).next(E=>({batchId:d,changes:RA(E)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new st(e)).next(r=>{let o=Su();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(t,e,r,o){const u=e.collectionGroup;let h=Su();return this.indexManager.getCollectionParents(t,u).next(d=>B.forEach(d,g=>{const p=function(T,S){return new ur(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(e,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,p,r,o).next(E=>{E.forEach((T,S)=>{h=h.insert(T,S)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(t,e,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next(h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,u,o))).next(h=>{u.forEach((g,p)=>{const E=p.getKey();h.get(E)===null&&(h=h.insert(E,ie.newInvalidDocument(E)))});let d=Su();return h.forEach((g,p)=>{const E=u.get(g);E!==void 0&&xu(E.mutation,p,An.empty(),oe.now()),nc(e,p)&&(d=d.insert(g,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,e){return B.resolve(this.dr.get(e))}saveBundleMetadata(t,e){return this.dr.set(e.id,function(o){return{id:o.id,version:o.version,createTime:Ae(o.createTime)}}(e)),B.resolve()}getNamedQuery(t,e){return B.resolve(this.Ar.get(e))}saveNamedQuery(t,e){return this.Ar.set(e.name,function(o){return{name:o.name,query:Sp(o.bundledQuery),readTime:Ae(o.readTime)}}(e)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(){this.overlays=new ne(st.comparator),this.Rr=new Map}getOverlay(t,e){return B.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Si();return B.forEach(e,o=>this.getOverlay(t,o).next(u=>{u!==null&&r.set(o,u)})).next(()=>r)}saveOverlays(t,e,r){return r.forEach((o,u)=>{this.Et(t,e,u)}),B.resolve()}removeOverlaysForBatchId(t,e,r){const o=this.Rr.get(r);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Rr.delete(r)),B.resolve()}getOverlaysForCollection(t,e,r){const o=Si(),u=e.length+1,h=new st(e.child("")),d=this.overlays.getIteratorFrom(h);for(;d.hasNext();){const g=d.getNext().value,p=g.getKey();if(!e.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return B.resolve(o)}getOverlaysForCollectionGroup(t,e,r,o){let u=new ne((p,E)=>p-E);const h=this.overlays.getIterator();for(;h.hasNext();){const p=h.getNext().value;if(p.getKey().getCollectionGroup()===e&&p.largestBatchId>r){let E=u.get(p.largestBatchId);E===null&&(E=Si(),u=u.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const d=Si(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((p,E)=>d.set(p,E)),!(d.size()>=o)););return B.resolve(d)}Et(t,e,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.Rr.get(o.largestBatchId).delete(r.key);this.Rr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new Tp(e,r));let u=this.Rr.get(e);u===void 0&&(u=Rt(),this.Rr.set(e,u)),this.Rr.set(e,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(){this.sessionToken=ye.EMPTY_BYTE_STRING}getSessionToken(t){return B.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(){this.Vr=new Xt(Ge.mr),this.gr=new Xt(Ge.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,e){const r=new Ge(t,e);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.wr(new Ge(t,e))}br(t,e){t.forEach(r=>this.removeReference(r,e))}Sr(t){const e=new st(new Ot([])),r=new Ge(e,t),o=new Ge(e,t+1),u=[];return this.gr.forEachInRange([r,o],h=>{this.wr(h),u.push(h.key)}),u}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const e=new st(new Ot([])),r=new Ge(e,t),o=new Ge(e,t+1);let u=Rt();return this.gr.forEachInRange([r,o],h=>{u=u.add(h.key)}),u}containsKey(t){const e=new Ge(t,0),r=this.Vr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class Ge{constructor(t,e){this.key=t,this.Cr=e}static mr(t,e){return st.comparator(t.key,e.key)||bt(t.Cr,e.Cr)}static pr(t,e){return bt(t.Cr,e.Cr)||st.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new Xt(Ge.mr)}checkEmpty(t){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,o){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new vp(u,e,r,o);this.mutationQueue.push(h);for(const d of o)this.Mr=this.Mr.add(new Ge(d.key,u)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return B.resolve(h)}lookupMutationBatch(t,e){return B.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=this.Nr(r),u=o<0?0:o;return B.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?ss:this.Fr-1)}getAllMutationBatches(t){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new Ge(e,0),o=new Ge(e,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([r,o],h=>{const d=this.Or(h.Cr);u.push(d)}),B.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Xt(bt);return e.forEach(o=>{const u=new Ge(o,0),h=new Ge(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,h],d=>{r=r.add(d.Cr)})}),B.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1;let u=r;st.isDocumentKey(u)||(u=u.child(""));const h=new Ge(new st(u),0);let d=new Xt(bt);return this.Mr.forEachWhile(g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(d=d.add(g.Cr)),!0)},h),B.resolve(this.Br(d))}Br(t){const e=[];return t.forEach(r=>{const o=this.Or(r);o!==null&&e.push(o)}),e}removeMutationBatch(t,e){gt(this.Lr(e.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return B.forEach(e.mutations,o=>{const u=new Ge(o.key,e.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.Mr=r})}qn(t){}containsKey(t,e){const r=new Ge(e,0),o=this.Mr.firstAfterOrEqual(r);return B.resolve(e.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,B.resolve()}Lr(t,e){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const e=this.Nr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(t){this.kr=t,this.docs=function(){return new ne(st.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,o=this.docs.get(r),u=o?o.size:0,h=this.kr(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return B.resolve(r?r.document.mutableCopy():ie.newInvalidDocument(e))}getEntries(t,e){let r=bn();return e.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():ie.newInvalidDocument(o))}),B.resolve(r)}getDocumentsMatchingQuery(t,e,r,o){let u=bn();const h=e.path,d=new st(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:p,value:{document:E}}=g.getNext();if(!h.isPrefixOf(p.path))break;p.path.length>h.length+1||ap(H0(E),r)<=0||(o.has(E.key)||nc(e,E))&&(u=u.insert(E.key,E.mutableCopy()))}return B.resolve(u)}getAllFromCollectionGroup(t,e,r,o){ft()}qr(t,e){return B.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new YD(this)}getSize(t){return B.resolve(this.size)}}class YD extends cb{constructor(t){super(),this.Ir=t}applyChanges(t){const e=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?e.push(this.Ir.addEntry(t,o)):this.Ir.removeEntry(r)}),B.waitFor(e)}getFromCache(t,e){return this.Ir.getEntry(t,e)}getAllFromCache(t,e){return this.Ir.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(t){this.persistence=t,this.Qr=new cr(e=>pa(e),tc),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Rp,this.targetCount=0,this.Ur=Ta.Kn()}forEachTarget(t,e){return this.Qr.forEach((r,o)=>e(o)),B.resolve()}getLastRemoteSnapshotVersion(t){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return B.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Ur.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.$r&&(this.$r=e),B.resolve()}zn(t){this.Qr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ur=new Ta(e),this.highestTargetId=e),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,e){return this.zn(e),this.targetCount+=1,B.resolve()}updateTargetData(t,e){return this.zn(e),B.resolve()}removeTargetData(t,e){return this.Qr.delete(e.target),this.Kr.Sr(e.targetId),this.targetCount-=1,B.resolve()}removeTargets(t,e,r){let o=0;const u=[];return this.Qr.forEach((h,d)=>{d.sequenceNumber<=e&&r.get(d.targetId)===null&&(this.Qr.delete(h),u.push(this.removeMatchingKeysForTargetId(t,d.targetId)),o++)}),B.waitFor(u).next(()=>o)}getTargetCount(t){return B.resolve(this.targetCount)}getTargetData(t,e){const r=this.Qr.get(e)||null;return B.resolve(r)}addMatchingKeys(t,e,r){return this.Kr.yr(e,r),B.resolve()}removeMatchingKeys(t,e,r){this.Kr.br(e,r);const o=this.persistence.referenceDelegate,u=[];return o&&e.forEach(h=>{u.push(o.markPotentiallyOrphaned(t,h))}),B.waitFor(u)}removeMatchingKeysForTargetId(t,e){return this.Kr.Sr(e),B.resolve()}getMatchingKeysForTargetId(t,e){const r=this.Kr.vr(e);return B.resolve(r)}containsKey(t,e){return B.resolve(this.Kr.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(t,e){this.Wr={},this.overlays={},this.Gr=new Tn(0),this.zr=!1,this.zr=!0,this.jr=new HD,this.referenceDelegate=t(this),this.Hr=new $D(this),this.indexManager=new OD,this.remoteDocumentCache=function(o){return new QD(o)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new tb(e),this.Yr=new FD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new GD,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.Wr[t.toKey()];return r||(r=new KD(e,this.referenceDelegate),this.Wr[t.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,e,r){J("MemoryPersistence","Starting transaction:",t);const o=new XD(this.Gr.next());return this.referenceDelegate.Zr(),r(o).next(u=>this.referenceDelegate.Xr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}ei(t,e){return B.or(Object.values(this.Wr).map(r=>()=>r.containsKey(t,e)))}}class XD extends Q0{constructor(t){super(),this.currentSequenceNumber=t}}class Lf{constructor(t){this.persistence=t,this.ti=new Rp,this.ni=null}static ri(t){return new Lf(t)}get ii(){if(this.ni)return this.ni;throw ft()}addReference(t,e,r){return this.ti.addReference(r,e),this.ii.delete(r.toString()),B.resolve()}removeReference(t,e,r){return this.ti.removeReference(r,e),this.ii.add(r.toString()),B.resolve()}markPotentiallyOrphaned(t,e){return this.ii.add(e.toString()),B.resolve()}removeTarget(t,e){this.ti.Sr(e.targetId).forEach(o=>this.ii.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(o=>{o.forEach(u=>this.ii.add(u.toString()))}).next(()=>r.removeTargetData(t,e))}Zr(){this.ni=new Set}Xr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.ii,r=>{const o=st.fromPath(r);return this.si(t,o).next(u=>{u||e.removeEntry(o,_t.min())})}).next(()=>(this.ni=null,e.apply(t)))}updateLimboDocument(t,e){return this.si(t,e).next(r=>{r?this.ii.delete(e.toString()):this.ii.add(e.toString())})}Jr(t){return 0}si(t,e){return B.or([()=>B.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.ei(t,e)])}}class pf{constructor(t,e){this.persistence=t,this.oi=new cr(r=>an(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=ub(this,e)}static ri(t,e){return new pf(t,e)}Zr(){}Xr(t){return B.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}nr(t){const e=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>e.next(o=>r+o))}sr(t){let e=0;return this.rr(t,r=>{e++}).next(()=>e)}rr(t,e){return B.forEach(this.oi,(r,o)=>this.ar(t,r,o).next(u=>u?B.resolve():e(o)))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.qr(t,h=>this.ar(t,h,e).next(d=>{d||(r++,u.removeEntry(h,_t.min()))})).next(()=>u.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,e){return this.oi.set(e,t.currentSequenceNumber),B.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.oi.set(r,t.currentSequenceNumber),B.resolve()}removeReference(t,e,r){return this.oi.set(r,t.currentSequenceNumber),B.resolve()}updateLimboDocument(t,e){return this.oi.set(e,t.currentSequenceNumber),B.resolve()}Jr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Qh(t.data.value)),e}ar(t,e,r){return B.or([()=>this.persistence.ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const o=this.oi.get(e);return B.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(t){this.serializer=t}B(t,e,r,o){const u=new wf("createOrUpgrade",e);r<1&&o>=1&&(function(g){g.createObjectStore(Ju)}(t),function(g){g.createObjectStore(Uu,{keyPath:d1}),g.createObjectStore(ri,{keyPath:XE,autoIncrement:!0}).createIndex(ca,ZE,{unique:!0}),g.createObjectStore(Bo)}(t),BT(t),function(g){g.createObjectStore(ra)}(t));let h=B.resolve();return r<3&&o>=3&&(r!==0&&(function(g){g.deleteObjectStore(qo),g.deleteObjectStore(zo),g.deleteObjectStore(da)}(t),BT(t)),h=h.next(()=>function(g){const p=g.store(da),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_t.min().toTimestamp(),targetCount:0};return p.put(af,E)}(u))),r<4&&o>=4&&(r!==0&&(h=h.next(()=>function(g,p){return p.store(ri).G().next(T=>{g.deleteObjectStore(ri),g.createObjectStore(ri,{keyPath:XE,autoIncrement:!0}).createIndex(ca,ZE,{unique:!0});const S=p.store(ri),V=T.map(G=>S.put(G));return B.waitFor(V)})}(t,u))),h=h.next(()=>{(function(g){g.createObjectStore(jo,{keyPath:A1})})(t)})),r<5&&o>=5&&(h=h.next(()=>this._i(u))),r<6&&o>=6&&(h=h.next(()=>(function(g){g.createObjectStore(Bu)}(t),this.ai(u)))),r<7&&o>=7&&(h=h.next(()=>this.ui(u))),r<8&&o>=8&&(h=h.next(()=>this.ci(t,u))),r<9&&o>=9&&(h=h.next(()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(t)})),r<10&&o>=10&&(h=h.next(()=>this.li(u))),r<11&&o>=11&&(h=h.next(()=>{(function(g){g.createObjectStore(If,{keyPath:b1})})(t),function(g){g.createObjectStore(Rf,{keyPath:S1})}(t)})),r<12&&o>=12&&(h=h.next(()=>{(function(g){const p=g.createObjectStore(Df,{keyPath:x1});p.createIndex(wg,N1,{unique:!1}),p.createIndex(eA,O1,{unique:!1})})(t)})),r<13&&o>=13&&(h=h.next(()=>function(g){const p=g.createObjectStore(sf,{keyPath:g1});p.createIndex(Hh,p1),p.createIndex(Z0,_1)}(t)).next(()=>this.hi(t,u)).next(()=>t.deleteObjectStore(ra))),r<14&&o>=14&&(h=h.next(()=>this.Pi(t,u))),r<15&&o>=15&&(h=h.next(()=>function(g){g.createObjectStore(up,{keyPath:w1,autoIncrement:!0}).createIndex(Sg,I1,{unique:!1}),g.createObjectStore(of,{keyPath:R1}).createIndex(J0,D1,{unique:!1}),g.createObjectStore(lf,{keyPath:C1}).createIndex(tA,V1,{unique:!1})}(t))),r<16&&o>=16&&(h=h.next(()=>{e.objectStore(of).clear()}).next(()=>{e.objectStore(lf).clear()})),r<17&&o>=17&&(h=h.next(()=>{(function(g){g.createObjectStore(cp,{keyPath:M1})})(t)})),h}ai(t){let e=0;return t.store(ra).Z((r,o)=>{e+=gf(o)}).next(()=>{const r={byteSize:e};return t.store(Bu).put(bg,r)})}_i(t){const e=t.store(Uu),r=t.store(ri);return e.G().next(o=>B.forEach(o,u=>{const h=IDBKeyRange.bound([u.userId,ss],[u.userId,u.lastAcknowledgedBatchId]);return r.G(ca,h).next(d=>B.forEach(d,g=>{gt(g.userId===u.userId);const p=aa(this.serializer,g);return sb(t,u.userId,p).next(()=>{})}))}))}ui(t){const e=t.store(qo),r=t.store(ra);return t.store(da).get(af).next(o=>{const u=[];return r.Z((h,d)=>{const g=new Ot(h),p=function(T){return[0,an(T)]}(g);u.push(e.get(p).next(E=>E?B.resolve():(T=>e.put({targetId:0,path:an(T),sequenceNumber:o.highestListenSequenceNumber}))(g)))}).next(()=>B.waitFor(u))})}ci(t,e){t.createObjectStore(zu,{keyPath:T1});const r=e.store(zu),o=new Ip,u=h=>{if(o.add(h)){const d=h.lastSegment(),g=h.popLast();return r.put({collectionId:d,parent:an(g)})}};return e.store(ra).Z({Y:!0},(h,d)=>{const g=new Ot(h);return u(g.popLast())}).next(()=>e.store(Bo).Z({Y:!0},([h,d,g],p)=>{const E=bi(d);return u(E.popLast())}))}li(t){const e=t.store(zo);return e.Z((r,o)=>{const u=Iu(o),h=eb(this.serializer,u);return e.put(h)})}hi(t,e){const r=e.store(ra),o=[];return r.Z((u,h)=>{const d=e.store(sf),g=function(T){return T.document?new st(Ot.fromString(T.document.name).popFirst(5)):T.noDocument?st.fromSegments(T.noDocument.path):T.unknownDocument?st.fromSegments(T.unknownDocument.path):ft()}(h).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(d.put(p))}).next(()=>B.waitFor(o))}Pi(t,e){const r=e.store(ri),o=hb(this.serializer),u=new Dp(Lf.ri,this.serializer.Tt);return r.G().next(h=>{const d=new Map;return h.forEach(g=>{var p;let E=(p=d.get(g.userId))!==null&&p!==void 0?p:Rt();aa(this.serializer,g).keys().forEach(T=>E=E.add(T)),d.set(g.userId,E)}),B.forEach(d,(g,p)=>{const E=new He(p),T=Mf.It(this.serializer,E),S=u.getIndexManager(E),V=Pf.It(E,this.serializer,S,u.referenceDelegate);return new fb(o,V,T,S).recalculateAndSaveOverlaysForDocumentKeys(new Ig(e,Tn.ae),g).next()})})}}function BT(s){s.createObjectStore(qo,{keyPath:v1}).createIndex(lp,E1,{unique:!0}),s.createObjectStore(zo,{keyPath:"targetId"}).createIndex(W0,y1,{unique:!0}),s.createObjectStore(da)}const Wr="IndexedDbPersistence",hg=18e5,fg=5e3,dg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",db="main";class Cp{constructor(t,e,r,o,u,h,d,g,p,E,T=17){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Ti=u,this.window=h,this.document=d,this.Ii=p,this.Ei=E,this.di=T,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=S=>Promise.resolve(),!Cp.D())throw new Z(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new BD(this,o),this.gi=e+db,this.serializer=new tb(g),this.pi=new wi(this.gi,this.di,new ZD(this.serializer)),this.jr=new RD,this.Hr=new PD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hb(this.serializer),this.Yr=new ID,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,E===!1&&Te(Wr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Z(F.FAILED_PRECONDITION,dg);return this.bi(),this.Si(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Hr.getHighestSequenceNumber(t))}).then(t=>{this.Gr=new Tn(t,this.Ii)}).then(()=>{this.zr=!0}).catch(t=>(this.pi&&this.pi.close(),Promise.reject(t)))}Ci(t){return this.fi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.pi.k(async e=>{e.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Bh(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(t).next(e=>{e||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(t)).next(e=>this.isPrimary&&!e?this.xi(t).next(()=>!1):!!e&&this.Oi(t).next(()=>!0))).catch(t=>{if(vs(t))return J(Wr,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return J(Wr,"Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Ti.enqueueRetryable(()=>this.fi(t)),this.isPrimary=t})}Fi(t){return Au(t).get(Eo).next(e=>B.resolve(this.Ni(e)))}Bi(t){return Bh(t).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,hg)){this.mi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const r=Le(e,jo);return r.G().next(o=>{const u=this.qi(o,hg),h=o.filter(d=>u.indexOf(d)===-1);return B.forEach(h,d=>r.delete(d.clientId)).next(()=>h)})}).catch(()=>[]);if(this.yi)for(const e of t)this.yi.removeItem(this.Qi(e.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(t){return!!t&&t.ownerId===this.clientId}Mi(t){return this.Ei?B.resolve(!0):Au(t).get(Eo).next(e=>{if(e!==null&&this.ki(e.leaseTimestampMs,fg)&&!this.$i(e.ownerId)){if(this.Ni(e)&&this.networkEnabled)return!0;if(!this.Ni(e)){if(!e.allowTabSynchronization)throw new Z(F.FAILED_PRECONDITION,dg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bh(t).G().next(r=>this.qi(r,fg).find(o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,h=!this.inForeground&&o.inForeground,d=this.networkEnabled===o.networkEnabled;if(u||h&&d)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&J(Wr,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.zr=!1,this.Ki(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ui(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[Ju,jo],t=>{const e=new Ig(t,Tn.ae);return this.xi(e).next(()=>this.Bi(e))}),this.pi.close(),this.Gi()}qi(t,e){return t.filter(r=>this.ki(r.updateTimeMs,e)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",t=>Bh(t).G().next(e=>this.qi(e,hg).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(t,e){return Pf.It(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new MD(t,this.serializer.Tt.databaseId)}getDocumentOverlayCache(t){return Mf.It(this.serializer,t)}getBundleCache(){return this.Yr}runTransaction(t,e,r){J(Wr,"Starting transaction:",t);const o=e==="readonly"?"readonly":"readwrite",u=function(g){return g===17?k1:g===16?L1:g===15?hp:g===14?rA:g===13?iA:g===12?P1:g===11?nA:void ft()}(this.di);let h;return this.pi.runTransaction(t,o,u,d=>(h=new Ig(d,this.Gr?this.Gr.next():Tn.ae),e==="readwrite-primary"?this.Fi(h).next(g=>!!g||this.Mi(h)).next(g=>{if(!g)throw Te(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new Z(F.FAILED_PRECONDITION,K0);return r(h)}).next(g=>this.Oi(h).next(()=>g)):this.ji(h).next(()=>r(h)))).then(d=>(h.raiseOnCommittedEvent(),d))}ji(t){return Au(t).get(Eo).next(e=>{if(e!==null&&this.ki(e.leaseTimestampMs,fg)&&!this.$i(e.ownerId)&&!this.Ni(e)&&!(this.Ei||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Z(F.FAILED_PRECONDITION,dg)})}Oi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Au(t).put(Eo,e)}static D(){return wi.D()}xi(t){const e=Au(t);return e.get(Eo).next(r=>this.Ni(r)?(J(Wr,"Releasing primary lease."),e.delete(Eo)):B.resolve())}ki(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(Te(`Detected an update time that is in the future: ${t} > ${r}`),!1))}bi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ui(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}Si(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.Ai=()=>{this.Ki();const e=/(?:Version|Mobile)\/1[456]/;E0()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(t){var e;try{const r=((e=this.yi)===null||e===void 0?void 0:e.getItem(this.Qi(t)))!==null;return J(Wr,`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Te(Wr,"Failed to get zombied client id.",r),!1}}Ki(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(t){Te("Failed to set zombie client id.",t)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Au(s){return Le(s,Ju)}function Bh(s){return Le(s,jo)}function Vp(s,t){let e=s.projectId;return s.isDefaultDatabase||(e+="."+s.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(t,e,r,o){this.targetId=t,this.fromCache=e,this.Hi=r,this.Ji=o}static Yi(t,e){let r=Rt(),o=Rt();for(const u of e.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new xp(t,e.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return E0()?8:Y0(tf())>0?6:4}()}initialize(t,e){this.ns=t,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(t,e,r,o){const u={result:null};return this.rs(t,e).next(h=>{u.result=h}).next(()=>{if(!u.result)return this.ss(t,e,o,r).next(h=>{u.result=h})}).next(()=>{if(u.result)return;const h=new WD;return this._s(t,e,h).next(d=>{if(u.result=d,this.Xi)return this.us(t,e,h,d.size)})}).next(()=>u.result)}us(t,e,r,o){return r.documentReadCount<this.es?(Io()<=Lt.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Ro(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),B.resolve()):(Io()<=Lt.DEBUG&&J("QueryEngine","Query:",Ro(e),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ts*o?(Io()<=Lt.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Ro(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,pn(e))):B.resolve())}rs(t,e){if(cT(e))return B.resolve(null);let r=pn(e);return this.indexManager.getIndexType(t,r).next(o=>o===0?null:(e.limit!==null&&o===1&&(e=ff(e,null,"F"),r=pn(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next(u=>{const h=Rt(...u);return this.ns.getDocuments(t,h).next(d=>this.indexManager.getMinOffset(t,r).next(g=>{const p=this.cs(e,d);return this.ls(e,p,h,g.readTime)?this.rs(t,ff(e,null,"F")):this.hs(t,p,e,g)}))})))}ss(t,e,r,o){return cT(e)||o.isEqual(_t.min())?B.resolve(null):this.ns.getDocuments(t,r).next(u=>{const h=this.cs(e,u);return this.ls(e,h,r,o)?B.resolve(null):(Io()<=Lt.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ro(e)),this.hs(t,h,e,G0(o,Uo)).next(d=>d))})}cs(t,e){let r=new Xt(wA(t));return e.forEach((o,u)=>{nc(t,u)&&(r=r.add(u))}),r}ls(t,e,r,o){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const u=t.limitType==="F"?e.last():e.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}_s(t,e,r){return Io()<=Lt.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Ro(e)),this.ns.getDocumentsMatchingQuery(t,e,Nn.min(),r)}hs(t,e,r,o){return this.ns.getDocumentsMatchingQuery(t,r,o).next(u=>(e.forEach(h=>{u=u.insert(h.key,h)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="LocalStore",JD=3e8;class tC{constructor(t,e,r,o){this.persistence=t,this.Ps=e,this.serializer=o,this.Ts=new ne(bt),this.Is=new cr(u=>pa(u),tc),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(r)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new fb(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ts))}}function gb(s,t,e,r){return new tC(s,t,e,r)}async function pb(s,t){const e=at(s);return await e.persistence.runTransaction("Handle user change","readonly",r=>{let o;return e.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,e.As(t),e.mutationQueue.getAllMutationBatches(r))).next(u=>{const h=[],d=[];let g=Rt();for(const p of o){h.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}for(const p of u){d.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}return e.localDocuments.getDocuments(r,g).next(p=>({Rs:p,removedBatchIds:h,addedBatchIds:d}))})})}function eC(s,t){const e=at(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=t.batch.keys(),u=e.ds.newChangeBuffer({trackRemovals:!0});return function(d,g,p,E){const T=p.batch,S=T.keys();let V=B.resolve();return S.forEach(G=>{V=V.next(()=>E.getEntry(g,G)).next(H=>{const Q=p.docVersions.get(G);gt(Q!==null),H.version.compareTo(Q)<0&&(T.applyToRemoteDocument(H,p),H.isValidDocument()&&(H.setReadTime(p.commitVersion),E.addEntry(H)))})}),V.next(()=>d.mutationQueue.removeMutationBatch(g,T))}(e,r,t,u).next(()=>u.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=Rt();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(g=g.add(d.batch.mutations[p].key));return g}(t))).next(()=>e.localDocuments.getDocuments(r,o))})}function _b(s){const t=at(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Hr.getLastRemoteSnapshotVersion(e))}function nC(s,t){const e=at(s),r=t.snapshotVersion;let o=e.Ts;return e.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=e.ds.newChangeBuffer({trackRemovals:!0});o=e.Ts;const d=[];t.targetChanges.forEach((E,T)=>{const S=o.get(T);if(!S)return;d.push(e.Hr.removeMatchingKeys(u,E.removedDocuments,T).next(()=>e.Hr.addMatchingKeys(u,E.addedDocuments,T)));let V=S.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(T)!==null?V=V.withResumeToken(ye.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):E.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(E.resumeToken,r)),o=o.insert(T,V),function(H,Q,dt){return H.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=JD?!0:dt.addedDocuments.size+dt.modifiedDocuments.size+dt.removedDocuments.size>0}(S,V,E)&&d.push(e.Hr.updateTargetData(u,V))});let g=bn(),p=Rt();if(t.documentUpdates.forEach(E=>{t.resolvedLimboDocuments.has(E)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(u,E))}),d.push(yb(u,h,t.documentUpdates).next(E=>{g=E.Vs,p=E.fs})),!r.isEqual(_t.min())){const E=e.Hr.getLastRemoteSnapshotVersion(u).next(T=>e.Hr.setTargetsMetadata(u,u.currentSequenceNumber,r));d.push(E)}return B.waitFor(d).next(()=>h.apply(u)).next(()=>e.localDocuments.getLocalViewOfDocuments(u,g,p)).next(()=>g)}).then(u=>(e.Ts=o,u))}function yb(s,t,e){let r=Rt(),o=Rt();return e.forEach(u=>r=r.add(u)),t.getEntries(s,r).next(u=>{let h=bn();return e.forEach((d,g)=>{const p=u.get(d);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(d)),g.isNoDocument()&&g.version.isEqual(_t.min())?(t.removeEntry(d,g.readTime),h=h.insert(d,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(g),h=h.insert(d,g)):J(Np,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",g.version)}),{Vs:h,fs:o}})}function iC(s,t){const e=at(s);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=ss),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function $o(s,t){const e=at(s);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return e.Hr.getTargetData(r,t).next(u=>u?(o=u,B.resolve(o)):e.Hr.allocateTargetId(r).next(h=>(o=new ir(t,h,"TargetPurposeListen",r.currentSequenceNumber),e.Hr.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=e.Ts.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(e.Ts=e.Ts.insert(r.targetId,r),e.Is.set(t,r.targetId)),r})}async function Xo(s,t,e){const r=at(s),o=r.Ts.get(t),u=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",u,h=>r.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!vs(h))throw h;J(Np,`Failed to update sequence numbers for target ${t}: ${h}`)}r.Ts=r.Ts.remove(t),r.Is.delete(o.target)}function _f(s,t,e){const r=at(s);let o=_t.min(),u=Rt();return r.persistence.runTransaction("Execute query","readwrite",h=>function(g,p,E){const T=at(g),S=T.Is.get(E);return S!==void 0?B.resolve(T.Ts.get(S)):T.Hr.getTargetData(p,E)}(r,h,pn(t)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(h,d.targetId).next(g=>{u=g})}).next(()=>r.Ps.getDocumentsMatchingQuery(h,t,e?o:_t.min(),e?u:Rt())).next(d=>(Tb(r,SA(t),d),{documents:d,gs:u})))}function vb(s,t){const e=at(s),r=at(e.Hr),o=e.Ts.get(t);return o?Promise.resolve(o.target):e.persistence.runTransaction("Get target data","readonly",u=>r.lt(u,t).next(h=>h?h.target:null))}function Eb(s,t){const e=at(s),r=e.Es.get(t)||_t.min();return e.persistence.runTransaction("Get new document changes","readonly",o=>e.ds.getAllFromCollectionGroup(o,t,G0(r,Uo),Number.MAX_SAFE_INTEGER)).then(o=>(Tb(e,t,o),o))}function Tb(s,t,e){let r=s.Es.get(t)||_t.min();e.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),s.Es.set(t,r)}async function rC(s,t,e,r){const o=at(s);let u=Rt(),h=bn();for(const p of e){const E=t.ps(p.metadata.name);p.document&&(u=u.add(E));const T=t.ys(p);T.setReadTime(t.ws(p.metadata.readTime)),h=h.insert(E,T)}const d=o.ds.newChangeBuffer({trackRemovals:!0}),g=await $o(o,function(E){return pn(rl(Ot.fromString(`__bundle__/docs/${E}`)))}(r));return o.persistence.runTransaction("Apply bundle documents","readwrite",p=>yb(p,d,h).next(E=>(d.apply(p),E)).next(E=>o.Hr.removeMatchingKeysForTargetId(p,g.targetId).next(()=>o.Hr.addMatchingKeys(p,u,g.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(p,E.Vs,E.fs)).next(()=>E.Vs)))}async function sC(s,t,e=Rt()){const r=await $o(s,pn(Sp(t.bundledQuery))),o=at(s);return o.persistence.runTransaction("Save named query","readwrite",u=>{const h=Ae(t.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o.Yr.saveNamedQuery(u,t);const d=r.withResumeToken(ye.EMPTY_BYTE_STRING,h);return o.Ts=o.Ts.insert(d.targetId,d),o.Hr.updateTargetData(u,d).next(()=>o.Hr.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Hr.addMatchingKeys(u,e,r.targetId)).next(()=>o.Yr.saveNamedQuery(u,t))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="firestore_clients";function zT(s,t){return`${Ab}_${s}_${t}`}const bb="firestore_mutations";function qT(s,t,e){let r=`${bb}_${s}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const Sb="firestore_targets";function mg(s,t){return`${Sb}_${s}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai="SharedClientState";class yf{constructor(t,e,r,o){this.user=t,this.batchId=e,this.state=r,this.error=o}static bs(t,e,r){const o=JSON.parse(r);let u,h=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return h&&o.error&&(h=typeof o.error.message=="string"&&typeof o.error.code=="string",h&&(u=new Z(o.error.code,o.error.message))),h?new yf(t,e,o.state,u):(Te(Ai,`Failed to parse mutation state for ID '${e}': ${r}`),null)}Ss(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Nu{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static bs(t,e){const r=JSON.parse(e);let o,u=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return u&&r.error&&(u=typeof r.error.message=="string"&&typeof r.error.code=="string",u&&(o=new Z(r.error.code,r.error.message))),u?new Nu(t,r.state,o):(Te(Ai,`Failed to parse target state for ID '${t}': ${e}`),null)}Ss(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class vf{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static bs(t,e){const r=JSON.parse(e);let o=typeof r=="object"&&r.activeTargetIds instanceof Array,u=pp();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=$0(r.activeTargetIds[h]),u=u.add(r.activeTargetIds[h]);return o?new vf(t,u):(Te(Ai,`Failed to parse client data for instance '${t}': ${e}`),null)}}class Op{constructor(t,e){this.clientId=t,this.onlineState=e}static bs(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new Op(e.clientId,e.onlineState):(Te(Ai,`Failed to parse online state: ${t}`),null)}}class zg{constructor(){this.activeTargetIds=pp()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ss(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class gg{constructor(t,e,r,o,u){this.window=t,this.Ti=e,this.persistenceKey=r,this.Cs=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new ne(bt),this.started=!1,this.Os=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.Ns=zT(this.persistenceKey,this.Cs),this.Bs=function(g){return`firestore_sequence_number_${g}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new zg),this.Ls=new RegExp(`^${Ab}_${h}_([^_]*)$`),this.ks=new RegExp(`^${bb}_${h}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${Sb}_${h}_(\\d+)$`),this.Qs=function(g){return`firestore_online_state_${g}`}(this.persistenceKey),this.$s=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.zi();for(const r of t){if(r===this.Cs)continue;const o=this.getItem(zT(this.persistenceKey,r));if(o){const u=vf.bs(r,o);u&&(this.xs=this.xs.insert(u.clientId,u))}}this.Ks();const e=this.storage.getItem(this.Qs);if(e){const r=this.Us(e);r&&this.Ws(r)}for(const r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(t){this.setItem(this.Bs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(t){let e=!1;return this.xs.forEach((r,o)=>{o.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.zs(t,"pending")}updateMutationState(t,e,r){this.zs(t,e,r),this.js(t)}addLocalQueryTarget(t,e=!0){let r="not-current";if(this.isActiveQueryTarget(t)){const o=this.storage.getItem(mg(this.persistenceKey,t));if(o){const u=Nu.bs(t,o);u&&(r=u.state)}}return e&&this.Hs.Ds(t),this.Ks(),r}removeLocalQueryTarget(t){this.Hs.vs(t),this.Ks()}isLocalQueryTarget(t){return this.Hs.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(mg(this.persistenceKey,t))}updateQueryState(t,e,r){this.Js(t,e,r)}handleUserChange(t,e,r){e.forEach(o=>{this.js(o)}),this.currentUser=t,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(t){this.Ys(t)}notifyBundleLoaded(t){this.Zs(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return J(Ai,"READ",t,e),e}setItem(t,e){J(Ai,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){J(Ai,"REMOVE",t),this.storage.removeItem(t)}Ms(t){const e=t;if(e.storageArea===this.storage){if(J(Ai,"EVENT",e.key,e.newValue),e.key===this.Ns)return void Te("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(e.key!==null){if(this.Ls.test(e.key)){if(e.newValue==null){const r=this.Xs(e.key);return this.eo(r,null)}{const r=this.no(e.key,e.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(e.key)){if(e.newValue!==null){const r=this.ro(e.key,e.newValue);if(r)return this.io(r)}}else if(this.qs.test(e.key)){if(e.newValue!==null){const r=this.so(e.key,e.newValue);if(r)return this.oo(r)}}else if(e.key===this.Qs){if(e.newValue!==null){const r=this.Us(e.newValue);if(r)return this.Ws(r)}}else if(e.key===this.Bs){const r=function(u){let h=Tn.ae;if(u!=null)try{const d=JSON.parse(u);gt(typeof d=="number"),h=d}catch(d){Te(Ai,"Failed to read sequence number from WebStorage",d)}return h}(e.newValue);r!==Tn.ae&&this.sequenceNumberHandler(r)}else if(e.key===this.$s){const r=this._o(e.newValue);await Promise.all(r.map(o=>this.syncEngine.ao(o)))}}}else this.Os.push(e)})}}get Hs(){return this.xs.get(this.Cs)}Ks(){this.setItem(this.Ns,this.Hs.Ss())}zs(t,e,r){const o=new yf(this.currentUser,t,e,r),u=qT(this.persistenceKey,this.currentUser,t);this.setItem(u,o.Ss())}js(t){const e=qT(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Ys(t){const e={clientId:this.Cs,onlineState:t};this.storage.setItem(this.Qs,JSON.stringify(e))}Js(t,e,r){const o=mg(this.persistenceKey,t),u=new Nu(t,e,r);this.setItem(o,u.Ss())}Zs(t){const e=JSON.stringify(Array.from(t));this.setItem(this.$s,e)}Xs(t){const e=this.Ls.exec(t);return e?e[1]:null}no(t,e){const r=this.Xs(t);return vf.bs(r,e)}ro(t,e){const r=this.ks.exec(t),o=Number(r[1]),u=r[2]!==void 0?r[2]:null;return yf.bs(new He(u),o,e)}so(t,e){const r=this.qs.exec(t),o=Number(r[1]);return Nu.bs(o,e)}Us(t){return Op.bs(t)}_o(t){return JSON.parse(t)}async io(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.uo(t.batchId,t.state,t.error);J(Ai,`Ignoring mutation for non-active user ${t.user.uid}`)}oo(t){return this.syncEngine.co(t.targetId,t.state,t.error)}eo(t,e){const r=e?this.xs.insert(t,e):this.xs.remove(t),o=this.Gs(this.xs),u=this.Gs(r),h=[],d=[];return u.forEach(g=>{o.has(g)||h.push(g)}),o.forEach(g=>{u.has(g)||d.push(g)}),this.syncEngine.lo(h,d).then(()=>{this.xs=r})}Ws(t){this.xs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Gs(t){let e=pp();return t.forEach((r,o)=>{e=e.unionWith(o.activeTargetIds)}),e}}class wb{constructor(){this.ho=new zg,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,e,r){this.Po[t]=e}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new zg,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="ConnectivityMonitor";class FT{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){J(jT,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){J(jT,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zh=null;function qg(){return zh===null?zh=function(){return 268435456+Math.round(2147483648*Math.random())}():zh++,"0x"+zh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="RestConnection",oC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lC{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${r}/databases/${o}`,this.wo=this.databaseId.database===uf?`project_id=${r}`:`project_id=${r}&database_id=${o}`}bo(t,e,r,o,u){const h=qg(),d=this.So(t,e.toUriEncodedString());J(pg,`Sending RPC '${t}' ${h}:`,d,r);const g={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(g,o,u),this.vo(t,d,g,r).then(p=>(J(pg,`Received RPC '${t}' ${h}: `,p),p),p=>{throw Ri(pg,`RPC '${t}' ${h} failed with error: `,p,"url: ",d,"request:",r),p})}Co(t,e,r,o,u,h){return this.bo(t,e,r,o,u)}Do(t,e,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+il}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((o,u)=>t[u]=o),r&&r.headers.forEach((o,u)=>t[u]=o)}So(t,e){const r=oC[t];return`${this.po}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Ko(t){this.ko(t)}Uo(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class cC extends lC{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,r,o){const u=qg();return new Promise((h,d)=>{const g=new L0;g.setWithCredentials(!0),g.listenOnce(k0.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case jh.NO_ERROR:const E=g.getResponseJson();J(rn,`XHR for RPC '${t}' ${u} received:`,JSON.stringify(E)),h(E);break;case jh.TIMEOUT:J(rn,`RPC '${t}' ${u} timed out`),d(new Z(F.DEADLINE_EXCEEDED,"Request time out"));break;case jh.HTTP_ERROR:const T=g.getStatus();if(J(rn,`RPC '${t}' ${u} failed with status:`,T,"response text:",g.getResponseText()),T>0){let S=g.getResponseJson();Array.isArray(S)&&(S=S[0]);const V=S==null?void 0:S.error;if(V&&V.status&&V.message){const G=function(Q){const dt=Q.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(dt)>=0?dt:F.UNKNOWN}(V.status);d(new Z(G,V.message))}else d(new Z(F.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new Z(F.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{J(rn,`RPC '${t}' ${u} completed.`)}});const p=JSON.stringify(o);J(rn,`RPC '${t}' ${u} sending request:`,o),g.send(e,"POST",p,r,15)})}Wo(t,e,r){const o=qg(),u=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],h=z0(),d=B0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Do(g.initMessageHeaders,e,r),g.encodeInitMessageHeaders=!0;const E=u.join("");J(rn,`Creating RPC '${t}' stream ${o}: ${E}`,g);const T=h.createWebChannel(E,g);let S=!1,V=!1;const G=new uC({Fo:Q=>{V?J(rn,`Not sending because RPC '${t}' stream ${o} is closed:`,Q):(S||(J(rn,`Opening RPC '${t}' stream ${o} transport.`),T.open(),S=!0),J(rn,`RPC '${t}' stream ${o} sending:`,Q),T.send(Q))},Mo:()=>T.close()}),H=(Q,dt,it)=>{Q.listen(dt,lt=>{try{it(lt)}catch(Tt){setTimeout(()=>{throw Tt},0)}})};return H(T,bu.EventType.OPEN,()=>{V||(J(rn,`RPC '${t}' stream ${o} transport opened.`),G.Qo())}),H(T,bu.EventType.CLOSE,()=>{V||(V=!0,J(rn,`RPC '${t}' stream ${o} transport closed`),G.Ko())}),H(T,bu.EventType.ERROR,Q=>{V||(V=!0,Ri(rn,`RPC '${t}' stream ${o} transport errored:`,Q),G.Ko(new Z(F.UNAVAILABLE,"The operation could not be completed")))}),H(T,bu.EventType.MESSAGE,Q=>{var dt;if(!V){const it=Q.data[0];gt(!!it);const lt=it,Tt=(lt==null?void 0:lt.error)||((dt=lt[0])===null||dt===void 0?void 0:dt.error);if(Tt){J(rn,`RPC '${t}' stream ${o} received error:`,Tt);const ht=Tt.status;let yt=function(w){const R=De[w];if(R!==void 0)return UA(R)}(ht),O=Tt.message;yt===void 0&&(yt=F.INTERNAL,O="Unknown error status: "+ht+" with message "+Tt.message),V=!0,G.Ko(new Z(yt,O)),T.close()}else J(rn,`RPC '${t}' stream ${o} received:`,it),G.Uo(it)}}),H(d,U0.STAT_EVENT,Q=>{Q.stat===Tg.PROXY?J(rn,`RPC '${t}' stream ${o} detected buffering proxy`):Q.stat===Tg.NOPROXY&&J(rn,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{G.$o()},0),G}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(){return typeof window<"u"?window:null}function Zh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(s){return new gD(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(t,e,r=1e3,o=1.5,u=6e4){this.Ti=t,this.timerId=e,this.Go=r,this.zo=o,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const e=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),o=Math.max(0,e-r);o>0&&J("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="PersistentStream";class Rb{constructor(t,e,r,o,u,h,d,g){this.Ti=t,this.n_=r,this.r_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Mp(t,e)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,e){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():e&&e.code===F.RESOURCE_EXHAUSTED?(Te(e.toString()),Te("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(e)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.i_===e&&this.V_(r,o)},r=>{t(()=>{const o=new Z(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(o)})})}V_(t,e){const r=this.R_(this.i_);this.stream=this.f_(t,e),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{r(()=>this.m_(o))}),this.stream.onMessage(o=>{r(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return J(GT,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return e=>{this.Ti.enqueueAndForget(()=>this.i_===t?e():(J(GT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hC extends Rb{constructor(t,e,r,o,u,h){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,o,h),this.serializer=u}f_(t,e){return this.connection.Wo("Listen",t,e)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const e=yD(this.serializer,t),r=function(u){if(!("targetChange"in u))return _t.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?_t.min():h.readTime?Ae(h.readTime):_t.min()}(t);return this.listener.p_(e,r)}y_(t){const e={};e.database=Pg(this.serializer),e.addTarget=function(u,h){let d;const g=h.target;if(d=cf(g)?{documents:YA(u,g)}:{query:$A(u,g).ht},d.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){d.resumeToken=jA(u,h.resumeToken);const p=Og(u,h.expectedCount);p!==null&&(d.expectedCount=p)}else if(h.snapshotVersion.compareTo(_t.min())>0){d.readTime=Yo(u,h.snapshotVersion.toTimestamp());const p=Og(u,h.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,t);const r=ED(this.serializer,t);r&&(e.labels=r),this.I_(e)}w_(t){const e={};e.database=Pg(this.serializer),e.removeTarget=t,this.I_(e)}}class fC extends Rb{constructor(t,e,r,o,u,h){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,o,h),this.serializer=u}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(t,e){return this.connection.Wo("Write",t,e)}g_(t){return gt(!!t.streamToken),this.lastStreamToken=t.streamToken,gt(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){gt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const e=vD(t.writeResults,t.commitTime),r=Ae(t.commitTime);return this.listener.v_(r,e)}C_(){const t={};t.database=Pg(this.serializer),this.I_(t)}S_(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>Ku(this.serializer,r))};this.I_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{}class mC extends dC{constructor(t,e,r,o){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.")}bo(t,e,r,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.bo(t,Mg(e,r),o,u,h)).catch(u=>{throw u.name==="FirebaseError"?(u.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Z(F.UNKNOWN,u.toString())})}Co(t,e,r,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.Co(t,Mg(e,r),o,h,d,u)).catch(h=>{throw h.name==="FirebaseError"?(h.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Z(F.UNKNOWN,h.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class gC{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Te(e),this.N_=!1):J("OnlineStateTracker",e)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="RemoteStore";class pC{constructor(t,e,r,o,u){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To(h=>{r.enqueueAndForget(async()=>{Ts(this)&&(J(Aa,"Restarting streams for network reachability change."),await async function(g){const p=at(g);p.W_.add(4),await ol(p),p.j_.set("Unknown"),p.W_.delete(4),await oc(p)}(this))})}),this.j_=new gC(r,o)}}async function oc(s){if(Ts(s))for(const t of s.G_)await t(!0)}async function ol(s){for(const t of s.G_)await t(!1)}function kf(s,t){const e=at(s);e.U_.has(t.targetId)||(e.U_.set(t.targetId,t),kp(e)?Lp(e):ul(e).c_()&&Pp(e,t))}function Zo(s,t){const e=at(s),r=ul(e);e.U_.delete(t),r.c_()&&Db(e,t),e.U_.size===0&&(r.c_()?r.P_():Ts(e)&&e.j_.set("Unknown"))}function Pp(s,t){if(s.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(_t.min())>0){const e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}ul(s).y_(t)}function Db(s,t){s.H_.Ne(t),ul(s).w_(t)}function Lp(s){s.H_=new hD({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>s.U_.get(t)||null,it:()=>s.datastore.serializer.databaseId}),ul(s).start(),s.j_.B_()}function kp(s){return Ts(s)&&!ul(s).u_()&&s.U_.size>0}function Ts(s){return at(s).W_.size===0}function Cb(s){s.H_=void 0}async function _C(s){s.j_.set("Online")}async function yC(s){s.U_.forEach((t,e)=>{Pp(s,t)})}async function vC(s,t){Cb(s),kp(s)?(s.j_.q_(t),Lp(s)):s.j_.set("Unknown")}async function EC(s,t,e){if(s.j_.set("Online"),t instanceof qA&&t.state===2&&t.cause)try{await async function(o,u){const h=u.cause;for(const d of u.targetIds)o.U_.has(d)&&(await o.remoteSyncer.rejectListen(d,h),o.U_.delete(d),o.H_.removeTarget(d))}(s,t)}catch(r){J(Aa,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Ef(s,r)}else if(t instanceof Xh?s.H_.We(t):t instanceof zA?s.H_.Ze(t):s.H_.je(t),!e.isEqual(_t.min()))try{const r=await _b(s.localStore);e.compareTo(r)>=0&&await function(u,h){const d=u.H_.ot(h);return d.targetChanges.forEach((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.U_.get(p);E&&u.U_.set(p,E.withResumeToken(g.resumeToken,h))}}),d.targetMismatches.forEach((g,p)=>{const E=u.U_.get(g);if(!E)return;u.U_.set(g,E.withResumeToken(ye.EMPTY_BYTE_STRING,E.snapshotVersion)),Db(u,g);const T=new ir(E.target,g,p,E.sequenceNumber);Pp(u,T)}),u.remoteSyncer.applyRemoteEvent(d)}(s,e)}catch(r){J(Aa,"Failed to raise snapshot:",r),await Ef(s,r)}}async function Ef(s,t,e){if(!vs(t))throw t;s.W_.add(1),await ol(s),s.j_.set("Offline"),e||(e=()=>_b(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{J(Aa,"Retrying IndexedDB access"),await e(),s.W_.delete(1),await oc(s)})}function Vb(s,t){return t().catch(e=>Ef(s,e,t))}async function ll(s){const t=at(s),e=ms(t);let r=t.K_.length>0?t.K_[t.K_.length-1].batchId:ss;for(;TC(t);)try{const o=await iC(t.localStore,r);if(o===null){t.K_.length===0&&e.P_();break}r=o.batchId,AC(t,o)}catch(o){await Ef(t,o)}xb(t)&&Nb(t)}function TC(s){return Ts(s)&&s.K_.length<10}function AC(s,t){s.K_.push(t);const e=ms(s);e.c_()&&e.b_&&e.S_(t.mutations)}function xb(s){return Ts(s)&&!ms(s).u_()&&s.K_.length>0}function Nb(s){ms(s).start()}async function bC(s){ms(s).C_()}async function SC(s){const t=ms(s);for(const e of s.K_)t.S_(e.mutations)}async function wC(s,t,e){const r=s.K_.shift(),o=Ep.from(r,t,e);await Vb(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await ll(s)}async function IC(s,t){t&&ms(s).b_&&await async function(r,o){if(function(h){return kA(h)&&h!==F.ABORTED}(o.code)){const u=r.K_.shift();ms(r).h_(),await Vb(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o)),await ll(r)}}(s,t),xb(s)&&Nb(s)}async function HT(s,t){const e=at(s);e.asyncQueue.verifyOperationInProgress(),J(Aa,"RemoteStore received new credentials");const r=Ts(e);e.W_.add(3),await ol(e),r&&e.j_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.W_.delete(3),await oc(e)}async function jg(s,t){const e=at(s);t?(e.W_.delete(2),await oc(e)):t||(e.W_.add(2),await ol(e),e.j_.set("Unknown"))}function ul(s){return s.J_||(s.J_=function(e,r,o){const u=at(e);return u.M_(),new hC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{xo:_C.bind(null,s),No:yC.bind(null,s),Lo:vC.bind(null,s),p_:EC.bind(null,s)}),s.G_.push(async t=>{t?(s.J_.h_(),kp(s)?Lp(s):s.j_.set("Unknown")):(await s.J_.stop(),Cb(s))})),s.J_}function ms(s){return s.Y_||(s.Y_=function(e,r,o){const u=at(e);return u.M_(),new fC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{xo:()=>Promise.resolve(),No:bC.bind(null,s),Lo:IC.bind(null,s),D_:SC.bind(null,s),v_:wC.bind(null,s)}),s.G_.push(async t=>{t?(s.Y_.h_(),await ll(s)):(await s.Y_.stop(),s.K_.length>0&&(J(Aa,`Stopping write stream with ${s.K_.length} pending writes`),s.K_=[]))})),s.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(t,e,r,o,u){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Je,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,o,u){const h=Date.now()+r,d=new Up(t,e,h,o,u);return d.start(r),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(F.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cl(s,t){if(Te("AsyncQueue",`${t}: ${s}`),vs(s))return new Z(F.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{static emptySet(t){return new No(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||st.comparator(e.key,r.key):(e,r)=>st.comparator(e.key,r.key),this.keyedMap=Su(),this.sortedSet=new ne(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof No)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new No;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(){this.Z_=new ne(st.comparator)}track(t){const e=t.doc.key,r=this.Z_.get(e);r?t.type!==0&&r.type===3?this.Z_=this.Z_.insert(e,t):t.type===3&&r.type!==1?this.Z_=this.Z_.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.Z_=this.Z_.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.Z_=this.Z_.remove(e):t.type===1&&r.type===2?this.Z_=this.Z_.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):ft():this.Z_=this.Z_.insert(e,t)}X_(){const t=[];return this.Z_.inorderTraversal((e,r)=>{t.push(r)}),t}}class Wo{constructor(t,e,r,o,u,h,d,g,p){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(t,e,r,o,u){const h=[];return e.forEach(d=>{h.push({type:0,doc:d})}),new Wo(t,e,No.emptySet(e),h,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ec(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let o=0;o<e.length;o++)if(e[o].type!==r[o].type||!e[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class DC{constructor(){this.queries=QT(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(e,r){const o=at(e),u=o.queries;o.queries=QT(),u.forEach((h,d)=>{for(const g of d.ta)g.onError(r)})})(this,new Z(F.ABORTED,"Firestore shutting down"))}}function QT(){return new cr(s=>bA(s),ec)}async function Bp(s,t){const e=at(s);let r=3;const o=t.query;let u=e.queries.get(o);u?!u.na()&&t.ra()&&(r=2):(u=new RC,r=t.ra()?0:1);try{switch(r){case 0:u.ea=await e.onListen(o,!0);break;case 1:u.ea=await e.onListen(o,!1);break;case 2:await e.onFirstRemoteStoreListen(o)}}catch(h){const d=cl(h,`Initialization of query '${Ro(t.query)}' failed`);return void t.onError(d)}e.queries.set(o,u),u.ta.push(t),t.sa(e.onlineState),u.ea&&t.oa(u.ea)&&qp(e)}async function zp(s,t){const e=at(s),r=t.query;let o=3;const u=e.queries.get(r);if(u){const h=u.ta.indexOf(t);h>=0&&(u.ta.splice(h,1),u.ta.length===0?o=t.ra()?0:1:!u.na()&&t.ra()&&(o=2))}switch(o){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function CC(s,t){const e=at(s);let r=!1;for(const o of t){const u=o.query,h=e.queries.get(u);if(h){for(const d of h.ta)d.oa(o)&&(r=!0);h.ea=o}}r&&qp(e)}function VC(s,t,e){const r=at(s),o=r.queries.get(t);if(o)for(const u of o.ta)u.onError(e);r.queries.delete(t)}function qp(s){s.ia.forEach(t=>{t.next()})}var Fg,YT;(YT=Fg||(Fg={}))._a="default",YT.Cache="cache";class jp{constructor(t,e,r){this.query=t,this.aa=e,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new Wo(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ua?this.la(t)&&(this.aa.next(t),e=!0):this.ha(t,this.onlineState)&&(this.Pa(t),e=!0),this.ca=t,e}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let e=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),e=!0),e}ha(t,e){if(!t.fromCache||!this.ra())return!0;const r=e!=="Offline";return(!this.options.Ta||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}la(t){if(t.docChanges.length>0)return!0;const e=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Pa(t){t=Wo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==Fg.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(t,e){this.Ia=t,this.byteLength=e}Ea(){return"metadata"in this.Ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(t){this.serializer=t}ps(t){return Ii(this.serializer,t)}ys(t){return t.metadata.exists?QA(this.serializer,t.document,!1):ie.newNoDocument(this.ps(t.metadata.name),this.ws(t.metadata.readTime))}ws(t){return Ae(t)}}class NC{constructor(t,e,r){this.da=t,this.localStore=e,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ob(t)}Aa(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.Ia.namedQuery)this.queries.push(t.Ia.namedQuery);else if(t.Ia.documentMetadata){this.documents.push({metadata:t.Ia.documentMetadata}),t.Ia.documentMetadata.exists||++e;const r=Ot.fromString(t.Ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else t.Ia.document&&(this.documents[this.documents.length-1].document=t.Ia.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Ra(t){const e=new Map,r=new $T(this.serializer);for(const o of t)if(o.metadata.queries){const u=r.ps(o.metadata.name);for(const h of o.metadata.queries){const d=(e.get(h)||Rt()).add(u);e.set(h,d)}}return e}async complete(){const t=await rC(this.localStore,new $T(this.serializer),this.documents,this.da.id),e=this.Ra(this.documents);for(const r of this.queries)await sC(this.localStore,r,e.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:t}}}function Ob(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(t){this.key=t}}class Pb{constructor(t){this.key=t}}class Lb{constructor(t,e){this.query=t,this.fa=e,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Rt(),this.mutatedKeys=Rt(),this.ya=wA(t),this.wa=new No(this.ya)}get ba(){return this.fa}Sa(t,e){const r=e?e.Da:new KT,o=e?e.wa:this.wa;let u=e?e.mutatedKeys:this.mutatedKeys,h=o,d=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((E,T)=>{const S=o.get(E),V=nc(this.query,T)?T:null,G=!!S&&this.mutatedKeys.has(S.key),H=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Q=!1;S&&V?S.data.isEqual(V.data)?G!==H&&(r.track({type:3,doc:V}),Q=!0):this.va(S,V)||(r.track({type:2,doc:V}),Q=!0,(g&&this.ya(V,g)>0||p&&this.ya(V,p)<0)&&(d=!0)):!S&&V?(r.track({type:0,doc:V}),Q=!0):S&&!V&&(r.track({type:1,doc:S}),Q=!0,(g||p)&&(d=!0)),Q&&(V?(h=h.add(V),u=H?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{wa:h,Da:r,ls:d,mutatedKeys:u}}va(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,o){const u=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const h=t.Da.X_();h.sort((E,T)=>function(V,G){const H=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return H(V)-H(G)}(E.type,T.type)||this.ya(E.doc,T.doc)),this.Ca(r),o=o!=null&&o;const d=e&&!o?this.Fa():[],g=this.pa.size===0&&this.current&&!o?1:0,p=g!==this.ga;return this.ga=g,h.length!==0||p?{snapshot:new Wo(this.query,t.wa,u,h,t.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new KT,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(e=>this.fa=this.fa.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.fa=this.fa.delete(e)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Rt(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const e=[];return t.forEach(r=>{this.pa.has(r)||e.push(new Pb(r))}),this.pa.forEach(r=>{t.has(r)||e.push(new Mb(r))}),e}Oa(t){this.fa=t.gs,this.pa=Rt();const e=this.Sa(t.documents);return this.applyChanges(e,!0)}Na(){return Wo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const As="SyncEngine";class OC{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class MC{constructor(t){this.key=t,this.Ba=!1}}class PC{constructor(t,e,r,o,u,h){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.La={},this.ka=new cr(d=>bA(d),ec),this.qa=new Map,this.Qa=new Set,this.$a=new ne(st.comparator),this.Ka=new Map,this.Ua=new Rp,this.Wa={},this.Ga=new Map,this.za=Ta.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function LC(s,t,e=!0){const r=Uf(s);let o;const u=r.ka.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Na()):o=await kb(r,t,e,!0),o}async function kC(s,t){const e=Uf(s);await kb(e,t,!0,!1)}async function kb(s,t,e,r){const o=await $o(s.localStore,pn(t)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,e);let d;return r&&(d=await Fp(s,t,u,h==="current",o.resumeToken)),s.isPrimaryClient&&e&&kf(s.remoteStore,o),d}async function Fp(s,t,e,r,o){s.Ha=(T,S,V)=>async function(H,Q,dt,it){let lt=Q.view.Sa(dt);lt.ls&&(lt=await _f(H.localStore,Q.query,!1).then(({documents:O})=>Q.view.Sa(O,lt)));const Tt=it&&it.targetChanges.get(Q.targetId),ht=it&&it.targetMismatches.get(Q.targetId)!=null,yt=Q.view.applyChanges(lt,H.isPrimaryClient,Tt,ht);return Gg(H,Q.targetId,yt.Ma),yt.snapshot}(s,T,S,V);const u=await _f(s.localStore,t,!0),h=new Lb(t,u.gs),d=h.Sa(u.documents),g=sc.createSynthesizedTargetChangeForCurrentChange(e,r&&s.onlineState!=="Offline",o),p=h.applyChanges(d,s.isPrimaryClient,g);Gg(s,e,p.Ma);const E=new OC(t,e,h);return s.ka.set(t,E),s.qa.has(e)?s.qa.get(e).push(t):s.qa.set(e,[t]),p.snapshot}async function UC(s,t,e){const r=at(s),o=r.ka.get(t),u=r.qa.get(o.targetId);if(u.length>1)return r.qa.set(o.targetId,u.filter(h=>!ec(h,t))),void r.ka.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Xo(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),e&&Zo(r.remoteStore,o.targetId),Jo(r,o.targetId)}).catch(ys)):(Jo(r,o.targetId),await Xo(r.localStore,o.targetId,!0))}async function BC(s,t){const e=at(s),r=e.ka.get(t),o=e.qa.get(r.targetId);e.isPrimaryClient&&o.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),Zo(e.remoteStore,r.targetId))}async function zC(s,t,e){const r=Qp(s);try{const o=await function(h,d){const g=at(h),p=oe.now(),E=d.reduce((V,G)=>V.add(G.key),Rt());let T,S;return g.persistence.runTransaction("Locally write mutations","readwrite",V=>{let G=bn(),H=Rt();return g.ds.getEntries(V,E).next(Q=>{G=Q,G.forEach((dt,it)=>{it.isValidDocument()||(H=H.add(dt))})}).next(()=>g.localDocuments.getOverlayedDocuments(V,G)).next(Q=>{T=Q;const dt=[];for(const it of d){const lt=lD(it,T.get(it.key).overlayedDocument);lt!=null&&dt.push(new hr(it.key,lt,mA(lt.value.mapValue),ae.exists(!0)))}return g.mutationQueue.addMutationBatch(V,p,dt,d)}).next(Q=>{S=Q;const dt=Q.applyToLocalDocumentSet(T,H);return g.documentOverlayCache.saveOverlays(V,Q.batchId,dt)})}).then(()=>({batchId:S.batchId,changes:RA(T)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),function(h,d,g){let p=h.Wa[h.currentUser.toKey()];p||(p=new ne(bt)),p=p.insert(d,g),h.Wa[h.currentUser.toKey()]=p}(r,o.batchId,e),await fr(r,o.changes),await ll(r.remoteStore)}catch(o){const u=cl(o,"Failed to persist write");e.reject(u)}}async function Ub(s,t){const e=at(s);try{const r=await nC(e.localStore,t);t.targetChanges.forEach((o,u)=>{const h=e.Ka.get(u);h&&(gt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Ba=!0:o.modifiedDocuments.size>0?gt(h.Ba):o.removedDocuments.size>0&&(gt(h.Ba),h.Ba=!1))}),await fr(e,r,t)}catch(r){await ys(r)}}function XT(s,t,e){const r=at(s);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const o=[];r.ka.forEach((u,h)=>{const d=h.view.sa(t);d.snapshot&&o.push(d.snapshot)}),function(h,d){const g=at(h);g.onlineState=d;let p=!1;g.queries.forEach((E,T)=>{for(const S of T.ta)S.sa(d)&&(p=!0)}),p&&qp(g)}(r.eventManager,t),o.length&&r.La.p_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function qC(s,t,e){const r=at(s);r.sharedClientState.updateQueryState(t,"rejected",e);const o=r.Ka.get(t),u=o&&o.key;if(u){let h=new ne(st.comparator);h=h.insert(u,ie.newNoDocument(u,_t.min()));const d=Rt().add(u),g=new rc(_t.min(),new Map,new ne(bt),h,d);await Ub(r,g),r.$a=r.$a.remove(u),r.Ka.delete(t),Kp(r)}else await Xo(r.localStore,t,!1).then(()=>Jo(r,t,e)).catch(ys)}async function jC(s,t){const e=at(s),r=t.batch.batchId;try{const o=await eC(e.localStore,t);Hp(e,r,null),Gp(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await fr(e,o)}catch(o){await ys(o)}}async function FC(s,t,e){const r=at(s);try{const o=await function(h,d){const g=at(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let E;return g.mutationQueue.lookupMutationBatch(p,d).next(T=>(gt(T!==null),E=T.keys(),g.mutationQueue.removeMutationBatch(p,T))).next(()=>g.mutationQueue.performConsistencyCheck(p)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(p,E,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E)).next(()=>g.localDocuments.getDocuments(p,E))})}(r.localStore,t);Hp(r,t,e),Gp(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await fr(r,o)}catch(o){await ys(o)}}async function GC(s,t){const e=at(s);Ts(e.remoteStore)||J(As,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(h){const d=at(h);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>d.mutationQueue.getHighestUnacknowledgedBatchId(g))}(e.localStore);if(r===ss)return void t.resolve();const o=e.Ga.get(r)||[];o.push(t),e.Ga.set(r,o)}catch(r){const o=cl(r,"Initialization of waitForPendingWrites() operation failed");t.reject(o)}}function Gp(s,t){(s.Ga.get(t)||[]).forEach(e=>{e.resolve()}),s.Ga.delete(t)}function Hp(s,t,e){const r=at(s);let o=r.Wa[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(e?u.reject(e):u.resolve(),o=o.remove(t)),r.Wa[r.currentUser.toKey()]=o}}function Jo(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.qa.get(t))s.ka.delete(r),e&&s.La.Ja(r,e);s.qa.delete(t),s.isPrimaryClient&&s.Ua.Sr(t).forEach(r=>{s.Ua.containsKey(r)||Bb(s,r)})}function Bb(s,t){s.Qa.delete(t.path.canonicalString());const e=s.$a.get(t);e!==null&&(Zo(s.remoteStore,e),s.$a=s.$a.remove(t),s.Ka.delete(e),Kp(s))}function Gg(s,t,e){for(const r of e)r instanceof Mb?(s.Ua.addReference(r.key,t),HC(s,r)):r instanceof Pb?(J(As,"Document no longer in limbo: "+r.key),s.Ua.removeReference(r.key,t),s.Ua.containsKey(r.key)||Bb(s,r.key)):ft()}function HC(s,t){const e=t.key,r=e.path.canonicalString();s.$a.get(e)||s.Qa.has(r)||(J(As,"New document in limbo: "+e),s.Qa.add(r),Kp(s))}function Kp(s){for(;s.Qa.size>0&&s.$a.size<s.maxConcurrentLimboResolutions;){const t=s.Qa.values().next().value;s.Qa.delete(t);const e=new st(Ot.fromString(t)),r=s.za.next();s.Ka.set(r,new MC(e)),s.$a=s.$a.insert(e,r),kf(s.remoteStore,new ir(pn(rl(e.path)),r,"TargetPurposeLimboResolution",Tn.ae))}}async function fr(s,t,e){const r=at(s),o=[],u=[],h=[];r.ka.isEmpty()||(r.ka.forEach((d,g)=>{h.push(r.Ha(g,t,e).then(p=>{var E;if((p||e)&&r.isPrimaryClient){const T=p?!p.fromCache:(E=e==null?void 0:e.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;r.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(p){o.push(p);const T=xp.Yi(g.targetId,p);u.push(T)}}))}),await Promise.all(h),r.La.p_(o),await async function(g,p){const E=at(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>B.forEach(p,S=>B.forEach(S.Hi,V=>E.persistence.referenceDelegate.addReference(T,S.targetId,V)).next(()=>B.forEach(S.Ji,V=>E.persistence.referenceDelegate.removeReference(T,S.targetId,V)))))}catch(T){if(!vs(T))throw T;J(Np,"Failed to update sequence numbers: "+T)}for(const T of p){const S=T.targetId;if(!T.fromCache){const V=E.Ts.get(S),G=V.snapshotVersion,H=V.withLastLimboFreeSnapshotVersion(G);E.Ts=E.Ts.insert(S,H)}}}(r.localStore,u))}async function KC(s,t){const e=at(s);if(!e.currentUser.isEqual(t)){J(As,"User change. New user:",t.toKey());const r=await pb(e.localStore,t);e.currentUser=t,function(u,h){u.Ga.forEach(d=>{d.forEach(g=>{g.reject(new Z(F.CANCELLED,h))})}),u.Ga.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await fr(e,r.Rs)}}function QC(s,t){const e=at(s),r=e.Ka.get(t);if(r&&r.Ba)return Rt().add(r.key);{let o=Rt();const u=e.qa.get(t);if(!u)return o;for(const h of u){const d=e.ka.get(h);o=o.unionWith(d.view.ba)}return o}}async function YC(s,t){const e=at(s),r=await _f(e.localStore,t.query,!0),o=t.view.Oa(r);return e.isPrimaryClient&&Gg(e,t.targetId,o.Ma),o}async function $C(s,t){const e=at(s);return Eb(e.localStore,t).then(r=>fr(e,r))}async function XC(s,t,e,r){const o=at(s),u=await function(d,g){const p=at(d),E=at(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",T=>E.Ln(T,g).next(S=>S?p.localDocuments.getDocuments(T,S):B.resolve(null)))}(o.localStore,t);u!==null?(e==="pending"?await ll(o.remoteStore):e==="acknowledged"||e==="rejected"?(Hp(o,t,r||null),Gp(o,t),function(d,g){at(at(d).mutationQueue).qn(g)}(o.localStore,t)):ft(),await fr(o,u)):J(As,"Cannot apply mutation batch with id: "+t)}async function ZC(s,t){const e=at(s);if(Uf(e),Qp(e),t===!0&&e.ja!==!0){const r=e.sharedClientState.getAllActiveQueryTargets(),o=await ZT(e,r.toArray());e.ja=!0,await jg(e.remoteStore,!0);for(const u of o)kf(e.remoteStore,u)}else if(t===!1&&e.ja!==!1){const r=[];let o=Promise.resolve();e.qa.forEach((u,h)=>{e.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(Jo(e,h),Xo(e.localStore,h,!0))),Zo(e.remoteStore,h)}),await o,await ZT(e,r),function(h){const d=at(h);d.Ka.forEach((g,p)=>{Zo(d.remoteStore,p)}),d.Ua.Dr(),d.Ka=new Map,d.$a=new ne(st.comparator)}(e),e.ja=!1,await jg(e.remoteStore,!1)}}async function ZT(s,t,e){const r=at(s),o=[],u=[];for(const h of t){let d;const g=r.qa.get(h);if(g&&g.length!==0){d=await $o(r.localStore,pn(g[0]));for(const p of g){const E=r.ka.get(p),T=await YC(r,E);T.snapshot&&u.push(T.snapshot)}}else{const p=await vb(r.localStore,h);d=await $o(r.localStore,p),await Fp(r,zb(p),h,!1,d.resumeToken)}o.push(d)}return r.La.p_(u),o}function zb(s){return AA(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function WC(s){return function(e){return at(at(e).persistence).zi()}(at(s).localStore)}async function JC(s,t,e,r){const o=at(s);if(o.ja)return void J(As,"Ignoring unexpected query state notification.");const u=o.qa.get(t);if(u&&u.length>0)switch(e){case"current":case"not-current":{const h=await Eb(o.localStore,SA(u[0])),d=rc.createSynthesizedRemoteEventForCurrentChange(t,e==="current",ye.EMPTY_BYTE_STRING);await fr(o,h,d);break}case"rejected":await Xo(o.localStore,t,!0),Jo(o,t,r);break;default:ft()}}async function tV(s,t,e){const r=Uf(s);if(r.ja){for(const o of t){if(r.qa.has(o)&&r.sharedClientState.isActiveQueryTarget(o)){J(As,"Adding an already active target "+o);continue}const u=await vb(r.localStore,o),h=await $o(r.localStore,u);await Fp(r,zb(u),h.targetId,!1,h.resumeToken),kf(r.remoteStore,h)}for(const o of e)r.qa.has(o)&&await Xo(r.localStore,o,!1).then(()=>{Zo(r.remoteStore,o),Jo(r,o)}).catch(ys)}}function Uf(s){const t=at(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ub.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=QC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=qC.bind(null,t),t.La.p_=CC.bind(null,t.eventManager),t.La.Ja=VC.bind(null,t.eventManager),t}function Qp(s){const t=at(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=jC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=FC.bind(null,t),t}function eV(s,t,e){const r=at(s);(async function(u,h,d){try{const g=await h.getMetadata();if(await function(V,G){const H=at(V),Q=Ae(G.createTime);return H.persistence.runTransaction("hasNewerBundle","readonly",dt=>H.Yr.getBundleMetadata(dt,G.id)).then(dt=>!!dt&&dt.createTime.compareTo(Q)>=0)}(u.localStore,g))return await h.close(),d._completeWith(function(V){return{taskState:"Success",documentsLoaded:V.totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}}(g)),Promise.resolve(new Set);d._updateProgress(Ob(g));const p=new NC(g,u.localStore,h.serializer);let E=await h.Ya();for(;E;){const S=await p.Aa(E);S&&d._updateProgress(S),E=await h.Ya()}const T=await p.complete();return await fr(u,T.ma,void 0),await function(V,G){const H=at(V);return H.persistence.runTransaction("Save bundle","readwrite",Q=>H.Yr.saveBundleMetadata(Q,G))}(u.localStore,g),d._completeWith(T.progress),Promise.resolve(T.Va)}catch(g){return Ri(As,`Loading bundle failed with ${g}`),d._failWith(g),Promise.resolve(new Set)}})(r,t,e).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}class Qu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ac(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,e){return null}nu(t,e){return null}eu(t){return gb(this.persistence,new mb,t.initialUser,this.serializer)}Xa(t){return new Dp(Lf.ri,this.serializer)}Za(t){return new wb}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qu.provider={build:()=>new Qu};class nV extends Qu{constructor(t){super(),this.cacheSizeBytes=t}tu(t,e){gt(this.persistence.referenceDelegate instanceof pf);const r=this.persistence.referenceDelegate.garbageCollector;return new lb(r,t.asyncQueue,e)}Xa(t){const e=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new Dp(r=>pf.ri(r,e),this.serializer)}}class qb extends Qu{constructor(t,e,r){super(),this.ru=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.ru.initialize(this,t),await Qp(this.ru.syncEngine),await ll(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(t){return gb(this.persistence,new mb,t.initialUser,this.serializer)}tu(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new lb(r,t.asyncQueue,e)}nu(t,e){const r=new h1(e,this.persistence);return new c1(t.asyncQueue,r)}Xa(t){const e=Vp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new Cp(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,Ib(),Zh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(t){return new wb}}class iV extends qb{constructor(t,e){super(t,e,!1),this.ru=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.ru.syncEngine;this.sharedClientState instanceof gg&&(this.sharedClientState.syncEngine={uo:XC.bind(null,e),co:JC.bind(null,e),lo:tV.bind(null,e),zi:WC.bind(null,e),ao:$C.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ci(async r=>{await ZC(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Za(t){const e=Ib();if(!gg.D(e))throw new Z(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Vp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new gg(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class Yu{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>XT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=KC.bind(null,this.syncEngine),await jg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new DC}()}createDatastore(t){const e=ac(t.databaseInfo.databaseId),r=function(u){return new cC(u)}(t.databaseInfo);return function(u,h,d,g){return new mC(u,h,d,g)}(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return function(r,o,u,h,d){return new pC(r,o,u,h,d)}(this.localStore,this.datastore,t.asyncQueue,e=>XT(this.syncEngine,e,0),function(){return FT.D()?new FT:new aC}())}createSyncEngine(t,e){return function(o,u,h,d,g,p,E){const T=new PC(o,u,h,d,g,p);return E&&(T.ja=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(o){const u=at(o);J(Aa,"RemoteStore shutting down."),u.W_.add(5),await ol(u),u.z_.shutdown(),u.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Yu.provider={build:()=>new Yu};function WT(s,t=10240){let e=0;return{async read(){if(e<s.byteLength){const r={value:s.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):Te("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(t,e){this.ou=t,this.serializer=e,this.metadata=new Je,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(r=>{r&&r.Ea()?this.metadata.resolve(r.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Ia)}`))},r=>this.metadata.reject(r))}close(){return this.ou.cancel()}async getMetadata(){return this.metadata.promise}async Ya(){return await this.getMetadata(),this.au()}async au(){const t=await this.uu();if(t===null)return null;const e=this._u.decode(t),r=Number(e);isNaN(r)&&this.cu(`length string (${e}) is not valid number`);const o=await this.lu(r);return new xC(JSON.parse(o),t.length+r)}hu(){return this.buffer.findIndex(t=>t===123)}async uu(){for(;this.hu()<0&&!await this.Pu(););if(this.buffer.length===0)return null;const t=this.hu();t<0&&this.cu("Reached the end of bundle when a length string is expected.");const e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e}async lu(t){for(;this.buffer.length<t;)await this.Pu()&&this.cu("Reached the end of bundle when more is expected.");const e=this._u.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e}cu(t){throw this.ou.cancel(),new Error(`Invalid bundle format: ${t}`)}async Pu(){const t=await this.ou.read();if(!t.done){const e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Z(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const e=await async function(o,u){const h=at(o),d={documents:u.map(T=>Hu(h.serializer,T))},g=await h.Co("BatchGetDocuments",h.serializer.databaseId,Ot.emptyPath(),d,u.length),p=new Map;g.forEach(T=>{const S=_D(h.serializer,T);p.set(S.key.toString(),S)});const E=[];return u.forEach(T=>{const S=p.get(T.toString());gt(!!S),E.push(S)}),E}(this.datastore,t);return e.forEach(r=>this.recordVersion(r)),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new al(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((e,r)=>{const o=st.fromPath(r);this.mutations.push(new yp(o,this.precondition(o)))}),await async function(r,o){const u=at(r),h={writes:o.map(d=>Ku(u.serializer,d))};await u.bo("Commit",u.serializer.databaseId,Ot.emptyPath(),h)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw ft();e=_t.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!e.isEqual(r))throw new Z(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(_t.min())?ae.exists(!1):ae.updateTime(e):ae.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(_t.min()))throw new Z(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ae.updateTime(e)}return ae.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(t,e,r,o,u){this.asyncQueue=t,this.datastore=e,this.options=r,this.updateFunction=o,this.deferred=u,this.Tu=r.maxAttempts,this.a_=new Mp(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const t=new sV(this.datastore),e=this.du(t);e&&e.then(r=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(r)}).catch(o=>{this.Au(o)}))}).catch(r=>{this.Au(r)})})}du(t){try{const e=this.updateFunction(t);return!Wu(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const e=t.code;return e==="aborted"||e==="failed-precondition"||e==="already-exists"||!kA(e)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="FirestoreClient";class oV{constructor(t,e,r,o,u){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=o,this.user=He.UNAUTHENTICATED,this.clientId=j0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async h=>{J(gs,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(r,h=>(J(gs,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Je;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=cl(e,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function _g(s,t){s.asyncQueue.verifyOperationInProgress(),J(gs,"Initializing OfflineComponentProvider");const e=s.configuration;await t.initialize(e);let r=e.initialUser;s.setCredentialChangeListener(async o=>{r.isEqual(o)||(await pb(t.localStore,o),r=o)}),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t}async function JT(s,t){s.asyncQueue.verifyOperationInProgress();const e=await Yp(s);J(gs,"Initializing OnlineComponentProvider"),await t.initialize(e,s.configuration),s.setCredentialChangeListener(r=>HT(t.remoteStore,r)),s.setAppCheckTokenChangeListener((r,o)=>HT(t.remoteStore,o)),s._onlineComponents=t}async function Yp(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){J(gs,"Using user provided OfflineComponentProvider");try{await _g(s,s._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(o){return o.name==="FirebaseError"?o.code===F.FAILED_PRECONDITION||o.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(e))throw e;Ri("Error using user provided cache. Falling back to memory cache: "+e),await _g(s,new Qu)}}else J(gs,"Using default OfflineComponentProvider"),await _g(s,new nV(void 0));return s._offlineComponents}async function zf(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(J(gs,"Using user provided OnlineComponentProvider"),await JT(s,s._uninitializedComponentsProvider._online)):(J(gs,"Using default OnlineComponentProvider"),await JT(s,new Yu))),s._onlineComponents}function jb(s){return Yp(s).then(t=>t.persistence)}function $p(s){return Yp(s).then(t=>t.localStore)}function Fb(s){return zf(s).then(t=>t.remoteStore)}function Xp(s){return zf(s).then(t=>t.syncEngine)}function lV(s){return zf(s).then(t=>t.datastore)}async function tl(s){const t=await zf(s),e=t.eventManager;return e.onListen=LC.bind(null,t.syncEngine),e.onUnlisten=UC.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=kC.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=BC.bind(null,t.syncEngine),e}function uV(s){return s.asyncQueue.enqueue(async()=>{const t=await jb(s),e=await Fb(s);return t.setNetworkEnabled(!0),function(o){const u=at(o);return u.W_.delete(0),oc(u)}(e)})}function cV(s){return s.asyncQueue.enqueue(async()=>{const t=await jb(s),e=await Fb(s);return t.setNetworkEnabled(!1),async function(o){const u=at(o);u.W_.add(0),await ol(u),u.j_.set("Offline")}(e)})}function hV(s,t){const e=new Je;return s.asyncQueue.enqueueAndForget(async()=>async function(o,u,h){try{const d=await function(p,E){const T=at(p);return T.persistence.runTransaction("read document","readonly",S=>T.localDocuments.getDocument(S,E))}(o,u);d.isFoundDocument()?h.resolve(d):d.isNoDocument()?h.resolve(null):h.reject(new Z(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const g=cl(d,`Failed to get document '${u} from cache`);h.reject(g)}}(await $p(s),t,e)),e.promise}function Gb(s,t,e={}){const r=new Je;return s.asyncQueue.enqueueAndForget(async()=>function(u,h,d,g,p){const E=new Bf({next:S=>{E.su(),h.enqueueAndForget(()=>zp(u,T));const V=S.docs.has(d);!V&&S.fromCache?p.reject(new Z(F.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&S.fromCache&&g&&g.source==="server"?p.reject(new Z(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),T=new jp(rl(d.path),E,{includeMetadataChanges:!0,Ta:!0});return Bp(u,T)}(await tl(s),s.asyncQueue,t,e,r)),r.promise}function fV(s,t){const e=new Je;return s.asyncQueue.enqueueAndForget(async()=>async function(o,u,h){try{const d=await _f(o,u,!0),g=new Lb(u,d.gs),p=g.Sa(d.documents),E=g.applyChanges(p,!1);h.resolve(E.snapshot)}catch(d){const g=cl(d,`Failed to execute query '${u} against cache`);h.reject(g)}}(await $p(s),t,e)),e.promise}function Hb(s,t,e={}){const r=new Je;return s.asyncQueue.enqueueAndForget(async()=>function(u,h,d,g,p){const E=new Bf({next:S=>{E.su(),h.enqueueAndForget(()=>zp(u,T)),S.fromCache&&g.source==="server"?p.reject(new Z(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),T=new jp(d,E,{includeMetadataChanges:!0,Ta:!0});return Bp(u,T)}(await tl(s),s.asyncQueue,t,e,r)),r.promise}function dV(s,t){const e=new Bf(t);return s.asyncQueue.enqueueAndForget(async()=>function(o,u){at(o).ia.add(u),u.next()}(await tl(s),e)),()=>{e.su(),s.asyncQueue.enqueueAndForget(async()=>function(o,u){at(o).ia.delete(u)}(await tl(s),e))}}function mV(s,t,e,r){const o=function(h,d){let g;return g=typeof h=="string"?BA().encode(h):h,function(E,T){return new rV(E,T)}(function(E,T){if(E instanceof Uint8Array)return WT(E,T);if(E instanceof ArrayBuffer)return WT(new Uint8Array(E),T);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),d)}(e,ac(t));s.asyncQueue.enqueueAndForget(async()=>{eV(await Xp(s),o,r)})}function gV(s,t){return s.asyncQueue.enqueue(async()=>function(r,o){const u=at(r);return u.persistence.runTransaction("Get named query","readonly",h=>u.Yr.getNamedQuery(h,o))}(await $p(s),t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(s,t,e){if(!e)throw new Z(F.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function Qb(s,t,e,r){if(t===!0&&r===!0)throw new Z(F.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function e0(s){if(!st.isDocumentKey(s))throw new Z(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function n0(s){if(st.isDocumentKey(s))throw new Z(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function qf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":ft()}function Ht(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new Z(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=qf(s);throw new Z(F.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}function Yb(s,t){if(t<=0)throw new Z(F.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="firestore.googleapis.com",i0=!0;class r0{constructor(t){var e,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Z(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$b,this.ssl=i0}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:i0;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=rb;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<LD)throw new Z(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Qb("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kb((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class lc{constructor(t,e,r,o){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Z(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new t1;switch(r.type){case"firstParty":return new r1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=t0.get(e);r&&(J("ComponentProvider","Removing Datastore"),t0.delete(e),r.terminate())}(this),Promise.resolve()}}function Xb(s,t,e,r={}){var o;const u=(s=Ht(s,lc))._getSettings(),h=Object.assign(Object.assign({},u),{emulatorOptions:s._getEmulatorOptions()}),d=`${t}:${e}`;u.host!==$b&&u.host!==d&&Ri("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},u),{host:d,ssl:!1,emulatorOptions:r});if(!Oo(g,h)&&(s._setSettings(g),r.mockUserToken)){let p,E;if(typeof r.mockUserToken=="string")p=r.mockUserToken,E=He.MOCK_USER;else{p=VI(r.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new Z(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new He(T)}s._authCredentials=new e1(new q0(p,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _n=class Zb{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Zb(this.firestore,t,this._query)}},fe=class Wb{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new as(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Wb(this.firestore,t,this._key)}},as=class Jb extends _n{constructor(t,e,r){super(t,e,rl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new fe(this.firestore,null,new st(t))}withConverter(t){return new Jb(this.firestore,t,this._path)}};function Tf(s,t,...e){if(s=Ce(s),Zp("collection","path",t),s instanceof lc){const r=Ot.fromString(t,...e);return n0(r),new as(s,null,r)}{if(!(s instanceof fe||s instanceof as))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ot.fromString(t,...e));return n0(r),new as(s.firestore,null,r)}}function pV(s,t){if(s=Ht(s,lc),Zp("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Z(F.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _n(s,null,function(r){return new ur(Ot.emptyPath(),r)}(t))}function el(s,t,...e){if(s=Ce(s),arguments.length===1&&(t=j0.newId()),Zp("doc","path",t),s instanceof lc){const r=Ot.fromString(t,...e);return e0(r),new fe(s,null,new st(r))}{if(!(s instanceof fe||s instanceof as))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ot.fromString(t,...e));return e0(r),new fe(s.firestore,s instanceof as?s.converter:null,new st(r))}}function tS(s,t){return s=Ce(s),t=Ce(t),(s instanceof fe||s instanceof as)&&(t instanceof fe||t instanceof as)&&s.firestore===t.firestore&&s.path===t.path&&s.converter===t.converter}function eS(s,t){return s=Ce(s),t=Ce(t),s instanceof _n&&t instanceof _n&&s.firestore===t.firestore&&ec(s._query,t._query)&&s.converter===t.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="AsyncQueue";class a0{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Mp(this,"async_queue_retry"),this.bu=()=>{const r=Zh();r&&J(s0,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=t;const e=Zh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const e=Zh();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.bu)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const e=new Je;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!vs(t))throw t;J(s0,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const e=this.Su.then(()=>(this.pu=!0,t().catch(r=>{this.gu=r,this.pu=!1;const o=function(h){let d=h.message||"";return h.stack&&(d=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),d}(r);throw Te("INTERNAL UNHANDLED ERROR: ",o),r}).then(r=>(this.pu=!1,r))));return this.Su=e,e}enqueueAfterDelay(t,e,r){this.Du(),this.wu.indexOf(t)>-1&&(e=0);const o=Up.createAndSchedule(this,t,e,r,u=>this.Fu(u));return this.fu.push(o),o}Du(){this.gu&&ft()}verifyOperationInProgress(){}async Mu(){let t;do t=this.Su,await t;while(t!==this.Su)}xu(t){for(const e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.fu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const e=this.fu.indexOf(t);this.fu.splice(e,1)}}function Hg(s){return function(e,r){if(typeof e!="object"||e===null)return!1;const o=e;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1}(s,["next","error","complete"])}class _V{constructor(){this._progressObserver={},this._taskCompletionResolver=new Je,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,r){this._progressObserver={next:t,error:e,complete:r}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV=-1;let be=class extends lc{constructor(t,e,r,o){super(t,e,r,o),this.type="firestore",this._queue=new a0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new a0(t),this._firestoreClient=void 0,await t}}};function vV(s,t){const e=typeof s=="object"?s:V0(),r=typeof s=="string"?s:uf,o=ep(e,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=DI("firestore");u&&Xb(o,...u)}return o}function on(s){if(s._terminated)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||nS(s),s._firestoreClient}function nS(s){var t,e,r;const o=s._freezeSettings(),u=function(d,g,p,E){return new z1(d,g,p,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,Kb(E.experimentalLongPollingOptions),E.useFetchStreams)}(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((e=o.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new oV(s._authCredentials,s._appCheckCredentials,s._queue,u,s._componentsProvider&&function(d){const g=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(g),_online:g}}(s._componentsProvider))}function EV(s,t){Ri("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();return iS(s,Yu.provider,{build:r=>new qb(r,e.cacheSizeBytes,t==null?void 0:t.forceOwnership)}),Promise.resolve()}async function TV(s){Ri("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();iS(s,Yu.provider,{build:e=>new iV(e,t.cacheSizeBytes)})}function iS(s,t,e){if((s=Ht(s,be))._firestoreClient||s._terminated)throw new Z(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new Z(F.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:t,_offline:e},nS(s)}function AV(s){if(s._initialized&&!s._terminated)throw new Z(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Je;return s._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!wi.D())return Promise.resolve();const o=r+db;await wi.delete(o)}(Vp(s._databaseId,s._persistenceKey)),t.resolve()}catch(e){t.reject(e)}}),t.promise}function bV(s){return function(e){const r=new Je;return e.asyncQueue.enqueueAndForget(async()=>GC(await Xp(e),r)),r.promise}(on(s=Ht(s,be)))}function SV(s){return uV(on(s=Ht(s,be)))}function wV(s){return cV(on(s=Ht(s,be)))}function IV(s,t){const e=on(s=Ht(s,be)),r=new _V;return mV(e,s._databaseId,t,r),r}function RV(s,t){return gV(on(s=Ht(s,be)),t).then(e=>e?new _n(s,null,e.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ci(ye.fromBase64String(t))}catch(e){throw new Z(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Ci(ye.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ps=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Z(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new se(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wa=class{constructor(t){this._methodName=t}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Z(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Z(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return bt(this._lat,t._lat)||bt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV=/^__.*__$/;class CV{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new hr(t,this.data,this.fieldMask,e,this.fieldTransforms):new sl(t,this.data,e,this.fieldTransforms)}}class rS{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new hr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function sS(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class Ff{constructor(t,e,r,o,u,h){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new Ff(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),o=this.ku({path:r,Qu:!1});return o.$u(t),o}Ku(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),o=this.ku({path:r,Qu:!1});return o.Bu(),o}Uu(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return Af(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(sS(this.Lu)&&DV.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class VV{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||ac(t)}ju(t,e,r,o=!1){return new Ff({Lu:t,methodName:e,zu:r,path:se.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ia(s){const t=s._freezeSettings(),e=ac(s._databaseId);return new VV(s._databaseId,!!t.ignoreUndefinedProperties,e)}function Gf(s,t,e,r,o,u={}){const h=s.ju(u.merge||u.mergeFields?2:0,t,e,o);s_("Data must be an object, but it was:",h,r);const d=lS(r,h);let g,p;if(u.merge)g=new An(h.fieldMask),p=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const S=Kg(t,T,e);if(!h.contains(S))throw new Z(F.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);cS(E,S)||E.push(S)}g=new An(E),p=h.fieldTransforms.filter(T=>g.covers(T.field))}else g=null,p=h.fieldTransforms;return new CV(new We(d),g,p)}class uc extends wa{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof uc}}function aS(s,t,e){return new Ff({Lu:3,zu:t.settings.zu,methodName:s._methodName,Qu:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Jp extends wa{_toFieldTransform(t){return new ic(t.path,new Ko)}isEqual(t){return t instanceof Jp}}class t_ extends wa{constructor(t,e){super(t),this.Hu=e}_toFieldTransform(t){const e=aS(this,t,!0),r=this.Hu.map(u=>Ra(u,e)),o=new _a(r);return new ic(t.path,o)}isEqual(t){return t instanceof t_&&Oo(this.Hu,t.Hu)}}class e_ extends wa{constructor(t,e){super(t),this.Hu=e}_toFieldTransform(t){const e=aS(this,t,!0),r=this.Hu.map(u=>Ra(u,e)),o=new ya(r);return new ic(t.path,o)}isEqual(t){return t instanceof e_&&Oo(this.Hu,t.Hu)}}class n_ extends wa{constructor(t,e){super(t),this.Ju=e}_toFieldTransform(t){const e=new Qo(t.serializer,VA(t.serializer,this.Ju));return new ic(t.path,e)}isEqual(t){return t instanceof n_&&this.Ju===t.Ju}}function i_(s,t,e,r){const o=s.ju(1,t,e);s_("Data must be an object, but it was:",o,r);const u=[],h=We.empty();Es(r,(g,p)=>{const E=a_(t,g,e);p=Ce(p);const T=o.Ku(E);if(p instanceof uc)u.push(E);else{const S=Ra(p,T);S!=null&&(u.push(E),h.set(E,S))}});const d=new An(u);return new rS(h,d,o.fieldTransforms)}function r_(s,t,e,r,o,u){const h=s.ju(1,t,e),d=[Kg(t,r,e)],g=[o];if(u.length%2!=0)throw new Z(F.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)d.push(Kg(t,u[S])),g.push(u[S+1]);const p=[],E=We.empty();for(let S=d.length-1;S>=0;--S)if(!cS(p,d[S])){const V=d[S];let G=g[S];G=Ce(G);const H=h.Ku(V);if(G instanceof uc)p.push(V);else{const Q=Ra(G,H);Q!=null&&(p.push(V),E.set(V,Q))}}const T=new An(p);return new rS(E,T,h.fieldTransforms)}function oS(s,t,e,r=!1){return Ra(e,s.ju(r?4:3,t))}function Ra(s,t){if(uS(s=Ce(s)))return s_("Unsupported field value:",t,s),lS(s,t);if(s instanceof wa)return function(r,o){if(!sS(o.Lu))throw o.Wu(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(r,o){const u=[];let h=0;for(const d of r){let g=Ra(d,o.Uu(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}}(s,t)}return function(r,o){if((r=Ce(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return VA(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=oe.fromDate(r);return{timestampValue:Yo(o.serializer,u)}}if(r instanceof oe){const u=new oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yo(o.serializer,u)}}if(r instanceof jf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ci)return{bytesValue:jA(o.serializer,r._byteString)};if(r instanceof fe){const u=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(u))throw o.Wu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:bp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Wp)return function(h,d){return{mapValue:{fields:{[fp]:{stringValue:dp},[Fo]:{arrayValue:{values:h.toArray().map(p=>{if(typeof p!="number")throw d.Wu("VectorValues must only contain numeric values.");return _p(d.serializer,p)})}}}}}}(r,o);throw o.Wu(`Unsupported field value: ${qf(r)}`)}(s,t)}function lS(s,t){const e={};return sA(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Es(s,(r,o)=>{const u=Ra(o,t.qu(r));u!=null&&(e[r]=u)}),{mapValue:{fields:e}}}function uS(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof oe||s instanceof jf||s instanceof Ci||s instanceof fe||s instanceof wa||s instanceof Wp)}function s_(s,t,e){if(!uS(e)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(e)){const r=qf(e);throw r==="an object"?t.Wu(s+" a custom object"):t.Wu(s+" "+r)}}function Kg(s,t,e){if((t=Ce(t))instanceof ps)return t._internalPath;if(typeof t=="string")return a_(s,t);throw Af("Field path arguments must be of type string or ",s,!1,void 0,e)}const xV=new RegExp("[~\\*/\\[\\]]");function a_(s,t,e){if(t.search(xV)>=0)throw Af(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new ps(...t.split("."))._internalPath}catch{throw Af(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function Af(s,t,e,r,o){const u=r&&!r.isEmpty(),h=o!==void 0;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${r}`),h&&(g+=` in document ${o}`),g+=")"),new Z(F.INVALID_ARGUMENT,d+s+g)}function cS(s,t){return s.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(t,e,r,o,u){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new NV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Hf("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class NV extends $u{data(){return super.data()}}function Hf(s,t){return typeof t=="string"?a_(s,t):t instanceof ps?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Z(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class o_{}class cc extends o_{}function Jr(s,t,...e){let r=[];t instanceof o_&&r.push(t),r=r.concat(e),function(u){const h=u.filter(g=>g instanceof l_).length,d=u.filter(g=>g instanceof Kf).length;if(h>1||h>0&&d>0)throw new Z(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)s=o._apply(s);return s}class Kf extends cc{constructor(t,e,r){super(),this._field=t,this._op=e,this._value=r,this.type="where"}static _create(t,e,r){return new Kf(t,e,r)}_apply(t){const e=this._parse(t);return dS(t._query,e),new _n(t.firestore,t.converter,Ng(t._query,e))}_parse(t){const e=Ia(t.firestore);return function(u,h,d,g,p,E,T){let S;if(p.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new Z(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){l0(T,E);const G=[];for(const H of T)G.push(o0(g,u,H));S={arrayValue:{values:G}}}else S=o0(g,u,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||l0(T,E),S=oS(d,h,T,E==="in"||E==="not-in");return Mt.create(p,E,S)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function OV(s,t,e){const r=t,o=Hf("where",s);return Kf._create(o,r,e)}class l_ extends o_{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new l_(t,e)}_parse(t){const e=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return e.length===1?e[0]:$t.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(o,u){let h=o;const d=u.getFlattenedFilters();for(const g of d)dS(h,g),h=Ng(h,g)}(t._query,e),new _n(t.firestore,t.converter,Ng(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class u_ extends cc{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new u_(t,e)}_apply(t){const e=function(o,u,h){if(o.startAt!==null)throw new Z(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Z(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gu(u,h)}(t._query,this._field,this._direction);return new _n(t.firestore,t.converter,function(o,u){const h=o.explicitOrderBy.concat([u]);return new ur(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(t._query,e))}}function MV(s,t="asc"){const e=t,r=Hf("orderBy",s);return u_._create(r,e)}class Qf extends cc{constructor(t,e,r){super(),this.type=t,this._limit=e,this._limitType=r}static _create(t,e,r){return new Qf(t,e,r)}_apply(t){return new _n(t.firestore,t.converter,ff(t._query,this._limit,this._limitType))}}function PV(s){return Yb("limit",s),Qf._create("limit",s,"F")}function LV(s){return Yb("limitToLast",s),Qf._create("limitToLast",s,"L")}class Yf extends cc{constructor(t,e,r){super(),this.type=t,this._docOrFields=e,this._inclusive=r}static _create(t,e,r){return new Yf(t,e,r)}_apply(t){const e=fS(t,this.type,this._docOrFields,this._inclusive);return new _n(t.firestore,t.converter,function(o,u){return new ur(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)}(t._query,e))}}function kV(...s){return Yf._create("startAt",s,!0)}function UV(...s){return Yf._create("startAfter",s,!1)}class $f extends cc{constructor(t,e,r){super(),this.type=t,this._docOrFields=e,this._inclusive=r}static _create(t,e,r){return new $f(t,e,r)}_apply(t){const e=fS(t,this.type,this._docOrFields,this._inclusive);return new _n(t.firestore,t.converter,function(o,u){return new ur(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)}(t._query,e))}}function BV(...s){return $f._create("endBefore",s,!1)}function zV(...s){return $f._create("endAt",s,!0)}function fS(s,t,e,r){if(e[0]=Ce(e[0]),e[0]instanceof $u)return function(u,h,d,g,p){if(!g)throw new Z(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const E=[];for(const T of xo(u))if(T.field.isKeyField())E.push(ga(h,g.key));else{const S=g.data.field(T.field);if(Cf(S))throw new Z(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(S===null){const V=T.field.canonicalString();throw new Z(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}E.push(S)}return new ds(E,p)}(s._query,s.firestore._databaseId,t,e[0]._document,r);{const o=Ia(s.firestore);return function(h,d,g,p,E,T){const S=h.explicitOrderBy;if(E.length>S.length)throw new Z(F.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let G=0;G<E.length;G++){const H=E[G];if(S[G].field.isKeyField()){if(typeof H!="string")throw new Z(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof H}`);if(!gp(h)&&H.indexOf("/")!==-1)throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${H}' contains a slash.`);const Q=h.path.child(Ot.fromString(H));if(!st.isDocumentKey(Q))throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const dt=new st(Q);V.push(ga(d,dt))}else{const Q=oS(g,p,H);V.push(Q)}}return new ds(V,T)}(s._query,s.firestore._databaseId,o,t,e,r)}}function o0(s,t,e){if(typeof(e=Ce(e))=="string"){if(e==="")throw new Z(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gp(t)&&e.indexOf("/")!==-1)throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(Ot.fromString(e));if(!st.isDocumentKey(r))throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ga(s,new st(r))}if(e instanceof fe)return ga(s,e._key);throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qf(e)}.`)}function l0(s,t){if(!Array.isArray(s)||s.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function dS(s,t){const e=function(o,u){for(const h of o)for(const d of h.getFlattenedFilters())if(u.indexOf(d.op)>=0)return d.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new Z(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Z(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class c_{convertValue(t,e="none"){switch(hs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return re(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(or(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw ft()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return Es(t,(o,u)=>{r[o]=this.convertValue(u,e)}),r}convertVectorValue(t){var e,r,o;const u=(o=(r=(e=t.fields)===null||e===void 0?void 0:e[Fo].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(h=>re(h.doubleValue));return new Wp(u)}convertGeoPoint(t){return new jf(re(t.latitude),re(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=Vf(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(qu(t));default:return null}}convertTimestamp(t){const e=ar(t);return new oe(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Ot.fromString(t);gt(JA(r));const o=new cs(r.get(1),r.get(3)),u=new st(r.popFirst(5));return o.isEqual(e)||Te(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(s,t,e){let r;return r=s?e&&(e.merge||e.mergeFields)?s.toFirestore(t,e):s.toFirestore(t):t,r}class qV extends c_{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ci(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new fe(this.firestore,null,e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}let lr=class extends $u{constructor(t,e,r,o,u,h){super(t,e,r,o,h),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Ou(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(Hf("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}},Ou=class extends lr{data(t={}){return super.data(t)}},_s=class{constructor(t,e,r,o){this._firestore=t,this._userDataWriter=e,this._snapshot=o,this.metadata=new ha(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new Ou(this._firestore,this._userDataWriter,r.key,r,new ha(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Z(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(d=>{const g=new Ou(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ha(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>u||d.type!==3).map(d=>{const g=new Ou(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ha(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return d.type!==0&&(p=h.indexOf(d.doc.key),h=h.delete(d.doc.key)),d.type!==1&&(h=h.add(d.doc),E=h.indexOf(d.doc.key)),{type:jV(d.type),doc:g,oldIndex:p,newIndex:E}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function jV(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}function mS(s,t){return s instanceof lr&&t instanceof lr?s._firestore===t._firestore&&s._key.isEqual(t._key)&&(s._document===null?t._document===null:s._document.isEqual(t._document))&&s._converter===t._converter:s instanceof _s&&t instanceof _s&&s._firestore===t._firestore&&eS(s.query,t.query)&&s.metadata.isEqual(t.metadata)&&s._snapshot.isEqual(t._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(s){s=Ht(s,fe);const t=Ht(s.firestore,be);return Gb(on(t),s._key).then(e=>h_(t,s,e))}class Da extends c_{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ci(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new fe(this.firestore,null,e)}}function GV(s){s=Ht(s,fe);const t=Ht(s.firestore,be),e=on(t),r=new Da(t);return hV(e,s._key).then(o=>new lr(t,r,s._key,o,new ha(o!==null&&o.hasLocalMutations,!0),s.converter))}function HV(s){s=Ht(s,fe);const t=Ht(s.firestore,be);return Gb(on(t),s._key,{source:"server"}).then(e=>h_(t,s,e))}function gS(s){s=Ht(s,_n);const t=Ht(s.firestore,be),e=on(t),r=new Da(t);return hS(s._query),Hb(e,s._query).then(o=>new _s(t,r,s,o))}function KV(s){s=Ht(s,_n);const t=Ht(s.firestore,be),e=on(t),r=new Da(t);return fV(e,s._query).then(o=>new _s(t,r,s,o))}function QV(s){s=Ht(s,_n);const t=Ht(s.firestore,be),e=on(t),r=new Da(t);return Hb(e,s._query,{source:"server"}).then(o=>new _s(t,r,s,o))}function u0(s,t,e){s=Ht(s,fe);const r=Ht(s.firestore,be),o=Xf(s.converter,t,e);return hc(r,[Gf(Ia(r),"setDoc",s._key,o,s.converter!==null,e).toMutation(s._key,ae.none())])}function Qg(s,t,e,...r){s=Ht(s,fe);const o=Ht(s.firestore,be),u=Ia(o);let h;return h=typeof(t=Ce(t))=="string"||t instanceof ps?r_(u,"updateDoc",s._key,t,e,r):i_(u,"updateDoc",s._key,t),hc(o,[h.toMutation(s._key,ae.exists(!0))])}function pS(s){return hc(Ht(s.firestore,be),[new al(s._key,ae.none())])}function _S(s,t){const e=Ht(s.firestore,be),r=el(s),o=Xf(s.converter,t);return hc(e,[Gf(Ia(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,ae.exists(!1))]).then(()=>r)}function yS(s,...t){var e,r,o;s=Ce(s);let u={includeMetadataChanges:!1,source:"default"},h=0;typeof t[h]!="object"||Hg(t[h])||(u=t[h],h++);const d={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(Hg(t[h])){const T=t[h];t[h]=(e=T.next)===null||e===void 0?void 0:e.bind(T),t[h+1]=(r=T.error)===null||r===void 0?void 0:r.bind(T),t[h+2]=(o=T.complete)===null||o===void 0?void 0:o.bind(T)}let g,p,E;if(s instanceof fe)p=Ht(s.firestore,be),E=rl(s._key.path),g={next:T=>{t[h]&&t[h](h_(p,s,T))},error:t[h+1],complete:t[h+2]};else{const T=Ht(s,_n);p=Ht(T.firestore,be),E=T._query;const S=new Da(p);g={next:V=>{t[h]&&t[h](new _s(p,S,T,V))},error:t[h+1],complete:t[h+2]},hS(s._query)}return function(S,V,G,H){const Q=new Bf(H),dt=new jp(V,Q,G);return S.asyncQueue.enqueueAndForget(async()=>Bp(await tl(S),dt)),()=>{Q.su(),S.asyncQueue.enqueueAndForget(async()=>zp(await tl(S),dt))}}(on(p),E,d,g)}function YV(s,t){return dV(on(s=Ht(s,be)),Hg(t)?t:{next:t})}function hc(s,t){return function(r,o){const u=new Je;return r.asyncQueue.enqueueAndForget(async()=>zC(await Xp(r),o,u)),u.promise}(on(s),t)}function h_(s,t,e){const r=e.docs.get(t._key),o=new Da(s);return new lr(s,o,t._key,r,new ha(e.hasPendingWrites,e.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XV=class{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Ia(t)}set(t,e,r){this._verifyNotCommitted();const o=ns(t,this._firestore),u=Xf(o.converter,e,r),h=Gf(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,r);return this._mutations.push(h.toMutation(o._key,ae.none())),this}update(t,e,r,...o){this._verifyNotCommitted();const u=ns(t,this._firestore);let h;return h=typeof(e=Ce(e))=="string"||e instanceof ps?r_(this._dataReader,"WriteBatch.update",u._key,e,r,o):i_(this._dataReader,"WriteBatch.update",u._key,e),this._mutations.push(h.toMutation(u._key,ae.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=ns(t,this._firestore);return this._mutations=this._mutations.concat(new al(e._key,ae.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Z(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ns(s,t){if((s=Ce(s)).firestore!==t)throw new Z(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Ia(t)}get(t){const e=ns(t,this._firestore),r=new qV(this._firestore);return this._transaction.lookup([e._key]).then(o=>{if(!o||o.length!==1)return ft();const u=o[0];if(u.isFoundDocument())return new $u(this._firestore,r,u.key,u,e.converter);if(u.isNoDocument())return new $u(this._firestore,r,e._key,null,e.converter);throw ft()})}set(t,e,r){const o=ns(t,this._firestore),u=Xf(o.converter,e,r),h=Gf(this._dataReader,"Transaction.set",o._key,u,o.converter!==null,r);return this._transaction.set(o._key,h),this}update(t,e,r,...o){const u=ns(t,this._firestore);let h;return h=typeof(e=Ce(e))=="string"||e instanceof ps?r_(this._dataReader,"Transaction.update",u._key,e,r,o):i_(this._dataReader,"Transaction.update",u._key,e),this._transaction.update(u._key,h),this}delete(t){const e=ns(t,this._firestore);return this._transaction.delete(e._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WV=class extends ZV{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=ns(t,this._firestore),r=new Da(this._firestore);return super.get(t).then(o=>new lr(this._firestore,r,e._key,o._document,new ha(!1,!1),e.converter))}};function JV(s,t,e){s=Ht(s,be);const r=Object.assign(Object.assign({},$V),e);return function(u){if(u.maxAttempts<1)throw new Z(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(u,h,d){const g=new Je;return u.asyncQueue.enqueueAndForget(async()=>{const p=await lV(u);new aV(u.asyncQueue,p,d,h,g).Iu()}),g.promise}(on(s),o=>t(new WV(s,o)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(){return new uc("deleteField")}function ex(){return new Jp("serverTimestamp")}function nx(...s){return new t_("arrayUnion",s)}function ix(...s){return new e_("arrayRemove",s)}function rx(s){return new n_("increment",s)}(function(t,e=!0){(function(o){il=o})(np),Lo(new ma("firestore",(r,{instanceIdentifier:o,options:u})=>{const h=r.getProvider("app").getImmediate(),d=new be(new n1(r.getProvider("auth-internal")),new s1(h,r.getProvider("app-check-internal")),function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Z(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cs(p.options.projectId,E)}(h,o),h);return u=Object.assign({useFetchStreams:e},u),d._setSettings(u),d},"PUBLIC").setMultipleInstances(!0)),rr(jE,FE,t),rr(jE,FE,"esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(t,e){this._delegate=t,this.firebase=e,Mu(t,new ma("app-compat",()=>this,"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(t=>{this._delegate.checkDestroyed(),t()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),rp(this._delegate)))}_getService(t,e=os){var r;this._delegate.checkDestroyed();const o=this._delegate.container.getProvider(t);return!o.isInitialized()&&((r=o.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&o.initialize(),o.getImmediate({identifier:e})}_removeServiceInstance(t,e=os){this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){Mu(this._delegate,t)}_addOrOverwriteComponent(t){I0(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},c0=new Sf("app-compat","Firebase",ax);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(s){const t={},e={__esModule:!0,initializeApp:u,app:o,registerVersion:rr,setLogLevel:N0,onLog:x0,apps:null,SDK_VERSION:np,INTERNAL:{registerComponent:d,removeApp:r,useAsService:g,modularAPIs:ZR}};e.default=e,Object.defineProperty(e,"apps",{get:h});function r(p){delete t[p]}function o(p){if(p=p||os,!NE(t,p))throw c0.create("no-app",{appName:p});return t[p]}o.App=s;function u(p,E={}){const T=ip(p,E);if(NE(t,T.name))return t[T.name];const S=new s(T,e);return t[T.name]=S,S}function h(){return Object.keys(t).map(p=>t[p])}function d(p){const E=p.name,T=E.replace("-compat","");if(Lo(p)&&p.type==="PUBLIC"){const S=(V=o())=>{if(typeof V[T]!="function")throw c0.create("invalid-app-argument",{appName:E});return V[T]()};p.serviceProps!==void 0&&Jh(S,p.serviceProps),e[T]=S,s.prototype[T]=function(...V){return this._getService.bind(this,E).apply(this,p.multipleInstances?V:[])}}return p.type==="PUBLIC"?e[T]:null}function g(p,E){return E==="serverAuth"?null:E}return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(){const s=ox(sx);s.INTERNAL=Object.assign(Object.assign({},s.INTERNAL),{createFirebaseNamespace:vS,extendNamespace:t,createSubscribe:kI,ErrorFactory:Sf,deepExtend:Jh});function t(e){Jh(s,e)}return s}const lx=vS();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=new Jg("@firebase/app-compat"),ux="@firebase/app-compat",cx="0.2.51";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(s){rr(ux,cx,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const s=_0();if(s.firebase!==void 0){h0.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const t=s.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&h0.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const f_=lx;hx();var fx="firebase",dx="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */f_.registerVersion(fx,dx,"app-compat");const mx="@firebase/firestore-compat",gx="0.3.44";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(s,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new Z("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(){if(typeof Uint8Array>"u")throw new Z("unimplemented","Uint8Arrays are not available in this environment.")}function d0(){if(!U1())throw new Z("unimplemented","Blobs are unavailable in Firestore in this environment.")}let ES=class Yg{constructor(t){this._delegate=t}static fromBase64String(t){return d0(),new Yg(Ci.fromBase64String(t))}static fromUint8Array(t){return f0(),new Yg(Ci.fromUint8Array(t))}toBase64(){return d0(),this._delegate.toBase64()}toUint8Array(){return f0(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(s){return px(s,["next","error","complete"])}function px(s,t){if(typeof s!="object"||s===null)return!1;const e=s;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{enableIndexedDbPersistence(t,e){return EV(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return TV(t._delegate)}clearIndexedDbPersistence(t){return AV(t._delegate)}}class TS{constructor(t,e,r){this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},t instanceof cs||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Ri("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},e),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,e,r={}){Xb(this._delegate,t,e,r)}enableNetwork(){return SV(this._delegate)}disableNetwork(){return wV(this._delegate)}enablePersistence(t){let e=!1,r=!1;return t&&(e=!!t.synchronizeTabs,r=!!t.experimentalForceOwningTab,Qb("synchronizeTabs",e,"experimentalForceOwningTab",r)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return bV(this._delegate)}onSnapshotsInSync(t){return YV(this._delegate,t)}get app(){if(!this._appCompat)throw new Z("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new nl(this,Tf(this._delegate,t))}catch(e){throw gn(e,"collection()","Firestore.collection()")}}doc(t){try{return new Xn(this,el(this._delegate,t))}catch(e){throw gn(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new mn(this,pV(this._delegate,t))}catch(e){throw gn(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return JV(this._delegate,e=>t(new AS(this,e)))}batch(){return on(this._delegate),new bS(new XV(this._delegate,t=>hc(this._delegate,t)))}loadBundle(t){return IV(this._delegate,t)}namedQuery(t){return RV(this._delegate,t).then(e=>e?new mn(this,e):null)}}class Zf extends c_{constructor(t){super(),this.firestore=t}convertBytes(t){return new ES(new Ci(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Xn.forKey(e,this.firestore,null)}}function yx(s){WR(s)}class AS{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Zf(t)}get(t){const e=fa(t);return this._delegate.get(e).then(r=>new Xu(this._firestore,new lr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,e.converter)))}set(t,e,r){const o=fa(t);return r?(d_("Transaction.set",r),this._delegate.set(o,e,r)):this._delegate.set(o,e),this}update(t,e,r,...o){const u=fa(t);return arguments.length===2?this._delegate.update(u,e):this._delegate.update(u,e,r,...o),this}delete(t){const e=fa(t);return this._delegate.delete(e),this}}class bS{constructor(t){this._delegate=t}set(t,e,r){const o=fa(t);return r?(d_("WriteBatch.set",r),this._delegate.set(o,e,r)):this._delegate.set(o,e),this}update(t,e,r,...o){const u=fa(t);return arguments.length===2?this._delegate.update(u,e):this._delegate.update(u,e,r,...o),this}delete(t){const e=fa(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class ba{constructor(t,e,r){this._firestore=t,this._userDataWriter=e,this._delegate=r}fromFirestore(t,e){const r=new Ou(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Zu(this._firestore,r),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const r=ba.INSTANCES;let o=r.get(t);o||(o=new WeakMap,r.set(t,o));let u=o.get(e);return u||(u=new ba(t,new Zf(t),e),o.set(e,u)),u}}ba.INSTANCES=new WeakMap;class Xn{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Zf(t)}static forPath(t,e,r){if(t.length%2!==0)throw new Z("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Xn(e,new fe(e._delegate,r,new st(t)))}static forKey(t,e,r){return new Xn(e,new fe(e._delegate,r,t))}get id(){return this._delegate.id}get parent(){return new nl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new nl(this.firestore,Tf(this._delegate,t))}catch(e){throw gn(e,"collection()","DocumentReference.collection()")}}isEqual(t){return t=Ce(t),t instanceof fe?tS(this._delegate,t):!1}set(t,e){e=d_("DocumentReference.set",e);try{return e?u0(this._delegate,t,e):u0(this._delegate,t)}catch(r){throw gn(r,"setDoc()","DocumentReference.set()")}}update(t,e,...r){try{return arguments.length===1?Qg(this._delegate,t):Qg(this._delegate,t,e,...r)}catch(o){throw gn(o,"updateDoc()","DocumentReference.update()")}}delete(){return pS(this._delegate)}onSnapshot(...t){const e=SS(t),r=wS(t,o=>new Xu(this.firestore,new lr(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return yS(this._delegate,e,r)}get(t){let e;return(t==null?void 0:t.source)==="cache"?e=GV(this._delegate):(t==null?void 0:t.source)==="server"?e=HV(this._delegate):e=FV(this._delegate),e.then(r=>new Xu(this.firestore,new lr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(t){return new Xn(this.firestore,t?this._delegate.withConverter(ba.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function gn(s,t,e){return s.message=s.message.replace(t,e),s}function SS(s){for(const t of s)if(typeof t=="object"&&!$g(t))return t;return{}}function wS(s,t){var e,r;let o;return $g(s[0])?o=s[0]:$g(s[1])?o=s[1]:typeof s[0]=="function"?o={next:s[0],error:s[1],complete:s[2]}:o={next:s[1],error:s[2],complete:s[3]},{next:u=>{o.next&&o.next(t(u))},error:(e=o.error)===null||e===void 0?void 0:e.bind(o),complete:(r=o.complete)===null||r===void 0?void 0:r.bind(o)}}class Xu{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Xn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return mS(this._delegate,t._delegate)}}class Zu extends Xu{data(t){const e=this._delegate.data(t);return this._delegate._converter||JR(e!==void 0),e}}class mn{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Zf(t)}where(t,e,r){try{return new mn(this.firestore,Jr(this._delegate,OV(t,e,r)))}catch(o){throw gn(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new mn(this.firestore,Jr(this._delegate,MV(t,e)))}catch(r){throw gn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new mn(this.firestore,Jr(this._delegate,PV(t)))}catch(e){throw gn(e,"limit()","Query.limit()")}}limitToLast(t){try{return new mn(this.firestore,Jr(this._delegate,LV(t)))}catch(e){throw gn(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new mn(this.firestore,Jr(this._delegate,kV(...t)))}catch(e){throw gn(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new mn(this.firestore,Jr(this._delegate,UV(...t)))}catch(e){throw gn(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new mn(this.firestore,Jr(this._delegate,BV(...t)))}catch(e){throw gn(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new mn(this.firestore,Jr(this._delegate,zV(...t)))}catch(e){throw gn(e,"endAt()","Query.endAt()")}}isEqual(t){return eS(this._delegate,t._delegate)}get(t){let e;return(t==null?void 0:t.source)==="cache"?e=KV(this._delegate):(t==null?void 0:t.source)==="server"?e=QV(this._delegate):e=gS(this._delegate),e.then(r=>new Xg(this.firestore,new _s(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...t){const e=SS(t),r=wS(t,o=>new Xg(this.firestore,new _s(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return yS(this._delegate,e,r)}withConverter(t){return new mn(this.firestore,t?this._delegate.withConverter(ba.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}class vx{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new Zu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Xg{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new mn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new Zu(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new vx(this._firestore,e))}forEach(t,e){this._delegate.forEach(r=>{t.call(e,new Zu(this._firestore,r))})}isEqual(t){return mS(this._delegate,t._delegate)}}class nl extends mn{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Xn(this.firestore,t):null}doc(t){try{return t===void 0?new Xn(this.firestore,el(this._delegate)):new Xn(this.firestore,el(this._delegate,t))}catch(e){throw gn(e,"doc()","CollectionReference.doc()")}}add(t){return _S(this._delegate,t).then(e=>new Xn(this.firestore,e))}isEqual(t){return tS(this._delegate,t._delegate)}withConverter(t){return new nl(this.firestore,t?this._delegate.withConverter(ba.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function fa(s){return Ht(s,fe)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(...t){this._delegate=new ps(...t)}static documentId(){return new m_(se.keyField().canonicalString())}isEqual(t){return t=Ce(t),t instanceof ps?this._delegate._internalPath.isEqual(t._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{static serverTimestamp(){const t=ex();return t._methodName="FieldValue.serverTimestamp",new ua(t)}static delete(){const t=tx();return t._methodName="FieldValue.delete",new ua(t)}static arrayUnion(...t){const e=nx(...t);return e._methodName="FieldValue.arrayUnion",new ua(e)}static arrayRemove(...t){const e=ix(...t);return e._methodName="FieldValue.arrayRemove",new ua(e)}static increment(t){const e=rx(t);return e._methodName="FieldValue.increment",new ua(e)}constructor(t){this._delegate=t}isEqual(t){return this._delegate.isEqual(t._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex={Firestore:TS,GeoPoint:jf,Timestamp:oe,Blob:ES,Transaction:AS,WriteBatch:bS,DocumentReference:Xn,DocumentSnapshot:Xu,Query:mn,QueryDocumentSnapshot:Zu,QuerySnapshot:Xg,CollectionReference:nl,FieldPath:m_,FieldValue:ua,setLogLevel:yx,CACHE_SIZE_UNLIMITED:yV};function Tx(s,t){s.INTERNAL.registerComponent(new ma("firestore-compat",e=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("firestore").getImmediate();return t(r,o)},"PUBLIC").setServiceProps(Object.assign({},Ex)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(s){Tx(s,(t,e)=>new TS(t,e,new _x)),s.registerVersion(mx,gx)}Ax(f_);const bx=f_.initializeApp({apiKey:"AIzaSyB2F4R4KkxUwb4GFKs7twRhiHS5i-i51D4",authDomain:"scopic-73416.firebaseapp.com",projectId:"scopic-73416",storageBucket:"scopic-73416.appspot.com",messagingSenderId:"475263107333",appId:"1:475263107333:web:27180a036864e16618376c"}),qh=vV(bx);function Sx(){const[s,t]=Ke.useState([]),e=Tf(qh,"sociosCaza"),[r,o]=Ke.useState(!0);Ke.useEffect(()=>{gS(e).then(R=>{R.size===0&&console.log("No results!");const N=R.docs.map(L=>({idDB:L.id,...L.data()}));t(N)}).catch(R=>{console.log("Error searching items",R)})},[r]);const[u,h]=Ke.useState({nombreDelSocio:"",apellidoPaterno:"",apellidoMaterno:"",curp:"",numeroDelSocio:"",domicilioDelSocio:"",clase:"",calibre:"",marca:"",modelo:"",matricula:"",folio:"",armasCortas:"",armasLargas:"",fechaDeInscripcion:0}),[d,g]=Ke.useState(null),[p,E,T,S,V]=_I(),[G,H,Q,dt,it,lt]=yI();Ke.useEffect(()=>{p!==null&&(p.length===1&&S.length>3?H("Encontrado"):H(`${p.length} Resultados`),S.length===0&&(E(null),H(`${s.length}, Todos las Socios`)))},[S]);let Tt=[],ht=[];s.map(R=>{R.armasArr.map(N=>{N.armasCortas==="1"&&Tt.push("corta"),N.armasLargas==="1"&&ht.push("larga")})});const yt=Tf(qh,"sociosCaza"),O=R=>{_S(yt,R).then(()=>{console.log("wuuu!!")}).catch(N=>console.log(N))},I=async R=>{const N=el(qh,"sociosCaza",R);try{await pS(N),console.log(R,"Fue Eliminado")}catch(L){console.error(L)}},w=async(R,N)=>{const L=el(qh,"sociosCaza",R);try{await Qg(L,N)}catch(C){console.error(C)}};return s.sort((R,N)=>{const L=R.nombreDelSocio.localeCompare(N.nombreDelSocio);return L===0?L:R.apellidoPaterno.localeCompare(N.apellidoPaterno)}),q.jsxs("div",{children:[dt?q.jsx("p",{className:"msg",children:dt}):"",q.jsx(pI,{}),q.jsx(lI,{editMode:d,error:it,msg:G,items:s,setMsg:H,setFinder:E,setError:lt,setFinderMsg:Q,setState:h,state:u,setEdit:g,setSearchTXT:V,postSocio:O,setGetDB:o,getDB:r,updateByIdDB:w}),q.jsxs("div",{className:"totalesGenerales",children:[q.jsxs("span",{children:["Armas Cortas: ",s.filter(R=>R.armasCortas==="1").length+Tt.length]}),q.jsxs("span",{children:["Armas Largas: ",s.filter(R=>R.armasLargas==="1").length+ht.length]}),q.jsxs("span",{children:["Total de Armas: ",s.filter(R=>R.armasLargas==="1").length+s.filter(R=>R.armasCortas==="1").length+Tt.length+ht.length]})]}),q.jsx(oI,{items:s,handleSearch:T,searchTXT:S}),q.jsx("br",{}),q.jsx(gI,{setError:lt,setMsg:H,setFinder:E,items:s}),p===null?s.map((R,N)=>q.jsx(IE,{i:N,setEdit:g,setState:h,state:u,el:R,setFinder:E,setMsg:H,deleteByIdDB:I,setGetDB:o,getDB:r,updateByIdDB:w,items:s},N)):p.map((R,N)=>q.jsx(IE,{i:N,setEdit:g,setState:h,state:u,el:R,setFinder:E,setMsg:H,deleteByIdDB:I,setGetDB:o,getDB:r,updateByIdDB:w,items:s},N)),s.length===0?q.jsx("p",{className:"check",children:"No hay Socios Escritos"}):null]})}aI.createRoot(document.getElementById("root")).render(q.jsx(Ke.StrictMode,{children:q.jsx(Sx,{})}));
