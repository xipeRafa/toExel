(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function Wx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Nv={exports:{}},Ih={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LR;function AL(){if(LR)return Ih;LR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,i,r){var a=null;if(r!==void 0&&(a=""+r),i.key!==void 0&&(a=""+i.key),"key"in i){r={};for(var u in i)u!=="key"&&(r[u]=i[u])}else r=i;return i=r.ref,{$$typeof:e,type:s,key:a,ref:i!==void 0?i:null,props:r}}return Ih.Fragment=t,Ih.jsx=n,Ih.jsxs=n,Ih}var OR;function xL(){return OR||(OR=1,Nv.exports=AL()),Nv.exports}var Z=xL(),Vv={exports:{}},ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kR;function DL(){if(kR)return ze;kR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.iterator;function v(N){return N===null||typeof N!="object"?null:(N=m&&N[m]||N["@@iterator"],typeof N=="function"?N:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function A(N,W,ee){this.props=N,this.context=W,this.refs=T,this.updater=ee||w}A.prototype.isReactComponent={},A.prototype.setState=function(N,W){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,W,"setState")},A.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function O(){}O.prototype=A.prototype;function V(N,W,ee){this.props=N,this.context=W,this.refs=T,this.updater=ee||w}var H=V.prototype=new O;H.constructor=V,S(H,A.prototype),H.isPureReactComponent=!0;var z=Array.isArray,U={H:null,A:null,T:null,S:null},K=Object.prototype.hasOwnProperty;function k(N,W,ee,oe,ue,xe){return ee=xe.ref,{$$typeof:e,type:N,key:W,ref:ee!==void 0?ee:null,props:xe}}function D(N,W){return k(N.type,W,void 0,void 0,void 0,N.props)}function x(N){return typeof N=="object"&&N!==null&&N.$$typeof===e}function L(N){var W={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ee){return W[ee]})}var M=/\/+/g;function B(N,W){return typeof N=="object"&&N!==null&&N.key!=null?L(""+N.key):W.toString(36)}function F(){}function ye(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(F,F):(N.status="pending",N.then(function(W){N.status==="pending"&&(N.status="fulfilled",N.value=W)},function(W){N.status==="pending"&&(N.status="rejected",N.reason=W)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function ve(N,W,ee,oe,ue){var xe=typeof N;(xe==="undefined"||xe==="boolean")&&(N=null);var Ae=!1;if(N===null)Ae=!0;else switch(xe){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(N.$$typeof){case e:case t:Ae=!0;break;case g:return Ae=N._init,ve(Ae(N._payload),W,ee,oe,ue)}}if(Ae)return ue=ue(N),Ae=oe===""?"."+B(N,0):oe,z(ue)?(ee="",Ae!=null&&(ee=Ae.replace(M,"$&/")+"/"),ve(ue,W,ee,"",function(St){return St})):ue!=null&&(x(ue)&&(ue=D(ue,ee+(ue.key==null||N&&N.key===ue.key?"":(""+ue.key).replace(M,"$&/")+"/")+Ae)),W.push(ue)),1;Ae=0;var gt=oe===""?".":oe+":";if(z(N))for(var Ue=0;Ue<N.length;Ue++)oe=N[Ue],xe=gt+B(oe,Ue),Ae+=ve(oe,W,ee,xe,ue);else if(Ue=v(N),typeof Ue=="function")for(N=Ue.call(N),Ue=0;!(oe=N.next()).done;)oe=oe.value,xe=gt+B(oe,Ue++),Ae+=ve(oe,W,ee,xe,ue);else if(xe==="object"){if(typeof N.then=="function")return ve(ye(N),W,ee,oe,ue);throw W=String(N),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function ie(N,W,ee){if(N==null)return N;var oe=[],ue=0;return ve(N,oe,"","",function(xe){return W.call(ee,xe,ue++)}),oe}function Ce(N){if(N._status===-1){var W=N._result;W=W(),W.then(function(ee){(N._status===0||N._status===-1)&&(N._status=1,N._result=ee)},function(ee){(N._status===0||N._status===-1)&&(N._status=2,N._result=ee)}),N._status===-1&&(N._status=0,N._result=W)}if(N._status===1)return N._result.default;throw N._result}var re=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function Re(){}return ze.Children={map:ie,forEach:function(N,W,ee){ie(N,function(){W.apply(this,arguments)},ee)},count:function(N){var W=0;return ie(N,function(){W++}),W},toArray:function(N){return ie(N,function(W){return W})||[]},only:function(N){if(!x(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},ze.Component=A,ze.Fragment=n,ze.Profiler=i,ze.PureComponent=V,ze.StrictMode=s,ze.Suspense=h,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,ze.act=function(){throw Error("act(...) is not supported in production builds of React.")},ze.cache=function(N){return function(){return N.apply(null,arguments)}},ze.cloneElement=function(N,W,ee){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var oe=S({},N.props),ue=N.key,xe=void 0;if(W!=null)for(Ae in W.ref!==void 0&&(xe=void 0),W.key!==void 0&&(ue=""+W.key),W)!K.call(W,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&W.ref===void 0||(oe[Ae]=W[Ae]);var Ae=arguments.length-2;if(Ae===1)oe.children=ee;else if(1<Ae){for(var gt=Array(Ae),Ue=0;Ue<Ae;Ue++)gt[Ue]=arguments[Ue+2];oe.children=gt}return k(N.type,ue,void 0,void 0,xe,oe)},ze.createContext=function(N){return N={$$typeof:a,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:r,_context:N},N},ze.createElement=function(N,W,ee){var oe,ue={},xe=null;if(W!=null)for(oe in W.key!==void 0&&(xe=""+W.key),W)K.call(W,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(ue[oe]=W[oe]);var Ae=arguments.length-2;if(Ae===1)ue.children=ee;else if(1<Ae){for(var gt=Array(Ae),Ue=0;Ue<Ae;Ue++)gt[Ue]=arguments[Ue+2];ue.children=gt}if(N&&N.defaultProps)for(oe in Ae=N.defaultProps,Ae)ue[oe]===void 0&&(ue[oe]=Ae[oe]);return k(N,xe,void 0,void 0,null,ue)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(N){return{$$typeof:u,render:N}},ze.isValidElement=x,ze.lazy=function(N){return{$$typeof:g,_payload:{_status:-1,_result:N},_init:Ce}},ze.memo=function(N,W){return{$$typeof:d,type:N,compare:W===void 0?null:W}},ze.startTransition=function(N){var W=U.T,ee={};U.T=ee;try{var oe=N(),ue=U.S;ue!==null&&ue(ee,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(Re,re)}catch(xe){re(xe)}finally{U.T=W}},ze.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},ze.use=function(N){return U.H.use(N)},ze.useActionState=function(N,W,ee){return U.H.useActionState(N,W,ee)},ze.useCallback=function(N,W){return U.H.useCallback(N,W)},ze.useContext=function(N){return U.H.useContext(N)},ze.useDebugValue=function(){},ze.useDeferredValue=function(N,W){return U.H.useDeferredValue(N,W)},ze.useEffect=function(N,W){return U.H.useEffect(N,W)},ze.useId=function(){return U.H.useId()},ze.useImperativeHandle=function(N,W,ee){return U.H.useImperativeHandle(N,W,ee)},ze.useInsertionEffect=function(N,W){return U.H.useInsertionEffect(N,W)},ze.useLayoutEffect=function(N,W){return U.H.useLayoutEffect(N,W)},ze.useMemo=function(N,W){return U.H.useMemo(N,W)},ze.useOptimistic=function(N,W){return U.H.useOptimistic(N,W)},ze.useReducer=function(N,W,ee){return U.H.useReducer(N,W,ee)},ze.useRef=function(N){return U.H.useRef(N)},ze.useState=function(N){return U.H.useState(N)},ze.useSyncExternalStore=function(N,W,ee){return U.H.useSyncExternalStore(N,W,ee)},ze.useTransition=function(){return U.H.useTransition()},ze.version="19.0.0",ze}var NR;function Vw(){return NR||(NR=1,Vv.exports=DL()),Vv.exports}var _=Vw();const me=Wx(_);var Bv={exports:{}},Mh={},Gv={exports:{}},Hv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VR;function _L(){return VR||(VR=1,function(e){function t(ie,Ce){var re=ie.length;ie.push(Ce);e:for(;0<re;){var Re=re-1>>>1,N=ie[Re];if(0<i(N,Ce))ie[Re]=Ce,ie[re]=N,re=Re;else break e}}function n(ie){return ie.length===0?null:ie[0]}function s(ie){if(ie.length===0)return null;var Ce=ie[0],re=ie.pop();if(re!==Ce){ie[0]=re;e:for(var Re=0,N=ie.length,W=N>>>1;Re<W;){var ee=2*(Re+1)-1,oe=ie[ee],ue=ee+1,xe=ie[ue];if(0>i(oe,re))ue<N&&0>i(xe,oe)?(ie[Re]=xe,ie[ue]=re,Re=ue):(ie[Re]=oe,ie[ee]=re,Re=ee);else if(ue<N&&0>i(xe,re))ie[Re]=xe,ie[ue]=re,Re=ue;else break e}}return Ce}function i(ie,Ce){var re=ie.sortIndex-Ce.sortIndex;return re!==0?re:ie.id-Ce.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var a=Date,u=a.now();e.unstable_now=function(){return a.now()-u}}var h=[],d=[],g=1,m=null,v=3,w=!1,S=!1,T=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function H(ie){for(var Ce=n(d);Ce!==null;){if(Ce.callback===null)s(d);else if(Ce.startTime<=ie)s(d),Ce.sortIndex=Ce.expirationTime,t(h,Ce);else break;Ce=n(d)}}function z(ie){if(T=!1,H(ie),!S)if(n(h)!==null)S=!0,ye();else{var Ce=n(d);Ce!==null&&ve(z,Ce.startTime-ie)}}var U=!1,K=-1,k=5,D=-1;function x(){return!(e.unstable_now()-D<k)}function L(){if(U){var ie=e.unstable_now();D=ie;var Ce=!0;try{e:{S=!1,T&&(T=!1,O(K),K=-1),w=!0;var re=v;try{t:{for(H(ie),m=n(h);m!==null&&!(m.expirationTime>ie&&x());){var Re=m.callback;if(typeof Re=="function"){m.callback=null,v=m.priorityLevel;var N=Re(m.expirationTime<=ie);if(ie=e.unstable_now(),typeof N=="function"){m.callback=N,H(ie),Ce=!0;break t}m===n(h)&&s(h),H(ie)}else s(h);m=n(h)}if(m!==null)Ce=!0;else{var W=n(d);W!==null&&ve(z,W.startTime-ie),Ce=!1}}break e}finally{m=null,v=re,w=!1}Ce=void 0}}finally{Ce?M():U=!1}}}var M;if(typeof V=="function")M=function(){V(L)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,F=B.port2;B.port1.onmessage=L,M=function(){F.postMessage(null)}}else M=function(){A(L,0)};function ye(){U||(U=!0,M())}function ve(ie,Ce){K=A(function(){ie(e.unstable_now())},Ce)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ie){ie.callback=null},e.unstable_continueExecution=function(){S||w||(S=!0,ye())},e.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<ie?Math.floor(1e3/ie):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(ie){switch(v){case 1:case 2:case 3:var Ce=3;break;default:Ce=v}var re=v;v=Ce;try{return ie()}finally{v=re}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ie,Ce){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var re=v;v=ie;try{return Ce()}finally{v=re}},e.unstable_scheduleCallback=function(ie,Ce,re){var Re=e.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Re+re:Re):re=Re,ie){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=re+N,ie={id:g++,callback:Ce,priorityLevel:ie,startTime:re,expirationTime:N,sortIndex:-1},re>Re?(ie.sortIndex=re,t(d,ie),n(h)===null&&ie===n(d)&&(T?(O(K),K=-1):T=!0,ve(z,re-Re))):(ie.sortIndex=N,t(h,ie),S||w||(S=!0,ye())),ie},e.unstable_shouldYield=x,e.unstable_wrapCallback=function(ie){var Ce=v;return function(){var re=v;v=Ce;try{return ie.apply(this,arguments)}finally{v=re}}}}(Hv)),Hv}var BR;function IL(){return BR||(BR=1,Gv.exports=_L()),Gv.exports}var zv={exports:{}},Bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GR;function ML(){if(GR)return Bn;GR=1;var e=Vw();function t(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function r(h,d,g){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:h,containerInfo:d,implementation:g}}var a=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Bn.createPortal=function(h,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return r(h,d,null,g)},Bn.flushSync=function(h){var d=a.T,g=s.p;try{if(a.T=null,s.p=2,h)return h()}finally{a.T=d,s.p=g,s.d.f()}},Bn.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(h,d))},Bn.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},Bn.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var g=d.as,m=u(g,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,w=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;g==="style"?s.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:w}):g==="script"&&s.d.X(h,{crossOrigin:m,integrity:v,fetchPriority:w,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Bn.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var g=u(d.as,d.crossOrigin);s.d.M(h,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(h)},Bn.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var g=d.as,m=u(g,d.crossOrigin);s.d.L(h,g,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Bn.preloadModule=function(h,d){if(typeof h=="string")if(d){var g=u(d.as,d.crossOrigin);s.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(h)},Bn.requestFormReset=function(h){s.d.r(h)},Bn.unstable_batchedUpdates=function(h,d){return h(d)},Bn.useFormState=function(h,d,g){return a.H.useFormState(h,d,g)},Bn.useFormStatus=function(){return a.H.useHostTransitionStatus()},Bn.version="19.0.0",Bn}var HR;function jx(){if(HR)return zv.exports;HR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),zv.exports=ML(),zv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zR;function FL(){if(zR)return Mh;zR=1;var e=IL(),t=Vw(),n=jx();function s(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)l+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}var r=Symbol.for("react.element"),a=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),w=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),z=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function K(o){return o===null||typeof o!="object"?null:(o=U&&o[U]||o["@@iterator"],typeof o=="function"?o:null)}var k=Symbol.for("react.client.reference");function D(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===k?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case h:return"Fragment";case u:return"Portal";case g:return"Profiler";case d:return"StrictMode";case T:return"Suspense";case A:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case w:return(o.displayName||"Context")+".Provider";case v:return(o._context.displayName||"Context")+".Consumer";case S:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case O:return l=o.displayName||null,l!==null?l:D(o.type)||"Memo";case V:l=o._payload,o=o._init;try{return D(o(l))}catch{}}return null}var x=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=Object.assign,M,B;function F(o){if(M===void 0)try{throw Error()}catch(c){var l=c.stack.trim().match(/\n( *(at )?)/);M=l&&l[1]||"",B=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+M+o+B}var ye=!1;function ve(o,l){if(!o||ye)return"";ye=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(l){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ae){var te=ae}Reflect.construct(o,[],fe)}else{try{fe.call()}catch(ae){te=ae}o.call(fe.prototype)}}else{try{throw Error()}catch(ae){te=ae}(fe=o())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ae){if(ae&&te&&typeof ae.stack=="string")return[ae.stack,te.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=f.DetermineComponentFrameRoot(),R=y[0],I=y[1];if(R&&I){var G=R.split(`
`),q=I.split(`
`);for(C=f=0;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;for(;C<q.length&&!q[C].includes("DetermineComponentFrameRoot");)C++;if(f===G.length||C===q.length)for(f=G.length-1,C=q.length-1;1<=f&&0<=C&&G[f]!==q[C];)C--;for(;1<=f&&0<=C;f--,C--)if(G[f]!==q[C]){if(f!==1||C!==1)do if(f--,C--,0>C||G[f]!==q[C]){var le=`
`+G[f].replace(" at new "," at ");return o.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",o.displayName)),le}while(1<=f&&0<=C);break}}}finally{ye=!1,Error.prepareStackTrace=c}return(c=o?o.displayName||o.name:"")?F(c):""}function ie(o){switch(o.tag){case 26:case 27:case 5:return F(o.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 15:return o=ve(o.type,!1),o;case 11:return o=ve(o.type.render,!1),o;case 1:return o=ve(o.type,!0),o;default:return""}}function Ce(o){try{var l="";do l+=ie(o),o=o.return;while(o);return l}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function re(o){var l=o,c=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(c=l.return),o=l.return;while(o)}return l.tag===3?c:null}function Re(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function N(o){if(re(o)!==o)throw Error(s(188))}function W(o){var l=o.alternate;if(!l){if(l=re(o),l===null)throw Error(s(188));return l!==o?null:o}for(var c=o,f=l;;){var C=c.return;if(C===null)break;var y=C.alternate;if(y===null){if(f=C.return,f!==null){c=f;continue}break}if(C.child===y.child){for(y=C.child;y;){if(y===c)return N(C),o;if(y===f)return N(C),l;y=y.sibling}throw Error(s(188))}if(c.return!==f.return)c=C,f=y;else{for(var R=!1,I=C.child;I;){if(I===c){R=!0,c=C,f=y;break}if(I===f){R=!0,f=C,c=y;break}I=I.sibling}if(!R){for(I=y.child;I;){if(I===c){R=!0,c=y,f=C;break}if(I===f){R=!0,f=y,c=C;break}I=I.sibling}if(!R)throw Error(s(189))}}if(c.alternate!==f)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?o:l}function ee(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=ee(o),l!==null)return l;o=o.sibling}return null}var oe=Array.isArray,ue=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe={pending:!1,data:null,method:null,action:null},Ae=[],gt=-1;function Ue(o){return{current:o}}function St(o){0>gt||(o.current=Ae[gt],Ae[gt]=null,gt--)}function et(o,l){gt++,Ae[gt]=o.current,o.current=l}var hn=Ue(null),os=Ue(null),qe=Ue(null),ft=Ue(null);function Dt(o,l){switch(et(qe,l),et(os,o),et(hn,null),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)&&(l=l.namespaceURI)?uR(l):0;break;default:if(o=o===8?l.parentNode:l,l=o.tagName,o=o.namespaceURI)o=uR(o),l=cR(o,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}St(hn),et(hn,l)}function Ht(){St(hn),St(os),St(qe)}function Ke(o){o.memoizedState!==null&&et(ft,o);var l=hn.current,c=cR(l,o.type);l!==c&&(et(os,o),et(hn,c))}function Et(o){os.current===o&&(St(hn),St(os)),ft.current===o&&(St(ft),Th._currentValue=xe)}var zt=Object.prototype.hasOwnProperty,Rt=e.unstable_scheduleCallback,_t=e.unstable_cancelCallback,ai=e.unstable_shouldYield,zi=e.unstable_requestPaint,sn=e.unstable_now,ea=e.unstable_getCurrentPriorityLevel,Yt=e.unstable_ImmediatePriority,Qt=e.unstable_UserBlockingPriority,rt=e.unstable_NormalPriority,yn=e.unstable_LowPriority,ta=e.unstable_IdlePriority,Gm=e.log,na=e.unstable_setDisableYieldValue,Lr=null,Nn=null;function Dc(o){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(Lr,o,void 0,(o.current.flags&128)===128)}catch{}}function li(o){if(typeof Gm=="function"&&na(o),Nn&&typeof Nn.setStrictMode=="function")try{Nn.setStrictMode(Lr,o)}catch{}}var Kn=Math.clz32?Math.clz32:Jd,_c=Math.log,Zd=Math.LN2;function Jd(o){return o>>>=0,o===0?32:31-(_c(o)/Zd|0)|0}var ui=128,Or=4194304;function Ks(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Rs(o,l){var c=o.pendingLanes;if(c===0)return 0;var f=0,C=o.suspendedLanes,y=o.pingedLanes,R=o.warmLanes;o=o.finishedLanes!==0;var I=c&134217727;return I!==0?(c=I&~C,c!==0?f=Ks(c):(y&=I,y!==0?f=Ks(y):o||(R=I&~R,R!==0&&(f=Ks(R))))):(I=c&~C,I!==0?f=Ks(I):y!==0?f=Ks(y):o||(R=c&~R,R!==0&&(f=Ks(R)))),f===0?0:l!==0&&l!==f&&(l&C)===0&&(C=f&-f,R=l&-l,C>=R||C===32&&(R&4194176)!==0)?l:f}function kr(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function Tl(o,l){switch(o){case 1:case 2:case 4:case 8:return l+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ic(){var o=ui;return ui<<=1,(ui&4194176)===0&&(ui=128),o}function Nr(){var o=Or;return Or<<=1,(Or&62914560)===0&&(Or=4194304),o}function Al(o){for(var l=[],c=0;31>c;c++)l.push(o);return l}function Xt(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function ef(o,l,c,f,C,y){var R=o.pendingLanes;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=c,o.entangledLanes&=c,o.errorRecoveryDisabledLanes&=c,o.shellSuspendCounter=0;var I=o.entanglements,G=o.expirationTimes,q=o.hiddenUpdates;for(c=R&~c;0<c;){var le=31-Kn(c),fe=1<<le;I[le]=0,G[le]=-1;var te=q[le];if(te!==null)for(q[le]=null,le=0;le<te.length;le++){var ae=te[le];ae!==null&&(ae.lane&=-536870913)}c&=~fe}f!==0&&Vr(o,f,0),y!==0&&C===0&&o.tag!==0&&(o.suspendedLanes|=y&~(R&~l))}function Vr(o,l,c){o.pendingLanes|=l,o.suspendedLanes&=~l;var f=31-Kn(l);o.entangledLanes|=l,o.entanglements[f]=o.entanglements[f]|1073741824|c&4194218}function Br(o,l){var c=o.entangledLanes|=l;for(o=o.entanglements;c;){var f=31-Kn(c),C=1<<f;C&l|o[f]&l&&(o[f]|=l),c&=~C}}function tf(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function nf(){var o=ue.p;return o!==0?o:(o=window.event,o===void 0?32:DR(o.type))}function Gr(o,l){var c=ue.p;try{return ue.p=o,l()}finally{ue.p=c}}var ci=Math.random().toString(36).slice(2),wn="__reactFiber$"+ci,dn="__reactProps$"+ci,Ui="__reactContainer$"+ci,sa="__reactEvents$"+ci,xl="__reactListeners$"+ci,hi="__reactHandles$"+ci,Mc="__reactResources$"+ci,Hr="__reactMarker$"+ci;function ia(o){delete o[wn],delete o[dn],delete o[sa],delete o[xl],delete o[hi]}function Ys(o){var l=o[wn];if(l)return l;for(var c=o.parentNode;c;){if(l=c[Ui]||c[wn]){if(c=l.alternate,l.child!==null||c!==null&&c.child!==null)for(o=fR(o);o!==null;){if(c=o[wn])return c;o=fR(o)}return l}o=c,c=o.parentNode}return null}function Wi(o){if(o=o[wn]||o[Ui]){var l=o.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return o}return null}function zr(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(s(33))}function Ur(o){var l=o[Mc];return l||(l=o[Mc]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Ot(o){o[Hr]=!0}var Fc=new Set,Dl={};function gs(o,l){as(o,l),as(o+"Capture",l)}function as(o,l){for(Dl[o]=l,o=0;o<l.length;o++)Fc.add(l[o])}var ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pc={},Lc={};function sf(o){return zt.call(Lc,o)?!0:zt.call(Pc,o)?!1:Hm.test(o)?Lc[o]=!0:(Pc[o]=!0,!1)}function Wr(o,l,c){if(sf(l))if(c===null)o.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var f=l.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+c)}}function jr(o,l,c){if(c===null)o.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+c)}}function Ts(o,l,c,f){if(f===null)o.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttributeNS(l,c,""+f)}}function Yn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function rf(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function zm(o){var l=rf(o)?"checked":"value",c=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),f=""+o[l];if(!o.hasOwnProperty(l)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var C=c.get,y=c.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return C.call(this)},set:function(R){f=""+R,y.call(this,R)}}),Object.defineProperty(o,l,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(R){f=""+R},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function ra(o){o._valueTracker||(o._valueTracker=zm(o))}function Oc(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var c=l.getValue(),f="";return o&&(f=rf(o)?o.checked?"true":"false":o.value),o=f,o!==c?(l.setValue(o),!0):!1}function _l(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var ji=/[\n"\\]/g;function Ut(o){return o.replace(ji,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function qr(o,l,c,f,C,y,R,I){o.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?o.type=R:o.removeAttribute("type"),l!=null?R==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+Yn(l)):o.value!==""+Yn(l)&&(o.value=""+Yn(l)):R!=="submit"&&R!=="reset"||o.removeAttribute("value"),l!=null?Il(o,R,Yn(l)):c!=null?Il(o,R,Yn(c)):f!=null&&o.removeAttribute("value"),C==null&&y!=null&&(o.defaultChecked=!!y),C!=null&&(o.checked=C&&typeof C!="function"&&typeof C!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?o.name=""+Yn(I):o.removeAttribute("name")}function oa(o,l,c,f,C,y,R,I){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(o.type=y),l!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||l!=null))return;c=c!=null?""+Yn(c):"",l=l!=null?""+Yn(l):c,I||l===o.value||(o.value=l),o.defaultValue=l}f=f??C,f=typeof f!="function"&&typeof f!="symbol"&&!!f,o.checked=I?o.checked:!!f,o.defaultChecked=!!f,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(o.name=R)}function Il(o,l,c){l==="number"&&_l(o.ownerDocument)===o||o.defaultValue===""+c||(o.defaultValue=""+c)}function lt(o,l,c,f){if(o=o.options,l){l={};for(var C=0;C<c.length;C++)l["$"+c[C]]=!0;for(c=0;c<o.length;c++)C=l.hasOwnProperty("$"+o[c].value),o[c].selected!==C&&(o[c].selected=C),C&&f&&(o[c].defaultSelected=!0)}else{for(c=""+Yn(c),l=null,C=0;C<o.length;C++){if(o[C].value===c){o[C].selected=!0,f&&(o[C].defaultSelected=!0);return}l!==null||o[C].disabled||(l=o[C])}l!==null&&(l.selected=!0)}}function aa(o,l,c){if(l!=null&&(l=""+Yn(l),l!==o.value&&(o.value=l),c==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=c!=null?""+Yn(c):""}function $r(o,l,c,f){if(l==null){if(f!=null){if(c!=null)throw Error(s(92));if(oe(f)){if(1<f.length)throw Error(s(93));f=f[0]}c=f}c==null&&(c=""),l=c}c=Yn(l),o.defaultValue=c,f=o.textContent,f===c&&f!==""&&f!==null&&(o.value=f)}function As(o,l){if(l){var c=o.firstChild;if(c&&c===o.lastChild&&c.nodeType===3){c.nodeValue=l;return}}o.textContent=l}var Um=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kc(o,l,c){var f=l.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":f?o.setProperty(l,c):typeof c!="number"||c===0||Um.has(l)?l==="float"?o.cssFloat=c:o[l]=(""+c).trim():o[l]=c+"px"}function of(o,l,c){if(l!=null&&typeof l!="object")throw Error(s(62));if(o=o.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||l!=null&&l.hasOwnProperty(f)||(f.indexOf("--")===0?o.setProperty(f,""):f==="float"?o.cssFloat="":o[f]="");for(var C in l)f=l[C],l.hasOwnProperty(C)&&c[C]!==f&&kc(o,C,f)}else for(var y in l)l.hasOwnProperty(y)&&kc(o,y,l[y])}function Nc(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function di(o){return jm.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var xs=null;function Ml(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var qi=null,$i=null;function Ki(o){var l=Wi(o);if(l&&(o=l.stateNode)){var c=o[dn]||null;e:switch(o=l.stateNode,l.type){case"input":if(qr(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),l=c.name,c.type==="radio"&&l!=null){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Ut(""+l)+'"][type="radio"]'),l=0;l<c.length;l++){var f=c[l];if(f!==o&&f.form===o.form){var C=f[dn]||null;if(!C)throw Error(s(90));qr(f,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(l=0;l<c.length;l++)f=c[l],f.form===o.form&&Oc(f)}break e;case"textarea":aa(o,c.value,c.defaultValue);break e;case"select":l=c.value,l!=null&&lt(o,!!c.multiple,l,!1)}}}var Vc=!1;function af(o,l,c){if(Vc)return o(l,c);Vc=!0;try{var f=o(l);return f}finally{if(Vc=!1,(qi!==null||$i!==null)&&(Zf(),qi&&(l=qi,o=$i,$i=qi=null,Ki(l),o)))for(l=0;l<o.length;l++)Ki(o[l])}}function la(o,l){var c=o.stateNode;if(c===null)return null;var f=c[dn]||null;if(f===null)return null;c=f[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(o=o.type,f=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!f;break e;default:o=!1}if(o)return null;if(c&&typeof c!="function")throw Error(s(231,l,typeof c));return c}var Ds=!1;if(ps)try{var ua={};Object.defineProperty(ua,"passive",{get:function(){Ds=!0}}),window.addEventListener("test",ua,ua),window.removeEventListener("test",ua,ua)}catch{Ds=!1}var fi=null,Kr=null,Yi=null;function Bc(){if(Yi)return Yi;var o,l=Kr,c=l.length,f,C="value"in fi?fi.value:fi.textContent,y=C.length;for(o=0;o<c&&l[o]===C[o];o++);var R=c-o;for(f=1;f<=R&&l[c-f]===C[y-f];f++);return Yi=C.slice(o,1<f?1-f:void 0)}function gi(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function pi(){return!0}function Gc(){return!1}function bn(o){function l(c,f,C,y,R){this._reactName=c,this._targetInst=C,this.type=f,this.nativeEvent=y,this.target=R,this.currentTarget=null;for(var I in o)o.hasOwnProperty(I)&&(c=o[I],this[I]=c?c(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?pi:Gc,this.isPropagationStopped=Gc,this}return L(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=pi)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=pi)},persist:function(){},isPersistent:pi}),l}var pt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fl=bn(pt),ca=L({},pt,{view:0,detail:0}),lf=bn(ca),Pl,Ll,mi,ha=L({},ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ga,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==mi&&(mi&&o.type==="mousemove"?(Pl=o.screenX-mi.screenX,Ll=o.screenY-mi.screenY):Ll=Pl=0,mi=o),Pl)},movementY:function(o){return"movementY"in o?o.movementY:Ll}}),_s=bn(ha),uf=L({},ha,{dataTransfer:0}),qm=bn(uf),da=L({},ca,{relatedTarget:0}),Ol=bn(da),Hc=L({},pt,{animationName:0,elapsedTime:0,pseudoElement:0}),kl=bn(Hc),cf=L({},pt,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Nl=bn(cf),$m=L({},pt,{data:0}),zc=bn($m),fa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},df={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uc(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=df[o])?!!l[o]:!1}function ga(){return Uc}var ff=L({},ca,{key:function(o){if(o.key){var l=fa[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=gi(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?hf[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ga,charCode:function(o){return o.type==="keypress"?gi(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?gi(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Vl=bn(ff),gf=L({},ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wc=bn(gf),Qi=L({},ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ga}),pf=bn(Qi),mf=L({},pt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cf=bn(mf),vf=L({},ha,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Bl=bn(vf),Qn=L({},pt,{newState:0,oldState:0}),yf=bn(Qn),wf=[9,13,27,32],Ci=ps&&"CompositionEvent"in window,p=null;ps&&"documentMode"in document&&(p=document.documentMode);var b=ps&&"TextEvent"in window&&!p,E=ps&&(!Ci||p&&8<p&&11>=p),P=" ",Y=!1;function se(o,l){switch(o){case"keyup":return wf.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function we(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var tt=!1;function fn(o,l){switch(o){case"compositionend":return we(l);case"keypress":return l.which!==32?null:(Y=!0,P);case"textInput":return o=l.data,o===P&&Y?null:o;default:return null}}function nt(o,l){if(tt)return o==="compositionend"||!Ci&&se(o,l)?(o=Bc(),Yi=Kr=fi=null,tt=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return E&&l.locale!=="ko"?null:l.data;default:return null}}var Sn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gn(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!Sn[o.type]:l==="textarea"}function Xi(o,l,c,f){qi?$i?$i.push(f):$i=[f]:qi=f,l=sg(l,"onChange"),0<l.length&&(c=new Fl("onChange","change",null,c,f),o.push({event:c,listeners:l}))}var _n=null,vi=null;function jc(o){iR(o,0)}function bf(o){var l=zr(o);if(Oc(l))return o}function PS(o,l){if(o==="change")return l}var LS=!1;if(ps){var Km;if(ps){var Ym="oninput"in document;if(!Ym){var OS=document.createElement("div");OS.setAttribute("oninput","return;"),Ym=typeof OS.oninput=="function"}Km=Ym}else Km=!1;LS=Km&&(!document.documentMode||9<document.documentMode)}function kS(){_n&&(_n.detachEvent("onpropertychange",NS),vi=_n=null)}function NS(o){if(o.propertyName==="value"&&bf(vi)){var l=[];Xi(l,vi,o,Ml(o)),af(jc,l)}}function n1(o,l,c){o==="focusin"?(kS(),_n=l,vi=c,_n.attachEvent("onpropertychange",NS)):o==="focusout"&&kS()}function s1(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return bf(vi)}function i1(o,l){if(o==="click")return bf(l)}function r1(o,l){if(o==="input"||o==="change")return bf(l)}function o1(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var ms=typeof Object.is=="function"?Object.is:o1;function qc(o,l){if(ms(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var c=Object.keys(o),f=Object.keys(l);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var C=c[f];if(!zt.call(l,C)||!ms(o[C],l[C]))return!1}return!0}function VS(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function BS(o,l){var c=VS(o);o=0;for(var f;c;){if(c.nodeType===3){if(f=o+c.textContent.length,o<=l&&f>=l)return{node:c,offset:l-o};o=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=VS(c)}}function GS(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?GS(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function HS(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=_l(o.document);l instanceof o.HTMLIFrameElement;){try{var c=typeof l.contentWindow.location.href=="string"}catch{c=!1}if(c)o=l.contentWindow;else break;l=_l(o.document)}return l}function Qm(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function a1(o,l){var c=HS(l);l=o.focusedElem;var f=o.selectionRange;if(c!==l&&l&&l.ownerDocument&&GS(l.ownerDocument.documentElement,l)){if(f!==null&&Qm(l)){if(o=f.start,c=f.end,c===void 0&&(c=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(c,l.value.length);else if(c=(o=l.ownerDocument||document)&&o.defaultView||window,c.getSelection){c=c.getSelection();var C=l.textContent.length,y=Math.min(f.start,C);f=f.end===void 0?y:Math.min(f.end,C),!c.extend&&y>f&&(C=f,f=y,y=C),C=BS(l,y);var R=BS(l,f);C&&R&&(c.rangeCount!==1||c.anchorNode!==C.node||c.anchorOffset!==C.offset||c.focusNode!==R.node||c.focusOffset!==R.offset)&&(o=o.createRange(),o.setStart(C.node,C.offset),c.removeAllRanges(),y>f?(c.addRange(o),c.extend(R.node,R.offset)):(o.setEnd(R.node,R.offset),c.addRange(o)))}}for(o=[],c=l;c=c.parentNode;)c.nodeType===1&&o.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)c=o[l],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var l1=ps&&"documentMode"in document&&11>=document.documentMode,Gl=null,Xm=null,$c=null,Zm=!1;function zS(o,l,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Zm||Gl==null||Gl!==_l(f)||(f=Gl,"selectionStart"in f&&Qm(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),$c&&qc($c,f)||($c=f,f=sg(Xm,"onSelect"),0<f.length&&(l=new Fl("onSelect","select",null,l,c),o.push({event:l,listeners:f}),l.target=Gl)))}function pa(o,l){var c={};return c[o.toLowerCase()]=l.toLowerCase(),c["Webkit"+o]="webkit"+l,c["Moz"+o]="moz"+l,c}var Hl={animationend:pa("Animation","AnimationEnd"),animationiteration:pa("Animation","AnimationIteration"),animationstart:pa("Animation","AnimationStart"),transitionrun:pa("Transition","TransitionRun"),transitionstart:pa("Transition","TransitionStart"),transitioncancel:pa("Transition","TransitionCancel"),transitionend:pa("Transition","TransitionEnd")},Jm={},US={};ps&&(US=document.createElement("div").style,"AnimationEvent"in window||(delete Hl.animationend.animation,delete Hl.animationiteration.animation,delete Hl.animationstart.animation),"TransitionEvent"in window||delete Hl.transitionend.transition);function ma(o){if(Jm[o])return Jm[o];if(!Hl[o])return o;var l=Hl[o],c;for(c in l)if(l.hasOwnProperty(c)&&c in US)return Jm[o]=l[c];return o}var WS=ma("animationend"),jS=ma("animationiteration"),qS=ma("animationstart"),u1=ma("transitionrun"),c1=ma("transitionstart"),h1=ma("transitioncancel"),$S=ma("transitionend"),KS=new Map,YS="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Qs(o,l){KS.set(o,l),gs(l,[o])}var Is=[],zl=0,eC=0;function Sf(){for(var o=zl,l=eC=zl=0;l<o;){var c=Is[l];Is[l++]=null;var f=Is[l];Is[l++]=null;var C=Is[l];Is[l++]=null;var y=Is[l];if(Is[l++]=null,f!==null&&C!==null){var R=f.pending;R===null?C.next=C:(C.next=R.next,R.next=C),f.pending=C}y!==0&&QS(c,C,y)}}function Ef(o,l,c,f){Is[zl++]=o,Is[zl++]=l,Is[zl++]=c,Is[zl++]=f,eC|=f,o.lanes|=f,o=o.alternate,o!==null&&(o.lanes|=f)}function tC(o,l,c,f){return Ef(o,l,c,f),Rf(o)}function Yr(o,l){return Ef(o,null,null,l),Rf(o)}function QS(o,l,c){o.lanes|=c;var f=o.alternate;f!==null&&(f.lanes|=c);for(var C=!1,y=o.return;y!==null;)y.childLanes|=c,f=y.alternate,f!==null&&(f.childLanes|=c),y.tag===22&&(o=y.stateNode,o===null||o._visibility&1||(C=!0)),o=y,y=y.return;C&&l!==null&&o.tag===3&&(y=o.stateNode,C=31-Kn(c),y=y.hiddenUpdates,o=y[C],o===null?y[C]=[l]:o.push(l),l.lane=c|536870912)}function Rf(o){if(50<vh)throw vh=0,av=null,Error(s(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var Ul={},XS=new WeakMap;function Ms(o,l){if(typeof o=="object"&&o!==null){var c=XS.get(o);return c!==void 0?c:(l={value:o,source:l,stack:Ce(l)},XS.set(o,l),l)}return{value:o,source:l,stack:Ce(l)}}var Wl=[],jl=0,Tf=null,Af=0,Fs=[],Ps=0,Ca=null,Zi=1,Ji="";function va(o,l){Wl[jl++]=Af,Wl[jl++]=Tf,Tf=o,Af=l}function ZS(o,l,c){Fs[Ps++]=Zi,Fs[Ps++]=Ji,Fs[Ps++]=Ca,Ca=o;var f=Zi;o=Ji;var C=32-Kn(f)-1;f&=~(1<<C),c+=1;var y=32-Kn(l)+C;if(30<y){var R=C-C%5;y=(f&(1<<R)-1).toString(32),f>>=R,C-=R,Zi=1<<32-Kn(l)+C|c<<C|f,Ji=y+o}else Zi=1<<y|c<<C|f,Ji=o}function nC(o){o.return!==null&&(va(o,1),ZS(o,1,0))}function sC(o){for(;o===Tf;)Tf=Wl[--jl],Wl[jl]=null,Af=Wl[--jl],Wl[jl]=null;for(;o===Ca;)Ca=Fs[--Ps],Fs[Ps]=null,Ji=Fs[--Ps],Fs[Ps]=null,Zi=Fs[--Ps],Fs[Ps]=null}var Xn=null,In=null,ut=!1,Xs=null,yi=!1,iC=Error(s(519));function ya(o){var l=Error(s(418,""));throw Qc(Ms(l,o)),iC}function JS(o){var l=o.stateNode,c=o.type,f=o.memoizedProps;switch(l[wn]=o,l[dn]=f,c){case"dialog":Xe("cancel",l),Xe("close",l);break;case"iframe":case"object":case"embed":Xe("load",l);break;case"video":case"audio":for(c=0;c<wh.length;c++)Xe(wh[c],l);break;case"source":Xe("error",l);break;case"img":case"image":case"link":Xe("error",l),Xe("load",l);break;case"details":Xe("toggle",l);break;case"input":Xe("invalid",l),oa(l,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),ra(l);break;case"select":Xe("invalid",l);break;case"textarea":Xe("invalid",l),$r(l,f.value,f.defaultValue,f.children),ra(l)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||l.textContent===""+c||f.suppressHydrationWarning===!0||lR(l.textContent,c)?(f.popover!=null&&(Xe("beforetoggle",l),Xe("toggle",l)),f.onScroll!=null&&Xe("scroll",l),f.onScrollEnd!=null&&Xe("scrollend",l),f.onClick!=null&&(l.onclick=ig),l=!0):l=!1,l||ya(o)}function e0(o){for(Xn=o.return;Xn;)switch(Xn.tag){case 3:case 27:yi=!0;return;case 5:case 13:yi=!1;return;default:Xn=Xn.return}}function Kc(o){if(o!==Xn)return!1;if(!ut)return e0(o),ut=!0,!1;var l=!1,c;if((c=o.tag!==3&&o.tag!==27)&&((c=o.tag===5)&&(c=o.type,c=!(c!=="form"&&c!=="button")||Rv(o.type,o.memoizedProps)),c=!c),c&&(l=!0),l&&In&&ya(o),e0(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8)if(c=o.data,c==="/$"){if(l===0){In=Js(o.nextSibling);break e}l--}else c!=="$"&&c!=="$!"&&c!=="$?"||l++;o=o.nextSibling}In=null}}else In=Xn?Js(o.stateNode.nextSibling):null;return!0}function Yc(){In=Xn=null,ut=!1}function Qc(o){Xs===null?Xs=[o]:Xs.push(o)}var Xc=Error(s(460)),t0=Error(s(474)),rC={then:function(){}};function n0(o){return o=o.status,o==="fulfilled"||o==="rejected"}function xf(){}function s0(o,l,c){switch(c=o[c],c===void 0?o.push(l):c!==l&&(l.then(xf,xf),l=c),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,o===Xc?Error(s(483)):o;default:if(typeof l.status=="string")l.then(xf,xf);else{if(o=Tt,o!==null&&100<o.shellSuspendCounter)throw Error(s(482));o=l,o.status="pending",o.then(function(f){if(l.status==="pending"){var C=l;C.status="fulfilled",C.value=f}},function(f){if(l.status==="pending"){var C=l;C.status="rejected",C.reason=f}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,o===Xc?Error(s(483)):o}throw Zc=l,Xc}}var Zc=null;function i0(){if(Zc===null)throw Error(s(459));var o=Zc;return Zc=null,o}var ql=null,Jc=0;function Df(o){var l=Jc;return Jc+=1,ql===null&&(ql=[]),s0(ql,o,l)}function eh(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function _f(o,l){throw l.$$typeof===r?Error(s(525)):(o=Object.prototype.toString.call(l),Error(s(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function r0(o){var l=o._init;return l(o._payload)}function o0(o){function l($,j){if(o){var X=$.deletions;X===null?($.deletions=[j],$.flags|=16):X.push(j)}}function c($,j){if(!o)return null;for(;j!==null;)l($,j),j=j.sibling;return null}function f($){for(var j=new Map;$!==null;)$.key!==null?j.set($.key,$):j.set($.index,$),$=$.sibling;return j}function C($,j){return $=ao($,j),$.index=0,$.sibling=null,$}function y($,j,X){return $.index=X,o?(X=$.alternate,X!==null?(X=X.index,X<j?($.flags|=33554434,j):X):($.flags|=33554434,j)):($.flags|=1048576,j)}function R($){return o&&$.alternate===null&&($.flags|=33554434),$}function I($,j,X,ce){return j===null||j.tag!==6?(j=JC(X,$.mode,ce),j.return=$,j):(j=C(j,X),j.return=$,j)}function G($,j,X,ce){var De=X.type;return De===h?le($,j,X.props.children,ce,X.key):j!==null&&(j.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===V&&r0(De)===j.type)?(j=C(j,X.props),eh(j,X),j.return=$,j):(j=$f(X.type,X.key,X.props,null,$.mode,ce),eh(j,X),j.return=$,j)}function q($,j,X,ce){return j===null||j.tag!==4||j.stateNode.containerInfo!==X.containerInfo||j.stateNode.implementation!==X.implementation?(j=ev(X,$.mode,ce),j.return=$,j):(j=C(j,X.children||[]),j.return=$,j)}function le($,j,X,ce,De){return j===null||j.tag!==7?(j=_a(X,$.mode,ce,De),j.return=$,j):(j=C(j,X),j.return=$,j)}function fe($,j,X){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=JC(""+j,$.mode,X),j.return=$,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case a:return X=$f(j.type,j.key,j.props,null,$.mode,X),eh(X,j),X.return=$,X;case u:return j=ev(j,$.mode,X),j.return=$,j;case V:var ce=j._init;return j=ce(j._payload),fe($,j,X)}if(oe(j)||K(j))return j=_a(j,$.mode,X,null),j.return=$,j;if(typeof j.then=="function")return fe($,Df(j),X);if(j.$$typeof===w)return fe($,Wf($,j),X);_f($,j)}return null}function te($,j,X,ce){var De=j!==null?j.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return De!==null?null:I($,j,""+X,ce);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case a:return X.key===De?G($,j,X,ce):null;case u:return X.key===De?q($,j,X,ce):null;case V:return De=X._init,X=De(X._payload),te($,j,X,ce)}if(oe(X)||K(X))return De!==null?null:le($,j,X,ce,null);if(typeof X.then=="function")return te($,j,Df(X),ce);if(X.$$typeof===w)return te($,j,Wf($,X),ce);_f($,X)}return null}function ae($,j,X,ce,De){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return $=$.get(X)||null,I(j,$,""+ce,De);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case a:return $=$.get(ce.key===null?X:ce.key)||null,G(j,$,ce,De);case u:return $=$.get(ce.key===null?X:ce.key)||null,q(j,$,ce,De);case V:var je=ce._init;return ce=je(ce._payload),ae($,j,X,ce,De)}if(oe(ce)||K(ce))return $=$.get(X)||null,le(j,$,ce,De,null);if(typeof ce.then=="function")return ae($,j,X,Df(ce),De);if(ce.$$typeof===w)return ae($,j,X,Wf(j,ce),De);_f(j,ce)}return null}function Ie($,j,X,ce){for(var De=null,je=null,Pe=j,Oe=j=0,Tn=null;Pe!==null&&Oe<X.length;Oe++){Pe.index>Oe?(Tn=Pe,Pe=null):Tn=Pe.sibling;var ct=te($,Pe,X[Oe],ce);if(ct===null){Pe===null&&(Pe=Tn);break}o&&Pe&&ct.alternate===null&&l($,Pe),j=y(ct,j,Oe),je===null?De=ct:je.sibling=ct,je=ct,Pe=Tn}if(Oe===X.length)return c($,Pe),ut&&va($,Oe),De;if(Pe===null){for(;Oe<X.length;Oe++)Pe=fe($,X[Oe],ce),Pe!==null&&(j=y(Pe,j,Oe),je===null?De=Pe:je.sibling=Pe,je=Pe);return ut&&va($,Oe),De}for(Pe=f(Pe);Oe<X.length;Oe++)Tn=ae(Pe,$,Oe,X[Oe],ce),Tn!==null&&(o&&Tn.alternate!==null&&Pe.delete(Tn.key===null?Oe:Tn.key),j=y(Tn,j,Oe),je===null?De=Tn:je.sibling=Tn,je=Tn);return o&&Pe.forEach(function(po){return l($,po)}),ut&&va($,Oe),De}function Be($,j,X,ce){if(X==null)throw Error(s(151));for(var De=null,je=null,Pe=j,Oe=j=0,Tn=null,ct=X.next();Pe!==null&&!ct.done;Oe++,ct=X.next()){Pe.index>Oe?(Tn=Pe,Pe=null):Tn=Pe.sibling;var po=te($,Pe,ct.value,ce);if(po===null){Pe===null&&(Pe=Tn);break}o&&Pe&&po.alternate===null&&l($,Pe),j=y(po,j,Oe),je===null?De=po:je.sibling=po,je=po,Pe=Tn}if(ct.done)return c($,Pe),ut&&va($,Oe),De;if(Pe===null){for(;!ct.done;Oe++,ct=X.next())ct=fe($,ct.value,ce),ct!==null&&(j=y(ct,j,Oe),je===null?De=ct:je.sibling=ct,je=ct);return ut&&va($,Oe),De}for(Pe=f(Pe);!ct.done;Oe++,ct=X.next())ct=ae(Pe,$,Oe,ct.value,ce),ct!==null&&(o&&ct.alternate!==null&&Pe.delete(ct.key===null?Oe:ct.key),j=y(ct,j,Oe),je===null?De=ct:je.sibling=ct,je=ct);return o&&Pe.forEach(function(TL){return l($,TL)}),ut&&va($,Oe),De}function qt($,j,X,ce){if(typeof X=="object"&&X!==null&&X.type===h&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case a:e:{for(var De=X.key;j!==null;){if(j.key===De){if(De=X.type,De===h){if(j.tag===7){c($,j.sibling),ce=C(j,X.props.children),ce.return=$,$=ce;break e}}else if(j.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===V&&r0(De)===j.type){c($,j.sibling),ce=C(j,X.props),eh(ce,X),ce.return=$,$=ce;break e}c($,j);break}else l($,j);j=j.sibling}X.type===h?(ce=_a(X.props.children,$.mode,ce,X.key),ce.return=$,$=ce):(ce=$f(X.type,X.key,X.props,null,$.mode,ce),eh(ce,X),ce.return=$,$=ce)}return R($);case u:e:{for(De=X.key;j!==null;){if(j.key===De)if(j.tag===4&&j.stateNode.containerInfo===X.containerInfo&&j.stateNode.implementation===X.implementation){c($,j.sibling),ce=C(j,X.children||[]),ce.return=$,$=ce;break e}else{c($,j);break}else l($,j);j=j.sibling}ce=ev(X,$.mode,ce),ce.return=$,$=ce}return R($);case V:return De=X._init,X=De(X._payload),qt($,j,X,ce)}if(oe(X))return Ie($,j,X,ce);if(K(X)){if(De=K(X),typeof De!="function")throw Error(s(150));return X=De.call(X),Be($,j,X,ce)}if(typeof X.then=="function")return qt($,j,Df(X),ce);if(X.$$typeof===w)return qt($,j,Wf($,X),ce);_f($,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,j!==null&&j.tag===6?(c($,j.sibling),ce=C(j,X),ce.return=$,$=ce):(c($,j),ce=JC(X,$.mode,ce),ce.return=$,$=ce),R($)):c($,j)}return function($,j,X,ce){try{Jc=0;var De=qt($,j,X,ce);return ql=null,De}catch(Pe){if(Pe===Xc)throw Pe;var je=Ns(29,Pe,null,$.mode);return je.lanes=ce,je.return=$,je}finally{}}}var wa=o0(!0),a0=o0(!1),$l=Ue(null),If=Ue(0);function l0(o,l){o=cr,et(If,o),et($l,l),cr=o|l.baseLanes}function oC(){et(If,cr),et($l,$l.current)}function aC(){cr=If.current,St($l),St(If)}var Ls=Ue(null),wi=null;function Qr(o){var l=o.alternate;et(pn,pn.current&1),et(Ls,o),wi===null&&(l===null||$l.current!==null||l.memoizedState!==null)&&(wi=o)}function u0(o){if(o.tag===22){if(et(pn,pn.current),et(Ls,o),wi===null){var l=o.alternate;l!==null&&l.memoizedState!==null&&(wi=o)}}else Xr()}function Xr(){et(pn,pn.current),et(Ls,Ls.current)}function er(o){St(Ls),wi===o&&(wi=null),St(pn)}var pn=Ue(0);function Mf(o){for(var l=o;l!==null;){if(l.tag===13){var c=l.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var d1=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(c,f){o.push(f)}};this.abort=function(){l.aborted=!0,o.forEach(function(c){return c()})}},f1=e.unstable_scheduleCallback,g1=e.unstable_NormalPriority,mn={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lC(){return{controller:new d1,data:new Map,refCount:0}}function th(o){o.refCount--,o.refCount===0&&f1(g1,function(){o.controller.abort()})}var nh=null,uC=0,Kl=0,Yl=null;function p1(o,l){if(nh===null){var c=nh=[];uC=0,Kl=pv(),Yl={status:"pending",value:void 0,then:function(f){c.push(f)}}}return uC++,l.then(c0,c0),l}function c0(){if(--uC===0&&nh!==null){Yl!==null&&(Yl.status="fulfilled");var o=nh;nh=null,Kl=0,Yl=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function m1(o,l){var c=[],f={status:"pending",value:null,reason:null,then:function(C){c.push(C)}};return o.then(function(){f.status="fulfilled",f.value=l;for(var C=0;C<c.length;C++)(0,c[C])(l)},function(C){for(f.status="rejected",f.reason=C,C=0;C<c.length;C++)(0,c[C])(void 0)}),f}var h0=x.S;x.S=function(o,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&p1(o,l),h0!==null&&h0(o,l)};var ba=Ue(null);function cC(){var o=ba.current;return o!==null?o:Tt.pooledCache}function Ff(o,l){l===null?et(ba,ba.current):et(ba,l.pool)}function d0(){var o=cC();return o===null?null:{parent:mn._currentValue,pool:o}}var Zr=0,We=null,yt=null,rn=null,Pf=!1,Ql=!1,Sa=!1,Lf=0,sh=0,Xl=null,C1=0;function Zt(){throw Error(s(321))}function hC(o,l){if(l===null)return!1;for(var c=0;c<l.length&&c<o.length;c++)if(!ms(o[c],l[c]))return!1;return!0}function dC(o,l,c,f,C,y){return Zr=y,We=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,x.H=o===null||o.memoizedState===null?Ea:Jr,Sa=!1,y=c(f,C),Sa=!1,Ql&&(y=g0(l,c,f,C)),f0(o),y}function f0(o){x.H=bi;var l=yt!==null&&yt.next!==null;if(Zr=0,rn=yt=We=null,Pf=!1,sh=0,Xl=null,l)throw Error(s(300));o===null||En||(o=o.dependencies,o!==null&&Uf(o)&&(En=!0))}function g0(o,l,c,f){We=o;var C=0;do{if(Ql&&(Xl=null),sh=0,Ql=!1,25<=C)throw Error(s(301));if(C+=1,rn=yt=null,o.updateQueue!=null){var y=o.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}x.H=Ra,y=l(c,f)}while(Ql);return y}function v1(){var o=x.H,l=o.useState()[0];return l=typeof l.then=="function"?ih(l):l,o=o.useState()[0],(yt!==null?yt.memoizedState:null)!==o&&(We.flags|=1024),l}function fC(){var o=Lf!==0;return Lf=0,o}function gC(o,l,c){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~c}function pC(o){if(Pf){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}Pf=!1}Zr=0,rn=yt=We=null,Ql=!1,sh=Lf=0,Xl=null}function ls(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?We.memoizedState=rn=o:rn=rn.next=o,rn}function on(){if(yt===null){var o=We.alternate;o=o!==null?o.memoizedState:null}else o=yt.next;var l=rn===null?We.memoizedState:rn.next;if(l!==null)rn=l,yt=o;else{if(o===null)throw We.alternate===null?Error(s(467)):Error(s(310));yt=o,o={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},rn===null?We.memoizedState=rn=o:rn=rn.next=o}return rn}var Of;Of=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function ih(o){var l=sh;return sh+=1,Xl===null&&(Xl=[]),o=s0(Xl,o,l),l=We,(rn===null?l.memoizedState:rn.next)===null&&(l=l.alternate,x.H=l===null||l.memoizedState===null?Ea:Jr),o}function kf(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return ih(o);if(o.$$typeof===w)return Vn(o)}throw Error(s(438,String(o)))}function mC(o){var l=null,c=We.updateQueue;if(c!==null&&(l=c.memoCache),l==null){var f=We.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(l={data:f.data.map(function(C){return C.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),c===null&&(c=Of(),We.updateQueue=c),c.memoCache=l,c=l.data[l.index],c===void 0)for(c=l.data[l.index]=Array(o),f=0;f<o;f++)c[f]=z;return l.index++,c}function tr(o,l){return typeof l=="function"?l(o):l}function Nf(o){var l=on();return CC(l,yt,o)}function CC(o,l,c){var f=o.queue;if(f===null)throw Error(s(311));f.lastRenderedReducer=c;var C=o.baseQueue,y=f.pending;if(y!==null){if(C!==null){var R=C.next;C.next=y.next,y.next=R}l.baseQueue=C=y,f.pending=null}if(y=o.baseState,C===null)o.memoizedState=y;else{l=C.next;var I=R=null,G=null,q=l,le=!1;do{var fe=q.lane&-536870913;if(fe!==q.lane?(st&fe)===fe:(Zr&fe)===fe){var te=q.revertLane;if(te===0)G!==null&&(G=G.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),fe===Kl&&(le=!0);else if((Zr&te)===te){q=q.next,te===Kl&&(le=!0);continue}else fe={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},G===null?(I=G=fe,R=y):G=G.next=fe,We.lanes|=te,lo|=te;fe=q.action,Sa&&c(y,fe),y=q.hasEagerState?q.eagerState:c(y,fe)}else te={lane:fe,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},G===null?(I=G=te,R=y):G=G.next=te,We.lanes|=fe,lo|=fe;q=q.next}while(q!==null&&q!==l);if(G===null?R=y:G.next=I,!ms(y,o.memoizedState)&&(En=!0,le&&(c=Yl,c!==null)))throw c;o.memoizedState=y,o.baseState=R,o.baseQueue=G,f.lastRenderedState=y}return C===null&&(f.lanes=0),[o.memoizedState,f.dispatch]}function vC(o){var l=on(),c=l.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=o;var f=c.dispatch,C=c.pending,y=l.memoizedState;if(C!==null){c.pending=null;var R=C=C.next;do y=o(y,R.action),R=R.next;while(R!==C);ms(y,l.memoizedState)||(En=!0),l.memoizedState=y,l.baseQueue===null&&(l.baseState=y),c.lastRenderedState=y}return[y,f]}function p0(o,l,c){var f=We,C=on(),y=ut;if(y){if(c===void 0)throw Error(s(407));c=c()}else c=l();var R=!ms((yt||C).memoizedState,c);if(R&&(C.memoizedState=c,En=!0),C=C.queue,bC(v0.bind(null,f,C,o),[o]),C.getSnapshot!==l||R||rn!==null&&rn.memoizedState.tag&1){if(f.flags|=2048,Zl(9,C0.bind(null,f,C,c,l),{destroy:void 0},null),Tt===null)throw Error(s(349));y||(Zr&60)!==0||m0(f,l,c)}return c}function m0(o,l,c){o.flags|=16384,o={getSnapshot:l,value:c},l=We.updateQueue,l===null?(l=Of(),We.updateQueue=l,l.stores=[o]):(c=l.stores,c===null?l.stores=[o]:c.push(o))}function C0(o,l,c,f){l.value=c,l.getSnapshot=f,y0(l)&&w0(o)}function v0(o,l,c){return c(function(){y0(l)&&w0(o)})}function y0(o){var l=o.getSnapshot;o=o.value;try{var c=l();return!ms(o,c)}catch{return!0}}function w0(o){var l=Yr(o,2);l!==null&&Zn(l,o,2)}function yC(o){var l=ls();if(typeof o=="function"){var c=o;if(o=c(),Sa){li(!0);try{c()}finally{li(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:o},l}function b0(o,l,c,f){return o.baseState=c,CC(o,yt,typeof f=="function"?f:tr)}function y1(o,l,c,f,C){if(Gf(o))throw Error(s(485));if(o=l.action,o!==null){var y={payload:C,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){y.listeners.push(R)}};x.T!==null?c(!0):y.isTransition=!1,f(y),c=l.pending,c===null?(y.next=l.pending=y,S0(l,y)):(y.next=c.next,l.pending=c.next=y)}}function S0(o,l){var c=l.action,f=l.payload,C=o.state;if(l.isTransition){var y=x.T,R={};x.T=R;try{var I=c(C,f),G=x.S;G!==null&&G(R,I),E0(o,l,I)}catch(q){wC(o,l,q)}finally{x.T=y}}else try{y=c(C,f),E0(o,l,y)}catch(q){wC(o,l,q)}}function E0(o,l,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){R0(o,l,f)},function(f){return wC(o,l,f)}):R0(o,l,c)}function R0(o,l,c){l.status="fulfilled",l.value=c,T0(l),o.state=c,l=o.pending,l!==null&&(c=l.next,c===l?o.pending=null:(c=c.next,l.next=c,S0(o,c)))}function wC(o,l,c){var f=o.pending;if(o.pending=null,f!==null){f=f.next;do l.status="rejected",l.reason=c,T0(l),l=l.next;while(l!==f)}o.action=null}function T0(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function A0(o,l){return l}function x0(o,l){if(ut){var c=Tt.formState;if(c!==null){e:{var f=We;if(ut){if(In){t:{for(var C=In,y=yi;C.nodeType!==8;){if(!y){C=null;break t}if(C=Js(C.nextSibling),C===null){C=null;break t}}y=C.data,C=y==="F!"||y==="F"?C:null}if(C){In=Js(C.nextSibling),f=C.data==="F!";break e}}ya(f)}f=!1}f&&(l=c[0])}}return c=ls(),c.memoizedState=c.baseState=l,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A0,lastRenderedState:l},c.queue=f,c=j0.bind(null,We,f),f.dispatch=c,f=yC(!1),y=AC.bind(null,We,!1,f.queue),f=ls(),C={state:l,dispatch:null,action:o,pending:null},f.queue=C,c=y1.bind(null,We,C,y,c),C.dispatch=c,f.memoizedState=o,[l,c,!1]}function D0(o){var l=on();return _0(l,yt,o)}function _0(o,l,c){l=CC(o,l,A0)[0],o=Nf(tr)[0],l=typeof l=="object"&&l!==null&&typeof l.then=="function"?ih(l):l;var f=on(),C=f.queue,y=C.dispatch;return c!==f.memoizedState&&(We.flags|=2048,Zl(9,w1.bind(null,C,c),{destroy:void 0},null)),[l,y,o]}function w1(o,l){o.action=l}function I0(o){var l=on(),c=yt;if(c!==null)return _0(l,c,o);on(),l=l.memoizedState,c=on();var f=c.queue.dispatch;return c.memoizedState=o,[l,f,!1]}function Zl(o,l,c,f){return o={tag:o,create:l,inst:c,deps:f,next:null},l=We.updateQueue,l===null&&(l=Of(),We.updateQueue=l),c=l.lastEffect,c===null?l.lastEffect=o.next=o:(f=c.next,c.next=o,o.next=f,l.lastEffect=o),o}function M0(){return on().memoizedState}function Vf(o,l,c,f){var C=ls();We.flags|=o,C.memoizedState=Zl(1|l,c,{destroy:void 0},f===void 0?null:f)}function Bf(o,l,c,f){var C=on();f=f===void 0?null:f;var y=C.memoizedState.inst;yt!==null&&f!==null&&hC(f,yt.memoizedState.deps)?C.memoizedState=Zl(l,c,y,f):(We.flags|=o,C.memoizedState=Zl(1|l,c,y,f))}function F0(o,l){Vf(8390656,8,o,l)}function bC(o,l){Bf(2048,8,o,l)}function P0(o,l){return Bf(4,2,o,l)}function L0(o,l){return Bf(4,4,o,l)}function O0(o,l){if(typeof l=="function"){o=o();var c=l(o);return function(){typeof c=="function"?c():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function k0(o,l,c){c=c!=null?c.concat([o]):null,Bf(4,4,O0.bind(null,l,o),c)}function SC(){}function N0(o,l){var c=on();l=l===void 0?null:l;var f=c.memoizedState;return l!==null&&hC(l,f[1])?f[0]:(c.memoizedState=[o,l],o)}function V0(o,l){var c=on();l=l===void 0?null:l;var f=c.memoizedState;if(l!==null&&hC(l,f[1]))return f[0];if(f=o(),Sa){li(!0);try{o()}finally{li(!1)}}return c.memoizedState=[f,l],f}function EC(o,l,c){return c===void 0||(Zr&1073741824)!==0?o.memoizedState=l:(o.memoizedState=c,o=GE(),We.lanes|=o,lo|=o,c)}function B0(o,l,c,f){return ms(c,l)?c:$l.current!==null?(o=EC(o,c,f),ms(o,l)||(En=!0),o):(Zr&42)===0?(En=!0,o.memoizedState=c):(o=GE(),We.lanes|=o,lo|=o,l)}function G0(o,l,c,f,C){var y=ue.p;ue.p=y!==0&&8>y?y:8;var R=x.T,I={};x.T=I,AC(o,!1,l,c);try{var G=C(),q=x.S;if(q!==null&&q(I,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var le=m1(G,f);rh(o,l,le,ws(o))}else rh(o,l,f,ws(o))}catch(fe){rh(o,l,{then:function(){},status:"rejected",reason:fe},ws())}finally{ue.p=y,x.T=R}}function b1(){}function RC(o,l,c,f){if(o.tag!==5)throw Error(s(476));var C=H0(o).queue;G0(o,C,l,xe,c===null?b1:function(){return z0(o),c(f)})}function H0(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:xe,baseState:xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:xe},next:null};var c={};return l.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:c},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function z0(o){var l=H0(o).next.queue;rh(o,l,{},ws())}function TC(){return Vn(Th)}function U0(){return on().memoizedState}function W0(){return on().memoizedState}function S1(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var c=ws();o=no(c);var f=so(l,o,c);f!==null&&(Zn(f,l,c),lh(f,l,c)),l={cache:lC()},o.payload=l;return}l=l.return}}function E1(o,l,c){var f=ws();c={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Gf(o)?q0(l,c):(c=tC(o,l,c,f),c!==null&&(Zn(c,o,f),$0(c,l,f)))}function j0(o,l,c){var f=ws();rh(o,l,c,f)}function rh(o,l,c,f){var C={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Gf(o))q0(l,C);else{var y=o.alternate;if(o.lanes===0&&(y===null||y.lanes===0)&&(y=l.lastRenderedReducer,y!==null))try{var R=l.lastRenderedState,I=y(R,c);if(C.hasEagerState=!0,C.eagerState=I,ms(I,R))return Ef(o,l,C,0),Tt===null&&Sf(),!1}catch{}finally{}if(c=tC(o,l,C,f),c!==null)return Zn(c,o,f),$0(c,l,f),!0}return!1}function AC(o,l,c,f){if(f={lane:2,revertLane:pv(),action:f,hasEagerState:!1,eagerState:null,next:null},Gf(o)){if(l)throw Error(s(479))}else l=tC(o,c,f,2),l!==null&&Zn(l,o,2)}function Gf(o){var l=o.alternate;return o===We||l!==null&&l===We}function q0(o,l){Ql=Pf=!0;var c=o.pending;c===null?l.next=l:(l.next=c.next,c.next=l),o.pending=l}function $0(o,l,c){if((c&4194176)!==0){var f=l.lanes;f&=o.pendingLanes,c|=f,l.lanes=c,Br(o,c)}}var bi={readContext:Vn,use:kf,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useLayoutEffect:Zt,useInsertionEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useSyncExternalStore:Zt,useId:Zt};bi.useCacheRefresh=Zt,bi.useMemoCache=Zt,bi.useHostTransitionStatus=Zt,bi.useFormState=Zt,bi.useActionState=Zt,bi.useOptimistic=Zt;var Ea={readContext:Vn,use:kf,useCallback:function(o,l){return ls().memoizedState=[o,l===void 0?null:l],o},useContext:Vn,useEffect:F0,useImperativeHandle:function(o,l,c){c=c!=null?c.concat([o]):null,Vf(4194308,4,O0.bind(null,l,o),c)},useLayoutEffect:function(o,l){return Vf(4194308,4,o,l)},useInsertionEffect:function(o,l){Vf(4,2,o,l)},useMemo:function(o,l){var c=ls();l=l===void 0?null:l;var f=o();if(Sa){li(!0);try{o()}finally{li(!1)}}return c.memoizedState=[f,l],f},useReducer:function(o,l,c){var f=ls();if(c!==void 0){var C=c(l);if(Sa){li(!0);try{c(l)}finally{li(!1)}}}else C=l;return f.memoizedState=f.baseState=C,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:C},f.queue=o,o=o.dispatch=E1.bind(null,We,o),[f.memoizedState,o]},useRef:function(o){var l=ls();return o={current:o},l.memoizedState=o},useState:function(o){o=yC(o);var l=o.queue,c=j0.bind(null,We,l);return l.dispatch=c,[o.memoizedState,c]},useDebugValue:SC,useDeferredValue:function(o,l){var c=ls();return EC(c,o,l)},useTransition:function(){var o=yC(!1);return o=G0.bind(null,We,o.queue,!0,!1),ls().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,c){var f=We,C=ls();if(ut){if(c===void 0)throw Error(s(407));c=c()}else{if(c=l(),Tt===null)throw Error(s(349));(st&60)!==0||m0(f,l,c)}C.memoizedState=c;var y={value:c,getSnapshot:l};return C.queue=y,F0(v0.bind(null,f,y,o),[o]),f.flags|=2048,Zl(9,C0.bind(null,f,y,c,l),{destroy:void 0},null),c},useId:function(){var o=ls(),l=Tt.identifierPrefix;if(ut){var c=Ji,f=Zi;c=(f&~(1<<32-Kn(f)-1)).toString(32)+c,l=":"+l+"R"+c,c=Lf++,0<c&&(l+="H"+c.toString(32)),l+=":"}else c=C1++,l=":"+l+"r"+c.toString(32)+":";return o.memoizedState=l},useCacheRefresh:function(){return ls().memoizedState=S1.bind(null,We)}};Ea.useMemoCache=mC,Ea.useHostTransitionStatus=TC,Ea.useFormState=x0,Ea.useActionState=x0,Ea.useOptimistic=function(o){var l=ls();l.memoizedState=l.baseState=o;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=c,l=AC.bind(null,We,!0,c),c.dispatch=l,[o,l]};var Jr={readContext:Vn,use:kf,useCallback:N0,useContext:Vn,useEffect:bC,useImperativeHandle:k0,useInsertionEffect:P0,useLayoutEffect:L0,useMemo:V0,useReducer:Nf,useRef:M0,useState:function(){return Nf(tr)},useDebugValue:SC,useDeferredValue:function(o,l){var c=on();return B0(c,yt.memoizedState,o,l)},useTransition:function(){var o=Nf(tr)[0],l=on().memoizedState;return[typeof o=="boolean"?o:ih(o),l]},useSyncExternalStore:p0,useId:U0};Jr.useCacheRefresh=W0,Jr.useMemoCache=mC,Jr.useHostTransitionStatus=TC,Jr.useFormState=D0,Jr.useActionState=D0,Jr.useOptimistic=function(o,l){var c=on();return b0(c,yt,o,l)};var Ra={readContext:Vn,use:kf,useCallback:N0,useContext:Vn,useEffect:bC,useImperativeHandle:k0,useInsertionEffect:P0,useLayoutEffect:L0,useMemo:V0,useReducer:vC,useRef:M0,useState:function(){return vC(tr)},useDebugValue:SC,useDeferredValue:function(o,l){var c=on();return yt===null?EC(c,o,l):B0(c,yt.memoizedState,o,l)},useTransition:function(){var o=vC(tr)[0],l=on().memoizedState;return[typeof o=="boolean"?o:ih(o),l]},useSyncExternalStore:p0,useId:U0};Ra.useCacheRefresh=W0,Ra.useMemoCache=mC,Ra.useHostTransitionStatus=TC,Ra.useFormState=I0,Ra.useActionState=I0,Ra.useOptimistic=function(o,l){var c=on();return yt!==null?b0(c,yt,o,l):(c.baseState=o,[o,c.queue.dispatch])};function xC(o,l,c,f){l=o.memoizedState,c=c(f,l),c=c==null?l:L({},l,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var DC={isMounted:function(o){return(o=o._reactInternals)?re(o)===o:!1},enqueueSetState:function(o,l,c){o=o._reactInternals;var f=ws(),C=no(f);C.payload=l,c!=null&&(C.callback=c),l=so(o,C,f),l!==null&&(Zn(l,o,f),lh(l,o,f))},enqueueReplaceState:function(o,l,c){o=o._reactInternals;var f=ws(),C=no(f);C.tag=1,C.payload=l,c!=null&&(C.callback=c),l=so(o,C,f),l!==null&&(Zn(l,o,f),lh(l,o,f))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var c=ws(),f=no(c);f.tag=2,l!=null&&(f.callback=l),l=so(o,f,c),l!==null&&(Zn(l,o,c),lh(l,o,c))}};function K0(o,l,c,f,C,y,R){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(f,y,R):l.prototype&&l.prototype.isPureReactComponent?!qc(c,f)||!qc(C,y):!0}function Y0(o,l,c,f){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(c,f),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(c,f),l.state!==o&&DC.enqueueReplaceState(l,l.state,null)}function Ta(o,l){var c=l;if("ref"in l){c={};for(var f in l)f!=="ref"&&(c[f]=l[f])}if(o=o.defaultProps){c===l&&(c=L({},c));for(var C in o)c[C]===void 0&&(c[C]=o[C])}return c}var Hf=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function Q0(o){Hf(o)}function X0(o){console.error(o)}function Z0(o){Hf(o)}function zf(o,l){try{var c=o.onUncaughtError;c(l.value,{componentStack:l.stack})}catch(f){setTimeout(function(){throw f})}}function J0(o,l,c){try{var f=o.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function _C(o,l,c){return c=no(c),c.tag=3,c.payload={element:null},c.callback=function(){zf(o,l)},c}function eE(o){return o=no(o),o.tag=3,o}function tE(o,l,c,f){var C=c.type.getDerivedStateFromError;if(typeof C=="function"){var y=f.value;o.payload=function(){return C(y)},o.callback=function(){J0(l,c,f)}}var R=c.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(o.callback=function(){J0(l,c,f),typeof C!="function"&&(uo===null?uo=new Set([this]):uo.add(this));var I=f.stack;this.componentDidCatch(f.value,{componentStack:I!==null?I:""})})}function R1(o,l,c,f,C){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(l=c.alternate,l!==null&&ah(l,c,C,!0),c=Ls.current,c!==null){switch(c.tag){case 13:return wi===null?cv():c.alternate===null&&jt===0&&(jt=3),c.flags&=-257,c.flags|=65536,c.lanes=C,f===rC?c.flags|=16384:(l=c.updateQueue,l===null?c.updateQueue=new Set([f]):l.add(f),dv(o,f,C)),!1;case 22:return c.flags|=65536,f===rC?c.flags|=16384:(l=c.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=l):(c=l.retryQueue,c===null?l.retryQueue=new Set([f]):c.add(f)),dv(o,f,C)),!1}throw Error(s(435,c.tag))}return dv(o,f,C),cv(),!1}if(ut)return l=Ls.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=C,f!==iC&&(o=Error(s(422),{cause:f}),Qc(Ms(o,c)))):(f!==iC&&(l=Error(s(423),{cause:f}),Qc(Ms(l,c))),o=o.current.alternate,o.flags|=65536,C&=-C,o.lanes|=C,f=Ms(f,c),C=_C(o.stateNode,f,C),WC(o,C),jt!==4&&(jt=2)),!1;var y=Error(s(520),{cause:f});if(y=Ms(y,c),mh===null?mh=[y]:mh.push(y),jt!==4&&(jt=2),l===null)return!0;f=Ms(f,c),c=l;do{switch(c.tag){case 3:return c.flags|=65536,o=C&-C,c.lanes|=o,o=_C(c.stateNode,f,o),WC(c,o),!1;case 1:if(l=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(uo===null||!uo.has(y))))return c.flags|=65536,C&=-C,c.lanes|=C,C=eE(C),tE(C,o,c,f),WC(c,C),!1}c=c.return}while(c!==null);return!1}var nE=Error(s(461)),En=!1;function Mn(o,l,c,f){l.child=o===null?a0(l,null,c,f):wa(l,o.child,c,f)}function sE(o,l,c,f,C){c=c.render;var y=l.ref;if("ref"in f){var R={};for(var I in f)I!=="ref"&&(R[I]=f[I])}else R=f;return xa(l),f=dC(o,l,c,R,y,C),I=fC(),o!==null&&!En?(gC(o,l,C),nr(o,l,C)):(ut&&I&&nC(l),l.flags|=1,Mn(o,l,f,C),l.child)}function iE(o,l,c,f,C){if(o===null){var y=c.type;return typeof y=="function"&&!ZC(y)&&y.defaultProps===void 0&&c.compare===null?(l.tag=15,l.type=y,rE(o,l,y,f,C)):(o=$f(c.type,null,f,l,l.mode,C),o.ref=l.ref,o.return=l,l.child=o)}if(y=o.child,!VC(o,C)){var R=y.memoizedProps;if(c=c.compare,c=c!==null?c:qc,c(R,f)&&o.ref===l.ref)return nr(o,l,C)}return l.flags|=1,o=ao(y,f),o.ref=l.ref,o.return=l,l.child=o}function rE(o,l,c,f,C){if(o!==null){var y=o.memoizedProps;if(qc(y,f)&&o.ref===l.ref)if(En=!1,l.pendingProps=f=y,VC(o,C))(o.flags&131072)!==0&&(En=!0);else return l.lanes=o.lanes,nr(o,l,C)}return IC(o,l,c,f,C)}function oE(o,l,c){var f=l.pendingProps,C=f.children,y=(l.stateNode._pendingVisibility&2)!==0,R=o!==null?o.memoizedState:null;if(oh(o,l),f.mode==="hidden"||y){if((l.flags&128)!==0){if(f=R!==null?R.baseLanes|c:c,o!==null){for(C=l.child=o.child,y=0;C!==null;)y=y|C.lanes|C.childLanes,C=C.sibling;l.childLanes=y&~f}else l.childLanes=0,l.child=null;return aE(o,l,f,c)}if((c&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&Ff(l,R!==null?R.cachePool:null),R!==null?l0(l,R):oC(),u0(l);else return l.lanes=l.childLanes=536870912,aE(o,l,R!==null?R.baseLanes|c:c,c)}else R!==null?(Ff(l,R.cachePool),l0(l,R),Xr(),l.memoizedState=null):(o!==null&&Ff(l,null),oC(),Xr());return Mn(o,l,C,c),l.child}function aE(o,l,c,f){var C=cC();return C=C===null?null:{parent:mn._currentValue,pool:C},l.memoizedState={baseLanes:c,cachePool:C},o!==null&&Ff(l,null),oC(),u0(l),o!==null&&ah(o,l,f,!0),null}function oh(o,l){var c=l.ref;if(c===null)o!==null&&o.ref!==null&&(l.flags|=2097664);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(o===null||o.ref!==c)&&(l.flags|=2097664)}}function IC(o,l,c,f,C){return xa(l),c=dC(o,l,c,f,void 0,C),f=fC(),o!==null&&!En?(gC(o,l,C),nr(o,l,C)):(ut&&f&&nC(l),l.flags|=1,Mn(o,l,c,C),l.child)}function lE(o,l,c,f,C,y){return xa(l),l.updateQueue=null,c=g0(l,f,c,C),f0(o),f=fC(),o!==null&&!En?(gC(o,l,y),nr(o,l,y)):(ut&&f&&nC(l),l.flags|=1,Mn(o,l,c,y),l.child)}function uE(o,l,c,f,C){if(xa(l),l.stateNode===null){var y=Ul,R=c.contextType;typeof R=="object"&&R!==null&&(y=Vn(R)),y=new c(f,y),l.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=DC,l.stateNode=y,y._reactInternals=l,y=l.stateNode,y.props=f,y.state=l.memoizedState,y.refs={},zC(l),R=c.contextType,y.context=typeof R=="object"&&R!==null?Vn(R):Ul,y.state=l.memoizedState,R=c.getDerivedStateFromProps,typeof R=="function"&&(xC(l,c,R,f),y.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(R=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),R!==y.state&&DC.enqueueReplaceState(y,y.state,null),ch(l,f,y,C),uh(),y.state=l.memoizedState),typeof y.componentDidMount=="function"&&(l.flags|=4194308),f=!0}else if(o===null){y=l.stateNode;var I=l.memoizedProps,G=Ta(c,I);y.props=G;var q=y.context,le=c.contextType;R=Ul,typeof le=="object"&&le!==null&&(R=Vn(le));var fe=c.getDerivedStateFromProps;le=typeof fe=="function"||typeof y.getSnapshotBeforeUpdate=="function",I=l.pendingProps!==I,le||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(I||q!==R)&&Y0(l,y,f,R),to=!1;var te=l.memoizedState;y.state=te,ch(l,f,y,C),uh(),q=l.memoizedState,I||te!==q||to?(typeof fe=="function"&&(xC(l,c,fe,f),q=l.memoizedState),(G=to||K0(l,c,G,f,te,q,R))?(le||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(l.flags|=4194308)):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=f,l.memoizedState=q),y.props=f,y.state=q,y.context=R,f=G):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),f=!1)}else{y=l.stateNode,UC(o,l),R=l.memoizedProps,le=Ta(c,R),y.props=le,fe=l.pendingProps,te=y.context,q=c.contextType,G=Ul,typeof q=="object"&&q!==null&&(G=Vn(q)),I=c.getDerivedStateFromProps,(q=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(R!==fe||te!==G)&&Y0(l,y,f,G),to=!1,te=l.memoizedState,y.state=te,ch(l,f,y,C),uh();var ae=l.memoizedState;R!==fe||te!==ae||to||o!==null&&o.dependencies!==null&&Uf(o.dependencies)?(typeof I=="function"&&(xC(l,c,I,f),ae=l.memoizedState),(le=to||K0(l,c,le,f,te,ae,G)||o!==null&&o.dependencies!==null&&Uf(o.dependencies))?(q||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(f,ae,G),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(f,ae,G)),typeof y.componentDidUpdate=="function"&&(l.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof y.componentDidUpdate!="function"||R===o.memoizedProps&&te===o.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||R===o.memoizedProps&&te===o.memoizedState||(l.flags|=1024),l.memoizedProps=f,l.memoizedState=ae),y.props=f,y.state=ae,y.context=G,f=le):(typeof y.componentDidUpdate!="function"||R===o.memoizedProps&&te===o.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||R===o.memoizedProps&&te===o.memoizedState||(l.flags|=1024),f=!1)}return y=f,oh(o,l),f=(l.flags&128)!==0,y||f?(y=l.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:y.render(),l.flags|=1,o!==null&&f?(l.child=wa(l,o.child,null,C),l.child=wa(l,null,c,C)):Mn(o,l,c,C),l.memoizedState=y.state,o=l.child):o=nr(o,l,C),o}function cE(o,l,c,f){return Yc(),l.flags|=256,Mn(o,l,c,f),l.child}var MC={dehydrated:null,treeContext:null,retryLane:0};function FC(o){return{baseLanes:o,cachePool:d0()}}function PC(o,l,c){return o=o!==null?o.childLanes&~c:0,l&&(o|=Vs),o}function hE(o,l,c){var f=l.pendingProps,C=!1,y=(l.flags&128)!==0,R;if((R=y)||(R=o!==null&&o.memoizedState===null?!1:(pn.current&2)!==0),R&&(C=!0,l.flags&=-129),R=(l.flags&32)!==0,l.flags&=-33,o===null){if(ut){if(C?Qr(l):Xr(),ut){var I=In,G;if(G=I){e:{for(G=I,I=yi;G.nodeType!==8;){if(!I){I=null;break e}if(G=Js(G.nextSibling),G===null){I=null;break e}}I=G}I!==null?(l.memoizedState={dehydrated:I,treeContext:Ca!==null?{id:Zi,overflow:Ji}:null,retryLane:536870912},G=Ns(18,null,null,0),G.stateNode=I,G.return=l,l.child=G,Xn=l,In=null,G=!0):G=!1}G||ya(l)}if(I=l.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return I.data==="$!"?l.lanes=16:l.lanes=536870912,null;er(l)}return I=f.children,f=f.fallback,C?(Xr(),C=l.mode,I=OC({mode:"hidden",children:I},C),f=_a(f,C,c,null),I.return=l,f.return=l,I.sibling=f,l.child=I,C=l.child,C.memoizedState=FC(c),C.childLanes=PC(o,R,c),l.memoizedState=MC,f):(Qr(l),LC(l,I))}if(G=o.memoizedState,G!==null&&(I=G.dehydrated,I!==null)){if(y)l.flags&256?(Qr(l),l.flags&=-257,l=kC(o,l,c)):l.memoizedState!==null?(Xr(),l.child=o.child,l.flags|=128,l=null):(Xr(),C=f.fallback,I=l.mode,f=OC({mode:"visible",children:f.children},I),C=_a(C,I,c,null),C.flags|=2,f.return=l,C.return=l,f.sibling=C,l.child=f,wa(l,o.child,null,c),f=l.child,f.memoizedState=FC(c),f.childLanes=PC(o,R,c),l.memoizedState=MC,l=C);else if(Qr(l),I.data==="$!"){if(R=I.nextSibling&&I.nextSibling.dataset,R)var q=R.dgst;R=q,f=Error(s(419)),f.stack="",f.digest=R,Qc({value:f,source:null,stack:null}),l=kC(o,l,c)}else if(En||ah(o,l,c,!1),R=(c&o.childLanes)!==0,En||R){if(R=Tt,R!==null){if(f=c&-c,(f&42)!==0)f=1;else switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=64;break;case 268435456:f=134217728;break;default:f=0}if(f=(f&(R.suspendedLanes|c))!==0?0:f,f!==0&&f!==G.retryLane)throw G.retryLane=f,Yr(o,f),Zn(R,o,f),nE}I.data==="$?"||cv(),l=kC(o,l,c)}else I.data==="$?"?(l.flags|=128,l.child=o.child,l=B1.bind(null,o),I._reactRetry=l,l=null):(o=G.treeContext,In=Js(I.nextSibling),Xn=l,ut=!0,Xs=null,yi=!1,o!==null&&(Fs[Ps++]=Zi,Fs[Ps++]=Ji,Fs[Ps++]=Ca,Zi=o.id,Ji=o.overflow,Ca=l),l=LC(l,f.children),l.flags|=4096);return l}return C?(Xr(),C=f.fallback,I=l.mode,G=o.child,q=G.sibling,f=ao(G,{mode:"hidden",children:f.children}),f.subtreeFlags=G.subtreeFlags&31457280,q!==null?C=ao(q,C):(C=_a(C,I,c,null),C.flags|=2),C.return=l,f.return=l,f.sibling=C,l.child=f,f=C,C=l.child,I=o.child.memoizedState,I===null?I=FC(c):(G=I.cachePool,G!==null?(q=mn._currentValue,G=G.parent!==q?{parent:q,pool:q}:G):G=d0(),I={baseLanes:I.baseLanes|c,cachePool:G}),C.memoizedState=I,C.childLanes=PC(o,R,c),l.memoizedState=MC,f):(Qr(l),c=o.child,o=c.sibling,c=ao(c,{mode:"visible",children:f.children}),c.return=l,c.sibling=null,o!==null&&(R=l.deletions,R===null?(l.deletions=[o],l.flags|=16):R.push(o)),l.child=c,l.memoizedState=null,c)}function LC(o,l){return l=OC({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function OC(o,l){return NE(o,l,0,null)}function kC(o,l,c){return wa(l,o.child,null,c),o=LC(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function dE(o,l,c){o.lanes|=l;var f=o.alternate;f!==null&&(f.lanes|=l),GC(o.return,l,c)}function NC(o,l,c,f,C){var y=o.memoizedState;y===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:C}:(y.isBackwards=l,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=c,y.tailMode=C)}function fE(o,l,c){var f=l.pendingProps,C=f.revealOrder,y=f.tail;if(Mn(o,l,f.children,c),f=pn.current,(f&2)!==0)f=f&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&dE(o,c,l);else if(o.tag===19)dE(o,c,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}f&=1}switch(et(pn,f),C){case"forwards":for(c=l.child,C=null;c!==null;)o=c.alternate,o!==null&&Mf(o)===null&&(C=c),c=c.sibling;c=C,c===null?(C=l.child,l.child=null):(C=c.sibling,c.sibling=null),NC(l,!1,C,c,y);break;case"backwards":for(c=null,C=l.child,l.child=null;C!==null;){if(o=C.alternate,o!==null&&Mf(o)===null){l.child=C;break}o=C.sibling,C.sibling=c,c=C,C=o}NC(l,!0,c,null,y);break;case"together":NC(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function nr(o,l,c){if(o!==null&&(l.dependencies=o.dependencies),lo|=l.lanes,(c&l.childLanes)===0)if(o!==null){if(ah(o,l,c,!1),(c&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(s(153));if(l.child!==null){for(o=l.child,c=ao(o,o.pendingProps),l.child=c,c.return=l;o.sibling!==null;)o=o.sibling,c=c.sibling=ao(o,o.pendingProps),c.return=l;c.sibling=null}return l.child}function VC(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&Uf(o)))}function T1(o,l,c){switch(l.tag){case 3:Dt(l,l.stateNode.containerInfo),eo(l,mn,o.memoizedState.cache),Yc();break;case 27:case 5:Ke(l);break;case 4:Dt(l,l.stateNode.containerInfo);break;case 10:eo(l,l.type,l.memoizedProps.value);break;case 13:var f=l.memoizedState;if(f!==null)return f.dehydrated!==null?(Qr(l),l.flags|=128,null):(c&l.child.childLanes)!==0?hE(o,l,c):(Qr(l),o=nr(o,l,c),o!==null?o.sibling:null);Qr(l);break;case 19:var C=(o.flags&128)!==0;if(f=(c&l.childLanes)!==0,f||(ah(o,l,c,!1),f=(c&l.childLanes)!==0),C){if(f)return fE(o,l,c);l.flags|=128}if(C=l.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),et(pn,pn.current),f)break;return null;case 22:case 23:return l.lanes=0,oE(o,l,c);case 24:eo(l,mn,o.memoizedState.cache)}return nr(o,l,c)}function gE(o,l,c){if(o!==null)if(o.memoizedProps!==l.pendingProps)En=!0;else{if(!VC(o,c)&&(l.flags&128)===0)return En=!1,T1(o,l,c);En=(o.flags&131072)!==0}else En=!1,ut&&(l.flags&1048576)!==0&&ZS(l,Af,l.index);switch(l.lanes=0,l.tag){case 16:e:{o=l.pendingProps;var f=l.elementType,C=f._init;if(f=C(f._payload),l.type=f,typeof f=="function")ZC(f)?(o=Ta(f,o),l.tag=1,l=uE(null,l,f,o,c)):(l.tag=0,l=IC(null,l,f,o,c));else{if(f!=null){if(C=f.$$typeof,C===S){l.tag=11,l=sE(null,l,f,o,c);break e}else if(C===O){l.tag=14,l=iE(null,l,f,o,c);break e}}throw l=D(f)||f,Error(s(306,l,""))}}return l;case 0:return IC(o,l,l.type,l.pendingProps,c);case 1:return f=l.type,C=Ta(f,l.pendingProps),uE(o,l,f,C,c);case 3:e:{if(Dt(l,l.stateNode.containerInfo),o===null)throw Error(s(387));var y=l.pendingProps;C=l.memoizedState,f=C.element,UC(o,l),ch(l,y,null,c);var R=l.memoizedState;if(y=R.cache,eo(l,mn,y),y!==C.cache&&HC(l,[mn],c,!0),uh(),y=R.element,C.isDehydrated)if(C={element:y,isDehydrated:!1,cache:R.cache},l.updateQueue.baseState=C,l.memoizedState=C,l.flags&256){l=cE(o,l,y,c);break e}else if(y!==f){f=Ms(Error(s(424)),l),Qc(f),l=cE(o,l,y,c);break e}else for(In=Js(l.stateNode.containerInfo.firstChild),Xn=l,ut=!0,Xs=null,yi=!0,c=a0(l,null,y,c),l.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Yc(),y===f){l=nr(o,l,c);break e}Mn(o,l,y,c)}l=l.child}return l;case 26:return oh(o,l),o===null?(c=CR(l.type,null,l.pendingProps,null))?l.memoizedState=c:ut||(c=l.type,o=l.pendingProps,f=rg(qe.current).createElement(c),f[wn]=l,f[dn]=o,Fn(f,c,o),Ot(f),l.stateNode=f):l.memoizedState=CR(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return Ke(l),o===null&&ut&&(f=l.stateNode=gR(l.type,l.pendingProps,qe.current),Xn=l,yi=!0,In=Js(f.firstChild)),f=l.pendingProps.children,o!==null||ut?Mn(o,l,f,c):l.child=wa(l,null,f,c),oh(o,l),l.child;case 5:return o===null&&ut&&((C=f=In)&&(f=tL(f,l.type,l.pendingProps,yi),f!==null?(l.stateNode=f,Xn=l,In=Js(f.firstChild),yi=!1,C=!0):C=!1),C||ya(l)),Ke(l),C=l.type,y=l.pendingProps,R=o!==null?o.memoizedProps:null,f=y.children,Rv(C,y)?f=null:R!==null&&Rv(C,R)&&(l.flags|=32),l.memoizedState!==null&&(C=dC(o,l,v1,null,null,c),Th._currentValue=C),oh(o,l),Mn(o,l,f,c),l.child;case 6:return o===null&&ut&&((o=c=In)&&(c=nL(c,l.pendingProps,yi),c!==null?(l.stateNode=c,Xn=l,In=null,o=!0):o=!1),o||ya(l)),null;case 13:return hE(o,l,c);case 4:return Dt(l,l.stateNode.containerInfo),f=l.pendingProps,o===null?l.child=wa(l,null,f,c):Mn(o,l,f,c),l.child;case 11:return sE(o,l,l.type,l.pendingProps,c);case 7:return Mn(o,l,l.pendingProps,c),l.child;case 8:return Mn(o,l,l.pendingProps.children,c),l.child;case 12:return Mn(o,l,l.pendingProps.children,c),l.child;case 10:return f=l.pendingProps,eo(l,l.type,f.value),Mn(o,l,f.children,c),l.child;case 9:return C=l.type._context,f=l.pendingProps.children,xa(l),C=Vn(C),f=f(C),l.flags|=1,Mn(o,l,f,c),l.child;case 14:return iE(o,l,l.type,l.pendingProps,c);case 15:return rE(o,l,l.type,l.pendingProps,c);case 19:return fE(o,l,c);case 22:return oE(o,l,c);case 24:return xa(l),f=Vn(mn),o===null?(C=cC(),C===null&&(C=Tt,y=lC(),C.pooledCache=y,y.refCount++,y!==null&&(C.pooledCacheLanes|=c),C=y),l.memoizedState={parent:f,cache:C},zC(l),eo(l,mn,C)):((o.lanes&c)!==0&&(UC(o,l),ch(l,null,null,c),uh()),C=o.memoizedState,y=l.memoizedState,C.parent!==f?(C={parent:f,cache:f},l.memoizedState=C,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=C),eo(l,mn,f)):(f=y.cache,eo(l,mn,f),f!==C.cache&&HC(l,[mn],c,!0))),Mn(o,l,l.pendingProps.children,c),l.child;case 29:throw l.pendingProps}throw Error(s(156,l.tag))}var BC=Ue(null),Aa=null,sr=null;function eo(o,l,c){et(BC,l._currentValue),l._currentValue=c}function ir(o){o._currentValue=BC.current,St(BC)}function GC(o,l,c){for(;o!==null;){var f=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,f!==null&&(f.childLanes|=l)):f!==null&&(f.childLanes&l)!==l&&(f.childLanes|=l),o===c)break;o=o.return}}function HC(o,l,c,f){var C=o.child;for(C!==null&&(C.return=o);C!==null;){var y=C.dependencies;if(y!==null){var R=C.child;y=y.firstContext;e:for(;y!==null;){var I=y;y=C;for(var G=0;G<l.length;G++)if(I.context===l[G]){y.lanes|=c,I=y.alternate,I!==null&&(I.lanes|=c),GC(y.return,c,o),f||(R=null);break e}y=I.next}}else if(C.tag===18){if(R=C.return,R===null)throw Error(s(341));R.lanes|=c,y=R.alternate,y!==null&&(y.lanes|=c),GC(R,c,o),R=null}else R=C.child;if(R!==null)R.return=C;else for(R=C;R!==null;){if(R===o){R=null;break}if(C=R.sibling,C!==null){C.return=R.return,R=C;break}R=R.return}C=R}}function ah(o,l,c,f){o=null;for(var C=l,y=!1;C!==null;){if(!y){if((C.flags&524288)!==0)y=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var R=C.alternate;if(R===null)throw Error(s(387));if(R=R.memoizedProps,R!==null){var I=C.type;ms(C.pendingProps.value,R.value)||(o!==null?o.push(I):o=[I])}}else if(C===ft.current){if(R=C.alternate,R===null)throw Error(s(387));R.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(o!==null?o.push(Th):o=[Th])}C=C.return}o!==null&&HC(l,o,c,f),l.flags|=262144}function Uf(o){for(o=o.firstContext;o!==null;){if(!ms(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function xa(o){Aa=o,sr=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Vn(o){return pE(Aa,o)}function Wf(o,l){return Aa===null&&xa(o),pE(o,l)}function pE(o,l){var c=l._currentValue;if(l={context:l,memoizedValue:c,next:null},sr===null){if(o===null)throw Error(s(308));sr=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else sr=sr.next=l;return c}var to=!1;function zC(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function UC(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function no(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function so(o,l,c){var f=o.updateQueue;if(f===null)return null;if(f=f.shared,(Nt&2)!==0){var C=f.pending;return C===null?l.next=l:(l.next=C.next,C.next=l),f.pending=l,l=Rf(o),QS(o,null,c),l}return Ef(o,f,l,c),Rf(o)}function lh(o,l,c){if(l=l.updateQueue,l!==null&&(l=l.shared,(c&4194176)!==0)){var f=l.lanes;f&=o.pendingLanes,c|=f,l.lanes=c,Br(o,c)}}function WC(o,l){var c=o.updateQueue,f=o.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var C=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var R={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?C=y=R:y=y.next=R,c=c.next}while(c!==null);y===null?C=y=l:y=y.next=l}else C=y=l;c={baseState:f.baseState,firstBaseUpdate:C,lastBaseUpdate:y,shared:f.shared,callbacks:f.callbacks},o.updateQueue=c;return}o=c.lastBaseUpdate,o===null?c.firstBaseUpdate=l:o.next=l,c.lastBaseUpdate=l}var jC=!1;function uh(){if(jC){var o=Yl;if(o!==null)throw o}}function ch(o,l,c,f){jC=!1;var C=o.updateQueue;to=!1;var y=C.firstBaseUpdate,R=C.lastBaseUpdate,I=C.shared.pending;if(I!==null){C.shared.pending=null;var G=I,q=G.next;G.next=null,R===null?y=q:R.next=q,R=G;var le=o.alternate;le!==null&&(le=le.updateQueue,I=le.lastBaseUpdate,I!==R&&(I===null?le.firstBaseUpdate=q:I.next=q,le.lastBaseUpdate=G))}if(y!==null){var fe=C.baseState;R=0,le=q=G=null,I=y;do{var te=I.lane&-536870913,ae=te!==I.lane;if(ae?(st&te)===te:(f&te)===te){te!==0&&te===Kl&&(jC=!0),le!==null&&(le=le.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Ie=o,Be=I;te=l;var qt=c;switch(Be.tag){case 1:if(Ie=Be.payload,typeof Ie=="function"){fe=Ie.call(qt,fe,te);break e}fe=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Be.payload,te=typeof Ie=="function"?Ie.call(qt,fe,te):Ie,te==null)break e;fe=L({},fe,te);break e;case 2:to=!0}}te=I.callback,te!==null&&(o.flags|=64,ae&&(o.flags|=8192),ae=C.callbacks,ae===null?C.callbacks=[te]:ae.push(te))}else ae={lane:te,tag:I.tag,payload:I.payload,callback:I.callback,next:null},le===null?(q=le=ae,G=fe):le=le.next=ae,R|=te;if(I=I.next,I===null){if(I=C.shared.pending,I===null)break;ae=I,I=ae.next,ae.next=null,C.lastBaseUpdate=ae,C.shared.pending=null}}while(!0);le===null&&(G=fe),C.baseState=G,C.firstBaseUpdate=q,C.lastBaseUpdate=le,y===null&&(C.shared.lanes=0),lo|=R,o.lanes=R,o.memoizedState=fe}}function mE(o,l){if(typeof o!="function")throw Error(s(191,o));o.call(l)}function CE(o,l){var c=o.callbacks;if(c!==null)for(o.callbacks=null,o=0;o<c.length;o++)mE(c[o],l)}function hh(o,l){try{var c=l.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var C=f.next;c=C;do{if((c.tag&o)===o){f=void 0;var y=c.create,R=c.inst;f=y(),R.destroy=f}c=c.next}while(c!==C)}}catch(I){bt(l,l.return,I)}}function io(o,l,c){try{var f=l.updateQueue,C=f!==null?f.lastEffect:null;if(C!==null){var y=C.next;f=y;do{if((f.tag&o)===o){var R=f.inst,I=R.destroy;if(I!==void 0){R.destroy=void 0,C=l;var G=c;try{I()}catch(q){bt(C,G,q)}}}f=f.next}while(f!==y)}}catch(q){bt(l,l.return,q)}}function vE(o){var l=o.updateQueue;if(l!==null){var c=o.stateNode;try{CE(l,c)}catch(f){bt(o,o.return,f)}}}function yE(o,l,c){c.props=Ta(o.type,o.memoizedProps),c.state=o.memoizedState;try{c.componentWillUnmount()}catch(f){bt(o,l,f)}}function Da(o,l){try{var c=o.ref;if(c!==null){var f=o.stateNode;switch(o.tag){case 26:case 27:case 5:var C=f;break;default:C=f}typeof c=="function"?o.refCleanup=c(C):c.current=C}}catch(y){bt(o,l,y)}}function Cs(o,l){var c=o.ref,f=o.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(C){bt(o,l,C)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(C){bt(o,l,C)}else c.current=null}function wE(o){var l=o.type,c=o.memoizedProps,f=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(C){bt(o,o.return,C)}}function bE(o,l,c){try{var f=o.stateNode;Q1(f,o.type,c,l),f[dn]=l}catch(C){bt(o,o.return,C)}}function SE(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27||o.tag===4}function qC(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||SE(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==27&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function $C(o,l,c){var f=o.tag;if(f===5||f===6)o=o.stateNode,l?c.nodeType===8?c.parentNode.insertBefore(o,l):c.insertBefore(o,l):(c.nodeType===8?(l=c.parentNode,l.insertBefore(o,c)):(l=c,l.appendChild(o)),c=c._reactRootContainer,c!=null||l.onclick!==null||(l.onclick=ig));else if(f!==4&&f!==27&&(o=o.child,o!==null))for($C(o,l,c),o=o.sibling;o!==null;)$C(o,l,c),o=o.sibling}function jf(o,l,c){var f=o.tag;if(f===5||f===6)o=o.stateNode,l?c.insertBefore(o,l):c.appendChild(o);else if(f!==4&&f!==27&&(o=o.child,o!==null))for(jf(o,l,c),o=o.sibling;o!==null;)jf(o,l,c),o=o.sibling}var rr=!1,Wt=!1,KC=!1,EE=typeof WeakSet=="function"?WeakSet:Set,Rn=null,RE=!1;function A1(o,l){if(o=o.containerInfo,Sv=hg,o=HS(o),Qm(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else e:{c=(c=o.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var C=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var R=0,I=-1,G=-1,q=0,le=0,fe=o,te=null;t:for(;;){for(var ae;fe!==c||C!==0&&fe.nodeType!==3||(I=R+C),fe!==y||f!==0&&fe.nodeType!==3||(G=R+f),fe.nodeType===3&&(R+=fe.nodeValue.length),(ae=fe.firstChild)!==null;)te=fe,fe=ae;for(;;){if(fe===o)break t;if(te===c&&++q===C&&(I=R),te===y&&++le===f&&(G=R),(ae=fe.nextSibling)!==null)break;fe=te,te=fe.parentNode}fe=ae}c=I===-1||G===-1?null:{start:I,end:G}}else c=null}c=c||{start:0,end:0}}else c=null;for(Ev={focusedElem:o,selectionRange:c},hg=!1,Rn=l;Rn!==null;)if(l=Rn,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,Rn=o;else for(;Rn!==null;){switch(l=Rn,y=l.alternate,o=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&y!==null){o=void 0,c=l,C=y.memoizedProps,y=y.memoizedState,f=c.stateNode;try{var Ie=Ta(c.type,C,c.elementType===c.type);o=f.getSnapshotBeforeUpdate(Ie,y),f.__reactInternalSnapshotBeforeUpdate=o}catch(Be){bt(c,c.return,Be)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,c=o.nodeType,c===9)xv(o);else if(c===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":xv(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(s(163))}if(o=l.sibling,o!==null){o.return=l.return,Rn=o;break}Rn=l.return}return Ie=RE,RE=!1,Ie}function TE(o,l,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:ar(o,c),f&4&&hh(5,c);break;case 1:if(ar(o,c),f&4)if(o=c.stateNode,l===null)try{o.componentDidMount()}catch(I){bt(c,c.return,I)}else{var C=Ta(c.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(C,l,o.__reactInternalSnapshotBeforeUpdate)}catch(I){bt(c,c.return,I)}}f&64&&vE(c),f&512&&Da(c,c.return);break;case 3:if(ar(o,c),f&64&&(f=c.updateQueue,f!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{CE(f,o)}catch(I){bt(c,c.return,I)}}break;case 26:ar(o,c),f&512&&Da(c,c.return);break;case 27:case 5:ar(o,c),l===null&&f&4&&wE(c),f&512&&Da(c,c.return);break;case 12:ar(o,c);break;case 13:ar(o,c),f&4&&DE(o,c);break;case 22:if(C=c.memoizedState!==null||rr,!C){l=l!==null&&l.memoizedState!==null||Wt;var y=rr,R=Wt;rr=C,(Wt=l)&&!R?ro(o,c,(c.subtreeFlags&8772)!==0):ar(o,c),rr=y,Wt=R}f&512&&(c.memoizedProps.mode==="manual"?Da(c,c.return):Cs(c,c.return));break;default:ar(o,c)}}function AE(o){var l=o.alternate;l!==null&&(o.alternate=null,AE(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&ia(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var an=null,vs=!1;function or(o,l,c){for(c=c.child;c!==null;)xE(o,l,c),c=c.sibling}function xE(o,l,c){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(Lr,c)}catch{}switch(c.tag){case 26:Wt||Cs(c,l),or(o,l,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Wt||Cs(c,l);var f=an,C=vs;for(an=c.stateNode,or(o,l,c),c=c.stateNode,l=c.attributes;l.length;)c.removeAttributeNode(l[0]);ia(c),an=f,vs=C;break;case 5:Wt||Cs(c,l);case 6:C=an;var y=vs;if(an=null,or(o,l,c),an=C,vs=y,an!==null)if(vs)try{o=an,f=c.stateNode,o.nodeType===8?o.parentNode.removeChild(f):o.removeChild(f)}catch(R){bt(c,l,R)}else try{an.removeChild(c.stateNode)}catch(R){bt(c,l,R)}break;case 18:an!==null&&(vs?(l=an,c=c.stateNode,l.nodeType===8?Av(l.parentNode,c):l.nodeType===1&&Av(l,c),_h(l)):Av(an,c.stateNode));break;case 4:f=an,C=vs,an=c.stateNode.containerInfo,vs=!0,or(o,l,c),an=f,vs=C;break;case 0:case 11:case 14:case 15:Wt||io(2,c,l),Wt||io(4,c,l),or(o,l,c);break;case 1:Wt||(Cs(c,l),f=c.stateNode,typeof f.componentWillUnmount=="function"&&yE(c,l,f)),or(o,l,c);break;case 21:or(o,l,c);break;case 22:Wt||Cs(c,l),Wt=(f=Wt)||c.memoizedState!==null,or(o,l,c),Wt=f;break;default:or(o,l,c)}}function DE(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{_h(o)}catch(c){bt(l,l.return,c)}}function x1(o){switch(o.tag){case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new EE),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new EE),l;default:throw Error(s(435,o.tag))}}function YC(o,l){var c=x1(o);l.forEach(function(f){var C=G1.bind(null,o,f);c.has(f)||(c.add(f),f.then(C,C))})}function Os(o,l){var c=l.deletions;if(c!==null)for(var f=0;f<c.length;f++){var C=c[f],y=o,R=l,I=R;e:for(;I!==null;){switch(I.tag){case 27:case 5:an=I.stateNode,vs=!1;break e;case 3:an=I.stateNode.containerInfo,vs=!0;break e;case 4:an=I.stateNode.containerInfo,vs=!0;break e}I=I.return}if(an===null)throw Error(s(160));xE(y,R,C),an=null,vs=!1,y=C.alternate,y!==null&&(y.return=null),C.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)_E(l,o),l=l.sibling}var Zs=null;function _E(o,l){var c=o.alternate,f=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Os(l,o),ks(o),f&4&&(io(3,o,o.return),hh(3,o),io(5,o,o.return));break;case 1:Os(l,o),ks(o),f&512&&(Wt||c===null||Cs(c,c.return)),f&64&&rr&&(o=o.updateQueue,o!==null&&(f=o.callbacks,f!==null&&(c=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var C=Zs;if(Os(l,o),ks(o),f&512&&(Wt||c===null||Cs(c,c.return)),f&4){var y=c!==null?c.memoizedState:null;if(f=o.memoizedState,c===null)if(f===null)if(o.stateNode===null){e:{f=o.type,c=o.memoizedProps,C=C.ownerDocument||C;t:switch(f){case"title":y=C.getElementsByTagName("title")[0],(!y||y[Hr]||y[wn]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=C.createElement(f),C.head.insertBefore(y,C.querySelector("head > title"))),Fn(y,f,c),y[wn]=o,Ot(y),f=y;break e;case"link":var R=wR("link","href",C).get(f+(c.href||""));if(R){for(var I=0;I<R.length;I++)if(y=R[I],y.getAttribute("href")===(c.href==null?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){R.splice(I,1);break t}}y=C.createElement(f),Fn(y,f,c),C.head.appendChild(y);break;case"meta":if(R=wR("meta","content",C).get(f+(c.content||""))){for(I=0;I<R.length;I++)if(y=R[I],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){R.splice(I,1);break t}}y=C.createElement(f),Fn(y,f,c),C.head.appendChild(y);break;default:throw Error(s(468,f))}y[wn]=o,Ot(y),f=y}o.stateNode=f}else bR(C,o.type,o.stateNode);else o.stateNode=yR(C,f,o.memoizedProps);else y!==f?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,f===null?bR(C,o.type,o.stateNode):yR(C,f,o.memoizedProps)):f===null&&o.stateNode!==null&&bE(o,o.memoizedProps,c.memoizedProps)}break;case 27:if(f&4&&o.alternate===null){C=o.stateNode,y=o.memoizedProps;try{for(var G=C.firstChild;G;){var q=G.nextSibling,le=G.nodeName;G[Hr]||le==="HEAD"||le==="BODY"||le==="SCRIPT"||le==="STYLE"||le==="LINK"&&G.rel.toLowerCase()==="stylesheet"||C.removeChild(G),G=q}for(var fe=o.type,te=C.attributes;te.length;)C.removeAttributeNode(te[0]);Fn(C,fe,y),C[wn]=o,C[dn]=y}catch(Ie){bt(o,o.return,Ie)}}case 5:if(Os(l,o),ks(o),f&512&&(Wt||c===null||Cs(c,c.return)),o.flags&32){C=o.stateNode;try{As(C,"")}catch(Ie){bt(o,o.return,Ie)}}f&4&&o.stateNode!=null&&(C=o.memoizedProps,bE(o,C,c!==null?c.memoizedProps:C)),f&1024&&(KC=!0);break;case 6:if(Os(l,o),ks(o),f&4){if(o.stateNode===null)throw Error(s(162));f=o.memoizedProps,c=o.stateNode;try{c.nodeValue=f}catch(Ie){bt(o,o.return,Ie)}}break;case 3:if(lg=null,C=Zs,Zs=og(l.containerInfo),Os(l,o),Zs=C,ks(o),f&4&&c!==null&&c.memoizedState.isDehydrated)try{_h(l.containerInfo)}catch(Ie){bt(o,o.return,Ie)}KC&&(KC=!1,IE(o));break;case 4:f=Zs,Zs=og(o.stateNode.containerInfo),Os(l,o),ks(o),Zs=f;break;case 12:Os(l,o),ks(o);break;case 13:Os(l,o),ks(o),o.child.flags&8192&&o.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(iv=sn()),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,YC(o,f)));break;case 22:if(f&512&&(Wt||c===null||Cs(c,c.return)),G=o.memoizedState!==null,q=c!==null&&c.memoizedState!==null,le=rr,fe=Wt,rr=le||G,Wt=fe||q,Os(l,o),Wt=fe,rr=le,ks(o),l=o.stateNode,l._current=o,l._visibility&=-3,l._visibility|=l._pendingVisibility&2,f&8192&&(l._visibility=G?l._visibility&-2:l._visibility|1,G&&(l=rr||Wt,c===null||q||l||Jl(o)),o.memoizedProps===null||o.memoizedProps.mode!=="manual"))e:for(c=null,l=o;;){if(l.tag===5||l.tag===26||l.tag===27){if(c===null){q=c=l;try{if(C=q.stateNode,G)y=C.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{R=q.stateNode,I=q.memoizedProps.style;var ae=I!=null&&I.hasOwnProperty("display")?I.display:null;R.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(Ie){bt(q,q.return,Ie)}}}else if(l.tag===6){if(c===null){q=l;try{q.stateNode.nodeValue=G?"":q.memoizedProps}catch(Ie){bt(q,q.return,Ie)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;c===l&&(c=null),l=l.return}c===l&&(c=null),l.sibling.return=l.return,l=l.sibling}f&4&&(f=o.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,YC(o,c))));break;case 19:Os(l,o),ks(o),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,YC(o,f)));break;case 21:break;default:Os(l,o),ks(o)}}function ks(o){var l=o.flags;if(l&2){try{if(o.tag!==27){e:{for(var c=o.return;c!==null;){if(SE(c)){var f=c;break e}c=c.return}throw Error(s(160))}switch(f.tag){case 27:var C=f.stateNode,y=qC(o);jf(o,y,C);break;case 5:var R=f.stateNode;f.flags&32&&(As(R,""),f.flags&=-33);var I=qC(o);jf(o,I,R);break;case 3:case 4:var G=f.stateNode.containerInfo,q=qC(o);$C(o,q,G);break;default:throw Error(s(161))}}}catch(le){bt(o,o.return,le)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function IE(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;IE(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function ar(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)TE(o,l.alternate,l),l=l.sibling}function Jl(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:io(4,l,l.return),Jl(l);break;case 1:Cs(l,l.return);var c=l.stateNode;typeof c.componentWillUnmount=="function"&&yE(l,l.return,c),Jl(l);break;case 26:case 27:case 5:Cs(l,l.return),Jl(l);break;case 22:Cs(l,l.return),l.memoizedState===null&&Jl(l);break;default:Jl(l)}o=o.sibling}}function ro(o,l,c){for(c=c&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var f=l.alternate,C=o,y=l,R=y.flags;switch(y.tag){case 0:case 11:case 15:ro(C,y,c),hh(4,y);break;case 1:if(ro(C,y,c),f=y,C=f.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(q){bt(f,f.return,q)}if(f=y,C=f.updateQueue,C!==null){var I=f.stateNode;try{var G=C.shared.hiddenCallbacks;if(G!==null)for(C.shared.hiddenCallbacks=null,C=0;C<G.length;C++)mE(G[C],I)}catch(q){bt(f,f.return,q)}}c&&R&64&&vE(y),Da(y,y.return);break;case 26:case 27:case 5:ro(C,y,c),c&&f===null&&R&4&&wE(y),Da(y,y.return);break;case 12:ro(C,y,c);break;case 13:ro(C,y,c),c&&R&4&&DE(C,y);break;case 22:y.memoizedState===null&&ro(C,y,c),Da(y,y.return);break;default:ro(C,y,c)}l=l.sibling}}function QC(o,l){var c=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==c&&(o!=null&&o.refCount++,c!=null&&th(c))}function XC(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&th(o))}function oo(o,l,c,f){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)ME(o,l,c,f),l=l.sibling}function ME(o,l,c,f){var C=l.flags;switch(l.tag){case 0:case 11:case 15:oo(o,l,c,f),C&2048&&hh(9,l);break;case 3:oo(o,l,c,f),C&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&th(o)));break;case 12:if(C&2048){oo(o,l,c,f),o=l.stateNode;try{var y=l.memoizedProps,R=y.id,I=y.onPostCommit;typeof I=="function"&&I(R,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(G){bt(l,l.return,G)}}else oo(o,l,c,f);break;case 23:break;case 22:y=l.stateNode,l.memoizedState!==null?y._visibility&4?oo(o,l,c,f):dh(o,l):y._visibility&4?oo(o,l,c,f):(y._visibility|=4,eu(o,l,c,f,(l.subtreeFlags&10256)!==0)),C&2048&&QC(l.alternate,l);break;case 24:oo(o,l,c,f),C&2048&&XC(l.alternate,l);break;default:oo(o,l,c,f)}}function eu(o,l,c,f,C){for(C=C&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var y=o,R=l,I=c,G=f,q=R.flags;switch(R.tag){case 0:case 11:case 15:eu(y,R,I,G,C),hh(8,R);break;case 23:break;case 22:var le=R.stateNode;R.memoizedState!==null?le._visibility&4?eu(y,R,I,G,C):dh(y,R):(le._visibility|=4,eu(y,R,I,G,C)),C&&q&2048&&QC(R.alternate,R);break;case 24:eu(y,R,I,G,C),C&&q&2048&&XC(R.alternate,R);break;default:eu(y,R,I,G,C)}l=l.sibling}}function dh(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var c=o,f=l,C=f.flags;switch(f.tag){case 22:dh(c,f),C&2048&&QC(f.alternate,f);break;case 24:dh(c,f),C&2048&&XC(f.alternate,f);break;default:dh(c,f)}l=l.sibling}}var fh=8192;function tu(o){if(o.subtreeFlags&fh)for(o=o.child;o!==null;)FE(o),o=o.sibling}function FE(o){switch(o.tag){case 26:tu(o),o.flags&fh&&o.memoizedState!==null&&pL(Zs,o.memoizedState,o.memoizedProps);break;case 5:tu(o);break;case 3:case 4:var l=Zs;Zs=og(o.stateNode.containerInfo),tu(o),Zs=l;break;case 22:o.memoizedState===null&&(l=o.alternate,l!==null&&l.memoizedState!==null?(l=fh,fh=16777216,tu(o),fh=l):tu(o));break;default:tu(o)}}function PE(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function gh(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var c=0;c<l.length;c++){var f=l[c];Rn=f,OE(f,o)}PE(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)LE(o),o=o.sibling}function LE(o){switch(o.tag){case 0:case 11:case 15:gh(o),o.flags&2048&&io(9,o,o.return);break;case 3:gh(o);break;case 12:gh(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&4&&(o.return===null||o.return.tag!==13)?(l._visibility&=-5,qf(o)):gh(o);break;default:gh(o)}}function qf(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var c=0;c<l.length;c++){var f=l[c];Rn=f,OE(f,o)}PE(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:io(8,l,l.return),qf(l);break;case 22:c=l.stateNode,c._visibility&4&&(c._visibility&=-5,qf(l));break;default:qf(l)}o=o.sibling}}function OE(o,l){for(;Rn!==null;){var c=Rn;switch(c.tag){case 0:case 11:case 15:io(8,c,l);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:th(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Rn=f;else e:for(c=o;Rn!==null;){f=Rn;var C=f.sibling,y=f.return;if(AE(f),f===c){Rn=null;break e}if(C!==null){C.return=y,Rn=C;break e}Rn=y}}}function D1(o,l,c,f){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ns(o,l,c,f){return new D1(o,l,c,f)}function ZC(o){return o=o.prototype,!(!o||!o.isReactComponent)}function ao(o,l){var c=o.alternate;return c===null?(c=Ns(o.tag,l,o.key,o.mode),c.elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=l,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=o.flags&31457280,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,l=o.dependencies,c.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c.refCleanup=o.refCleanup,c}function kE(o,l){o.flags&=31457282;var c=o.alternate;return c===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,l=c.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function $f(o,l,c,f,C,y){var R=0;if(f=o,typeof o=="function")ZC(o)&&(R=1);else if(typeof o=="string")R=fL(o,c,hn.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case h:return _a(c.children,C,y,l);case d:R=8,C|=24;break;case g:return o=Ns(12,c,l,C|2),o.elementType=g,o.lanes=y,o;case T:return o=Ns(13,c,l,C),o.elementType=T,o.lanes=y,o;case A:return o=Ns(19,c,l,C),o.elementType=A,o.lanes=y,o;case H:return NE(c,C,y,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case m:case w:R=10;break e;case v:R=9;break e;case S:R=11;break e;case O:R=14;break e;case V:R=16,f=null;break e}R=29,c=Error(s(130,o===null?"null":typeof o,"")),f=null}return l=Ns(R,c,l,C),l.elementType=o,l.type=f,l.lanes=y,l}function _a(o,l,c,f){return o=Ns(7,o,f,l),o.lanes=c,o}function NE(o,l,c,f){o=Ns(22,o,f,l),o.elementType=H,o.lanes=c;var C={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var y=C._current;if(y===null)throw Error(s(456));if((C._pendingVisibility&2)===0){var R=Yr(y,2);R!==null&&(C._pendingVisibility|=2,Zn(R,y,2))}},attach:function(){var y=C._current;if(y===null)throw Error(s(456));if((C._pendingVisibility&2)!==0){var R=Yr(y,2);R!==null&&(C._pendingVisibility&=-3,Zn(R,y,2))}}};return o.stateNode=C,o}function JC(o,l,c){return o=Ns(6,o,null,l),o.lanes=c,o}function ev(o,l,c){return l=Ns(4,o.children!==null?o.children:[],o.key,l),l.lanes=c,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function lr(o){o.flags|=4}function VE(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!SR(l)){if(l=Ls.current,l!==null&&((st&4194176)===st?wi!==null:(st&62914560)!==st&&(st&536870912)===0||l!==wi))throw Zc=rC,t0;o.flags|=8192}}function Kf(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?Nr():536870912,o.lanes|=l,su|=l)}function ph(o,l){if(!ut)switch(o.tailMode){case"hidden":l=o.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:f.sibling=null}}function kt(o){var l=o.alternate!==null&&o.alternate.child===o.child,c=0,f=0;if(l)for(var C=o.child;C!==null;)c|=C.lanes|C.childLanes,f|=C.subtreeFlags&31457280,f|=C.flags&31457280,C.return=o,C=C.sibling;else for(C=o.child;C!==null;)c|=C.lanes|C.childLanes,f|=C.subtreeFlags,f|=C.flags,C.return=o,C=C.sibling;return o.subtreeFlags|=f,o.childLanes=c,l}function _1(o,l,c){var f=l.pendingProps;switch(sC(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(l),null;case 1:return kt(l),null;case 3:return c=l.stateNode,f=null,o!==null&&(f=o.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),ir(mn),Ht(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(o===null||o.child===null)&&(Kc(l)?lr(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Xs!==null&&(lv(Xs),Xs=null))),kt(l),null;case 26:return c=l.memoizedState,o===null?(lr(l),c!==null?(kt(l),VE(l,c)):(kt(l),l.flags&=-16777217)):c?c!==o.memoizedState?(lr(l),kt(l),VE(l,c)):(kt(l),l.flags&=-16777217):(o.memoizedProps!==f&&lr(l),kt(l),l.flags&=-16777217),null;case 27:Et(l),c=qe.current;var C=l.type;if(o!==null&&l.stateNode!=null)o.memoizedProps!==f&&lr(l);else{if(!f){if(l.stateNode===null)throw Error(s(166));return kt(l),null}o=hn.current,Kc(l)?JS(l):(o=gR(C,f,c),l.stateNode=o,lr(l))}return kt(l),null;case 5:if(Et(l),c=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==f&&lr(l);else{if(!f){if(l.stateNode===null)throw Error(s(166));return kt(l),null}if(o=hn.current,Kc(l))JS(l);else{switch(C=rg(qe.current),o){case 1:o=C.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:o=C.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":o=C.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":o=C.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":o=C.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof f.is=="string"?C.createElement("select",{is:f.is}):C.createElement("select"),f.multiple?o.multiple=!0:f.size&&(o.size=f.size);break;default:o=typeof f.is=="string"?C.createElement(c,{is:f.is}):C.createElement(c)}}o[wn]=l,o[dn]=f;e:for(C=l.child;C!==null;){if(C.tag===5||C.tag===6)o.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===l)break e;for(;C.sibling===null;){if(C.return===null||C.return===l)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}l.stateNode=o;e:switch(Fn(o,c,f),c){case"button":case"input":case"select":case"textarea":o=!!f.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&lr(l)}}return kt(l),l.flags&=-16777217,null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==f&&lr(l);else{if(typeof f!="string"&&l.stateNode===null)throw Error(s(166));if(o=qe.current,Kc(l)){if(o=l.stateNode,c=l.memoizedProps,f=null,C=Xn,C!==null)switch(C.tag){case 27:case 5:f=C.memoizedProps}o[wn]=l,o=!!(o.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||lR(o.nodeValue,c)),o||ya(l)}else o=rg(o).createTextNode(f),o[wn]=l,l.stateNode=o}return kt(l),null;case 13:if(f=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(C=Kc(l),f!==null&&f.dehydrated!==null){if(o===null){if(!C)throw Error(s(318));if(C=l.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(s(317));C[wn]=l}else Yc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;kt(l),C=!1}else Xs!==null&&(lv(Xs),Xs=null),C=!0;if(!C)return l.flags&256?(er(l),l):(er(l),null)}if(er(l),(l.flags&128)!==0)return l.lanes=c,l;if(c=f!==null,o=o!==null&&o.memoizedState!==null,c){f=l.child,C=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(C=f.alternate.memoizedState.cachePool.pool);var y=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==C&&(f.flags|=2048)}return c!==o&&c&&(l.child.flags|=8192),Kf(l,l.updateQueue),kt(l),null;case 4:return Ht(),o===null&&yv(l.stateNode.containerInfo),kt(l),null;case 10:return ir(l.type),kt(l),null;case 19:if(St(pn),C=l.memoizedState,C===null)return kt(l),null;if(f=(l.flags&128)!==0,y=C.rendering,y===null)if(f)ph(C,!1);else{if(jt!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(y=Mf(o),y!==null){for(l.flags|=128,ph(C,!1),o=y.updateQueue,l.updateQueue=o,Kf(l,o),l.subtreeFlags=0,o=c,c=l.child;c!==null;)kE(c,o),c=c.sibling;return et(pn,pn.current&1|2),l.child}o=o.sibling}C.tail!==null&&sn()>Yf&&(l.flags|=128,f=!0,ph(C,!1),l.lanes=4194304)}else{if(!f)if(o=Mf(y),o!==null){if(l.flags|=128,f=!0,o=o.updateQueue,l.updateQueue=o,Kf(l,o),ph(C,!0),C.tail===null&&C.tailMode==="hidden"&&!y.alternate&&!ut)return kt(l),null}else 2*sn()-C.renderingStartTime>Yf&&c!==536870912&&(l.flags|=128,f=!0,ph(C,!1),l.lanes=4194304);C.isBackwards?(y.sibling=l.child,l.child=y):(o=C.last,o!==null?o.sibling=y:l.child=y,C.last=y)}return C.tail!==null?(l=C.tail,C.rendering=l,C.tail=l.sibling,C.renderingStartTime=sn(),l.sibling=null,o=pn.current,et(pn,f?o&1|2:o&1),l):(kt(l),null);case 22:case 23:return er(l),aC(),f=l.memoizedState!==null,o!==null?o.memoizedState!==null!==f&&(l.flags|=8192):f&&(l.flags|=8192),f?(c&536870912)!==0&&(l.flags&128)===0&&(kt(l),l.subtreeFlags&6&&(l.flags|=8192)):kt(l),c=l.updateQueue,c!==null&&Kf(l,c.retryQueue),c=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==c&&(l.flags|=2048),o!==null&&St(ba),null;case 24:return c=null,o!==null&&(c=o.memoizedState.cache),l.memoizedState.cache!==c&&(l.flags|=2048),ir(mn),kt(l),null;case 25:return null}throw Error(s(156,l.tag))}function I1(o,l){switch(sC(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return ir(mn),Ht(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return Et(l),null;case 13:if(er(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(s(340));Yc()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return St(pn),null;case 4:return Ht(),null;case 10:return ir(l.type),null;case 22:case 23:return er(l),aC(),o!==null&&St(ba),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return ir(mn),null;case 25:return null;default:return null}}function BE(o,l){switch(sC(l),l.tag){case 3:ir(mn),Ht();break;case 26:case 27:case 5:Et(l);break;case 4:Ht();break;case 13:er(l);break;case 19:St(pn);break;case 10:ir(l.type);break;case 22:case 23:er(l),aC(),o!==null&&St(ba);break;case 24:ir(mn)}}var M1={getCacheForType:function(o){var l=Vn(mn),c=l.data.get(o);return c===void 0&&(c=o(),l.data.set(o,c)),c}},F1=typeof WeakMap=="function"?WeakMap:Map,Nt=0,Tt=null,$e=null,st=0,At=0,ys=null,ur=!1,nu=!1,tv=!1,cr=0,jt=0,lo=0,Ia=0,nv=0,Vs=0,su=0,mh=null,Si=null,sv=!1,iv=0,Yf=1/0,Qf=null,uo=null,Xf=!1,Ma=null,Ch=0,rv=0,ov=null,vh=0,av=null;function ws(){if((Nt&2)!==0&&st!==0)return st&-st;if(x.T!==null){var o=Kl;return o!==0?o:pv()}return nf()}function GE(){Vs===0&&(Vs=(st&536870912)===0||ut?Ic():536870912);var o=Ls.current;return o!==null&&(o.flags|=32),Vs}function Zn(o,l,c){(o===Tt&&At===2||o.cancelPendingCommit!==null)&&(iu(o,0),hr(o,st,Vs,!1)),Xt(o,c),((Nt&2)===0||o!==Tt)&&(o===Tt&&((Nt&2)===0&&(Ia|=c),jt===4&&hr(o,st,Vs,!1)),Ei(o))}function HE(o,l,c){if((Nt&6)!==0)throw Error(s(327));var f=!c&&(l&60)===0&&(l&o.expiredLanes)===0||kr(o,l),C=f?O1(o,l):hv(o,l,!0),y=f;do{if(C===0){nu&&!f&&hr(o,l,0,!1);break}else if(C===6)hr(o,l,0,!ur);else{if(c=o.current.alternate,y&&!P1(c)){C=hv(o,l,!1),y=!1;continue}if(C===2){if(y=l,o.errorRecoveryDisabledLanes&y)var R=0;else R=o.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){l=R;e:{var I=o;C=mh;var G=I.current.memoizedState.isDehydrated;if(G&&(iu(I,R).flags|=256),R=hv(I,R,!1),R!==2){if(tv&&!G){I.errorRecoveryDisabledLanes|=y,Ia|=y,C=4;break e}y=Si,Si=C,y!==null&&lv(y)}C=R}if(y=!1,C!==2)continue}}if(C===1){iu(o,0),hr(o,l,0,!0);break}e:{switch(f=o,C){case 0:case 1:throw Error(s(345));case 4:if((l&4194176)===l){hr(f,l,Vs,!ur);break e}break;case 2:Si=null;break;case 3:case 5:break;default:throw Error(s(329))}if(f.finishedWork=c,f.finishedLanes=l,(l&62914560)===l&&(y=iv+300-sn(),10<y)){if(hr(f,l,Vs,!ur),Rs(f,0)!==0)break e;f.timeoutHandle=hR(zE.bind(null,f,c,Si,Qf,sv,l,Vs,Ia,su,ur,2,-0,0),y);break e}zE(f,c,Si,Qf,sv,l,Vs,Ia,su,ur,0,-0,0)}}break}while(!0);Ei(o)}function lv(o){Si===null?Si=o:Si.push.apply(Si,o)}function zE(o,l,c,f,C,y,R,I,G,q,le,fe,te){var ae=l.subtreeFlags;if((ae&8192||(ae&16785408)===16785408)&&(Rh={stylesheets:null,count:0,unsuspend:gL},FE(l),l=mL(),l!==null)){o.cancelPendingCommit=l(YE.bind(null,o,c,f,C,R,I,G,1,fe,te)),hr(o,y,R,!q);return}YE(o,c,f,C,R,I,G,le,fe,te)}function P1(o){for(var l=o;;){var c=l.tag;if((c===0||c===11||c===15)&&l.flags&16384&&(c=l.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var C=c[f],y=C.getSnapshot;C=C.value;try{if(!ms(y(),C))return!1}catch{return!1}}if(c=l.child,l.subtreeFlags&16384&&c!==null)c.return=l,l=c;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function hr(o,l,c,f){l&=~nv,l&=~Ia,o.suspendedLanes|=l,o.pingedLanes&=~l,f&&(o.warmLanes|=l),f=o.expirationTimes;for(var C=l;0<C;){var y=31-Kn(C),R=1<<y;f[y]=-1,C&=~R}c!==0&&Vr(o,c,l)}function Zf(){return(Nt&6)===0?(yh(0),!1):!0}function uv(){if($e!==null){if(At===0)var o=$e.return;else o=$e,sr=Aa=null,pC(o),ql=null,Jc=0,o=$e;for(;o!==null;)BE(o.alternate,o),o=o.return;$e=null}}function iu(o,l){o.finishedWork=null,o.finishedLanes=0;var c=o.timeoutHandle;c!==-1&&(o.timeoutHandle=-1,Z1(c)),c=o.cancelPendingCommit,c!==null&&(o.cancelPendingCommit=null,c()),uv(),Tt=o,$e=c=ao(o.current,null),st=l,At=0,ys=null,ur=!1,nu=kr(o,l),tv=!1,su=Vs=nv=Ia=lo=jt=0,Si=mh=null,sv=!1,(l&8)!==0&&(l|=l&32);var f=o.entangledLanes;if(f!==0)for(o=o.entanglements,f&=l;0<f;){var C=31-Kn(f),y=1<<C;l|=o[C],f&=~y}return cr=l,Sf(),c}function UE(o,l){We=null,x.H=bi,l===Xc?(l=i0(),At=3):l===t0?(l=i0(),At=4):At=l===nE?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ys=l,$e===null&&(jt=1,zf(o,Ms(l,o.current)))}function WE(){var o=x.H;return x.H=bi,o===null?bi:o}function jE(){var o=x.A;return x.A=M1,o}function cv(){jt=4,ur||(st&4194176)!==st&&Ls.current!==null||(nu=!0),(lo&134217727)===0&&(Ia&134217727)===0||Tt===null||hr(Tt,st,Vs,!1)}function hv(o,l,c){var f=Nt;Nt|=2;var C=WE(),y=jE();(Tt!==o||st!==l)&&(Qf=null,iu(o,l)),l=!1;var R=jt;e:do try{if(At!==0&&$e!==null){var I=$e,G=ys;switch(At){case 8:uv(),R=6;break e;case 3:case 2:case 6:Ls.current===null&&(l=!0);var q=At;if(At=0,ys=null,ru(o,I,G,q),c&&nu){R=0;break e}break;default:q=At,At=0,ys=null,ru(o,I,G,q)}}L1(),R=jt;break}catch(le){UE(o,le)}while(!0);return l&&o.shellSuspendCounter++,sr=Aa=null,Nt=f,x.H=C,x.A=y,$e===null&&(Tt=null,st=0,Sf()),R}function L1(){for(;$e!==null;)qE($e)}function O1(o,l){var c=Nt;Nt|=2;var f=WE(),C=jE();Tt!==o||st!==l?(Qf=null,Yf=sn()+500,iu(o,l)):nu=kr(o,l);e:do try{if(At!==0&&$e!==null){l=$e;var y=ys;t:switch(At){case 1:At=0,ys=null,ru(o,l,y,1);break;case 2:if(n0(y)){At=0,ys=null,$E(l);break}l=function(){At===2&&Tt===o&&(At=7),Ei(o)},y.then(l,l);break e;case 3:At=7;break e;case 4:At=5;break e;case 7:n0(y)?(At=0,ys=null,$E(l)):(At=0,ys=null,ru(o,l,y,7));break;case 5:var R=null;switch($e.tag){case 26:R=$e.memoizedState;case 5:case 27:var I=$e;if(!R||SR(R)){At=0,ys=null;var G=I.sibling;if(G!==null)$e=G;else{var q=I.return;q!==null?($e=q,Jf(q)):$e=null}break t}}At=0,ys=null,ru(o,l,y,5);break;case 6:At=0,ys=null,ru(o,l,y,6);break;case 8:uv(),jt=6;break e;default:throw Error(s(462))}}k1();break}catch(le){UE(o,le)}while(!0);return sr=Aa=null,x.H=f,x.A=C,Nt=c,$e!==null?0:(Tt=null,st=0,Sf(),jt)}function k1(){for(;$e!==null&&!ai();)qE($e)}function qE(o){var l=gE(o.alternate,o,cr);o.memoizedProps=o.pendingProps,l===null?Jf(o):$e=l}function $E(o){var l=o,c=l.alternate;switch(l.tag){case 15:case 0:l=lE(c,l,l.pendingProps,l.type,void 0,st);break;case 11:l=lE(c,l,l.pendingProps,l.type.render,l.ref,st);break;case 5:pC(l);default:BE(c,l),l=$e=kE(l,cr),l=gE(c,l,cr)}o.memoizedProps=o.pendingProps,l===null?Jf(o):$e=l}function ru(o,l,c,f){sr=Aa=null,pC(l),ql=null,Jc=0;var C=l.return;try{if(R1(o,C,l,c,st)){jt=1,zf(o,Ms(c,o.current)),$e=null;return}}catch(y){if(C!==null)throw $e=C,y;jt=1,zf(o,Ms(c,o.current)),$e=null;return}l.flags&32768?(ut||f===1?o=!0:nu||(st&536870912)!==0?o=!1:(ur=o=!0,(f===2||f===3||f===6)&&(f=Ls.current,f!==null&&f.tag===13&&(f.flags|=16384))),KE(l,o)):Jf(l)}function Jf(o){var l=o;do{if((l.flags&32768)!==0){KE(l,ur);return}o=l.return;var c=_1(l.alternate,l,cr);if(c!==null){$e=c;return}if(l=l.sibling,l!==null){$e=l;return}$e=l=o}while(l!==null);jt===0&&(jt=5)}function KE(o,l){do{var c=I1(o.alternate,o);if(c!==null){c.flags&=32767,$e=c;return}if(c=o.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!l&&(o=o.sibling,o!==null)){$e=o;return}$e=o=c}while(o!==null);jt=6,$e=null}function YE(o,l,c,f,C,y,R,I,G,q){var le=x.T,fe=ue.p;try{ue.p=2,x.T=null,N1(o,l,c,f,fe,C,y,R,I,G,q)}finally{x.T=le,ue.p=fe}}function N1(o,l,c,f,C,y,R,I){do ou();while(Ma!==null);if((Nt&6)!==0)throw Error(s(327));var G=o.finishedWork;if(f=o.finishedLanes,G===null)return null;if(o.finishedWork=null,o.finishedLanes=0,G===o.current)throw Error(s(177));o.callbackNode=null,o.callbackPriority=0,o.cancelPendingCommit=null;var q=G.lanes|G.childLanes;if(q|=eC,ef(o,f,q,y,R,I),o===Tt&&($e=Tt=null,st=0),(G.subtreeFlags&10256)===0&&(G.flags&10256)===0||Xf||(Xf=!0,rv=q,ov=c,H1(rt,function(){return ou(),null})),c=(G.flags&15990)!==0,(G.subtreeFlags&15990)!==0||c?(c=x.T,x.T=null,y=ue.p,ue.p=2,R=Nt,Nt|=4,A1(o,G),_E(G,o),a1(Ev,o.containerInfo),hg=!!Sv,Ev=Sv=null,o.current=G,TE(o,G.alternate,G),zi(),Nt=R,ue.p=y,x.T=c):o.current=G,Xf?(Xf=!1,Ma=o,Ch=f):QE(o,q),q=o.pendingLanes,q===0&&(uo=null),Dc(G.stateNode),Ei(o),l!==null)for(C=o.onRecoverableError,G=0;G<l.length;G++)q=l[G],C(q.value,{componentStack:q.stack});return(Ch&3)!==0&&ou(),q=o.pendingLanes,(f&4194218)!==0&&(q&42)!==0?o===av?vh++:(vh=0,av=o):vh=0,yh(0),null}function QE(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,th(l)))}function ou(){if(Ma!==null){var o=Ma,l=rv;rv=0;var c=tf(Ch),f=x.T,C=ue.p;try{if(ue.p=32>c?32:c,x.T=null,Ma===null)var y=!1;else{c=ov,ov=null;var R=Ma,I=Ch;if(Ma=null,Ch=0,(Nt&6)!==0)throw Error(s(331));var G=Nt;if(Nt|=4,LE(R.current),ME(R,R.current,I,c),Nt=G,yh(0,!1),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(Lr,R)}catch{}y=!0}return y}finally{ue.p=C,x.T=f,QE(o,l)}}return!1}function XE(o,l,c){l=Ms(c,l),l=_C(o.stateNode,l,2),o=so(o,l,2),o!==null&&(Xt(o,2),Ei(o))}function bt(o,l,c){if(o.tag===3)XE(o,o,c);else for(;l!==null;){if(l.tag===3){XE(l,o,c);break}else if(l.tag===1){var f=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(uo===null||!uo.has(f))){o=Ms(c,o),c=eE(2),f=so(l,c,2),f!==null&&(tE(c,f,l,o),Xt(f,2),Ei(f));break}}l=l.return}}function dv(o,l,c){var f=o.pingCache;if(f===null){f=o.pingCache=new F1;var C=new Set;f.set(l,C)}else C=f.get(l),C===void 0&&(C=new Set,f.set(l,C));C.has(c)||(tv=!0,C.add(c),o=V1.bind(null,o,l,c),l.then(o,o))}function V1(o,l,c){var f=o.pingCache;f!==null&&f.delete(l),o.pingedLanes|=o.suspendedLanes&c,o.warmLanes&=~c,Tt===o&&(st&c)===c&&(jt===4||jt===3&&(st&62914560)===st&&300>sn()-iv?(Nt&2)===0&&iu(o,0):nv|=c,su===st&&(su=0)),Ei(o)}function ZE(o,l){l===0&&(l=Nr()),o=Yr(o,l),o!==null&&(Xt(o,l),Ei(o))}function B1(o){var l=o.memoizedState,c=0;l!==null&&(c=l.retryLane),ZE(o,c)}function G1(o,l){var c=0;switch(o.tag){case 13:var f=o.stateNode,C=o.memoizedState;C!==null&&(c=C.retryLane);break;case 19:f=o.stateNode;break;case 22:f=o.stateNode._retryCache;break;default:throw Error(s(314))}f!==null&&f.delete(l),ZE(o,c)}function H1(o,l){return Rt(o,l)}var eg=null,au=null,fv=!1,tg=!1,gv=!1,Fa=0;function Ei(o){o!==au&&o.next===null&&(au===null?eg=au=o:au=au.next=o),tg=!0,fv||(fv=!0,U1(z1))}function yh(o,l){if(!gv&&tg){gv=!0;do for(var c=!1,f=eg;f!==null;){if(o!==0){var C=f.pendingLanes;if(C===0)var y=0;else{var R=f.suspendedLanes,I=f.pingedLanes;y=(1<<31-Kn(42|o)+1)-1,y&=C&~(R&~I),y=y&201326677?y&201326677|1:y?y|2:0}y!==0&&(c=!0,tR(f,y))}else y=st,y=Rs(f,f===Tt?y:0),(y&3)===0||kr(f,y)||(c=!0,tR(f,y));f=f.next}while(c);gv=!1}}function z1(){tg=fv=!1;var o=0;Fa!==0&&(X1()&&(o=Fa),Fa=0);for(var l=sn(),c=null,f=eg;f!==null;){var C=f.next,y=JE(f,l);y===0?(f.next=null,c===null?eg=C:c.next=C,C===null&&(au=c)):(c=f,(o!==0||(y&3)!==0)&&(tg=!0)),f=C}yh(o)}function JE(o,l){for(var c=o.suspendedLanes,f=o.pingedLanes,C=o.expirationTimes,y=o.pendingLanes&-62914561;0<y;){var R=31-Kn(y),I=1<<R,G=C[R];G===-1?((I&c)===0||(I&f)!==0)&&(C[R]=Tl(I,l)):G<=l&&(o.expiredLanes|=I),y&=~I}if(l=Tt,c=st,c=Rs(o,o===l?c:0),f=o.callbackNode,c===0||o===l&&At===2||o.cancelPendingCommit!==null)return f!==null&&f!==null&&_t(f),o.callbackNode=null,o.callbackPriority=0;if((c&3)===0||kr(o,c)){if(l=c&-c,l===o.callbackPriority)return l;switch(f!==null&&_t(f),tf(c)){case 2:case 8:c=Qt;break;case 32:c=rt;break;case 268435456:c=ta;break;default:c=rt}return f=eR.bind(null,o),c=Rt(c,f),o.callbackPriority=l,o.callbackNode=c,l}return f!==null&&f!==null&&_t(f),o.callbackPriority=2,o.callbackNode=null,2}function eR(o,l){var c=o.callbackNode;if(ou()&&o.callbackNode!==c)return null;var f=st;return f=Rs(o,o===Tt?f:0),f===0?null:(HE(o,f,l),JE(o,sn()),o.callbackNode!=null&&o.callbackNode===c?eR.bind(null,o):null)}function tR(o,l){if(ou())return null;HE(o,l,!0)}function U1(o){J1(function(){(Nt&6)!==0?Rt(Yt,o):o()})}function pv(){return Fa===0&&(Fa=Ic()),Fa}function nR(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:di(""+o)}function sR(o,l){var c=l.ownerDocument.createElement("input");return c.name=l.name,c.value=l.value,o.id&&c.setAttribute("form",o.id),l.parentNode.insertBefore(c,l),o=new FormData(o),c.parentNode.removeChild(c),o}function W1(o,l,c,f,C){if(l==="submit"&&c&&c.stateNode===C){var y=nR((C[dn]||null).action),R=f.submitter;R&&(l=(l=R[dn]||null)?nR(l.formAction):R.getAttribute("formAction"),l!==null&&(y=l,R=null));var I=new Fl("action","action",null,f,C);o.push({event:I,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Fa!==0){var G=R?sR(C,R):new FormData(C);RC(c,{pending:!0,data:G,method:C.method,action:y},null,G)}}else typeof y=="function"&&(I.preventDefault(),G=R?sR(C,R):new FormData(C),RC(c,{pending:!0,data:G,method:C.method,action:y},y,G))},currentTarget:C}]})}}for(var mv=0;mv<YS.length;mv++){var Cv=YS[mv],j1=Cv.toLowerCase(),q1=Cv[0].toUpperCase()+Cv.slice(1);Qs(j1,"on"+q1)}Qs(WS,"onAnimationEnd"),Qs(jS,"onAnimationIteration"),Qs(qS,"onAnimationStart"),Qs("dblclick","onDoubleClick"),Qs("focusin","onFocus"),Qs("focusout","onBlur"),Qs(u1,"onTransitionRun"),Qs(c1,"onTransitionStart"),Qs(h1,"onTransitionCancel"),Qs($S,"onTransitionEnd"),as("onMouseEnter",["mouseout","mouseover"]),as("onMouseLeave",["mouseout","mouseover"]),as("onPointerEnter",["pointerout","pointerover"]),as("onPointerLeave",["pointerout","pointerover"]),gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gs("onBeforeInput",["compositionend","keypress","textInput","paste"]),gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wh));function iR(o,l){l=(l&4)!==0;for(var c=0;c<o.length;c++){var f=o[c],C=f.event;f=f.listeners;e:{var y=void 0;if(l)for(var R=f.length-1;0<=R;R--){var I=f[R],G=I.instance,q=I.currentTarget;if(I=I.listener,G!==y&&C.isPropagationStopped())break e;y=I,C.currentTarget=q;try{y(C)}catch(le){Hf(le)}C.currentTarget=null,y=G}else for(R=0;R<f.length;R++){if(I=f[R],G=I.instance,q=I.currentTarget,I=I.listener,G!==y&&C.isPropagationStopped())break e;y=I,C.currentTarget=q;try{y(C)}catch(le){Hf(le)}C.currentTarget=null,y=G}}}}function Xe(o,l){var c=l[sa];c===void 0&&(c=l[sa]=new Set);var f=o+"__bubble";c.has(f)||(rR(l,o,2,!1),c.add(f))}function vv(o,l,c){var f=0;l&&(f|=4),rR(c,o,f,l)}var ng="_reactListening"+Math.random().toString(36).slice(2);function yv(o){if(!o[ng]){o[ng]=!0,Fc.forEach(function(c){c!=="selectionchange"&&($1.has(c)||vv(c,!1,o),vv(c,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[ng]||(l[ng]=!0,vv("selectionchange",!1,l))}}function rR(o,l,c,f){switch(DR(l)){case 2:var C=yL;break;case 8:C=wL;break;default:C=Fv}c=C.bind(null,l,c,o),C=void 0,!Ds||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(C=!0),f?C!==void 0?o.addEventListener(l,c,{capture:!0,passive:C}):o.addEventListener(l,c,!0):C!==void 0?o.addEventListener(l,c,{passive:C}):o.addEventListener(l,c,!1)}function wv(o,l,c,f,C){var y=f;if((l&1)===0&&(l&2)===0&&f!==null)e:for(;;){if(f===null)return;var R=f.tag;if(R===3||R===4){var I=f.stateNode.containerInfo;if(I===C||I.nodeType===8&&I.parentNode===C)break;if(R===4)for(R=f.return;R!==null;){var G=R.tag;if((G===3||G===4)&&(G=R.stateNode.containerInfo,G===C||G.nodeType===8&&G.parentNode===C))return;R=R.return}for(;I!==null;){if(R=Ys(I),R===null)return;if(G=R.tag,G===5||G===6||G===26||G===27){f=y=R;continue e}I=I.parentNode}}f=f.return}af(function(){var q=y,le=Ml(c),fe=[];e:{var te=KS.get(o);if(te!==void 0){var ae=Fl,Ie=o;switch(o){case"keypress":if(gi(c)===0)break e;case"keydown":case"keyup":ae=Vl;break;case"focusin":Ie="focus",ae=Ol;break;case"focusout":Ie="blur",ae=Ol;break;case"beforeblur":case"afterblur":ae=Ol;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=_s;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=qm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=pf;break;case WS:case jS:case qS:ae=kl;break;case $S:ae=Cf;break;case"scroll":case"scrollend":ae=lf;break;case"wheel":ae=Bl;break;case"copy":case"cut":case"paste":ae=Nl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Wc;break;case"toggle":case"beforetoggle":ae=yf}var Be=(l&4)!==0,qt=!Be&&(o==="scroll"||o==="scrollend"),$=Be?te!==null?te+"Capture":null:te;Be=[];for(var j=q,X;j!==null;){var ce=j;if(X=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||X===null||$===null||(ce=la(j,$),ce!=null&&Be.push(bh(j,ce,X))),qt)break;j=j.return}0<Be.length&&(te=new ae(te,Ie,null,c,le),fe.push({event:te,listeners:Be}))}}if((l&7)===0){e:{if(te=o==="mouseover"||o==="pointerover",ae=o==="mouseout"||o==="pointerout",te&&c!==xs&&(Ie=c.relatedTarget||c.fromElement)&&(Ys(Ie)||Ie[Ui]))break e;if((ae||te)&&(te=le.window===le?le:(te=le.ownerDocument)?te.defaultView||te.parentWindow:window,ae?(Ie=c.relatedTarget||c.toElement,ae=q,Ie=Ie?Ys(Ie):null,Ie!==null&&(qt=re(Ie),Be=Ie.tag,Ie!==qt||Be!==5&&Be!==27&&Be!==6)&&(Ie=null)):(ae=null,Ie=q),ae!==Ie)){if(Be=_s,ce="onMouseLeave",$="onMouseEnter",j="mouse",(o==="pointerout"||o==="pointerover")&&(Be=Wc,ce="onPointerLeave",$="onPointerEnter",j="pointer"),qt=ae==null?te:zr(ae),X=Ie==null?te:zr(Ie),te=new Be(ce,j+"leave",ae,c,le),te.target=qt,te.relatedTarget=X,ce=null,Ys(le)===q&&(Be=new Be($,j+"enter",Ie,c,le),Be.target=X,Be.relatedTarget=qt,ce=Be),qt=ce,ae&&Ie)t:{for(Be=ae,$=Ie,j=0,X=Be;X;X=lu(X))j++;for(X=0,ce=$;ce;ce=lu(ce))X++;for(;0<j-X;)Be=lu(Be),j--;for(;0<X-j;)$=lu($),X--;for(;j--;){if(Be===$||$!==null&&Be===$.alternate)break t;Be=lu(Be),$=lu($)}Be=null}else Be=null;ae!==null&&oR(fe,te,ae,Be,!1),Ie!==null&&qt!==null&&oR(fe,qt,Ie,Be,!0)}}e:{if(te=q?zr(q):window,ae=te.nodeName&&te.nodeName.toLowerCase(),ae==="select"||ae==="input"&&te.type==="file")var De=PS;else if(gn(te))if(LS)De=r1;else{De=s1;var je=n1}else ae=te.nodeName,!ae||ae.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?q&&Nc(q.elementType)&&(De=PS):De=i1;if(De&&(De=De(o,q))){Xi(fe,De,c,le);break e}je&&je(o,te,q),o==="focusout"&&q&&te.type==="number"&&q.memoizedProps.value!=null&&Il(te,"number",te.value)}switch(je=q?zr(q):window,o){case"focusin":(gn(je)||je.contentEditable==="true")&&(Gl=je,Xm=q,$c=null);break;case"focusout":$c=Xm=Gl=null;break;case"mousedown":Zm=!0;break;case"contextmenu":case"mouseup":case"dragend":Zm=!1,zS(fe,c,le);break;case"selectionchange":if(l1)break;case"keydown":case"keyup":zS(fe,c,le)}var Pe;if(Ci)e:{switch(o){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else tt?se(o,c)&&(Oe="onCompositionEnd"):o==="keydown"&&c.keyCode===229&&(Oe="onCompositionStart");Oe&&(E&&c.locale!=="ko"&&(tt||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&tt&&(Pe=Bc()):(fi=le,Kr="value"in fi?fi.value:fi.textContent,tt=!0)),je=sg(q,Oe),0<je.length&&(Oe=new zc(Oe,o,null,c,le),fe.push({event:Oe,listeners:je}),Pe?Oe.data=Pe:(Pe=we(c),Pe!==null&&(Oe.data=Pe)))),(Pe=b?fn(o,c):nt(o,c))&&(Oe=sg(q,"onBeforeInput"),0<Oe.length&&(je=new zc("onBeforeInput","beforeinput",null,c,le),fe.push({event:je,listeners:Oe}),je.data=Pe)),W1(fe,o,q,c,le)}iR(fe,l)})}function bh(o,l,c){return{instance:o,listener:l,currentTarget:c}}function sg(o,l){for(var c=l+"Capture",f=[];o!==null;){var C=o,y=C.stateNode;C=C.tag,C!==5&&C!==26&&C!==27||y===null||(C=la(o,c),C!=null&&f.unshift(bh(o,C,y)),C=la(o,l),C!=null&&f.push(bh(o,C,y))),o=o.return}return f}function lu(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function oR(o,l,c,f,C){for(var y=l._reactName,R=[];c!==null&&c!==f;){var I=c,G=I.alternate,q=I.stateNode;if(I=I.tag,G!==null&&G===f)break;I!==5&&I!==26&&I!==27||q===null||(G=q,C?(q=la(c,y),q!=null&&R.unshift(bh(c,q,G))):C||(q=la(c,y),q!=null&&R.push(bh(c,q,G)))),c=c.return}R.length!==0&&o.push({event:l,listeners:R})}var K1=/\r\n?/g,Y1=/\u0000|\uFFFD/g;function aR(o){return(typeof o=="string"?o:""+o).replace(K1,`
`).replace(Y1,"")}function lR(o,l){return l=aR(l),aR(o)===l}function ig(){}function wt(o,l,c,f,C,y){switch(c){case"children":typeof f=="string"?l==="body"||l==="textarea"&&f===""||As(o,f):(typeof f=="number"||typeof f=="bigint")&&l!=="body"&&As(o,""+f);break;case"className":jr(o,"class",f);break;case"tabIndex":jr(o,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":jr(o,c,f);break;case"style":of(o,f,y);break;case"data":if(l!=="object"){jr(o,"data",f);break}case"src":case"href":if(f===""&&(l!=="a"||c!=="href")){o.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){o.removeAttribute(c);break}f=di(""+f),o.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){o.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(l!=="input"&&wt(o,l,"name",C.name,C,null),wt(o,l,"formEncType",C.formEncType,C,null),wt(o,l,"formMethod",C.formMethod,C,null),wt(o,l,"formTarget",C.formTarget,C,null)):(wt(o,l,"encType",C.encType,C,null),wt(o,l,"method",C.method,C,null),wt(o,l,"target",C.target,C,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){o.removeAttribute(c);break}f=di(""+f),o.setAttribute(c,f);break;case"onClick":f!=null&&(o.onclick=ig);break;case"onScroll":f!=null&&Xe("scroll",o);break;case"onScrollEnd":f!=null&&Xe("scrollend",o);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(c=f.__html,c!=null){if(C.children!=null)throw Error(s(60));o.innerHTML=c}}break;case"multiple":o.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":o.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){o.removeAttribute("xlink:href");break}c=di(""+f),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(c,""+f):o.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(c,""):o.removeAttribute(c);break;case"capture":case"download":f===!0?o.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(c,f):o.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?o.setAttribute(c,f):o.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?o.removeAttribute(c):o.setAttribute(c,f);break;case"popover":Xe("beforetoggle",o),Xe("toggle",o),Wr(o,"popover",f);break;case"xlinkActuate":Ts(o,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Ts(o,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Ts(o,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Ts(o,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Ts(o,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Ts(o,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Ts(o,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Ts(o,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Ts(o,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Wr(o,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Wm.get(c)||c,Wr(o,c,f))}}function bv(o,l,c,f,C,y){switch(c){case"style":of(o,f,y);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(c=f.__html,c!=null){if(C.children!=null)throw Error(s(60));o.innerHTML=c}}break;case"children":typeof f=="string"?As(o,f):(typeof f=="number"||typeof f=="bigint")&&As(o,""+f);break;case"onScroll":f!=null&&Xe("scroll",o);break;case"onScrollEnd":f!=null&&Xe("scrollend",o);break;case"onClick":f!=null&&(o.onclick=ig);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dl.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(C=c.endsWith("Capture"),l=c.slice(2,C?c.length-7:void 0),y=o[dn]||null,y=y!=null?y[c]:null,typeof y=="function"&&o.removeEventListener(l,y,C),typeof f=="function")){typeof y!="function"&&y!==null&&(c in o?o[c]=null:o.hasAttribute(c)&&o.removeAttribute(c)),o.addEventListener(l,f,C);break e}c in o?o[c]=f:f===!0?o.setAttribute(c,""):Wr(o,c,f)}}}function Fn(o,l,c){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",o),Xe("load",o);var f=!1,C=!1,y;for(y in c)if(c.hasOwnProperty(y)){var R=c[y];if(R!=null)switch(y){case"src":f=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,l));default:wt(o,l,y,R,c,null)}}C&&wt(o,l,"srcSet",c.srcSet,c,null),f&&wt(o,l,"src",c.src,c,null);return;case"input":Xe("invalid",o);var I=y=R=C=null,G=null,q=null;for(f in c)if(c.hasOwnProperty(f)){var le=c[f];if(le!=null)switch(f){case"name":C=le;break;case"type":R=le;break;case"checked":G=le;break;case"defaultChecked":q=le;break;case"value":y=le;break;case"defaultValue":I=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(s(137,l));break;default:wt(o,l,f,le,c,null)}}oa(o,y,I,G,q,R,C,!1),ra(o);return;case"select":Xe("invalid",o),f=R=y=null;for(C in c)if(c.hasOwnProperty(C)&&(I=c[C],I!=null))switch(C){case"value":y=I;break;case"defaultValue":R=I;break;case"multiple":f=I;default:wt(o,l,C,I,c,null)}l=y,c=R,o.multiple=!!f,l!=null?lt(o,!!f,l,!1):c!=null&&lt(o,!!f,c,!0);return;case"textarea":Xe("invalid",o),y=C=f=null;for(R in c)if(c.hasOwnProperty(R)&&(I=c[R],I!=null))switch(R){case"value":f=I;break;case"defaultValue":C=I;break;case"children":y=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(91));break;default:wt(o,l,R,I,c,null)}$r(o,f,C,y),ra(o);return;case"option":for(G in c)if(c.hasOwnProperty(G)&&(f=c[G],f!=null))switch(G){case"selected":o.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:wt(o,l,G,f,c,null)}return;case"dialog":Xe("cancel",o),Xe("close",o);break;case"iframe":case"object":Xe("load",o);break;case"video":case"audio":for(f=0;f<wh.length;f++)Xe(wh[f],o);break;case"image":Xe("error",o),Xe("load",o);break;case"details":Xe("toggle",o);break;case"embed":case"source":case"link":Xe("error",o),Xe("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in c)if(c.hasOwnProperty(q)&&(f=c[q],f!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,l));default:wt(o,l,q,f,c,null)}return;default:if(Nc(l)){for(le in c)c.hasOwnProperty(le)&&(f=c[le],f!==void 0&&bv(o,l,le,f,c,void 0));return}}for(I in c)c.hasOwnProperty(I)&&(f=c[I],f!=null&&wt(o,l,I,f,c,null))}function Q1(o,l,c,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,y=null,R=null,I=null,G=null,q=null,le=null;for(ae in c){var fe=c[ae];if(c.hasOwnProperty(ae)&&fe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":G=fe;default:f.hasOwnProperty(ae)||wt(o,l,ae,null,f,fe)}}for(var te in f){var ae=f[te];if(fe=c[te],f.hasOwnProperty(te)&&(ae!=null||fe!=null))switch(te){case"type":y=ae;break;case"name":C=ae;break;case"checked":q=ae;break;case"defaultChecked":le=ae;break;case"value":R=ae;break;case"defaultValue":I=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,l));break;default:ae!==fe&&wt(o,l,te,ae,f,fe)}}qr(o,R,I,G,q,le,y,C);return;case"select":ae=R=I=te=null;for(y in c)if(G=c[y],c.hasOwnProperty(y)&&G!=null)switch(y){case"value":break;case"multiple":ae=G;default:f.hasOwnProperty(y)||wt(o,l,y,null,f,G)}for(C in f)if(y=f[C],G=c[C],f.hasOwnProperty(C)&&(y!=null||G!=null))switch(C){case"value":te=y;break;case"defaultValue":I=y;break;case"multiple":R=y;default:y!==G&&wt(o,l,C,y,f,G)}l=I,c=R,f=ae,te!=null?lt(o,!!c,te,!1):!!f!=!!c&&(l!=null?lt(o,!!c,l,!0):lt(o,!!c,c?[]:"",!1));return;case"textarea":ae=te=null;for(I in c)if(C=c[I],c.hasOwnProperty(I)&&C!=null&&!f.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:wt(o,l,I,null,f,C)}for(R in f)if(C=f[R],y=c[R],f.hasOwnProperty(R)&&(C!=null||y!=null))switch(R){case"value":te=C;break;case"defaultValue":ae=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:C!==y&&wt(o,l,R,C,f,y)}aa(o,te,ae);return;case"option":for(var Ie in c)if(te=c[Ie],c.hasOwnProperty(Ie)&&te!=null&&!f.hasOwnProperty(Ie))switch(Ie){case"selected":o.selected=!1;break;default:wt(o,l,Ie,null,f,te)}for(G in f)if(te=f[G],ae=c[G],f.hasOwnProperty(G)&&te!==ae&&(te!=null||ae!=null))switch(G){case"selected":o.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:wt(o,l,G,te,f,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in c)te=c[Be],c.hasOwnProperty(Be)&&te!=null&&!f.hasOwnProperty(Be)&&wt(o,l,Be,null,f,te);for(q in f)if(te=f[q],ae=c[q],f.hasOwnProperty(q)&&te!==ae&&(te!=null||ae!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,l));break;default:wt(o,l,q,te,f,ae)}return;default:if(Nc(l)){for(var qt in c)te=c[qt],c.hasOwnProperty(qt)&&te!==void 0&&!f.hasOwnProperty(qt)&&bv(o,l,qt,void 0,f,te);for(le in f)te=f[le],ae=c[le],!f.hasOwnProperty(le)||te===ae||te===void 0&&ae===void 0||bv(o,l,le,te,f,ae);return}}for(var $ in c)te=c[$],c.hasOwnProperty($)&&te!=null&&!f.hasOwnProperty($)&&wt(o,l,$,null,f,te);for(fe in f)te=f[fe],ae=c[fe],!f.hasOwnProperty(fe)||te===ae||te==null&&ae==null||wt(o,l,fe,te,f,ae)}var Sv=null,Ev=null;function rg(o){return o.nodeType===9?o:o.ownerDocument}function uR(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cR(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function Rv(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Tv=null;function X1(){var o=window.event;return o&&o.type==="popstate"?o===Tv?!1:(Tv=o,!0):(Tv=null,!1)}var hR=typeof setTimeout=="function"?setTimeout:void 0,Z1=typeof clearTimeout=="function"?clearTimeout:void 0,dR=typeof Promise=="function"?Promise:void 0,J1=typeof queueMicrotask=="function"?queueMicrotask:typeof dR<"u"?function(o){return dR.resolve(null).then(o).catch(eL)}:hR;function eL(o){setTimeout(function(){throw o})}function Av(o,l){var c=l,f=0;do{var C=c.nextSibling;if(o.removeChild(c),C&&C.nodeType===8)if(c=C.data,c==="/$"){if(f===0){o.removeChild(C),_h(l);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=C}while(c);_h(l)}function xv(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var c=l;switch(l=l.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":xv(c),ia(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}o.removeChild(c)}}function tL(o,l,c,f){for(;o.nodeType===1;){var C=c;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!f&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(f){if(!o[Hr])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(y=o.getAttribute("rel"),y==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(y!==C.rel||o.getAttribute("href")!==(C.href==null?null:C.href)||o.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||o.getAttribute("title")!==(C.title==null?null:C.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(y=o.getAttribute("src"),(y!==(C.src==null?null:C.src)||o.getAttribute("type")!==(C.type==null?null:C.type)||o.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&y&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var y=C.name==null?null:""+C.name;if(C.type==="hidden"&&o.getAttribute("name")===y)return o}else return o;if(o=Js(o.nextSibling),o===null)break}return null}function nL(o,l,c){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=Js(o.nextSibling),o===null))return null;return o}function Js(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return o}function fR(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var c=o.data;if(c==="$"||c==="$!"||c==="$?"){if(l===0)return o;l--}else c==="/$"&&l++}o=o.previousSibling}return null}function gR(o,l,c){switch(l=rg(c),o){case"html":if(o=l.documentElement,!o)throw Error(s(452));return o;case"head":if(o=l.head,!o)throw Error(s(453));return o;case"body":if(o=l.body,!o)throw Error(s(454));return o;default:throw Error(s(451))}}var Bs=new Map,pR=new Set;function og(o){return typeof o.getRootNode=="function"?o.getRootNode():o.ownerDocument}var dr=ue.d;ue.d={f:sL,r:iL,D:rL,C:oL,L:aL,m:lL,X:cL,S:uL,M:hL};function sL(){var o=dr.f(),l=Zf();return o||l}function iL(o){var l=Wi(o);l!==null&&l.tag===5&&l.type==="form"?z0(l):dr.r(o)}var uu=typeof document>"u"?null:document;function mR(o,l,c){var f=uu;if(f&&typeof l=="string"&&l){var C=Ut(l);C='link[rel="'+o+'"][href="'+C+'"]',typeof c=="string"&&(C+='[crossorigin="'+c+'"]'),pR.has(C)||(pR.add(C),o={rel:o,crossOrigin:c,href:l},f.querySelector(C)===null&&(l=f.createElement("link"),Fn(l,"link",o),Ot(l),f.head.appendChild(l)))}}function rL(o){dr.D(o),mR("dns-prefetch",o,null)}function oL(o,l){dr.C(o,l),mR("preconnect",o,l)}function aL(o,l,c){dr.L(o,l,c);var f=uu;if(f&&o&&l){var C='link[rel="preload"][as="'+Ut(l)+'"]';l==="image"&&c&&c.imageSrcSet?(C+='[imagesrcset="'+Ut(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(C+='[imagesizes="'+Ut(c.imageSizes)+'"]')):C+='[href="'+Ut(o)+'"]';var y=C;switch(l){case"style":y=cu(o);break;case"script":y=hu(o)}Bs.has(y)||(o=L({rel:"preload",href:l==="image"&&c&&c.imageSrcSet?void 0:o,as:l},c),Bs.set(y,o),f.querySelector(C)!==null||l==="style"&&f.querySelector(Sh(y))||l==="script"&&f.querySelector(Eh(y))||(l=f.createElement("link"),Fn(l,"link",o),Ot(l),f.head.appendChild(l)))}}function lL(o,l){dr.m(o,l);var c=uu;if(c&&o){var f=l&&typeof l.as=="string"?l.as:"script",C='link[rel="modulepreload"][as="'+Ut(f)+'"][href="'+Ut(o)+'"]',y=C;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=hu(o)}if(!Bs.has(y)&&(o=L({rel:"modulepreload",href:o},l),Bs.set(y,o),c.querySelector(C)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Eh(y)))return}f=c.createElement("link"),Fn(f,"link",o),Ot(f),c.head.appendChild(f)}}}function uL(o,l,c){dr.S(o,l,c);var f=uu;if(f&&o){var C=Ur(f).hoistableStyles,y=cu(o);l=l||"default";var R=C.get(y);if(!R){var I={loading:0,preload:null};if(R=f.querySelector(Sh(y)))I.loading=5;else{o=L({rel:"stylesheet",href:o,"data-precedence":l},c),(c=Bs.get(y))&&Dv(o,c);var G=R=f.createElement("link");Ot(G),Fn(G,"link",o),G._p=new Promise(function(q,le){G.onload=q,G.onerror=le}),G.addEventListener("load",function(){I.loading|=1}),G.addEventListener("error",function(){I.loading|=2}),I.loading|=4,ag(R,l,f)}R={type:"stylesheet",instance:R,count:1,state:I},C.set(y,R)}}}function cL(o,l){dr.X(o,l);var c=uu;if(c&&o){var f=Ur(c).hoistableScripts,C=hu(o),y=f.get(C);y||(y=c.querySelector(Eh(C)),y||(o=L({src:o,async:!0},l),(l=Bs.get(C))&&_v(o,l),y=c.createElement("script"),Ot(y),Fn(y,"link",o),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(C,y))}}function hL(o,l){dr.M(o,l);var c=uu;if(c&&o){var f=Ur(c).hoistableScripts,C=hu(o),y=f.get(C);y||(y=c.querySelector(Eh(C)),y||(o=L({src:o,async:!0,type:"module"},l),(l=Bs.get(C))&&_v(o,l),y=c.createElement("script"),Ot(y),Fn(y,"link",o),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(C,y))}}function CR(o,l,c,f){var C=(C=qe.current)?og(C):null;if(!C)throw Error(s(446));switch(o){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(l=cu(c.href),c=Ur(C).hoistableStyles,f=c.get(l),f||(f={type:"style",instance:null,count:0,state:null},c.set(l,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){o=cu(c.href);var y=Ur(C).hoistableStyles,R=y.get(o);if(R||(C=C.ownerDocument||C,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(o,R),(y=C.querySelector(Sh(o)))&&!y._p&&(R.instance=y,R.state.loading=5),Bs.has(o)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Bs.set(o,c),y||dL(C,o,c,R.state))),l&&f===null)throw Error(s(528,""));return R}if(l&&f!==null)throw Error(s(529,""));return null;case"script":return l=c.async,c=c.src,typeof c=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=hu(c),c=Ur(C).hoistableScripts,f=c.get(l),f||(f={type:"script",instance:null,count:0,state:null},c.set(l,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,o))}}function cu(o){return'href="'+Ut(o)+'"'}function Sh(o){return'link[rel="stylesheet"]['+o+"]"}function vR(o){return L({},o,{"data-precedence":o.precedence,precedence:null})}function dL(o,l,c,f){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?f.loading=1:(l=o.createElement("link"),f.preload=l,l.addEventListener("load",function(){return f.loading|=1}),l.addEventListener("error",function(){return f.loading|=2}),Fn(l,"link",c),Ot(l),o.head.appendChild(l))}function hu(o){return'[src="'+Ut(o)+'"]'}function Eh(o){return"script[async]"+o}function yR(o,l,c){if(l.count++,l.instance===null)switch(l.type){case"style":var f=o.querySelector('style[data-href~="'+Ut(c.href)+'"]');if(f)return l.instance=f,Ot(f),f;var C=L({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(o.ownerDocument||o).createElement("style"),Ot(f),Fn(f,"style",C),ag(f,c.precedence,o),l.instance=f;case"stylesheet":C=cu(c.href);var y=o.querySelector(Sh(C));if(y)return l.state.loading|=4,l.instance=y,Ot(y),y;f=vR(c),(C=Bs.get(C))&&Dv(f,C),y=(o.ownerDocument||o).createElement("link"),Ot(y);var R=y;return R._p=new Promise(function(I,G){R.onload=I,R.onerror=G}),Fn(y,"link",f),l.state.loading|=4,ag(y,c.precedence,o),l.instance=y;case"script":return y=hu(c.src),(C=o.querySelector(Eh(y)))?(l.instance=C,Ot(C),C):(f=c,(C=Bs.get(y))&&(f=L({},c),_v(f,C)),o=o.ownerDocument||o,C=o.createElement("script"),Ot(C),Fn(C,"link",f),o.head.appendChild(C),l.instance=C);case"void":return null;default:throw Error(s(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(f=l.instance,l.state.loading|=4,ag(f,c.precedence,o));return l.instance}function ag(o,l,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=f.length?f[f.length-1]:null,y=C,R=0;R<f.length;R++){var I=f[R];if(I.dataset.precedence===l)y=I;else if(y!==C)break}y?y.parentNode.insertBefore(o,y.nextSibling):(l=c.nodeType===9?c.head:c,l.insertBefore(o,l.firstChild))}function Dv(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function _v(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var lg=null;function wR(o,l,c){if(lg===null){var f=new Map,C=lg=new Map;C.set(c,f)}else C=lg,f=C.get(c),f||(f=new Map,C.set(c,f));if(f.has(o))return f;for(f.set(o,null),c=c.getElementsByTagName(o),C=0;C<c.length;C++){var y=c[C];if(!(y[Hr]||y[wn]||o==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var R=y.getAttribute(l)||"";R=o+R;var I=f.get(R);I?I.push(y):f.set(R,[y])}}return f}function bR(o,l,c){o=o.ownerDocument||o,o.head.insertBefore(c,l==="title"?o.querySelector("head > title"):null)}function fL(o,l,c){if(c===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function SR(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Rh=null;function gL(){}function pL(o,l,c){if(Rh===null)throw Error(s(475));var f=Rh;if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var C=cu(c.href),y=o.querySelector(Sh(C));if(y){o=y._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(f.count++,f=ug.bind(f),o.then(f,f)),l.state.loading|=4,l.instance=y,Ot(y);return}y=o.ownerDocument||o,c=vR(c),(C=Bs.get(C))&&Dv(c,C),y=y.createElement("link"),Ot(y);var R=y;R._p=new Promise(function(I,G){R.onload=I,R.onerror=G}),Fn(y,"link",c),l.instance=y}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(f.count++,l=ug.bind(f),o.addEventListener("load",l),o.addEventListener("error",l))}}function mL(){if(Rh===null)throw Error(s(475));var o=Rh;return o.stylesheets&&o.count===0&&Iv(o,o.stylesheets),0<o.count?function(l){var c=setTimeout(function(){if(o.stylesheets&&Iv(o,o.stylesheets),o.unsuspend){var f=o.unsuspend;o.unsuspend=null,f()}},6e4);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(c)}}:null}function ug(){if(this.count--,this.count===0){if(this.stylesheets)Iv(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var cg=null;function Iv(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,cg=new Map,l.forEach(CL,o),cg=null,ug.call(o))}function CL(o,l){if(!(l.state.loading&4)){var c=cg.get(o);if(c)var f=c.get(null);else{c=new Map,cg.set(o,c);for(var C=o.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<C.length;y++){var R=C[y];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(c.set(R.dataset.precedence,R),f=R)}f&&c.set(null,f)}C=l.instance,R=C.getAttribute("data-precedence"),y=c.get(R)||f,y===f&&c.set(null,C),c.set(R,C),this.count++,f=ug.bind(this),C.addEventListener("load",f),C.addEventListener("error",f),y?y.parentNode.insertBefore(C,y.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(C,o.firstChild)),l.state.loading|=4}}var Th={$$typeof:w,Provider:null,Consumer:null,_currentValue:xe,_currentValue2:xe,_threadCount:0};function vL(o,l,c,f,C,y,R,I){this.tag=1,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Al(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Al(0),this.hiddenUpdates=Al(null),this.identifierPrefix=f,this.onUncaughtError=C,this.onCaughtError=y,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function ER(o,l,c,f,C,y,R,I,G,q,le,fe){return o=new vL(o,l,c,R,I,G,q,fe),l=1,y===!0&&(l|=24),y=Ns(3,null,null,l),o.current=y,y.stateNode=o,l=lC(),l.refCount++,o.pooledCache=l,l.refCount++,y.memoizedState={element:f,isDehydrated:c,cache:l},zC(y),o}function RR(o){return o?(o=Ul,o):Ul}function TR(o,l,c,f,C,y){C=RR(C),f.context===null?f.context=C:f.pendingContext=C,f=no(l),f.payload={element:c},y=y===void 0?null:y,y!==null&&(f.callback=y),c=so(o,f,l),c!==null&&(Zn(c,o,l),lh(c,o,l))}function AR(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<l?c:l}}function Mv(o,l){AR(o,l),(o=o.alternate)&&AR(o,l)}function xR(o){if(o.tag===13){var l=Yr(o,67108864);l!==null&&Zn(l,o,67108864),Mv(o,67108864)}}var hg=!0;function yL(o,l,c,f){var C=x.T;x.T=null;var y=ue.p;try{ue.p=2,Fv(o,l,c,f)}finally{ue.p=y,x.T=C}}function wL(o,l,c,f){var C=x.T;x.T=null;var y=ue.p;try{ue.p=8,Fv(o,l,c,f)}finally{ue.p=y,x.T=C}}function Fv(o,l,c,f){if(hg){var C=Pv(f);if(C===null)wv(o,l,f,dg,c),_R(o,f);else if(SL(C,o,l,c,f))f.stopPropagation();else if(_R(o,f),l&4&&-1<bL.indexOf(o)){for(;C!==null;){var y=Wi(C);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var R=Ks(y.pendingLanes);if(R!==0){var I=y;for(I.pendingLanes|=2,I.entangledLanes|=2;R;){var G=1<<31-Kn(R);I.entanglements[1]|=G,R&=~G}Ei(y),(Nt&6)===0&&(Yf=sn()+500,yh(0))}}break;case 13:I=Yr(y,2),I!==null&&Zn(I,y,2),Zf(),Mv(y,2)}if(y=Pv(f),y===null&&wv(o,l,f,dg,c),y===C)break;C=y}C!==null&&f.stopPropagation()}else wv(o,l,f,null,c)}}function Pv(o){return o=Ml(o),Lv(o)}var dg=null;function Lv(o){if(dg=null,o=Ys(o),o!==null){var l=re(o);if(l===null)o=null;else{var c=l.tag;if(c===13){if(o=Re(l),o!==null)return o;o=null}else if(c===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return dg=o,null}function DR(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ea()){case Yt:return 2;case Qt:return 8;case rt:case yn:return 32;case ta:return 268435456;default:return 32}default:return 32}}var Ov=!1,co=null,ho=null,fo=null,Ah=new Map,xh=new Map,go=[],bL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _R(o,l){switch(o){case"focusin":case"focusout":co=null;break;case"dragenter":case"dragleave":ho=null;break;case"mouseover":case"mouseout":fo=null;break;case"pointerover":case"pointerout":Ah.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":xh.delete(l.pointerId)}}function Dh(o,l,c,f,C,y){return o===null||o.nativeEvent!==y?(o={blockedOn:l,domEventName:c,eventSystemFlags:f,nativeEvent:y,targetContainers:[C]},l!==null&&(l=Wi(l),l!==null&&xR(l)),o):(o.eventSystemFlags|=f,l=o.targetContainers,C!==null&&l.indexOf(C)===-1&&l.push(C),o)}function SL(o,l,c,f,C){switch(l){case"focusin":return co=Dh(co,o,l,c,f,C),!0;case"dragenter":return ho=Dh(ho,o,l,c,f,C),!0;case"mouseover":return fo=Dh(fo,o,l,c,f,C),!0;case"pointerover":var y=C.pointerId;return Ah.set(y,Dh(Ah.get(y)||null,o,l,c,f,C)),!0;case"gotpointercapture":return y=C.pointerId,xh.set(y,Dh(xh.get(y)||null,o,l,c,f,C)),!0}return!1}function IR(o){var l=Ys(o.target);if(l!==null){var c=re(l);if(c!==null){if(l=c.tag,l===13){if(l=Re(c),l!==null){o.blockedOn=l,Gr(o.priority,function(){if(c.tag===13){var f=ws(),C=Yr(c,f);C!==null&&Zn(C,c,f),Mv(c,f)}});return}}else if(l===3&&c.stateNode.current.memoizedState.isDehydrated){o.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}o.blockedOn=null}function fg(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var c=Pv(o.nativeEvent);if(c===null){c=o.nativeEvent;var f=new c.constructor(c.type,c);xs=f,c.target.dispatchEvent(f),xs=null}else return l=Wi(c),l!==null&&xR(l),o.blockedOn=c,!1;l.shift()}return!0}function MR(o,l,c){fg(o)&&c.delete(l)}function EL(){Ov=!1,co!==null&&fg(co)&&(co=null),ho!==null&&fg(ho)&&(ho=null),fo!==null&&fg(fo)&&(fo=null),Ah.forEach(MR),xh.forEach(MR)}function gg(o,l){o.blockedOn===l&&(o.blockedOn=null,Ov||(Ov=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,EL)))}var pg=null;function FR(o){pg!==o&&(pg=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){pg===o&&(pg=null);for(var l=0;l<o.length;l+=3){var c=o[l],f=o[l+1],C=o[l+2];if(typeof f!="function"){if(Lv(f||c)===null)continue;break}var y=Wi(c);y!==null&&(o.splice(l,3),l-=3,RC(y,{pending:!0,data:C,method:c.method,action:f},f,C))}}))}function _h(o){function l(G){return gg(G,o)}co!==null&&gg(co,o),ho!==null&&gg(ho,o),fo!==null&&gg(fo,o),Ah.forEach(l),xh.forEach(l);for(var c=0;c<go.length;c++){var f=go[c];f.blockedOn===o&&(f.blockedOn=null)}for(;0<go.length&&(c=go[0],c.blockedOn===null);)IR(c),c.blockedOn===null&&go.shift();if(c=(o.ownerDocument||o).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var C=c[f],y=c[f+1],R=C[dn]||null;if(typeof y=="function")R||FR(c);else if(R){var I=null;if(y&&y.hasAttribute("formAction")){if(C=y,R=y[dn]||null)I=R.formAction;else if(Lv(C)!==null)continue}else I=R.action;typeof I=="function"?c[f+1]=I:(c.splice(f,3),f-=3),FR(c)}}}function kv(o){this._internalRoot=o}mg.prototype.render=kv.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(s(409));var c=l.current,f=ws();TR(c,f,o,l,null,null)},mg.prototype.unmount=kv.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;o.tag===0&&ou(),TR(o.current,2,null,o,null,null),Zf(),l[Ui]=null}};function mg(o){this._internalRoot=o}mg.prototype.unstable_scheduleHydration=function(o){if(o){var l=nf();o={blockedOn:null,target:o,priority:l};for(var c=0;c<go.length&&l!==0&&l<go[c].priority;c++);go.splice(c,0,o),c===0&&IR(o)}};var PR=t.version;if(PR!=="19.0.0")throw Error(s(527,PR,"19.0.0"));ue.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(s(188)):(o=Object.keys(o).join(","),Error(s(268,o)));return o=W(l),o=o!==null?ee(o):null,o=o===null?null:o.stateNode,o};var RL={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:x,findFiberByHostInstance:Ys,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cg.isDisabled&&Cg.supportsFiber)try{Lr=Cg.inject(RL),Nn=Cg}catch{}}return Mh.createRoot=function(o,l){if(!i(o))throw Error(s(299));var c=!1,f="",C=Q0,y=X0,R=Z0,I=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(C=l.onUncaughtError),l.onCaughtError!==void 0&&(y=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(I=l.unstable_transitionCallbacks)),l=ER(o,1,!1,null,null,c,f,C,y,R,I,null),o[Ui]=l.current,yv(o.nodeType===8?o.parentNode:o),new kv(l)},Mh.hydrateRoot=function(o,l,c){if(!i(o))throw Error(s(299));var f=!1,C="",y=Q0,R=X0,I=Z0,G=null,q=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(C=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(R=c.onCaughtError),c.onRecoverableError!==void 0&&(I=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(G=c.unstable_transitionCallbacks),c.formState!==void 0&&(q=c.formState)),l=ER(o,1,!0,l,c??null,f,C,y,R,I,G,q),l.context=RR(null),c=l.current,f=ws(),C=no(f),C.callback=null,so(c,C,f),l.current.lanes=f,Xt(l,f),Ei(l),o[Ui]=l.current,yv(o),new mg(l)},Mh.version="19.0.0",Mh}var UR;function PL(){if(UR)return Bv.exports;UR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Bv.exports=FL(),Bv.exports}var LL=PL();function OL({items:e,handleSearch:t,searchTXT:n}){return Z.jsx("input",{className:"finder",autoComplete:"off",placeholder:"BUSCAR SOCIO POR APELLIDO PATERNO...",onChange:s=>t(s,e),type:"search",value:n.toUpperCase()})}function kL({editMode:e,msg:t,error:n,setMsg:s,setFinder:i,setError:r,setFinderMsg:a,setState:u,state:h,setEdit:d,setSearchTXT:g,postSocio:m,setGetDB:v,getDB:w,updateByIdDB:S,items:T}){const A=new Intl.DateTimeFormat("es-MX",{dateStyle:"long"}),O=(W=0)=>A.format(new Date(W)),V=W=>{const{name:ee,value:oe}=W.target;u({...h,[ee]:oe})},H=W=>{const{name:ee,value:oe}=W.target;let ue=Date.parse(oe)+252e5;u({...h,[ee]:ue})},{nombreDelSocio:z,apellidoPaterno:U,apellidoMaterno:K,curp:k,domicilioDelSocio:D,clase:x,calibre:L,marca:M,modelo:B,matricula:F,folio:ye,armasCortas:ve,armasLargas:ie,fechaDeInscripcion:Ce}=h,re=W=>{W.preventDefault(),e?(d(null),s("Editado: "+h.nombreDelSocio),S(h.idDB,h)):(h.toggle=!0,h.armasArr=[],s("Nuevo Socio Aadido"),m(h)),i(null),r(!1),u({nombreDelSocio:"",apellidoPaterno:"",apellidoMaterno:"",curp:"",domicilioDelSocio:"",clase:"",calibre:"",marca:"",modelo:"",matricula:"",folio:"",armasCortas:"",armasLargas:"",fechaDeInscripcion:0}),g(""),a(null),setTimeout(()=>{v(!w)},700)},Re=()=>{r(!1),s("BASE DE DATOS SOCIOS")},N=()=>{r(!1),s("BASE DE DATOS SOCIOS"),window.confirm("Do you want to go out?")&&(localStorage.removeItem("userSocio"),location.reload())};return Z.jsxs("form",{onSubmit:re,className:"formStyle0",children:[Z.jsxs("div",{className:"formStyle1",children:[Z.jsx("label",{className:e?"":"dn",children:"REG Domicilio Del Club"}),Z.jsx("input",{readOnly:!0,type:"text",autoComplete:"off",placeholder:"624 - San Luis Potosi No. 158, Col. San Benito, C. P. 83190, Hermosillo, Son.",name:"domicilioDelClub"}),Z.jsx("label",{className:e?"":"dn",children:"Nombre Del Socio"}),Z.jsx("input",{type:"text",autoComplete:"off",placeholder:"Nombre Del Socio",name:"nombreDelSocio",onChange:V,value:z.toUpperCase(),required:!0}),Z.jsx("label",{className:e?"":"dn",children:"Apellido Paterno"}),Z.jsx("input",{type:"text",autoComplete:"off",placeholder:"Apellido Paterno",name:"apellidoPaterno",onChange:V,value:U.toUpperCase(),required:!0}),Z.jsx("label",{className:e?"":"dn",children:"Apellido Materno"}),Z.jsx("input",{type:"text",autoComplete:"off",placeholder:"Apellido Materno",name:"apellidoMaterno",onChange:V,value:K.toUpperCase(),required:!0}),Z.jsx("label",{className:e?"":"dn",children:"CURP"}),Z.jsx("input",{type:"text",autoComplete:"off",placeholder:"CURP",name:"curp",onChange:V,value:k,required:!0}),Z.jsx("label",{className:e?"":"dn",children:"Domicilio Del Socio"}),Z.jsx("input",{type:"text",autoComplete:"off",placeholder:"Domicilio Del Socio",name:"domicilioDelSocio",onChange:V,value:D,required:!0}),Z.jsx("label",{className:e?"":"dn",children:"Fecha de Inscripcin"}),Z.jsx("input",{type:"date",autoComplete:"off",placeholder:"Fecha de Inscripcin",name:"fechaDeInscripcion",onChange:W=>H(W)}),Z.jsx("label",{className:e?"":"dn",children:"Fecha De Inscripcion"}),Z.jsx("input",{className:"fechaDeInscripcion",readOnly:!0,type:"text",value:Ce===0?"Fecha de Inscripcin":`Inscripcin: ${O(Ce)}`})]}),Z.jsxs("div",{className:"formStyle2",children:[Z.jsx("label",{className:e?"":"dn",children:"Clase"}),Z.jsx("input",{type:"text",autoComplete:"off",placeholder:"Clase",name:"clase",onChange:V,value:x}),Z.jsx("label",{className:e?"":"dn",children:"Calibre"}),Z.jsx("input",{type:"text",autoComplete:"off",placeholder:"Calibre",name:"calibre",onChange:V,value:L}),Z.jsx("label",{className:e?"":"dn",children:"Marca"}),Z.jsx("input",{type:"text",autoComplete:"off",placeholder:"Marca",name:"marca",onChange:V,value:M}),Z.jsx("label",{className:e?"":"dn",children:"Modelo"}),Z.jsx("input",{type:"text",autoComplete:"off",placeholder:"Modelo",name:"modelo",onChange:V,value:B}),Z.jsx("label",{className:e?"":"dn",children:"Matricula"}),Z.jsx("input",{type:"text",autoComplete:"off",placeholder:"Matricula",name:"matricula",onChange:V,value:F}),Z.jsx("label",{className:e?"":"dn",children:"Folio"}),Z.jsx("input",{type:"text",autoComplete:"off",placeholder:"Folio",name:"folio",onChange:V,value:ye}),Z.jsx("label",{className:e?"":"dn",children:"Arma Corta"}),Z.jsx("input",{min:"0",step:"1",max:"1",type:"number",autoComplete:"off",placeholder:"Arma Corta",name:"armasCortas",onChange:V,value:ve}),Z.jsx("label",{className:e?"":"dn",children:"Arma Larga"}),Z.jsx("input",{min:"0",step:"1",max:"1",type:"number",autoComplete:"off",placeholder:"Arma Larga",name:"armasLargas",onChange:V,value:ie})]}),Z.jsx("br",{}),Z.jsxs("button",{type:"submit",children:[" ",e?"Editar":"Guardar"," "]}),Z.jsx("br",{}),Z.jsx("br",{}),n?Z.jsx("div",{className:"divSombra",children:Z.jsxs("p",{className:"msgError",children:[" ",n,Z.jsx("button",{className:"buttonClose",onClick:Re,children:""})]})}):"",t?Z.jsx("div",{className:"divSombra",children:Z.jsxs("p",{className:"msg",onClick:N,children:[" ",t]})}):""]})}function WR({i:e,el:t,setEdit:n,setState:s,setFinder:i,setMsg:r,deleteByIdDB:a,setGetDB:u,getDB:h,updateByIdDB:d,items:g,setBtnDisplayState:m}){const v=new Intl.DateTimeFormat("es-MX",{dateStyle:"long"}),w=(N=0)=>v.format(new Date(N)),[S,T]=_.useState(!0),[A,O]=_.useState(!0),V=N=>{window.confirm("Quieres Borrar a este Socio")&&(T(!S),a(N.idDB),i(null),r("Eliminado: "+N.nombreDelSocio),setTimeout(()=>{u(!h)},700))},H=N=>{if(window.confirm("Quieres Borrar esta Arma Clase: "+N.clase)){O(!A),i(null);let W=t.armasArr.filter(ee=>ee.matricula!==N.matricula);t.armasArr=W,d(t.idDB,t),r("Arma Eliminada de: "+t.nombreDelSocio)}},z=N=>{if(window.confirm("Quieres Cambiar Status")){let W=[];g.map(ee=>{ee.idDB===N.idDB&&(ee.toggle=!ee.toggle,W.push(ee))}),g.find(ee=>ee.idDB===N.idDB).toggle?r(`Marcado como Activo: ${N.nombreDelSocio}`):r(`Marcado como Inactivo: ${N.nombreDelSocio}`),d(N.idDB,W[0]),setTimeout(()=>{u(!h)},700)}},U=N=>{T(!S),window.scrollTo(0,0),r("Listo para Editar"),s(N),n(N)},K=N=>{O(!A),window.scrollTo(0,0)},[k,D]=_.useState({clase:"",calibre:"",marca:"",modelo:"",matricula:"",folio:"",armasCortas:"",armasLargas:""}),{clase:x,calibre:L,marca:M,modelo:B,matricula:F,folio:ye,armasCortas:ve,armasLargas:ie}=k,Ce=N=>{const{name:W,value:ee}=N.target;D({...k,[W]:ee})},re=N=>{let W=[];g.map(ee=>{ee.id===N.id&&(ee.armasArr.push(k),W.push(ee))}),D({clase:"",calibre:"",marca:"",modelo:"",matricula:"",folio:"",armasCortas:"",armasLargas:""}),O(!A),d(N.idDB,W[0]),setTimeout(()=>{u(!h)},700)},Re=()=>{window.scrollTo(0,0),T(!S)};return Z.jsxs("div",{className:"item",children:[Z.jsx("div",{className:e%2===0?"bg1":"bg2",onClick:Re,children:Z.jsxs("span",{className:t.toggle?"c-pointer":"active c-pointer",children:[t.apellidoPaterno," ",t.apellidoMaterno," ",t.nombreDelSocio]})}),Z.jsxs("modal",{className:S?"outModal":"inModal",children:[Z.jsx("button",{className:"btnCerrarModal",onClick:()=>T(!S),children:"Cerrar "}),Z.jsx("label",{className:t.toggle?"labelItemToggle":"labelItemToggleFalse",onClick:()=>z(t),children:t.toggle?" Activo ":"Inactivo "})," ",Z.jsxs("div",{className:"modalContent",children:[Z.jsxs("div",{children:[Z.jsxs("p",{className:"name",children:[t.nombreDelSocio," "]}),Z.jsxs("p",{className:"name",children:[" ",t.apellidoPaterno," ",t.apellidoMaterno," "]}),Z.jsx("br",{}),Z.jsxs("p",{children:[Z.jsx("span",{children:"CURP:"})," ",t.curp]}),Z.jsxs("p",{className:"domicilio",children:[Z.jsx("span",{children:"Domicilio:"})," ",t.domicilioDelSocio]}),Z.jsxs("p",{children:[Z.jsx("span",{children:"Inscripcin:"}),w(t.fechaDeInscripcion)]})]}),Z.jsxs("div",{children:[Z.jsxs("p",{children:[Z.jsx("span",{children:"Clase:"})," ",t.clase]}),Z.jsxs("p",{children:[Z.jsx("span",{children:"Calibre:"})," ",t.calibre]}),Z.jsxs("p",{children:[Z.jsx("span",{children:"Marca:"})," ",t.marca]}),Z.jsxs("p",{children:[Z.jsx("span",{children:"Modelo:"})," ",t.modelo]}),Z.jsxs("p",{children:[Z.jsx("span",{children:"Matricula:"})," ",t.matricula]}),Z.jsxs("p",{children:[Z.jsx("span",{children:"Folio:"})," ",t.folio]}),Z.jsx("p",{children:Z.jsx("span",{children:t.armasCortas=="1"?"ARMA CORTA":"ARMA LARGA"})})]}),Z.jsx("div",{className:"newArmas",children:t.armasArr.map((N,W)=>Z.jsxs("div",{children:[Z.jsxs("p",{children:[Z.jsx("span",{children:"Clase:"})," ",N.clase]}),Z.jsxs("p",{children:[Z.jsx("span",{children:"Calibre:"})," ",N.calibre]}),Z.jsxs("p",{children:[Z.jsx("span",{children:"Marca:"})," ",N.marca]}),Z.jsxs("p",{children:[Z.jsx("span",{children:"Modelo:"})," ",N.modelo]}),Z.jsxs("p",{children:[Z.jsx("span",{children:"Matricula:"})," ",N.matricula]}),Z.jsxs("p",{children:[Z.jsx("span",{children:"Folio:"})," ",N.folio]}),Z.jsx("p",{children:Z.jsx("span",{children:N.armasCortas=="1"?"ARMA CORTA":"ARMA LARGA"})}),Z.jsx("div",{className:"editarArmaButtonsContainer",children:Z.jsx("button",{onClick:()=>H(N),children:""})})]},W))})]}),Z.jsxs("div",{className:"editarItemButtonsContainer",children:[Z.jsx("button",{onClick:()=>V(t),children:"Borrar"}),Z.jsx("button",{onClick:()=>U(t),children:"Editar"}),Z.jsx("button",{onClick:()=>K(),children:"Aadir Arma"})]})]}),Z.jsxs("modal",{className:A?"outModal":"inModal",children:[Z.jsx("button",{className:"btnCerrarModal",onClick:()=>O(!A),children:"Cerrar "}),Z.jsx("br",{}),Z.jsx("div",{className:"modalContent",children:Z.jsxs("div",{className:"formStyle2",children:[Z.jsx("input",{type:"text",autoComplete:"off",placeholder:"Clase",name:"clase",onChange:Ce,value:x}),Z.jsx("input",{type:"text",autoComplete:"off",placeholder:"Calibre",name:"calibre",onChange:Ce,value:L}),Z.jsx("input",{type:"text",autoComplete:"off",placeholder:"Marca",name:"marca",onChange:Ce,value:M}),Z.jsx("input",{type:"text",autoComplete:"off",placeholder:"Modelo",name:"modelo",onChange:Ce,value:B}),Z.jsx("input",{type:"text",autoComplete:"off",placeholder:"Matricula",name:"matricula",onChange:Ce,value:F}),Z.jsx("input",{type:"text",autoComplete:"off",placeholder:"Folio",name:"folio",onChange:Ce,value:ye}),Z.jsx("input",{min:"0",step:"1",max:"1",type:"number",autoComplete:"off",placeholder:"Arma Corta",name:"armasCortas",onChange:Ce,value:ve}),Z.jsx("input",{min:"0",step:"1",max:"1",type:"number",autoComplete:"off",placeholder:"Arma Larga",name:"armasLargas",onChange:Ce,value:ie})]})}),Z.jsxs("button",{className:"guardarArma",onClick:()=>re(t),children:["Guardar Arma para ",t.nombreDelSocio]})]})]},e)}var ko=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,n){const s=t?this.allAsyncListeners:this.allSyncListeners;let i=s.get(e);return!i&&n&&(i=new Set,s.set(e,i)),i}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,n=!1){this.getListeners(e,n,!0).add(t)}removeEventListener(e,t,n=!1){const s=this.getListeners(e,n,!1);s&&(s.delete(t),s.size===0&&(n?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){const t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const n=e.type;if(t&&"event"in e){const u=e.event;u instanceof Event&&(e.eventPath=u.composedPath())}const s=(u,h)=>u.forEach(d=>{if(!h.has(d))return;const g=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>d(e)):()=>d(e);t?this.dispatchAsync(g):g()}),i=this.getListeners(n,t,!1)??new Set,r=new Set(i);r.size>0&&s(r,i),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(u=>{const h=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>u(n,e)):()=>u(n,e);t?this.dispatchAsync(h):h()})}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}};function NL(e,t){return t}function qx(e){return(e==null?void 0:e.getLocaleTextFunc())??NL}function $s(e,t,n){n==null||typeof n=="string"&&n==""?$x(e,t):ri(e,t,n)}function ri(e,t,n){e.setAttribute(Kx(t),n.toString())}function $x(e,t){e.removeAttribute(Kx(t))}function Kx(e){return`aria-${e}`}function Un(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function VL(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function BL(e){return parseInt(e.getAttribute("aria-posinset"),10)}function GL(e){return e.getAttribute("aria-label")}function Oi(e,t){$s(e,"label",t)}function Fy(e,t){$s(e,"labelledby",t)}function Yx(e,t){$s(e,"describedby",t)}function Qx(e,t){$s(e,"live",t)}function HL(e,t){$s(e,"atomic",t)}function zL(e,t){$s(e,"relevant",t)}function UL(e,t){$s(e,"level",t)}function WL(e,t){$s(e,"disabled",t)}function Xx(e,t){$s(e,"hidden",t)}function Nu(e,t){ri(e,"expanded",t)}function Zx(e,t){ri(e,"setsize",t)}function Jx(e,t){ri(e,"posinset",t)}function jL(e,t){ri(e,"rowcount",t)}function qL(e,t){ri(e,"rowindex",t)}function $L(e,t){ri(e,"colcount",t)}function eD(e,t){ri(e,"colindex",t)}function KL(e,t){ri(e,"colspan",t)}function YL(e,t){ri(e,"sort",t)}function QL(e){$x(e,"sort")}function jR(e,t){$s(e,"selected",t)}function XL(e,t){ri(e,"checked",t===void 0?"mixed":t)}function ZL(e,t){$s(e,"controls",t.id),Fy(t,e.id)}function JL(e,t){$s(e,"haspopup",t===!1?null:t)}function eO(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var Uv,Wv,jv,qv,$v,Py,Ly,Kv;function Id(){return Uv===void 0&&(Uv=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),Uv}function tD(){if(Wv===void 0){const e=window;Wv=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return Wv}function Bw(){return jv===void 0&&(jv=/(firefox)/i.test(navigator.userAgent)),jv}function nD(){return qv===void 0&&(qv=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),qv}function Qa(){return $v===void 0&&($v=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),$v}function qR(e){if(!e)return null;const t=e.tabIndex,n=e.getAttribute("tabIndex");return t===-1&&(n===null||n===""&&!Bw())?null:t.toString()}function tO(){if(Kv!==void 0)return Kv;if(!document.body)return-1;let e=1e6;const t=Bw()?6e6:1e9,n=document.createElement("div");for(document.body.appendChild(n);;){const s=e*2;if(n.style.height=s+"px",s>t||n.clientHeight!==s)break;e=s}return document.body.removeChild(n),Kv=e,e}function nO(){return Ly==null&&sD(),Ly}function sD(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let n=t.offsetWidth-t.clientWidth;n===0&&t.clientWidth===0&&(n=null),t.parentNode&&t.parentNode.removeChild(t),n!=null&&(Ly=n,Py=n===0)}function iD(){return Py==null&&sD(),Py}var vg;function $R(e,t,n){const s=e.parentElement;let i=s&&s.firstChild;for(;i;)t&&i.classList.toggle(t,i===e),i=i.nextSibling}var sO="[tabindex], input, select, button, textarea, [href]",rD="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function Gw(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,s=t.call(e,"input, select, button, textarea"),i=t.call(e,rD),r=Ss(e);return s&&!i&&r}function ot(e,t,n={}){const{skipAriaHidden:s}=n;e.classList.toggle("ag-hidden",!t),s||Xx(e,!t)}function iO(e,t,n={}){const{skipAriaHidden:s}=n;e.classList.toggle("ag-invisible",!t),s||Xx(e,!t)}function id(e,t){const n="disabled",s=t?i=>i.setAttribute(n,""):i=>i.removeAttribute(n);s(e),uD(e.querySelectorAll("input"),i=>s(i))}function Xa(e,t,n){let s=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof n=="number"){if(++s>n)break}else if(e===n)break}return!1}function fc(e){const{height:t,width:n,borderTopWidth:s,borderRightWidth:i,borderBottomWidth:r,borderLeftWidth:a,paddingTop:u,paddingRight:h,paddingBottom:d,paddingLeft:g,marginTop:m,marginRight:v,marginBottom:w,marginLeft:S,boxSizing:T}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(n||"0"),borderTopWidth:parseFloat(s||"0"),borderRightWidth:parseFloat(i||"0"),borderBottomWidth:parseFloat(r||"0"),borderLeftWidth:parseFloat(a||"0"),paddingTop:parseFloat(u||"0"),paddingRight:parseFloat(h||"0"),paddingBottom:parseFloat(d||"0"),paddingLeft:parseFloat(g||"0"),marginTop:parseFloat(m||"0"),marginRight:parseFloat(v||"0"),marginBottom:parseFloat(w||"0"),marginLeft:parseFloat(S||"0"),boxSizing:T}}function Jp(e){const t=fc(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function rd(e){const t=fc(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function oD(e){const{height:t,marginBottom:n,marginTop:s}=fc(e);return Math.floor(t+n+s)}function rp(e){const{width:t,marginLeft:n,marginRight:s}=fc(e);return Math.floor(t+n+s)}function aD(e){const t=e.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:s,borderRightWidth:i,borderBottomWidth:r}=fc(e);return{top:t.top+(n||0),left:t.left+(s||0),right:t.right+(i||0),bottom:t.bottom+(r||0)}}function op(){if(typeof vg=="boolean")return vg;const e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(e),e.scrollLeft=1,vg=Math.floor(e.scrollLeft)===0,document.body.removeChild(e),vg}function ap(e,t){let n=e.scrollLeft;return t&&(n=Math.abs(n),tD()&&!op()&&(n=e.scrollWidth-e.getBoundingClientRect().width-n)),n}function lp(e,t,n){n&&(op()?t*=-1:(Id()||tD())&&(t=e.scrollWidth-e.getBoundingClientRect().width-t)),e.scrollLeft=t}function Hi(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function rl(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function lD(e){return!!e.offsetParent}function Ss(e){const t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!lD(e)||window.getComputedStyle(e).visibility!=="visible")}function ni(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function rO(e){return e.clientWidth<e.scrollWidth}function oO(e){return e.clientHeight<e.scrollHeight}function up(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):Fi(e,t)}function Fi(e,t){t=Hw(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function Wh(e,t){t=Hw(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function Hw(e){return typeof e=="number"?`${e}px`:e}function em(e){return e instanceof Node||e instanceof HTMLElement}function aO(e){if(e==null)return[];const t=[];return uD(e,n=>t.push(n)),t}function lO(e,t){if(e)for(let n=0;n<e.length;n++){const s=e[n];t(s.name,s.value)}}function Iu(e,t,n){n==null||n===""?e.removeAttribute(t):e.setAttribute(t,n.toString())}function uD(e,t){if(e!=null)for(let n=0;n<e.length;n++)t(e[n])}function Dr(e,t,n){const i=bD(e).ResizeObserver,r=i?new i(n):null;return r==null||r.observe(t),()=>r==null?void 0:r.disconnect()}function uO(e){const t=ol(e),n="getSelection"in t?t.getSelection():null,s=[];for(let i=0;i<((n==null?void 0:n.rangeCount)??0);i++){const r=n==null?void 0:n.getRangeAt(i);r&&s.push(r)}return{selection:n,ranges:s}}function tm(e,t){if(!e.gos.get("enableCellTextSelection")||!Bw()&&!Id())return t();const{selection:s,ranges:i}=uO(e);t(),s==null||s.removeAllRanges();for(const r of i)s==null||s.addRange(r)}function Mo(e){return e==null||e===""?null:e}function Le(e){return e!=null&&e!==""}function $t(e){return!Le(e)}function Oy(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function cD(e,t){const n=e?JSON.stringify(e):null,s=t?JSON.stringify(t):null;return n===s}function cO(e,t,n=!1){const s=e==null,i=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),s&&i)return 0;if(s)return-1;if(i)return 1;function r(a,u){return a>u?1:a<u?-1:0}if(typeof e!="string"||!n)return r(e,t);try{return e.localeCompare(t)}catch{return r(e,t)}}var hD="https://www.ag-grid.com",KR={};function dD(e,t){KR[t]||(e(),KR[t]=!0)}function cp(e,t,...n){e.get("debug")&&console.log("AG Grid: "+t,...n)}function jh(e,...t){dD(()=>console.warn("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}function Mu(e,...t){dD(()=>console.error("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}var Yv=[],Qv=!1;function YR(e){Yv.push(e),!Qv&&(Qv=!0,window.setTimeout(()=>{const t=Yv.slice();Yv.length=0,Qv=!1,t.forEach(n=>n())},0))}function fr(e,t,n){let s;return function(...i){const r=this;window.clearTimeout(s),s=window.setTimeout(function(){e.isAlive()&&t.apply(r,i)},n)}}function QR(e,t){let n=0;return function(...s){const i=this,r=new Date().getTime();r-n<t||(n=r,e.apply(i,s))}}function fD(e,t,n=100,s){const i=new Date().getTime();let r=null,a=!1;const u=()=>{const h=new Date().getTime()-i>n;(e()||h)&&(t(),a=!0,r!=null&&(window.clearInterval(r),r=null))};u(),a||(r=window.setInterval(u,10))}var Je="33.1.1",XR=2e3,ZR=100,gD="_version_",Bg=null,Za=`${hD}/javascript-data-grid`;function hO(e){Bg=e}function dO(e){Za=e}function pD(e,t,n){return(Bg==null?void 0:Bg.getConsoleMessage(e,t))??[mO(e,t,n)]}function zw(e,t,n,s){e(`error #${t}`,...pD(t,n,s))}function fO(e){if(!e)return String(e);const t={};for(const n of Object.keys(e))typeof e[n]!="object"&&typeof e[n]!="function"&&(t[n]=e[n]);return JSON.stringify(t)}function gO(e){let t=e;return e instanceof Error?t=e.toString():typeof e=="object"&&(t=fO(e)),t}function hp(e){return e===void 0?"undefined":e===null?"null":e}function ky(e,t){return`${e}?${t.toString()}`}function pO(e,t,n){const s=Array.from(t.entries()).sort((r,a)=>a[1].length-r[1].length);let i=ky(e,t);for(const[r,a]of s){if(r===gD)continue;const u=i.length-n;if(u<=0)break;const h="...",d=u+h.length,g=a.length-d>ZR?a.slice(0,a.length-d)+h:a.slice(0,ZR)+h;t.set(r,g),i=ky(e,t)}return i}function mD(e,t){const n=new URLSearchParams;if(n.append(gD,Je),t)for(const r of Object.keys(t))n.append(r,gO(t[r]));const s=`${Za}/errors/${e}`,i=ky(s,n);return i.length<=XR?i:pO(s,n,XR)}var mO=(e,t,n)=>{const s=mD(e,t);return`${n?n+` 
`:""}Visit ${s}${n?"":` 
  Alternatively register the ValidationModule to see the full message in the console.`}`};function be(...e){zw(jh,e[0],e[1])}function Bt(...e){zw(Mu,e[0],e[1])}function Ny(e,t,n){zw(Mu,e,t,n)}function CO(e,t){const n=t[0];return`error #${n} `+pD(n,t[1],e).join(" ")}function mr(...e){return CO(void 0,e)}function CD(e,t){return e.get("rowModelType")===t}function gc(e,t){return CD(e,"clientSide")}function Md(e,t){return CD(e,"serverSide")}function Wn(e,t){return e.get("domLayout")===t}function vD(e){return TO(e)!==void 0}function yD(e){return typeof e.get("getRowHeight")=="function"}function vO(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function Vy(e,t,n=!1,s){const{gos:i,environment:r}=e;if(s==null&&(s=r.getDefaultRowHeight()),yD(i)){if(n)return{height:s,estimated:!0};const h={node:t,data:t.data},d=i.getCallback("getRowHeight")(h);if(By(d))return d===0&&be(23),{height:Math.max(1,d),estimated:!1}}if(t.detail&&i.get("masterDetail"))return yO(i);const a=i.get("rowHeight");return{height:a&&By(a)?a:s,estimated:!1}}function yO(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");return By(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function wD(e){const{environment:t,gos:n}=e,s=n.get("rowHeight");if(!s||$t(s))return t.getDefaultRowHeight();const i=t.refreshRowHeightVariable();return i!==-1?i:(be(24),t.getDefaultRowHeight())}function By(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function dp(e,t,n){const s=t[e.getDomDataKey()];return s?s[n]:void 0}function Vu(e,t,n,s){const i=e.getDomDataKey();let r=t[i];$t(r)&&(r={},t[i]=r),r[n]=s}function Jt(e){const{gos:t,eGridDiv:n}=e;let s=null;const i=t.get("getDocument");return i&&Le(i)?s=i():n&&(s=n.ownerDocument),s&&Le(s)?s:document}function bD(e){return Jt(e).defaultView||window}function ol(e){return e.eGridDiv.getRootNode()}function un(e){return ol(e).activeElement}function nm(e){let t=null,n=null;try{t=Jt(e).fullscreenElement}catch{}finally{t||(t=ol(e));const s=t.querySelector("body");s?n=s:t instanceof ShadowRoot?n=t:t instanceof Document?n=t==null?void 0:t.documentElement:n=t}return n}function wO(e){const t=nm(e);return(t==null?void 0:t.clientWidth)??(window.innerHeight||-1)}function bO(e){const t=nm(e);return(t==null?void 0:t.clientHeight)??(window.innerHeight||-1)}function Gy(e,t,n){const i=e.getBoundingClientRect().height,r=wO(n)-2,a=bO(n)-2;if(!e.offsetParent)return;const h=aD(e.offsetParent),{clientY:d,clientX:g}=t;let m=d-h.top-i/2,v=g-h.left-10;const w=Jt(n),S=w.defaultView||window,T=S.pageYOffset||w.documentElement.scrollTop,A=S.pageXOffset||w.documentElement.scrollLeft;r>0&&v+e.clientWidth>r+A&&(v=r+A-e.clientWidth),v<0&&(v=0),a>0&&m+e.clientHeight>a+T&&(m=a+T-e.clientHeight),m<0&&(m=0),e.style.left=`${v}px`,e.style.top=`${m}px`}function od(e){const t=Jt(e),n=un(e);return n===null||n===t.body}function Fu(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function SD(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||Wn(e,"print"))}function Di(e){const t=e.get("autoGroupColumnDef");return!(t!=null&&t.comparator)&&!e.get("treeData")}function Hy(e){const t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function SO(e){return e.exists("groupDisplayType")?e.get("groupDisplayType")==="multipleColumns":e.get("groupHideOpenParents")}function Uw(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function zy(e){const t=e.getCallback("getRowId");return t===void 0?t:n=>{let s=t(n);return typeof s!="string"&&(be(25,{id:s}),s=String(s)),s}}function EO(e,t){const n=e.get("groupHideParentOfSingleChild");return!!(n===!0||n==="leafGroupsOnly"&&t.leafGroup||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")&&t.leafGroup)}function RO(e){return(e==null?void 0:e.checkboxes)??!0}function ad(e){const t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function TO(e){const t="beanName"in e&&e.beanName==="gos"?e.get("rowSelection"):e.rowSelection;if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(t==null?void 0:t.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function AO(e){const t=e.get("rowSelection");if(typeof t=="string"){const n=e.get("groupSelectsChildren"),s=e.get("groupSelectsFiltered");return n&&s?"filteredDescendants":n?"descendants":"self"}return(t==null?void 0:t.mode)==="multiRow"?t.groupSelects:void 0}function xO(e,t=!0){const n=e.get("rowSelection");return typeof n!="object"?t?"all":void 0:n.mode==="multiRow"?n.selectAll:"all"}function DO(e){const t=AO(e);return t==="descendants"||t==="filteredDescendants"}function Xv(e){return e.isModuleRegistered("SetFilter")&&!e.get("suppressSetFilterByDefault")}function Dn(e){return e.get("columnMenu")==="legacy"}function ED(e){return!Dn(e)}function RD(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}function _O(e,t,n){typeof e!="object"&&(e={});const s={...e};return n.forEach(i=>{const r=t[i];typeof r<"u"&&(s[i]=r)}),s}function IO(e,t){if(!e)return;const n={};let s=!1;if(Object.keys(e).forEach(a=>{n[a]=e[a],s=!0}),!s)return;const i={type:"gridOptionsChanged",options:n};t.dispatchEvent(i);const r={type:"componentStateChanged",...n};t.dispatchEvent(r)}function ke(e,t){return e.addGridCommonParams(t)}var TD="__ag_Grid_Stop_Propagation",MO=["touchstart","touchend","touchmove","touchcancel","scroll"],FO=["wheel"],Zv={};function Bu(e){e[TD]=!0}function Cr(e){return e[TD]===!0}var AD=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return n=>{if(typeof Zv[n]=="boolean")return Zv[n];const s=document.createElement(e[n]||"div");return n="on"+n,Zv[n]=n in s}})();function xD(e,t,n){let s=t;for(;s;){const i=dp(e,s,n);if(i)return i;s=s.parentElement}return null}function PO(e,t){return!t||!e?!1:OO(t).indexOf(e)>=0}function LO(e){const t=[];let n=e.target;for(;n;)t.push(n),n=n.parentElement;return t}function OO(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():LO(t)}function kO(e,t,n,s){const i=DD(n);let r;i!=null&&(r={passive:i}),e&&e.addEventListener&&e.addEventListener(t,n,s,r)}var DD=e=>{const t=MO.includes(e),n=FO.includes(e);if(t)return!0;if(n)return!1},he=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){const{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,n){this.localEventService||(this.localEventService=new ko),this.localEventService.addEventListener(e,t,n)}removeEventListener(e,t,n){var s;(s=this.localEventService)==null||s.removeEventListener(e,t,n)}dispatchLocalEvent(e){var t;(t=this.localEventService)==null||t.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const n=[];for(const s of Object.keys(t)){const i=t[s];i&&n.push(this._setupListener(e,s,i))}return n}_setupListener(e,t,n){if(this.destroyed)return()=>null;let s;return NO(e)?(e.__addEventListener(t,n),s=()=>(e.__removeEventListener(t,n),null)):(e instanceof HTMLElement?kO(this.beans.frameworkOverrides,e,t,n):e.addEventListener(t,n),s=()=>(e.removeEventListener(t,n),null)),this.destroyFunctions.push(s),()=>(s(),this.destroyFunctions=this.destroyFunctions.filter(i=>i!==s),null)}setupGridOptionListener(e,t){const{gos:n}=this;n.addPropertyEventListener(e,t);const s=()=>(n.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(s),()=>(s(),this.destroyFunctions=this.destroyFunctions.filter(i=>i!==s),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const n=e.join("-")+this.propertyListenerId++,s=i=>{if(i.changeSet){if(i.changeSet&&i.changeSet.id===this.lastChangeSetIdLookup[n])return;this.lastChangeSetIdLookup[n]=i.changeSet.id}const r={type:"gridPropertyChanged",changeSet:i.changeSet,source:i.source};t(r)};e.forEach(i=>this.setupGridOptionListener(i,s))}getLocaleTextFunc(){return qx(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){const n=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),n}createBean(e,t,n){return(t||this.stubContext).createBean(e,n)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function NO(e){return e.__addEventListener!==void 0}var VO=new Set(["__proto__","constructor","prototype"]);function BO(e,t){if(e!=null){if(Array.isArray(e)){for(let n=0;n<e.length;n++)t(n.toString(),e[n]);return}for(const n of Object.keys(e))t(n,e[n])}}function ns(e,t,n=!0,s=!1){Le(t)&&BO(t,(i,r)=>{if(VO.has(i))return;let a=e[i];a!==r&&(s&&a==null&&r!=null&&typeof r=="object"&&r.constructor===Object&&(a={},e[i]=a),JR(r)&&JR(a)&&!Array.isArray(a)?ns(a,r,n,s):(n||r!==void 0)&&(e[i]=r))})}function Gg(e,t,n){if(!t||!e)return;if(!n)return e[t];const s=t.split(".");let i=e;for(let r=0;r<s.length;r++){if(i==null)return;i=i[s[r]]}return i}function JR(e){return typeof e=="object"&&e!==null}var GO=/[&<>"']/g,HO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function On(e,t){if(e==null)return null;const n=e.toString().toString();return t?n:n.replace(GO,s=>HO[s])}var zO={resizable:!0,sortable:!0},UO=0;function _D(){return UO++}function ki(e){return e instanceof ID}var ID=class extends he{constructor(e,t,n,s){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=n,this.primary=s,this.isColumn=!0,this.instanceId=_D(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new ko,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=On(n)}destroy(){var e;super.destroy(),(e=this.beans.rowSpanSvc)==null||e.deregister(this)}getInstanceId(){return this.instanceId}setState(){const{colDef:e,beans:{sortSvc:t,pinnedCols:n,colFlex:s}}=this;t==null||t.initCol(this);const i=e.hide;i!==void 0?this.visible=!i:this.visible=!e.initialHide,n==null||n.initCol(this),s==null||s.initCol(this)}setColDef(e,t,n){var i;const s=e.spanRows!==this.colDef.spanRows;this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),s&&((i=this.beans.rowSpanSvc)==null||i.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",n)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.setState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan()}initDotNotation(){const{gos:e,colDef:{field:t,tooltipField:n}}=this,s=e.get("suppressFieldDotNotation");this.fieldContainsDots=Le(t)&&t.indexOf(".")>=0&&!s,this.tooltipFieldContainsDots=Le(n)&&n.indexOf(".")>=0&&!s}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){var e;(e=this.beans.tooltipSvc)==null||e.initCol(this)}initRowSpan(){var e;this.colDef.spanRows&&((e=this.beans.rowSpanSvc)==null||e.register(this))}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const n=e.width,s=e.initialWidth;return n!=null?t=n:s!=null?t=s:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){var t;return((t=this.beans.showRowGroupCols)==null?void 0:t.isRowGroupDisplayed(this,e))??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){var s,i,r;this.frameworkEventListenerService=(i=(s=this.beans.frameworkOverrides).createLocalEventListenerWrapper)==null?void 0:i.call(s,this.frameworkEventListenerService,this.colEventSvc);const n=((r=this.frameworkEventListenerService)==null?void 0:r.wrap(t))??t;this.colEventSvc.addEventListener(e,n)}removeEventListener(e,t){var s;const n=((s=this.frameworkEventListenerService)==null?void 0:s.unwrap(t))??t;this.colEventSvc.removeEventListener(e,n)}createColumnFunctionCallbackParams(e){return ke(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){var t;return((t=this.beans.cellNavigation)==null?void 0:t.isSuppressNavigable(this,e))??!1}isCellEditable(e){var t;return((t=this.beans.editSvc)==null?void 0:t.isCellEditable(this,e))??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){var t;return((t=this.beans.selectionSvc)==null?void 0:t.isCellCheckboxSelection(this,e))??!1}isSuppressPaste(e){var t;return this.isColumnFunc(e,((t=this.colDef)==null?void 0:t.suppressPaste)??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??zO[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const n=this.createColumnFunctionCallbackParams(e);return t(n)}return!1}createColumnEvent(e,t){return ke(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return $t(this.sort)}isSorting(){return Le(this.sort)}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){var e;return be(261),!!((e=this.beans.colHover)!=null&&e.isHovered(this))}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const n=e===!0;this.visible!==n&&(this.visible=n,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let n=!0;for(;e;){if(!e.isPadding()){n=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:n}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return ke(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if($t(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),n=this.colDef.colSpan(t);return Math.max(n,1)}getRowSpan(e){if($t(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),n=this.colDef.rowSpan(t);return Math.max(n,1)}setActualWidth(e,t,n=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex!=null&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),n||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchColEvent(e,t,n){const s=this.createColumnEvent(e,t);n&&ns(s,n),this.colEventSvc.dispatchEvent(s)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function Cn(e){return e instanceof qh}var qh=class extends he{constructor(e,t,n,s){super(),this.colGroupDef=e,this.groupId=t,this.padding=n,this.level=s,this.isColumn=!1,this.expandable=!1,this.instanceId=_D(),this.expandableListenerRemoveCallback=null,this.expanded=!!(e!=null&&e.openByDefault)}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{ki(t)?e.push(t):Cn(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.__addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.__removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,n=!1;const s=this.findChildrenRemovingPadding();for(let r=0,a=s.length;r<a;r++){const u=s[r];if(!u.isVisible())continue;const h=u.getColumnGroupShow();h==="open"?(e=!0,n=!0):h==="closed"?(t=!0,n=!0):(e=!0,t=!0)}const i=e&&t&&n;this.expandable!==i&&(this.expandable=i,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=n=>{n.forEach(s=>{Cn(s)&&s.isPadding()?t(s.children):e.push(s)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},WO={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},jO=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=Oy(e);let n=0;for(;;){let s=e??t;if(s?n!==0&&(s+="_"+n):s=n,!this.existingKeys[s])return this.existingKeys[s]=!0,String(s);n++}}},Uy=Object.freeze([]);function at(e){if(e!=null&&e.length)return e[e.length-1]}function Fd(e,t,n){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((s,i)=>n?n(s,t[i]):t[i]===s)}function qO(e){return e.sort((t,n)=>t-n)}function wr(e,t){const n=e.indexOf(t);n>=0&&e.splice(n,1)}function eT(e,t,n){for(let s=0;s<t.length;s++)wr(e,t[s]);for(let s=t.length-1;s>=0;s--)e.splice(n,0,t[s])}var sm="ag-Grid-AutoColumn",$O="ag-Grid-SelectionColumn",KO="ag-Grid-RowNumbersColumn";function MD(e){const t=[],n=s=>{for(let i=0;i<s.length;i++){const r=s[i];ki(r)?t.push(r):Cn(r)&&n(r.getChildren())}};return n(e),t}function du(e){return e.reduce((t,n)=>t+n.getActualWidth(),0)}function tT(e,t,n){const s={};if(!t)return;vr(null,t,r=>{s[r.getInstanceId()]=r}),n&&vr(null,n,r=>{s[r.getInstanceId()]=null});const i=Object.values(s).filter(r=>r!=null);e.context.destroyBeans(i)}function FD(e){return e.getId().startsWith(sm)}function Ww(e){const t=typeof e=="string"?e:"getColId"in e?e.getColId():e.colId;return(t==null?void 0:t.startsWith($O))??!1}function im(e){const t=typeof e=="string"?e:"getColId"in e?e.getColId():e.colId;return(t==null?void 0:t.startsWith(KO))??!1}function fp(e){let t=[];return e instanceof Array?t=e:typeof e=="string"&&(t=e.split(",")),t}function Hg(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function YO(e,t){const n=e===t,s=e.getColDef()===t,i=e.getColId()==t;return n||s||i}var QO=(e,t)=>(n,s)=>{const i={value1:void 0,value2:void 0};let r=!1;return e&&(e[n]!==void 0&&(i.value1=e[n],r=!0),Le(s)&&e[s]!==void 0&&(i.value2=e[s],r=!0)),!r&&t&&(t[n]!==void 0&&(i.value1=t[n]),Le(s)&&t[s]!==void 0&&(i.value2=t[s])),i};function XO(e,t=null,n,s,i){const r=new jO,{existingCols:a,existingGroups:u,existingColKeys:h}=ZO(s);r.addExistingKeys(h);const d=PD(e,t,0,n,a,r,u,i),{colGroupSvc:g}=e,m=(g==null?void 0:g.findMaxDepth(d,0))??0,v=g?g.balanceColumnTree(d,0,m,r):d;return vr(null,v,(S,T)=>{Cn(S)&&S.setupExpandable(),S.originalParent=T}),{columnTree:v,treeDept:m}}function ZO(e){const t=[],n=[],s=[];return e&&vr(null,e,i=>{if(Cn(i)){const r=i;n.push(r)}else{const r=i;s.push(r.getId()),t.push(r)}}),{existingCols:t,existingGroups:n,existingColKeys:s}}function PD(e,t,n,s,i,r,a,u){if(!t)return[];const{colGroupSvc:h}=e,d=new Array(t.length);for(let g=0;g<d.length;g++){const m=t[g];h&&ik(m)?d[g]=h.createProvidedColumnGroup(s,m,n,i,r,a,u):d[g]=JO(e,s,m,i,r,u)}return d}function JO(e,t,n,s,i,r){var h;const a=tk(n,s);a&&(s==null||s.splice(a.idx,1));let u=a==null?void 0:a.column;if(u){const d=Wy(e,n,u.getColId());u.setColDef(d,n,r),ek(e,u,d,r)}else{const d=i.getUniqueKey(n.colId,n.field),g=Wy(e,n,d);u=new ID(g,n,d,t),e.context.createBean(u)}return(h=e.dataTypeSvc)==null||h.addColumnListeners(u),u}function LD(e,t,n,s,i,r,a,u){const{sortSvc:h,pinnedCols:d,colFlex:g}=e;n!==void 0&&t.setVisible(!n,u),h&&(h.updateColSort(t,s,u),i!==void 0&&h.setColSortIndex(t,i)),r!==void 0&&(d==null||d.setColPinned(t,r)),a!==void 0&&(g==null||g.setColFlex(t,a))}function ek(e,t,n,s){LD(e,t,n.hide,n.sort,n.sortIndex,n.pinned,n.flex,s);const i=t.getFlex();if(!(i!=null&&i>0))if(n.width!=null)t.setActualWidth(n.width,s);else{const r=t.getActualWidth();t.setActualWidth(r,s)}}function tk(e,t){if(t)for(let n=0;n<t.length;n++){const s=t[n].getUserProvidedColDef();if(!s)continue;if(e.colId!=null){if(t[n].getId()===e.colId)return{idx:n,column:t[n]};continue}if(e.field!=null){if(s.field===e.field)return{idx:n,column:t[n]};continue}if(s===e)return{idx:n,column:t[n]}}}function Wy(e,t,n,s){const{gos:i,dataTypeSvc:r,validation:a}=e,u={},h=i.get("defaultColDef");ns(u,h,!1,!0);const d=nk(e,u,t,n);d&&sk(e,d,u),ns(u,t,!1,!0);const g=i.get("autoGroupColumnDef"),m=Di(i);return t.rowGroup&&g&&m&&ns(u,{sort:g.sort,initialSort:g.initialSort},!1,!0),r==null||r.validateColDef(u),a==null||a.validateColDef(u,n,s),u}function nk(e,t,n,s){var a;const i=(a=e.dataTypeSvc)==null?void 0:a.updateColDefAndGetColumnType(t,n,s),r=n.type??i??t.type;return t.type=r,r?fp(r):void 0}function sk(e,t,n){if(!t.length)return;const s=Object.assign({},WO),i=e.gos.get("columnTypes")||{};for(const r of Object.keys(i)){const a=i[r];r in s?be(34,{key:r}):(a.type&&be(35),s[r]=a)}t.forEach(r=>{const a=s[r.trim()];a?ns(n,a,!1,!0):be(36,{t:r})})}function ik(e){return e.children!==void 0}function vr(e,t,n){if(t)for(let s=0;s<t.length;s++){const i=t[s];Cn(i)&&vr(i,i.getChildren(),n),n(i,e)}}function OD(e,t){const n=[],s=[],i=[];return e.forEach(a=>{const u=a.getColDef().lockPosition;u==="right"?i.push(a):u==="left"||u===!0?n.push(a):s.push(a)}),t.get("enableRtl")?[...i,...s,...n]:[...n,...s,...i]}function kD(e,t){let n=!0;return vr(null,t,s=>{if(!Cn(s))return;const i=s,r=i.getColGroupDef();if(!(r&&r.marryChildren))return;const u=[];i.getLeafColumns().forEach(v=>{const w=e.indexOf(v);u.push(w)});const h=Math.max.apply(Math,u),d=Math.min.apply(Math,u),g=h-d,m=i.getLeafColumns().length-1;g>m&&(n=!1)}),n}function ND(e,t){if(!e||e.length==0)return;const n=t(e[0]);for(let s=1;s<e.length;s++)if(n!==t(e[s]))return;return n}function VD(e,t,n){if(!t.length)return;const s=t.length===1?t[0]:null,i=ND(t,r=>r.getPinned());e.dispatchEvent({type:"columnPinned",pinned:i??null,columns:t,column:s,source:n})}function rk(e,t,n){if(!t.length)return;const s=t.length===1?t[0]:null,i=ND(t,r=>r.isVisible());e.dispatchEvent({type:"columnVisible",visible:i,columns:t,column:s,source:n})}function ok(e,t,n,s){e.dispatchEvent({type:t,columns:n,column:n&&n.length==1?n[0]:null,source:s})}function gp(e,t,n,s,i=null){t!=null&&t.length&&e.dispatchEvent({type:"columnResized",columns:t,column:t.length===1?t[0]:null,flexColumns:i,finished:n,source:s})}function pc(e,t,n){var z;const{colModel:s,rowGroupColsSvc:i,pivotColsSvc:r,autoColSvc:a,selectionColSvc:u,colAnimation:h,visibleCols:d,pivotResultCols:g,environment:m,valueColsSvc:v,eventSvc:w,gos:S}=e,T=s.getColDefCols()||[];if(!(T!=null&&T.length))return!1;if(t!=null&&t.state&&!t.state.forEach)return be(32),!1;const A=(U,K,k,D,x)=>{if(!U)return;const L=QO(K,t.defaultState),M=L("flex").value1;if(LD(e,U,L("hide").value1,L("sort").value1,L("sortIndex").value1,L("pinned").value1,M,n),M==null){const B=L("width").value1;if(B!=null){const F=U.getColDef().minWidth??m.getDefaultColumnMinWidth();F!=null&&B>=F&&U.setActualWidth(B,n)}}x||!U.isPrimary()||(v==null||v.syncColumnWithState(U,n,L),i==null||i.syncColumnWithState(U,n,L,k),r==null||r.syncColumnWithState(U,n,L,D))},O=(U,K,k)=>{var N,W;const D=BD(e,n),x=K.slice(),L={},M={},B=[],F=[],ye=[];let ve=0;const ie=(i==null?void 0:i.columns.slice())??[],Ce=(r==null?void 0:r.columns.slice())??[];U.forEach(ee=>{const oe=ee.colId;if(oe.startsWith(sm)){B.push(ee),ye.push(ee);return}if(Ww(oe)){F.push(ee),ye.push(ee);return}const xe=k(oe);xe?(A(xe,ee,L,M,!1),wr(x,xe)):(ye.push(ee),ve+=1)});const re=ee=>A(ee,null,L,M,!1);x.forEach(re),i==null||i.sortColumns(sT.bind(i,L,ie)),r==null||r.sortColumns(sT.bind(r,M,Ce)),s.refreshCols(!1);const Re=(ee,oe,ue=[])=>{oe.forEach(xe=>{const Ae=ee(xe.colId);wr(ue,Ae),A(Ae,xe,null,null,!0)}),ue.forEach(re)};return Re(ee=>(a==null?void 0:a.getColumn(ee))??null,B,(N=a==null?void 0:a.getColumns())==null?void 0:N.slice()),Re(ee=>(u==null?void 0:u.getColumn(ee))??null,F,(W=u==null?void 0:u.getColumns())==null?void 0:W.slice()),lk(t,s,S),d.refresh(n),w.dispatchEvent({type:"columnEverythingChanged",source:n}),D(),{unmatchedAndAutoStates:ye,unmatchedCount:ve}};h==null||h.start();let{unmatchedAndAutoStates:V,unmatchedCount:H}=O(t.state||[],T,U=>s.getColDefCol(U));if(V.length>0||Le(t.defaultState)){const U=((z=g==null?void 0:g.getPivotResultCols())==null?void 0:z.list)??[];H=O(V,U,K=>(g==null?void 0:g.getPivotResultCol(K))??null).unmatchedCount}return h==null||h.finish(),H===0}function ak(e,t){const{colModel:n,autoColSvc:s}=e,i=n.getColDefCols();if(!(i!=null&&i.length))return;const r=n.getColDefColTree(),a=MD(r),u=[];let h=1e3,d=1e3,g=[];const m=s==null?void 0:s.getColumns();m&&(g=g.concat(m)),a&&(g=g.concat(a)),g.forEach(v=>{const w=GD(v);$t(w.rowGroupIndex)&&w.rowGroup&&(w.rowGroupIndex=h++),$t(w.pivotIndex)&&w.pivot&&(w.pivotIndex=d++),u.push(w)}),pc(e,{state:u,applyOrder:!0},t)}function BD(e,t){const{rowGroupColsSvc:n,pivotColsSvc:s,valueColsSvc:i,colModel:r,sortSvc:a,eventSvc:u}=e,h={rowGroupColumns:(n==null?void 0:n.columns.slice())??[],pivotColumns:(s==null?void 0:s.columns.slice())??[],valueColumns:(i==null?void 0:i.columns.slice())??[]},d=nT(e),g={};return d.forEach(m=>{g[m.colId]=m}),()=>{const m=r.getAllCols(),v=(k,D,x,L)=>{const M=D.map(L),B=x.map(L);if(Fd(M,B))return;const ye=new Set(D);x.forEach(ie=>{ye.delete(ie)||ye.add(ie)});const ve=[...ye];u.dispatchEvent({type:k,columns:ve,column:ve.length===1?ve[0]:null,source:t})},w=k=>{const D=[];return m.forEach(x=>{const L=g[x.getColId()];L&&k(L,x)&&D.push(x)}),D},S=k=>k.getColId();v("columnRowGroupChanged",h.rowGroupColumns,(n==null?void 0:n.columns)??[],S),v("columnPivotChanged",h.pivotColumns,(s==null?void 0:s.columns)??[],S);const A=w((k,D)=>{const x=k.aggFunc!=null,L=x!=D.isValueActive(),M=x&&k.aggFunc!=D.getAggFunc();return L||M});A.length>0&&ok(u,"columnValueChanged",A,t),gp(u,w((k,D)=>k.width!=D.getActualWidth()),!0,t),VD(u,w((k,D)=>k.pinned!=D.getPinned()),t),rk(u,w((k,D)=>k.hide==D.isVisible()),t);const U=w((k,D)=>k.sort!=D.getSort()||k.sortIndex!=D.getSortIndex());U.length>0&&(a==null||a.dispatchSortChangedEvents(t,U));const K=nT(e);ck(d,K,t,r,u)}}function nT(e){const{colModel:t,rowGroupColsSvc:n,pivotColsSvc:s}=e,i=t.getColDefCols();if($t(i)||!t.isAlive())return[];const r=t.getAllCols(),a=n==null?void 0:n.columns,u=s==null?void 0:s.columns,h=m=>{const v=m.isRowGroupActive()&&a?a.indexOf(m):null,w=m.isPivotActive()&&u?u.indexOf(m):null,S=m.isValueActive()?m.getAggFunc():null,T=m.getSort()!=null?m.getSort():null,A=m.getSortIndex()!=null?m.getSortIndex():null;return{colId:m.getColId(),width:m.getActualWidth(),hide:!m.isVisible(),pinned:m.getPinned(),sort:T,sortIndex:A,aggFunc:S,rowGroup:m.isRowGroupActive(),rowGroupIndex:v,pivot:m.isPivotActive(),pivotIndex:w,flex:m.getFlex()??null}},d=r.map(m=>h(m)),g=new Map(t.getCols().map((m,v)=>[m.getColId(),v]));return d.sort((m,v)=>{const w=g.has(m.colId)?g.get(m.colId):-1,S=g.has(v.colId)?g.get(v.colId):-1;return w-S}),d}function GD(e){const t=(S,T)=>S??T??null,n=e.getColDef(),s=t(n.sort,n.initialSort),i=t(n.sortIndex,n.initialSortIndex),r=t(n.hide,n.initialHide),a=t(n.pinned,n.initialPinned),u=t(n.width,n.initialWidth),h=t(n.flex,n.initialFlex);let d=t(n.rowGroupIndex,n.initialRowGroupIndex),g=t(n.rowGroup,n.initialRowGroup);d==null&&(g==null||g==!1)&&(d=null,g=null);let m=t(n.pivotIndex,n.initialPivotIndex),v=t(n.pivot,n.initialPivot);m==null&&(v==null||v==!1)&&(m=null,v=null);const w=t(n.aggFunc,n.initialAggFunc);return{colId:e.getColId(),sort:s,sortIndex:i,hide:r,pinned:a,width:u,flex:h,rowGroup:g,rowGroupIndex:d,pivot:v,pivotIndex:m,aggFunc:w}}function lk(e,t,n){if(!e.applyOrder||!e.state)return;const s=[];e.state.forEach(i=>{i.colId!=null&&s.push(i.colId)}),uk(t.cols,s,t,n)}function uk(e,t,n,s){if(e==null)return;let i=[];const r={};t.forEach(u=>{if(r[u])return;const h=e.map[u];h&&(i.push(h),r[u]=!0)});let a=0;if(e.list.forEach(u=>{const h=u.getColId();if(r[h]!=null)return;h.startsWith(sm)?i.splice(a++,0,u):i.push(u)}),i=OD(i,s),!kD(i,n.getColTree())){be(39);return}e.list=i}function ck(e,t,n,s,i){const r={};t.forEach(g=>r[g.colId]=g);const a={};e.forEach(g=>{r[g.colId]&&(a[g.colId]=!0)});const u=e.filter(g=>a[g.colId]),h=t.filter(g=>a[g.colId]),d=[];h.forEach((g,m)=>{const v=u&&u[m];if(v&&v.colId!==g.colId){const w=s.getCol(v.colId);w&&d.push(w)}}),d.length&&i.dispatchEvent({type:"columnMoved",columns:d,column:d.length===1?d[0]:null,finished:!0,source:n})}var sT=(e,t,n,s)=>{const i=e[n.getId()],r=e[s.getId()],a=i!=null,u=r!=null;if(a&&u)return i-r;if(a)return-1;if(u)return 1;const h=t.indexOf(n),d=t.indexOf(s),g=h>=0,m=d>=0;return g&&m?h-d:g?-1:1},hk=class extends he{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],e=>this.refreshAll(Hg(e.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),Hg(e.source)))}createColsFromColDefs(e){var V,H,z;const{beans:t}=this,{valueCache:n,colAutosize:s,rowGroupColsSvc:i,pivotColsSvc:r,valueColsSvc:a,visibleCols:u,colViewport:h,eventSvc:d}=t,g=this.colDefs?BD(t,e):void 0;n==null||n.expire();const m=(V=this.colDefCols)==null?void 0:V.list,v=(H=this.colDefCols)==null?void 0:H.tree,w=XO(t,this.colDefs,!0,v,e);tT(t,(z=this.colDefCols)==null?void 0:z.tree,w.columnTree);const S=w.columnTree,T=w.treeDept,A=MD(S),O={};A.forEach(U=>O[U.getId()]=U),this.colDefCols={tree:S,treeDepth:T,list:A,map:O},i==null||i.extractCols(e,m),r==null||r.extractCols(e,m),a==null||a.extractCols(e,m),this.ready=!0,this.refreshCols(!0),u.refresh(e),h.checkViewportColumns(),d.dispatchEvent({type:"columnEverythingChanged",source:e}),g&&(this.changeEventsDispatching=!0,g(),this.changeEventsDispatching=!1),d.dispatchEvent({type:"newColumnsLoaded",source:e}),e==="gridInitializing"&&(s==null||s.applyAutosizeStrategy())}refreshCols(e){var T;if(!this.colDefCols)return;const t=(T=this.cols)==null?void 0:T.tree;this.saveColOrder();const{autoColSvc:n,selectionColSvc:s,rowNumbersSvc:i,quickFilter:r,pivotResultCols:a,showRowGroupCols:u,rowAutoHeight:h,visibleCols:d,colViewport:g,eventSvc:m}=this.beans,v=this.selectCols(a,this.colDefCols);this.createColumnsForService([n,s,i],v);const w=vO(this.gos,this.showingPivotResult);(!e||w)&&this.restoreColOrder(v),this.positionLockedCols(v),u==null||u.refresh(),r==null||r.refreshCols(),this.setColSpanActive(),h==null||h.setAutoHeightActive(v),d.clear(),g.clear(),!Fd(t,this.cols.tree)&&m.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t){for(const n of e)n&&(n.createColumns(t,s=>{this.lastOrder=s(this.lastOrder),this.lastPivotOrder=s(this.lastPivotOrder)}),n.addColumns(t))}selectCols(e,t){const n=(e==null?void 0:e.getPivotResultCols())??null;this.showingPivotResult=n!=null;const{map:s,list:i,tree:r,treeDepth:a}=n??t;return this.cols={list:i.slice(),map:{...s},tree:r.slice(),treeDepth:a},n&&(n.list.some(h=>{var d;return((d=this.cols)==null?void 0:d.map[h.getColId()])!==void 0})||(this.lastPivotOrder=null)),this.cols}getColsToShow(){var s;if(!this.cols)return[];const e=this.isPivotMode()&&!this.showingPivotResult,t=(s=this.beans.valueColsSvc)==null?void 0:s.columns;return this.cols.list.filter(i=>{const r=FD(i);if(e){const a=t==null?void 0:t.includes(i);return r||a}else return r||i.isVisible()})}refreshAll(e){this.ready&&(this.refreshCols(!1),this.beans.visibleCols.refresh(e))}setColsVisible(e,t=!1,n){pc(this.beans,{state:e.map(s=>({colId:typeof s=="string"?s:s.getColId(),hide:!t}))},n)}restoreColOrder(e){const t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;const n=new Map(t.map((d,g)=>[d,g]));if(!e.list.some(d=>n.has(d)))return;const i=new Map(e.list.map(d=>[d,!0])),r=t.filter(d=>i.has(d)),a=new Map(r.map(d=>[d,!0])),u=e.list.filter(d=>!a.has(d)),h=r.slice();u.forEach(d=>{let g=d.getOriginalParent();if(!g){h.push(d);return}const m=[];for(;!m.length&&g;)g.getLeafColumns().forEach(T=>{const A=h.indexOf(T)>=0,O=m.indexOf(T)<0;A&&O&&m.push(T)}),g=g.getOriginalParent();if(!m.length){h.push(d);return}const v=m.map(S=>h.indexOf(S)),w=Math.max(...v);h.splice(w+1,0,d)}),e.list=h}positionLockedCols(e){e.list=OD(e.list,this.gos)}saveColOrder(){var e,t;this.showingPivotResult?this.lastPivotOrder=((e=this.cols)==null?void 0:e.list)??null:this.lastOrder=((t=this.cols)==null?void 0:t.list)??null}getColumnDefs(){var e,t;return this.colDefCols?(t=this.beans.colDefFactory)==null?void 0:t.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,((e=this.cols)==null?void 0:e.list)??[]):void 0}setColSpanActive(){var e;this.colSpanActive=!!((e=this.cols)!=null&&e.list.some(t=>t.getColDef().colSpan!=null))}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode||(this.pivotMode=e,!this.ready))return;this.refreshCols(!1);const{visibleCols:n,eventSvc:s}=this.beans;n.refresh(t),s.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){var t;const e=(t=this.beans.pivotColsSvc)==null?void 0:t.columns;return this.pivotMode&&!!(e!=null&&e.length)}recreateColumnDefs(e){var n;if(!this.cols)return;(n=this.beans.autoColSvc)==null||n.updateColumns(e);const t=Hg(e.source);this.createColsFromColDefs(t)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){var e;tT(this.beans,(e=this.colDefCols)==null?void 0:e.tree),super.destroy()}getColTree(){var e;return((e=this.cols)==null?void 0:e.tree)??[]}getColDefColTree(){var e;return((e=this.colDefCols)==null?void 0:e.tree)??[]}getColDefCols(){var e;return((e=this.colDefCols)==null?void 0:e.list)??null}getCols(){var e;return((e=this.cols)==null?void 0:e.list)??[]}getAllCols(){var i,r,a,u;const{pivotResultCols:e,autoColSvc:t,selectionColSvc:n}=this.beans,s=(i=e==null?void 0:e.getPivotResultCols())==null?void 0:i.list;return[((r=this.colDefCols)==null?void 0:r.list)??[],((a=t==null?void 0:t.columns)==null?void 0:a.list)??[],((u=n==null?void 0:n.columns)==null?void 0:u.list)??[],s??[]].flat()}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){var t;return(t=this.colDefCols)!=null&&t.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){var i,r;if(t==null)return null;const{map:n,list:s}=t;if(typeof e=="string"&&n[e])return n[e];for(let a=0;a<s.length;a++)if(YO(s[a],e))return s[a];return((i=this.beans.autoColSvc)==null?void 0:i.getColumn(e))??((r=this.beans.selectionColSvc)==null?void 0:r.getColumn(e))??null}},HD=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let n;return typeof t!="number"?n=0:n=t+1,this.existingIds[e]=n,n}},mc=class extends he{};function Pd(e,t,n){return n&&e.addDestroyFunc(()=>t.destroyBean(n)),n??e}var Ld=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){this.addOrRemoveCssClass(e,!0)}removeCssClass(e){this.addOrRemoveCssClass(e,!1)}containsCssClass(e){const t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){const s=(e||"").split(" ");if(s.length>1){s.forEach(i=>this.addOrRemoveCssClass(i,t));return}}if(this.cssClassStates[e]!==t&&e.length){const s=this.getGui();s&&s.classList.toggle(e,t),this.cssClassStates[e]=t}}},dk=0,Me=null,vt=class extends he{constructor(t,n){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=dk++,this.cssClassManager=new Ld(()=>this.eGui),this.componentSelectors=new Map((n??[]).map(s=>[s.selector,s])),t&&this.setTemplate(t)}preConstruct(){var n,s,i;this.wireTemplate(this.getGui());const t="component-"+((s=(n=Object.getPrototypeOf(this))==null?void 0:n.constructor)==null?void 0:s.name);(i=this.css)==null||i.forEach(r=>this.beans.environment.addGlobalCSS(r,t))}wireTemplate(t,n){t&&this.gos&&(this.applyElementsToComponent(t),this.createChildComponentsFromTags(t,n))}getCompId(){return this.compId}getDataRefAttribute(t){return t.getAttribute?t.getAttribute("data-ref"):null}applyElementsToComponent(t,n,s,i=null){if(n===void 0&&(n=this.getDataRefAttribute(t)),n){const r=this[n];if(r===Me)this[n]=i??t;else{const a=s&&s[n];if(!this.suppressDataRefValidation&&!a)throw new Error(`data-ref: ${n} on ${this.constructor.name} with ${r}`)}}}createChildComponentsFromTags(t,n){aO(t.childNodes).forEach(i=>{if(!(i instanceof HTMLElement))return;const r=this.createComponentFromElement(i,a=>{a.getGui()&&this.copyAttributesFromNode(i,a.getGui())},n);if(r){if(r.addItems&&i.children.length){this.createChildComponentsFromTags(i,n);const a=Array.prototype.slice.call(i.children);r.addItems(a)}this.swapComponentForNode(r,t,i)}else i.childNodes&&this.createChildComponentsFromTags(i,n)})}createComponentFromElement(t,n,s){const i=t.nodeName,r=this.getDataRefAttribute(t),a=i.indexOf("AG-")===0,u=a?this.componentSelectors.get(i):null;let h=null;if(u){const d=s&&r?s[r]:void 0;h=new u.component(d),h.setParentComponent(this),this.createBean(h,null,n)}else if(a)throw new Error(`selector: ${i}`);return this.applyElementsToComponent(t,r,s,h),h}copyAttributesFromNode(t,n){lO(t.attributes,(s,i)=>n.setAttribute(s,i))}swapComponentForNode(t,n,s){const i=t.getGui();n.replaceChild(i,s),n.insertBefore(document.createComment(s.nodeName),i),this.addDestroyFunc(this.destroyBean.bind(this,t))}activateTabIndex(t){const n=this.gos.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(s=>s.setAttribute("tabindex",n.toString()))}setTemplate(t,n,s){const i=ni(t);this.setTemplateFromElement(i,n,s)}setTemplateFromElement(t,n,s,i=!1){if(this.eGui=t,this.suppressDataRefValidation=i,n)for(let r=0;r<n.length;r++){const a=n[r];this.componentSelectors.set(a.selector,a)}this.wireTemplate(t,s)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}getContainerAndElement(t,n){let s=n;return t==null?null:(s||(s=this.eGui),em(t)?{element:t,parent:s}:{element:t.getGui(),parent:s})}prependChild(t,n){const{element:s,parent:i}=this.getContainerAndElement(t,n)||{};!s||!i||i.insertAdjacentElement("afterbegin",s)}appendChild(t,n){const{element:s,parent:i}=this.getContainerAndElement(t,n)||{};!s||!i||i.appendChild(s)}isDisplayed(){return this.displayed}setVisible(t,n={}){if(t!==this.visible){this.visible=t;const{skipAriaHidden:s}=n;iO(this.eGui,t,{skipAriaHidden:s})}}setDisplayed(t,n={}){if(t!==this.displayed){this.displayed=t;const{skipAriaHidden:s}=n;ot(this.eGui,t,{skipAriaHidden:s});const i={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(i)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(t,n,s){this.eGui.addEventListener(t,n,s),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,n))}addCssClass(t){this.cssClassManager.addCssClass(t)}removeCssClass(t){this.cssClassManager.removeCssClass(t)}containsCssClass(t){return this.cssClassManager.containsCssClass(t)}addOrRemoveCssClass(t,n){this.cssClassManager.addOrRemoveCssClass(t,n)}registerCSS(t){this.css||(this.css=[]),this.css.push(t)}};function fk(e){return typeof e.then=="function"}var ht=class Bh{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(n=>this.onDone(n),n=>this.onReject(n))}static all(t){return t.length?new Bh(n=>{let s=t.length;const i=new Array(s);t.forEach((r,a)=>{r.then(u=>{i[a]=u,s--,s===0&&n(i)})})}):Bh.resolve()}static resolve(t=null){return new Bh(n=>n(t))}then(t){return new Bh(n=>{this.status===1?n(t(this.resolution)):this.waiters.push(s=>n(t(s)))})}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(n=>n(t))}onReject(t){}};function gk(e){return e?e.prototype&&"getGui"in e.prototype:!1}function zD(e,t,n,s){const{name:i}=n;let r,a,u,h,d,g;if(t){const m=t,v=m[i+"Selector"],w=v?v(s):null,S=T=>{typeof T=="string"?r=T:T!=null&&T!==!0&&(e.isFrameworkComponent(T)?u=T:a=T)};w?(S(w.component),h=w.params,d=w.popup,g=w.popupPosition):S(m[i])}return{compName:r,jsComp:a,fwComp:u,paramsFromSelector:h,popupFromSelector:d,popupPositionFromSelector:g}}var pk=class extends he{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,n,s=!1){return this.getCompDetails(this.gridOptions,e,t,n,s)}getCompDetails(e,t,n,s,i=!1){var V;const{name:r,cellRenderer:a}=t;let{compName:u,jsComp:h,fwComp:d,paramsFromSelector:g,popupFromSelector:m,popupPositionFromSelector:v}=zD(this.beans.frameworkOverrides,e,t,s),w;const S=H=>{const z=this.registry.getUserComponent(r,H);z&&(h=z.componentFromFramework?void 0:z.component,d=z.componentFromFramework?z.component:void 0,w=z.params)};if(u!=null&&S(u),h==null&&d==null&&n!=null&&S(n),h&&a&&!gk(h)&&(h=(V=this.agCompUtils)==null?void 0:V.adaptFunction(t,h)),!h&&!d){const{validation:H}=this.beans;i&&(u!==n||!n)?u?H!=null&&H.isProvidedUserComp(u)||Bt(50,{compName:u}):n?H||Bt(260,{...this.gos.getModuleErrorParams(),propName:r,compName:n}):Bt(216,{name:r}):n&&!H&&Bt(146,{comp:n});return}const T=this.mergeParams(e,t,s,g,w),A=h==null,O=h??d;return{componentFromFramework:A,componentClass:O,params:T,type:t,popupFromSelector:m,popupPositionFromSelector:v,newAgStackInstance:()=>this.newAgStackInstance(O,A,T,t)}}newAgStackInstance(e,t,n,s){var u;const i=!t;let r;i?r=new e:r=this.frameworkCompWrapper.wrap(e,s.mandatoryMethods,s.optionalMethods,s),this.createBean(r);const a=(u=r.init)==null?void 0:u.call(r,n);return a==null?ht.resolve(r):a.then(()=>r)}mergeParams(e,t,n,s=null,i){const r={...n,...i},a=e,u=a&&a[t.name+"Params"];if(typeof u=="function"){const h=u(n);ns(r,h)}else typeof u=="object"&&ns(r,u);return ns(r,s),r}},mk={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},Ck={name:"headerComponent",optionalMethods:["refresh"]},vk={name:"innerHeaderComponent"},yk={name:"innerHeaderGroupComponent"},wk={name:"headerGroupComponent"},bk={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},Sk={name:"loadingCellRenderer",cellRenderer:!0},Ek={name:"loadingOverlayComponent",optionalMethods:["refresh"]},Rk={name:"noRowsOverlayComponent",optionalMethods:["refresh"]},jw={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},Tk={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},Ak={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},xk={name:"loadingCellRenderer",cellRenderer:!0},Dk={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},_k={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function Ik(e,t){return e.getCompDetailsFromGridOptions(mk,"agDragAndDropImage",t,!0)}function Mk(e,t,n){return e.getCompDetails(t,Ck,"agColumnHeader",n)}function Fk(e,t,n){return e.getCompDetails(t,vk,void 0,n)}function Pk(e,t){const n=t.columnGroup.getColGroupDef();return e.getCompDetails(n,wk,"agColumnGroupHeader",t)}function Lk(e,t,n){return e.getCompDetails(t,yk,void 0,n)}function Ok(e,t){return e.getCompDetailsFromGridOptions(Ak,void 0,t,!0)}function kk(e,t){return e.getCompDetailsFromGridOptions(xk,"agLoadingCellRenderer",t,!0)}function Nk(e,t){return e.getCompDetailsFromGridOptions(Dk,"agGroupRowRenderer",t,!0)}function Vk(e,t){return e.getCompDetailsFromGridOptions(_k,"agDetailCellRenderer",t,!0)}function Bk(e,t,n){return e.getCompDetails(t,bk,void 0,n)}function Gk(e,t,n){return e.getCompDetails(t,Sk,"agSkeletonCellRenderer",n,!0)}function Hk(e,t,n,s){return e.getCompDetails(t,jw,s,n,!0)}function zk(e,t){return e.getCompDetailsFromGridOptions(Ek,"agLoadingOverlay",t,!0)}function Uk(e,t){return e.getCompDetailsFromGridOptions(Rk,"agNoRowsOverlay",t,!0)}function Wk(e,t,n,s){return e.getCompDetails(t,Tk,s,n)}function jk(e,t){return zD(e,t,jw)}function qk(e,t,n){return e.mergeParams(t,jw,n)}function iT(e){const t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var UD=new Set,pp={},Ja={},zg,WD=!1,$k=!1;function Kk(e){const[t,n]=e.version.split(".")||[],[s,i]=zg.split(".")||[];return t===s&&n===i}function Yk(e){zg||(zg=e.version);const t=n=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${n} Please update all modules to the same version.`;if(e.version?Kk(e)||Mu(t(`'${e.moduleName}' is version ${e.version} but the other modules are version ${zg}.`)):Mu(t(`'${e.moduleName}' is incompatible.`)),e.validate){const n=e.validate();n.isValid||Mu(`${n.message}`)}}function ld(e,t){Yk(e);const n=e.rowModels??["all"];UD.add(e);let s;t!==void 0?(WD=!0,Ja[t]===void 0&&(Ja[t]={}),s=Ja[t]):s=pp,n.forEach(i=>{s[i]===void 0&&(s[i]={}),s[i][e.moduleName]=e}),e.dependsOn&&e.dependsOn.forEach(i=>ld(i,t))}function Qk(e){delete Ja[e]}function jD(e,t,n){const s=i=>{var r,a,u;return!!((r=pp[i])!=null&&r[e])||!!((u=(a=Ja[t])==null?void 0:a[i])!=null&&u[e])};return s(n)||s("all")}function qw(){return WD}function Xk(e,t){const n=Ja[e]??{};return[...Object.values(pp.all??{}),...Object.values(n.all??{}),...Object.values(pp[t]??{}),...Object.values(n[t]??{})]}function Zk(){return new Set(UD)}function Jk(e,t){const n=Ja[e]??{};return[...Object.values(n.all??{}),...Object.values(n[t]??{})]}function eN(){return $k}var tN=class{static register(e){ld(e,void 0)}static registerModules(e){e.forEach(t=>ld(t,void 0))}},nN=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){var t;for(const n of Object.keys(e.providedBeanInstances))this.beans[n]=e.providedBeanInstances[n];e.beanClasses.forEach(n=>{const s=new n;s.beanName?this.beans[s.beanName]=s:console.error(`Bean ${n.name} is missing beanName`),this.createdBeans.push(s)}),(t=e.derivedBeans)==null||t.forEach(n=>{const{beanName:s,bean:i}=n(this);this.beans[s]=i,this.createdBeans.push(i)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("null bean");return this.initBeans([e],t),e}initBeans(e,t){e.forEach(n=>{var s,i;(s=n.preWireBeans)==null||s.call(n,this.beans),(i=n.wireBeans)==null||i.call(n,this.beans)}),e.forEach(n=>{var s;return(s=n.preConstruct)==null?void 0:s.call(n)}),t&&e.forEach(t),e.forEach(n=>{var s;return(s=n.postConstruct)==null?void 0:s.call(n)})}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){var t;(t=e==null?void 0:e.destroy)==null||t.call(e)}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},sN=class extends nN{init(e){this.gridId=e.gridId,this.beans.context=this,this.destroyCallback=e.destroyCallback,super.init(e)}destroy(){var e;super.destroy(),Qk(this.gridId),(e=this.destroyCallback)==null||e.call(this)}getGridId(){return this.gridId}},iN="ag-column-first",rN="ag-column-last";function $w(e,t,n,s){return $t(e)?[]:KD(e.headerClass,e,t,n,s)}function qD(e,t,n,s){return $t(e)?[]:KD(e.toolPanelClass,e,t,n,s)}function $D(e,t,n){e.addOrRemoveCssClass(iN,n.isColAtEdge(t,"first")),e.addOrRemoveCssClass(rN,n.isColAtEdge(t,"last"))}function oN(e,t,n,s){return ke(t,{colDef:e,column:n,columnGroup:s})}function KD(e,t,n,s,i){if($t(e))return[];let r;if(typeof e=="function"){const a=oN(t,n,s,i);r=e(a)}else r=e;return typeof r=="string"?[r]:Array.isArray(r)?[...r]:[]}function ii(e,t){const n=bD(e);n.requestAnimationFrame?n.requestAnimationFrame(t):n.webkitRequestAnimationFrame?n.webkitRequestAnimationFrame(t):n.setTimeout(t,0)}var aN=class extends he{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}setScrollTop(e){const{gos:t,pagination:n}=this.beans,s=t.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,s&&e===0){const i=(n==null?void 0:n.getCurrentPage())??0;i!==this.lastPage&&(this.lastPage=i,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame")}verifyAnimationFrameOn(e){this.active===!1&&be(92,{methodName:e})}createTask(e,t,n){this.verifyAnimationFrameOn(n);const s={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[n],s),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((n,s)=>n.index!==s.index?t*(s.index-n.index):s.createOrder-n.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,n=t.list,s=this.createTasksP2,i=s.list,r=this.destroyTasks,a=new Date().getTime();let u=new Date().getTime()-a;const h=e<=0,d=this.beans.ctrlsSvc.getScrollFeature();for(;h||u<e;){if(!d.scrollGridIfNeeded()){let m;if(n.length)this.sortTaskList(t),m=n.pop().task;else if(i.length)this.sortTaskList(s),m=i.pop().task;else if(r.length)m=r.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(m)||m()}u=new Date().getTime()-a}n.length||i.length||r.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);ii(this.beans,e)}isQueueEmpty(){return!this.ticking}},J={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"},jy=!1,mp=0;function lN(e){mp>0||(e.addEventListener("keydown",Cp),e.addEventListener("mousedown",Cp))}function uN(e){mp>0||(e.removeEventListener("keydown",Cp),e.removeEventListener("mousedown",Cp))}function Cp(e){const t=jy,n=e.type==="keydown";n&&(e.ctrlKey||e.metaKey||e.altKey)||t!==n&&(jy=n)}function cN(e){const t=Jt(e);return lN(t),mp++,()=>{mp--,uN(t)}}function Kw(){return jy}function el(e,t,n=!1){const s=sO;let i=rD;t&&(i+=", "+t),n&&(i+=', [tabindex="-1"]');const r=Array.prototype.slice.apply(e.querySelectorAll(s)).filter(h=>Ss(h)),a=Array.prototype.slice.apply(e.querySelectorAll(i));return a.length?((h,d)=>h.filter(g=>d.indexOf(g)===-1))(r,a):r}function qs(e,t=!1,n=!1,s=!1){const i=el(e,s?".ag-tab-guard":null,n),r=t?at(i):i[0];return r?(r.focus({preventScroll:!0}),!0):!1}function _r(e,t,n,s){const i=el(t,n?':not([tabindex="-1"])':null),r=un(e);let a;n?a=i.findIndex(h=>h.contains(r)):a=i.indexOf(r);const u=a+(s?-1:1);return u<0||u>=i.length?null:i[u]}function Yw(e,t=5){let n=0;for(;e&&qR(e)===null&&++n<=t;)e=e.parentElement;return qR(e)===null?null:e}function tl(e){var t;return e.gos.get("suppressHeaderFocus")||!!((t=e.overlays)!=null&&t.isExclusive())}function Qw(e){var t;return e.gos.get("suppressCellFocus")||!!((t=e.overlays)!=null&&t.isExclusive())}function Gu(e,t,n=!1){const s=e.ctrlsSvc.get("gridCtrl");return!n&&s.focusNextInnerContainer(t)?!0:((n||!t&&!s.isDetailGrid())&&s.forceFocusOutOfContainer(t),!1)}function hN(e,t=!1){return e===J.DELETE?!0:!t&&e===J.BACKSPACE?nD():!1}var dN=class extends he{constructor(e,t,n,s){super(),this.cellCtrl=e,this.rowNode=n,this.rowCtrl=s,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){const t=e.key;switch(t){case J.ENTER:this.onEnterKeyDown(e);break;case J.F2:this.onF2KeyDown(e);break;case J.ESCAPE:this.onEscapeKeyDown(e);break;case J.TAB:this.onTabKeyDown(e);break;case J.BACKSPACE:case J.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case J.DOWN:case J.UP:case J.RIGHT:case J.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){var n;if(!this.cellCtrl.editing){if(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{const s=this.cellCtrl.getFocusedCellPosition();(n=this.beans.navigation)==null||n.navigateToNextCell(e,t,s,!0)}e.preventDefault()}}onShiftRangeSelect(e){const{rangeSvc:t,navigation:n}=this.beans;if(!t)return;const s=t.extendLatestRangeInDirection(e);s&&(n==null||n.ensureCellVisible(s))}onTabKeyDown(e){var t;(t=this.beans.navigation)==null||t.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){var h;const{cellCtrl:n,beans:s,rowNode:i}=this,{gos:r,rangeSvc:a,eventSvc:u}=s;if(!n.editing){if(u.dispatchEvent({type:"keyShortcutChangedCellStart"}),hN(e,r.get("enableCellEditingOnBackspace"))){if(a&&ad(r))a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(n.isCellEditable()){const{column:d}=n,g=this.beans.valueSvc.getDeleteValue(d,i);i.setDataValue(d,g,"cellClear")}}else(h=s.editSvc)==null||h.startRowOrCellEdit(n,e,t);u.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){var s,i;const{cellCtrl:t,beans:n}=this;if(t.editing||this.rowCtrl.editing)t.stopEditingAndFocus(!1,e.shiftKey);else if(n.gos.get("enterNavigatesVertically")){const r=e.shiftKey?J.UP:J.DOWN;(s=n.navigation)==null||s.navigateToNextCell(null,r,t.cellPosition,!1)}else(i=n.editSvc)==null||i.startRowOrCellEdit(t,J.ENTER,e),t.editing&&e.preventDefault()}onF2KeyDown(e){var s;const{cellCtrl:t,beans:n}=this;t.editing||(s=n.editSvc)==null||s.startRowOrCellEdit(t,J.F2,e)}onEscapeKeyDown(e){var s;const{cellCtrl:t,beans:n}=this;t.editing&&((s=n.editSvc)==null||s.stopRowOrCellEdit(t,!0),t.focusCell(!0))}processCharacter(e){var i;if(e.target!==this.eGui||this.cellCtrl.editing)return;const s=e.key;s===J.SPACE?this.onSpaceKeyDown(e):(i=this.beans.editSvc)!=null&&i.startRowOrCellEdit(this.cellCtrl,s,e)&&e.preventDefault()}onSpaceKeyDown(e){var n;const{gos:t}=this.beans;!this.cellCtrl.editing&&vD(t)&&((n=this.beans.selectionSvc)==null||n.handleSelectionEvent(e,this.rowNode,"spaceKey")),e.preventDefault()}destroy(){super.destroy()}},fN=class extends he{constructor(e,t,n){super(),this.cellCtrl=e,this.column=n,this.beans=t}onMouseEvent(e,t){if(!Cr(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){var d;if((d=this.beans.touchSvc)!=null&&d.handleCellDoubleClick(this,e))return;const{eventSvc:t,rangeSvc:n,gos:s,editSvc:i}=this.beans,r=e.ctrlKey||e.metaKey;n&&r&&n.getCellRangeCount(this.cellCtrl.cellPosition)>1&&n.intersectLastRange(!0);const a=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(a);const u=this.column.getColDef();u.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{u.onCellClicked(a)})},0),(s.get("singleClickEdit")||u.singleClickEdit)&&!s.get("suppressClickEdit")&&!(e.shiftKey&&(n==null?void 0:n.getCellRanges().length)!=0)&&(i==null||i.startRowOrCellEdit(this.cellCtrl,void 0,e))}onCellDoubleClicked(e){const{column:t,beans:n,cellCtrl:s}=this,{eventSvc:i,frameworkOverrides:r,gos:a,editSvc:u}=n,h=t.getColDef(),d=s.createEvent(e,"cellDoubleClicked");i.dispatchEvent(d),typeof h.onCellDoubleClicked=="function"&&window.setTimeout(()=>{r.wrapOutgoing(()=>{h.onCellDoubleClicked(d)})},0),!a.get("singleClickEdit")&&!a.get("suppressClickEdit")&&(u==null||u.startRowOrCellEdit(s,null,e))}onMouseDown(e){const{ctrlKey:t,metaKey:n,shiftKey:s}=e,i=e.target,{cellCtrl:r,beans:a}=this,{eventSvc:u,rangeSvc:h,rowNumbersSvc:d,focusSvc:g,gos:m}=a;if(this.isRightClickInExistingRange(e))return;const v=h&&!h.isEmpty(),w=this.containsWidget(i),{cellPosition:S}=r,T=im(S.column);if(d&&T&&!d.handleMouseDownOnCell(S,e)){h&&e.preventDefault(),e.stopImmediatePropagation();return}if(!s||!v){const O=m.get("enableCellTextSelection")&&e.defaultPrevented,V=(Id()||O)&&!r.editing&&!Gw(i)&&!w;r.focusCell(V)}if(s&&v&&!g.isCellFocused(S)){e.preventDefault();const A=g.getFocusedCell();if(A){const{column:O,rowIndex:V,rowPinned:H}=A,z=a.rowRenderer.getRowByPosition({rowIndex:V,rowPinned:H}),U=z==null?void 0:z.getCellCtrl(O);U!=null&&U.editing&&U.stopEditing(),g.setFocusedCell({column:O,rowIndex:V,rowPinned:H,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!w){if(h)if(T&&e.preventDefault(),s)h.extendLatestRangeToCell(S);else{const A=t||n;h.setRangeToCell(S,A)}u.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){const{rangeSvc:t}=this.beans;if(t){const n=t.isCellInAnyRange(this.cellCtrl.cellPosition),s=e.button===2||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(n&&s)return!0}return!1}containsWidget(e){return Xa(e,"ag-selection-checkbox",3)||Xa(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),n==null||n.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),n==null||n.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.eGui,n=t.contains(e.target),s=t.contains(e.relatedTarget);return n&&s}destroy(){super.destroy()}},gN=class extends he{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;const e=this.cellCtrl.getCellSpan();e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e&&(this.refreshSpanHeight(e),this.addManagedListeners(this.beans.eventSvc,{modelUpdated:this.refreshSpanHeight.bind(this,e),recalculateRowBounds:this.refreshSpanHeight.bind(this,e)}))}refreshSpanHeight(e){const t=e.getCellHeight();t!=null&&(this.eContent.style.height=`${t}px`)}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();Fd(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;const e=this.getCellWidth();this.eContent.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const{column:e,rowNode:t}=this,n=e.getColSpan(t),s=[];if(n===1)s.push(e);else{let i=e;const r=e.getPinned();for(let a=0;i&&a<n&&(s.push(i),i=this.beans.visibleCols.getColAfter(i),!(!i||$t(i)||r!==i.getPinned()));a++);}return s}onLeftChanged(){if(!this.eSetLeft)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=at(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||this.column.getPinned()==="left")return e;const{visibleCols:t}=this.beans,n=t.getColsLeftWidth();if(this.column.getPinned()==="right"){const s=t.bodyWidth;return n+s+(e||0)}return n+(e||0)}_legacyApplyRowSpan(e){if(this.rowSpan===1&&!e)return;const n=wD(this.beans)*this.rowSpan;this.eContent.style.height=`${n}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}},pN="ag-cell",mN="ag-cell-auto-height",CN="ag-cell-normal-height",vN="ag-cell-focus",yN="ag-cell-first-right-pinned",wN="ag-cell-last-left-pinned",bN="ag-cell-not-inline-editing",SN="ag-cell-wrap-text",vp="cellCtrl";function YD(e,t){return xD(e,t,vp)}var EN=0,Ug=class extends he{constructor(e,t,n,s){super(),this.column=e,this.rowNode=t,this.rowCtrl=s,this.rangeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.tooltipFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.beans=n;const{colId:i,colIdSanitised:r}=e;this.instanceId=i+"-"+EN++,this.colIdSanitised=r,this.createCellPosition(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusSvc.shouldRestoreFocus(this.cellPosition)}onFocusOut(){this.beans.focusSvc.clearRestoreFocus()}addFeatures(){var s;const{beans:e}=this;this.positionFeature=new gN(this,e),this.customStyleFeature=(s=e.cellStyles)==null?void 0:s.createCellCustomStyleFeature(this,e),this.mouseListener=new fN(this,e,this.column),this.keyboardListener=new dN(this,e,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature();const{rangeSvc:t}=e;t&&ad(e.gos)&&(this.rangeFeature=t.createCellRangeFeature(e,this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){const e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){var n;this.tooltipFeature=(n=this.beans.tooltipSvc)==null?void 0:n.enableCellTooltipFeature(this,e,t)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(e,t,n,s,i,r,a){var u,h,d,g,m,v;this.comp=e,this.eGui=t,this.printLayout=i,a??(a=this),this.addDomData(a),this.addFeatures(),a.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(s,a),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(u=this.positionFeature)==null||u.init(),(h=this.customStyleFeature)==null||h.setComp(e),(d=this.tooltipFeature)==null||d.refreshTooltip(),(g=this.keyboardListener)==null||g.init(),(m=this.rangeFeature)==null||m.setComp(e),r&&this.isCellEditable()?(v=this.beans.editSvc)==null||v.startEditing(this):this.showValue(!1,!0),this.onCompAttachedFuncs.length&&(this.onCompAttachedFuncs.forEach(w=>w()),this.onCompAttachedFuncs=[])}setupAutoHeight(e,t){var n;this.isAutoHeight=((n=this.beans.rowAutoHeight)==null?void 0:n.setupCellAutoHeight(this,e,t))??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}showValue(e,t){var g;const{beans:n,column:s,rowNode:i,rangeFeature:r}=this,{userCompFactory:a}=n,u=this.getValueToDisplay();let h;if(i.stub&&((g=i.groupData)==null?void 0:g[s.getId()])==null){const m=this.createCellRendererParams();h=Gk(a,s.getColDef(),m)}else if(this.isCellRenderer()){const m=this.createCellRendererParams();h=Bk(a,s.getColDef(),m)}this.comp.setRenderDetails(h,u,e),!t&&r&&ii(n,()=>r==null?void 0:r.refreshHandle())}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e)),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e){return this.rowNode.rowPinned!=null?!1:typeof e=="function"||e===!0}isCheckboxSelection(e){const{rowSelection:t}=this.beans.gridOptions;return e.checkboxSelection||Ww(this.column)&&t&&typeof t!="string"&&RO(t)}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e)),n=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),s=this.includeDndSource!=this.isIncludeControl(e.dndSource),i=this.isAutoHeight!=this.column.isAutoHeight();return t||n||s||i}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(e=!1){var t;return((t=this.beans.editSvc)==null?void 0:t.stopEditing(this,e))??!1}createCellRendererParams(){const{value:e,valueFormatted:t,column:n,rowNode:s,comp:i,eGui:r,beans:{valueSvc:a,gos:u}}=this;return ke(u,{value:e,valueFormatted:t,getValue:()=>a.getValueForDisplay(n,s),setValue:d=>a.setValue(s,n,d),formatValue:this.formatValue.bind(this),data:s.data,node:s,pinned:n.getPinned(),colDef:n.getColDef(),column:n,refreshCell:this.refreshCell.bind(this),eGridCell:r,eParentOfValue:i.getParentOfValue(),registerRowDragger:(d,g,m,v)=>this.registerRowDragger(d,g,v),setTooltip:(d,g)=>{var m;u.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(d,g),(m=this.tooltipFeature)==null||m.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){var t;this.refreshShouldDestroy()?(t=this.rowCtrl)==null||t.recreateCell(this):this.refreshCell(e)}refreshCell(e){var d,g,m,v,w,S;if(this.suppressRefreshCell||this.editing)return;const t=this.column.getColDef(),n=e!=null&&!!e.newData,s=e!=null&&!!e.suppressFlash,i=t.field==null&&t.valueGetter==null&&t.showRowGroup==null,r=e&&e.forceRefresh||i||n,a=!!this.comp,u=this.updateAndFormatValue(a),h=r||u;if(a){if(h){this.showValue(n,!1);const T=(d=this.beans.filterManager)==null?void 0:d.isSuppressFlashingCellsBecauseFiltering();!s&&!T&&t.enableCellChangeFlash&&((g=this.beans.cellFlashSvc)==null||g.flashCell(this)),(m=this.customStyleFeature)==null||m.applyUserStyles(),(v=this.customStyleFeature)==null||v.applyClassesFromColDef()}(w=this.tooltipFeature)==null||w.refreshTooltip(),(S=this.customStyleFeature)==null||S.applyCellClassRules()}}stopEditingAndFocus(e=!1,t=!1){var n;(n=this.beans.editSvc)==null||n.stopEditingAndFocus(this,e,t)}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,n=this.valueFormatted;return this.value=this.beans.valueSvc.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),e?!this.valuesAreEqual(t,this.value)||this.valueFormatted!=n:!0}valuesAreEqual(e,t){const n=this.column.getColDef();return n.equals?n.equals(e,t):e===t}addDomData(e){const t=this.eGui;Vu(this.beans.gos,t,vp,this),e.addDestroyFunc(()=>Vu(this.beans.gos,t,vp,null))}createEvent(e,t){const{rowNode:n,column:s,value:i,beans:r}=this;return ke(r.gos,{type:t,node:n,data:n.data,value:i,column:s,colDef:s.getColDef(),rowPinned:n.rowPinned,event:e,rowIndex:n.rowIndex})}processCharacter(e){var t;(t=this.keyboardListener)==null||t.processCharacter(e)}onKeyDown(e){var t;(t=this.keyboardListener)==null||t.onKeyDown(e)}onMouseEvent(e,t){var n;(n=this.mouseListener)==null||n.onMouseEvent(e,t)}getColSpanningList(){return this.positionFeature.getColSpanningList()}onLeftChanged(){var e;this.comp&&((e=this.positionFeature)==null||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:n}=this;$D(e,t,n.visibleCols)}refreshAriaColIndex(){const e=this.beans.visibleCols.getAriaColIndex(this.column);eD(this.eGui,e)}onWidthChanged(){var e;return(e=this.positionFeature)==null?void 0:e.onWidthChanged()}getRowPosition(){const{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){var e;this.comp&&((e=this.rangeFeature)==null||e.updateRangeBordersIfRangeCount())}onCellSelectionChanged(){var e;this.comp&&((e=this.rangeFeature)==null||e.onCellSelectionChanged())}isRangeSelectionEnabled(){return this.rangeFeature!=null}focusCell(e=!1){this.beans.focusSvc.setFocusedCell({...this.getFocusedCellPosition(),forceBrowserFocus:e})}onRowIndexChanged(){var e;this.createCellPosition(),this.onCellFocused(),(e=this.rangeFeature)==null||e.onCellSelectionChanged()}onSuppressCellFocusChanged(e){const t=this.eGui;t&&(im(this.column)&&(e=!0),Iu(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;const e=this.column.isFirstRightPinned();this.comp.addOrRemoveCssClass(yN,e)}onLastLeftPinnedChanged(){if(!this.comp)return;const e=this.column.isLastLeftPinned();this.comp.addOrRemoveCssClass(wN,e)}isCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}onCellFocused(e){var i;const{beans:t}=this;if(Qw(t))return;const n=this.isCellFocused();if(!this.comp){n&&(e!=null&&e.forceBrowserFocus)&&(this.focusEventToRestore=e);return}if(this.focusEventToRestore=void 0,this.comp.addOrRemoveCssClass(vN,n),n&&e&&e.forceBrowserFocus){let r=this.comp.getFocusableElement();if(this.editing){const a=el(r,null,!0);a.length&&(r=a[0])}r.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}const s=t.gos.get("editType")==="fullRow";!n&&!s&&this.editing&&((i=t.editSvc)==null||i.stopRowOrCellEdit(this)),n&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:Mo(t),column:this.column}}setInlineEditingCss(){var e;(e=this.beans.editSvc)==null||e.setInlineEditingCss(this.rowCtrl)}applyStaticCssClasses(){const{comp:e}=this;e.addOrRemoveCssClass(pN,!0),e.addOrRemoveCssClass(bN,!0);const t=this.column.isAutoHeight()==!0;e.addOrRemoveCssClass(mN,t),e.addOrRemoveCssClass(CN,!t)}onColumnHover(){var e;(e=this.beans.colHover)==null||e.onCellColumnHover(this.column,this.comp)}onColDefChanged(){var e;this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?(e=this.beans.editSvc)==null||e.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0}))}setWrapText(){const e=this.column.getColDef().wrapText==!0;this.comp.addOrRemoveCssClass(SN,e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),n=this.createEvent(e,"cellContextMenu"),{beans:s}=this;s.eventSvc.dispatchEvent(n),t.onCellContextMenu&&window.setTimeout(()=>{s.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(n)})},0)}getCellRenderer(){var e;return((e=this.comp)==null?void 0:e.getCellRenderer())??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){var t;const e=(t=this.beans.selectionSvc)==null?void 0:t.createCheckboxSelectionComponent();if(e)return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,n){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,t);return}const s=this.createRowDragComp(e,t,n);s&&(this.customRowDragComp=s,this.addDestroyFunc(()=>{this.beans.context.destroyBean(s),this.customRowDragComp=null}))}createRowDragComp(e,t,n){var i;const s=(i=this.beans.rowDragSvc)==null?void 0:i.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,n);if(s)return this.beans.context.createBean(s),s}cellEditorAttached(){this.onEditorAttachedFuncs.forEach(e=>e()),this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}},QD="__ag_grid_instance";function XD(e,t){t[QD]=e.gridInstanceId}function yp(e,t){return RN(e,t.target)}function RN(e,t){let n=t;for(;n;){const s=n[QD];if(Le(s))return s===e.gridInstanceId;n=n.parentElement}return!1}function TN(e,t){var n;return((n=YD(e,t.target))==null?void 0:n.getFocusedCellPosition())??null}var rm=(e=>(e[e.ToolPanel=0]="ToolPanel",e[e.HeaderCell=1]="HeaderCell",e[e.RowDrag=2]="RowDrag",e[e.ChartPanel=3]="ChartPanel",e[e.AdvancedFilterBuilder=4]="AdvancedFilterBuilder",e))(rm||{}),AN=class extends he{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.dragSvc=e.dragSvc,this.environment=e.environment,this.userCompFactory=e.userCompFactory}addDragSource(e,t=!1){const n={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:n,dragSource:e}),this.dragSvc.addDragSource(n)}getDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;return!e||!e.comp?null:e.comp}removeDragSource(e){const{dragSourceAndParamsList:t,dragSvc:n}=this,s=t.find(i=>i.dragSource===e);s&&(n.removeDragSource(s.params),wr(t,s))}destroy(){const{dragSourceAndParamsList:e,dragSvc:t,dropTargets:n}=this;e.forEach(s=>t.removeDragSource(s.params)),e.length=0,n.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){var n;this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=e.getDragItem(),(n=e.onDragStarted)==null||n.call(e),this.createDragAndDropImageComponent()}onDragStop(e){var n,s;(s=(n=this.dragSource)==null?void 0:n.onDragStopped)==null||s.call(n);const{lastDropTarget:t}=this;if(t!=null&&t.onDragStop){const i=this.createDropTargetEvent(t,e,null,null,!1);t.onDragStop(i)}this.clearDragAndDropProperties()}onDragCancel(){var n;const{dragSource:e,lastDropTarget:t}=this;(n=e==null?void 0:e.onDragCancelled)==null||n.call(e),t!=null&&t.onDragCancel&&t.onDragCancel(this.createDropTargetEvent(t,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e,t=!1){var g,m;const n=this.getHorizontalDirection(e),s=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);const i=this.dropTargets.filter(v=>this.isMouseOnDropTarget(e,v)),r=this.findCurrentDropTarget(e,i),{lastDropTarget:a,dragSource:u,dragAndDropImageComp:h,dragItem:d}=this;if(r!==a){if(this.leaveLastTargetIfExists(e,n,s,t),a!==null&&r===null&&((g=u==null?void 0:u.onGridExit)==null||g.call(u,d)),a===null&&r!==null&&((m=u==null?void 0:u.onGridEnter)==null||m.call(u,d)),this.enterDragTargetIfExists(r,e,n,s,t),r&&h){const{comp:v,promise:w}=h;v?v.setIcon(r.getIconName?r.getIconName():null,!1):w.then(S=>{S&&S.setIcon(r.getIconName?r.getIconName():null,!1)})}this.lastDropTarget=r}else if(r&&r.onDragging){const v=this.createDropTargetEvent(r,e,n,s,t);r.onDragging(v)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,n=[[e.getContainer()]];return t?n.concat(t):n}isMouseOnDropTarget(e,t){const n=this.getAllContainersFromDropTarget(t);let s=!1;const i=(u,h)=>{for(const d of h){const{width:g,height:m,left:v,right:w,top:S,bottom:T}=d.getBoundingClientRect();if(g===0||m===0)return!1;const A=u.clientX>=v&&u.clientX<w,O=u.clientY>=S&&u.clientY<T;if(!A||!O)return!1}return!0};for(const u of n)if(i(e,u)){s=!0;break}const{eElement:r,type:a}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(r)?!1:s&&t.isInterestedIn(a,r)}findCurrentDropTarget(e,t){const n=t.length;if(n===0)return null;if(n===1)return t[0];const i=ol(this.beans).elementsFromPoint(e.clientX,e.clientY);for(const r of i)for(const a of t)if(this.getAllContainersFromDropTarget(a).flatMap(h=>h).indexOf(r)!==-1)return a;return null}enterDragTargetIfExists(e,t,n,s,i){if(e&&e.onDragEnter){const r=this.createDropTargetEvent(e,t,n,s,i);e.onDragEnter(r)}}leaveLastTargetIfExists(e,t,n,s){const{lastDropTarget:i}=this;if(!i)return;if(i.onDragLeave){const a=this.createDropTargetEvent(i,e,t,n,s);i.onDragLeave(a)}const r=this.getDragAndDropImageComponent();r&&r.setIcon(null,!1)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(n=>n.external).find(n=>n.getContainer()===e.getContainer())||null}isDropZoneWithinThisGrid(e){const n=this.ctrlsSvc.getGridBodyCtrl().eGridBody,{dropZoneTarget:s}=e;return n.contains(s)}getHorizontalDirection(e){var s;const t=(s=this.eventLastTime)==null?void 0:s.clientX,n=e.clientX;return t===n?null:t>n?"left":"right"}getVerticalDirection(e){var s;const t=(s=this.eventLastTime)==null?void 0:s.clientY,n=e.clientY;return t===n?null:t>n?"up":"down"}createDropTargetEvent(e,t,n,s,i){const r=e.getContainer(),a=r.getBoundingClientRect(),{dragItem:u,dragSource:h,gos:d}=this,g=t.clientX-a.left,m=t.clientY-a.top;return ke(d,{event:t,x:g,y:m,vDirection:s,hDirection:n,dragSource:h,fromNudge:i,dragItem:u,dropZoneTarget:r})}positionDragAndDropImageComp(e){const t=this.getDragAndDropImageComponent();t&&Gy(t.getGui(),e,this.beans)}removeDragAndDropImageComponent(){var t;const{dragAndDropImageComp:e}=this;if(e){const{comp:n}=e;if(n){const s=n.getGui();(t=this.dragAndDropImageParent)==null||t.removeChild(s),this.destroyBean(n)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){const{dragSource:e,gos:t,userCompFactory:n}=this;if(!e)return;const s=Ik(n,ke(t,{dragSource:e}));if(!s)return;const i=s.newAgStackInstance();this.dragAndDropImageComp={promise:i},i.then(r=>{!r||!this.isAlive()||(this.processDragAndDropImageComponent(r),this.dragAndDropImageComp.comp=r)})}processDragAndDropImageComponent(e){const{dragSource:t,environment:n}=this;if(!t)return;const s=e.getGui();s.style.setProperty("position","absolute"),s.style.setProperty("z-index","9999"),XD(this.gos,s),n.applyThemeClasses(s),e.setIcon(null,!1);let{dragItemName:i}=t;typeof i=="function"&&(i=i()),e.setLabel(i||""),s.style.top="20px",s.style.left="20px";const r=nm(this.beans);this.dragAndDropImageParent=r,r?r.appendChild(s):be(54)}registerGridDropTarget(e,t){const n={getContainer:e,isInterestedIn:s=>s===1||s===0,getIconName:()=>"notAllowed"};this.addDropTarget(n),t.addDestroyFunc(()=>this.removeDropTarget(n))}},xN=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){const n=t||this.shouldSkipVerticalScroll();if(n&&this.shouldSkipHorizontalScroll())return;const s=this.scrollContainer.getBoundingClientRect(),i=this.scrollByTick;this.tickLeft=e.clientX<s.left+i,this.tickRight=e.clientX>s.right-i,this.tickUp=e.clientY<s.top+i&&!n,this.tickDown=e.clientY>s.bottom-i&&!n,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}};function qy(e,t){const n=e.column===t.column,s=e.rowPinned===t.rowPinned,i=e.rowIndex===t.rowIndex;return n&&s&&i}function DN(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(Le(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}function _N(e){let t=0,n;const{pinnedRowModel:s,rowModel:i,pageBounds:r}=e;return s!=null&&s.getPinnedTopRowCount()?n="top":i.getRowCount()?(n=null,t=r.getFirstRow()):s!=null&&s.getPinnedBottomRowCount()&&(n="bottom"),n===void 0?null:{rowIndex:t,rowPinned:n}}function IN(e){let t,n=null;const{pinnedRowModel:s,pageBounds:i}=e,r=s==null?void 0:s.getPinnedBottomRowCount(),a=s==null?void 0:s.getPinnedTopRowCount();return r?(n="bottom",t=r-1):e.rowModel.getRowCount()?(n=null,t=i.getLastRow()):a&&(n="top",t=a-1),t===void 0?null:{rowIndex:t,rowPinned:n}}function Xw(e,t){var n,s;switch(t.rowPinned){case"top":return(n=e.pinnedRowModel)==null?void 0:n.getPinnedTopRow(t.rowIndex);case"bottom":return(s=e.pinnedRowModel)==null?void 0:s.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function yg(e,t){var i;const n=(i=e.spannedRowRenderer)==null?void 0:i.getCellByPosition(t);if(n)return n;const s=e.rowRenderer.getRowByPosition(t);return s?s.getCellCtrl(t.column):null}function ZD(e,t,n){if(n===0)return!1;const s=Math.abs(e.clientX-t.clientX),i=Math.abs(e.clientY-t.clientY);return Math.max(s,i)<=n}var MN=class extends he{constructor(){super(...arguments),this.beanName="dragSvc",this.dragEndFunctions=[],this.dragSources=[]}destroy(){const{dragSources:e}=this;e.forEach(this.removeListener.bind(this)),e.length=0,super.destroy()}removeListener(e){const t=e.dragSource.eElement,n=e.mouseDownListener;if(t.removeEventListener("mousedown",n),e.touchEnabled){const s=e.touchStartListener;t.removeEventListener("touchstart",s,{passive:!0})}}removeDragSource(e){const{dragSources:t}=this,n=t.find(s=>s.dragSource===e);n&&(this.removeListener(n),wr(t,n))}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:n,includeTouch:s,stopPropagationForTouch:i}=e;n.addEventListener("mousedown",t);let r=null;const a=this.gos.get("suppressTouch");s&&!a&&(r=u=>{Gw(u.target)||(i&&u.stopPropagation(),this.onTouchStart(e,u))},n.addEventListener("touchstart",r,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:r,touchEnabled:!!s})}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const n=t.touches[0];this.touchLastTime=n,this.touchStart=n;const s=h=>this.onTouchMove(h,e.eElement),i=h=>this.onTouchUp(h,e.eElement),r=h=>{h.cancelable&&h.preventDefault()},a=t.target,u=[{target:ol(this.beans),type:"touchmove",listener:r,options:{passive:!1}},{target:a,type:"touchmove",listener:s,options:{passive:!0}},{target:a,type:"touchend",listener:i,options:{passive:!0}},{target:a,type:"touchcancel",listener:i,options:{passive:!0}}];this.addTemporaryEvents(u),e.dragStartPixels===0&&this.onCommonMove(n,this.touchStart,e.eElement)}onMouseDown(e,t){const n=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||n._alreadyProcessedByDragService||(n._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const s=d=>this.onMouseMove(d,e.eElement),i=d=>this.onMouseUp(d,e.eElement),r=d=>d.preventDefault(),a=d=>{d.key===J.ESCAPE&&this.cancelDrag(e.eElement)},u=ol(this.beans),h=[{target:u,type:"mousemove",listener:s},{target:u,type:"mouseup",listener:i},{target:u,type:"contextmenu",listener:r},{target:u,type:"keydown",listener:a}];this.addTemporaryEvents(h),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{const{target:n,type:s,listener:i,options:r}=t;n.addEventListener(s,i,r)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{const{target:n,type:s,listener:i,options:r}=t;n.removeEventListener(s,i,r)})})}isEventNearStartEvent(e,t){const{dragStartPixels:n}=this.currentDragParams,s=Le(n)?n:4;return ZD(e,t,s)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,n){var s;if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventSvc.dispatchEvent({type:"dragStarted",target:n}),this.currentDragParams.onDragStart(t),!this.currentDragParams){this.dragging=!1;return}this.currentDragParams.onDragging(t)}(s=this.currentDragParams)==null||s.onDragging(e)}onTouchMove(e,t){const n=this.getFirstActiveTouch(e.touches);n&&this.onCommonMove(n,this.touchStart,t)}onMouseMove(e,t){var n;Id()&&((n=Jt(this.beans).getSelection())==null||n.removeAllRanges()),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const{gos:t}=this,n=t.get("enableCellTextSelection"),s=e.type==="mousemove",i=r=>{const a=r.target,u=a==null?void 0:a.tagName.toLocaleLowerCase();return!!(u!=null&&u.match("^a$|textarea|input|select|button"))};return n&&s&&e.cancelable&&yp(t,e)&&!i(e)}onTouchUp(e,t){let n=this.getFirstActiveTouch(e.changedTouches);n||(n=this.touchLastTime),this.onUpCommon(n,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){var t,n;this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),(n=(t=this.currentDragParams)==null?void 0:t.onDragCancel)==null||n.call(t),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null;const{dragEndFunctions:e}=this;e.forEach(t=>t()),e.length=0}};function JD(e,t){return e+"_"+t}function Vt(e){return e instanceof e_}var e_=class extends he{constructor(e,t,n,s){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=n,this.pinned=s,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return JD(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{Vt(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const t=at(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){var t;let e=0;return(t=this.displayedChildren)==null||t.forEach(n=>{e+=n.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){var e;return!!((e=this.getColGroupDef())!=null&&e.autoHeaderHeight)}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{ki(t)?e.push(t):Vt(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{ki(t)?e.push(t):Vt(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(n=>{if(Vt(n)&&(!n.displayedChildren||!n.displayedChildren.length))return;switch(n.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(n);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(n);break;default:this.displayedChildren.push(n);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},$y="row-group-",FN="t-",PN="b-",LN=0,t_=class{constructor(e){this.master=!1,this.detail=void 0,this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=LN++,this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.__selected=!1,this.beans=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){var u;const{valueCache:n,selectionSvc:s,rowSpanSvc:i}=this.beans,r=this.data;this.data=e,n==null||n.onDataChanged(),this.updateDataOnDetailNode(),s==null||s.updateRowSelectable(this),this.resetQuickFilterAggregateText();const a=this.createDataChangedEvent(e,r,t);(u=this.__localEventService)==null||u.dispatchEvent(a),i==null||i.onRowDataUpdated(this)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,t,n){return{type:"dataChanged",node:this,oldData:t,newData:e,update:n}}getRowIndexString(){return this.rowIndex==null?(Bt(13),null):this.rowPinned==="top"?FN+this.rowIndex:this.rowPinned==="bottom"?PN+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){var a,u;const{selectionSvc:n}=this.beans,s=(a=n==null?void 0:n.createDaemonNode)==null?void 0:a.call(n,this),i=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),n&&(n.updateRowSelectable(this),n.syncInRowNode(this,s));const r=this.createDataChangedEvent(e,i,!1);(u=this.__localEventService)==null||u.dispatchEvent(r)}setId(e){var n;const t=zy(this.beans.gos);if(t)if(this.data){const s=((n=this.parent)==null?void 0:n.getRoute())??[];this.id=t({data:this.data,parentKeys:s.length>0?s:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith($y)&&Bt(14,{groupPrefix:$y})}else this.id=void 0;else this.id=e}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.dispatchRowEvent("topChanged"),this.setDisplayed(e!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,n){var s;(s=this.beans.expansionSvc)==null||s.setExpanded(this,e,t,n)}setDataValue(e,t,n){const{colModel:s,valueSvc:i,gos:r,selectionSvc:a,rowSpanSvc:u}=this.beans,h=typeof e!="string"?e:s.getCol(e)??s.getColDefCol(e);if(!h)return!1;const d=i.getValueForDisplay(h,this);if(r.get("readOnlyEdit")){const{beans:{eventSvc:m},data:v,rowIndex:w,rowPinned:S}=this;return m.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:w,rowPinned:S,column:h,colDef:h.colDef,data:v,node:this,oldValue:d,newValue:t,value:t,source:n}),!1}const g=i.setValue(this,h,t,n);return this.dispatchCellChangedEvent(h,t,d),a==null||a.updateRowSelectable(this),u==null||u.onRowDataUpdated(this),g}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;const{rowChildrenSvc:t}=this.beans;t&&(e=t.getHasChildrenValue(this)),e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,n){var i;const s={type:"cellChanged",node:this,column:e,newValue:t,oldValue:n};(i=this.__localEventService)==null||i.dispatchEvent(s)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){var e;return((e=this.beans.expansionSvc)==null?void 0:e.isExpandable(this))??!1}isSelected(){return this.footer?this.sibling.isSelected():this.__selected}depthFirstSearch(e){var t;(t=this.childrenAfterGroup)==null||t.forEach(n=>n.depthFirstSearch(e)),e(this)}dispatchRowEvent(e){var t;(t=this.__localEventService)==null||t.dispatchEvent({type:e,node:this})}setSelected(e,t=!1,n="api"){var s;(s=this.beans.selectionSvc)==null||s.setNodesSelected({nodes:[this],newValue:e,clearSelection:t,source:n})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){this.__localEventService||(this.__localEventService=new ko),this.__localEventService.addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){var s,i,r,a;(s=this.beans.validation)==null||s.checkRowEvents(e),this.__localEventService||(this.__localEventService=new ko),this.frameworkEventListenerService=(r=(i=this.beans.frameworkOverrides).createLocalEventListenerWrapper)==null?void 0:r.call(i,this.frameworkEventListenerService,this.__localEventService);const n=((a=this.frameworkEventListenerService)==null?void 0:a.wrap(t))??t;this.__localEventService.addEventListener(e,n)}removeEventListener(e,t){var s;const n=((s=this.frameworkEventListenerService)==null?void 0:s.unwrap(t))??t;this.removeLocalListener(e,n)}removeLocalListener(e,t){var n,s;(n=this.__localEventService)==null||n.removeEventListener(e,t),(s=this.__localEventService)!=null&&s.noRegisteredListenersExist()&&(this.__localEventService=null)}isFullWidthCell(){if(be(61),this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;const e=[];let t=this;for(;t&&t.key!=null;)e.push(t.key),t=t.parent;return e.reverse()}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.dispatchRowEvent("firstChildChanged"))}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.dispatchRowEvent("displayedChanged"))}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}},n_=class extends vt{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){var e;return((e=this.filterWrapper)==null?void 0:e.filterPromise)??null}afterInit(){var e,t;return((t=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null?void 0:t.then(()=>{}))??ht.resolve()}afterGuiAttached(e){var t,n;(n=(t=this.filterWrapper)==null?void 0:t.filterPromise)==null||n.then(s=>{var i;(i=s==null?void 0:s.afterGuiAttached)==null||i.call(s,e)})}afterGuiDetached(){var e,t;(t=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null||t.then(n=>{var s;(s=n==null?void 0:n.afterGuiDetached)==null||s.call(n)})}createFilter(e){var s,i;const{column:t,source:n}=this;this.filterWrapper=((s=this.beans.filterManager)==null?void 0:s.getOrCreateFilterWrapper(t))??null,(i=this.filterWrapper)!=null&&i.filterPromise&&this.filterWrapper.filterPromise.then(r=>{const a=r.getGui();Le(a)||be(69,{guiFromFilter:a}),this.appendChild(a),e&&this.eventSvc.dispatchEvent({type:"filterOpened",column:t,source:n,eGui:this.getGui()})})}onFilterDestroyed(e){(e.source==="api"||e.source==="paramsUpdated")&&e.column.getId()===this.column.getId()&&this.beans.colModel.getColDefCol(this.column)&&(Hi(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},s_="ag-resizer-wrapper",mo=(e,t)=>`<div data-ref="${e}Resizer" class="ag-resizer ag-resizer-${t}"></div>`,ON=`<div class="${s_}">
        ${mo("eTopLeft","topLeft")}
        ${mo("eTop","top")}
        ${mo("eTopRight","topRight")}
        ${mo("eRight","right")}
        ${mo("eBottomRight","bottomRight")}
        ${mo("eBottom","bottom")}
        ${mo("eBottomLeft","bottomLeft")}
        ${mo("eLeft","left")}
    </div>`,Zw=class extends he{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,n=t/2-this.getWidth()/2,s=e/2-this.getHeight()/2;this.offsetElement(n,s)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:n,width:s,minHeight:i,height:r,x:a,y:u}=this.config;this.offsetParent||this.setOffsetParent();let h=0,d=0;const g=Ss(this.element);if(g){const m=this.findBoundaryElement(),v=window.getComputedStyle(m);if(v.minWidth!=null){const w=m.offsetWidth-this.element.offsetWidth;d=parseInt(v.minWidth,10)-w}if(v.minHeight!=null){const w=m.offsetHeight-this.element.offsetHeight;h=parseInt(v.minHeight,10)-w}}if(this.minHeight=i||h,this.minWidth=n||d,s&&this.setWidth(s),r&&this.setHeight(r),(!s||!r)&&this.refreshSize(),e)this.center();else if(a||u)this.offsetElement(a,u);else if(g&&t){let m=this.boundaryEl,v=!0;if(m||(m=this.findBoundaryElement(),v=!1),m){const w=parseFloat(m.style.top),S=parseFloat(m.style.left);v?this.offsetElement(isNaN(S)?0:S,isNaN(w)?0:w):this.setPosition(S,w)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){var s,i;if(!this.config.popup||e===this.movable)return;this.movable=e;const n=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?((s=this.dragSvc)==null||s.addDragSource(n),this.moveElementDragListener=n):((i=this.dragSvc)==null||i.removeDragSource(n),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{var a;const s=!!e[t],i=this.getResizerElement(t),r={dragStartPixels:0,eElement:i,onDragStart:u=>this.onResizeStart(u,t),onDragging:this.onResize.bind(this),onDragStop:u=>this.onResizeEnd(u,t)};(s||!this.isAlive()&&!s)&&(s?((a=this.dragSvc)==null||a.addDragSource(r),this.resizeListeners.push(r),i.style.pointerEvents="all"):i.style.pointerEvents="none",this.resizable[t]=s)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,n=this.element;let s=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Wh(n,e),e=oD(n),s=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const i=this.getAvailableHeight();i&&e>i&&(e=i)}this.getHeight()!==e&&(s?(n.style.maxHeight="unset",n.style.minHeight="unset"):t?Wh(n,e):(n.style.height=`${e}px`,n.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:n}=this.offsetParent;if(!n)return null;const s=this.element.getBoundingClientRect(),i=this.offsetParent.getBoundingClientRect(),r=e?this.position.y:s.top,a=e?0:i.top;let u=0;if(t){const d=this.element.parentElement;if(d){const{bottom:g}=d.getBoundingClientRect();u=g-s.bottom}}return n+a-r-u}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:n}=this.config;let s=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Fi(t,e),e=rp(t),s=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:i}=this.offsetParent,r=n?this.position.x:this.element.getBoundingClientRect().left;i&&e+r>i&&(e=i-r)}this.getWidth()!==e&&(s?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Fi(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){var i;const{forcePopupParentAsOffsetParent:n}=this.config,s=n?this.boundaryEl:this.element;s&&((i=this.popupSvc)==null||i.positionPopup({ePopup:s,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(s.style.left),parseFloat(s.style.top)))}constrainSizeToAvailableHeight(e){var n;if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const s=this.getAvailableHeight();this.element.style.setProperty("max-height",`${s}px`)};e&&this.popupSvc?this.resizeObserverSubscriber=Dr(this.beans,(n=this.popupSvc)==null?void 0:n.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:n,isTop:s,anywhereWithin:i,topBuffer:r}=e,a=t.clientX-this.dragStartPosition.x,u=t.clientY-this.dragStartPosition.y,h=this.shouldSkipX(t,!!n,!!i,a)?0:a,d=this.shouldSkipY(t,!!s,r,u)?0:u;return{movementX:h,movementY:d}}shouldSkipX(e,t,n,s){const i=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),u=this.config.popup?this.position.x:i.left;let h=u<=0&&r.left>=e.clientX||r.right<=e.clientX&&r.right<=a.right;return h?!0:(t?h=s<0&&e.clientX>u+r.left||s>0&&e.clientX<u+r.left:n?h=s<0&&e.clientX>a.right||s>0&&e.clientX<u+r.left:h=s<0&&e.clientX>a.right||s>0&&e.clientX<a.right,h)}shouldSkipY(e,t,n=0,s){const i=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),u=this.config.popup?this.position.y:i.top;let h=u<=0&&r.top>=e.clientY||r.bottom<=e.clientY&&r.bottom<=a.bottom;return h?!0:(t?h=s<0&&e.clientY>u+r.top+n||s>0&&e.clientY<u+r.top:h=s<0&&e.clientY>a.bottom||s>0&&e.clientY<a.bottom,h)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const n=new DOMParser().parseFromString(ON,"text/html").body;e.appendChild(n.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${s_}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:n,forcePopupParentAsOffsetParent:s}=this.config;!n&&!s&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(n=>!n.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,n=0;for(let s=0;s<e.length;s++){const i=e[s],r=!!i.style.flex&&i.style.flex!=="0 0 auto";if(i===this.element)continue;let a=this.minHeight||0,u=this.minWidth||0;if(r){const h=window.getComputedStyle(i);h.minHeight&&(a=parseInt(h.minHeight,10)),h.minWidth&&(u=parseInt(h.minWidth,10))}else a=i.offsetHeight,u=i.offsetWidth;t+=a,n+=u}return{height:t,width:n}}applySizeToSiblings(e){let t=null;const n=this.getSiblings();if(n){for(let s=0;s<n.length;s++){const i=n[s];i!==t&&(e?i.style.height=`${i.offsetHeight}px`:i.style.width=`${i.offsetWidth}px`,i.style.flex="0 0 auto",i===this.element&&(t=n[s+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:n}=this.config,{isTop:s,isRight:i,isBottom:r,isLeft:a}=this.currentResizer,u=i||a,h=r||s,{movementX:d,movementY:g}=this.calculateMouseMovement({e,isLeft:a,isTop:s}),m=this.position.x,v=this.position.y;let w=0,S=0;if(u&&d){const T=a?-1:1,A=this.getWidth(),O=A+d*T;let V=!1;a&&(w=A-O,(m+w<=0||O<=this.minWidth)&&(V=!0,w=0)),V||this.setWidth(O)}if(h&&g){const T=s?-1:1,A=this.getHeight(),O=A+g*T;let V=!1;s?(S=A-O,(v+S<=0||O<=this.minHeight)&&(V=!0,S=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&A<O&&this.getMinSizeOfSiblings().height+O>this.element.parentElement.offsetHeight&&(V=!0),V||this.setHeight(O)}this.updateDragStartPosition(e.clientX,e.clientY),((t||n)&&w||S)&&this.offsetElement(m+w,v+S)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:n}=this.position;let s;this.config.calculateTopBuffer&&(s=this.config.calculateTopBuffer());const{movementX:i,movementY:r}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:s});this.offsetElement(t+i,n+r),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){var e;for(;this.resizeListeners.length;){const t=this.resizeListeners.pop();(e=this.dragSvc)==null||e.removeDragSource(t)}}destroy(){var e;super.destroy(),this.moveElementDragListener&&((e=this.dragSvc)==null||e.removeDragSource(this.moveElementDragListener)),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},i_="ag-focus-managed",Cc=class extends he{constructor(e,t={}){super(),this.eFocusable=e,this.callbacks=t,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:n=>{if(n.defaultPrevented)return;const s=_r(this.beans,this.eFocusable,!1,n.shiftKey);s&&(s.focus(),n.preventDefault())},...t}}postConstruct(){const{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:n}}=this;e.classList.add(i_),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),n&&this.addManagedElementListeners(e,{focusout:n})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:t=>{if(t.defaultPrevented||Cr(t))return;const{callbacks:n}=this;if(n.shouldStopEventPropagation(t)){Bu(t);return}t.key===J.TAB?n.onTabKeyDown(t):n.handleKeyDown&&n.handleKeyDown(t)}})}},r_={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function o_(e,t){const{debounceMs:n}=e;return wp(e)?(n!=null&&be(71),0):n??t}function wp(e){var t;return(((t=e.buttons)==null?void 0:t.indexOf("apply"))??-1)>=0}var kN=class extends vt{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=Me,this.buttonListeners=[],this.defaultDebounceMs=0}postConstruct(){this.resetTemplate(),this.createManagedBean(new Cc(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new Zw(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);const n=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(n,this.getAgComponents(),e),t=this.getGui(),t==null||t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.params.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.params=e,this.applyActive=wp(e),this.resetButtonsPanel(e)}updateParams(e){this.params=e,this.applyActive=wp(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(e,t){const{buttons:n,readOnly:s}=t??{},{buttons:i,readOnly:r}=e;if(s===r&&cD(n,i))return;const a=i&&i.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(Hi(this.eButtonsPanel),this.buttonListeners.forEach(d=>d()),this.buttonListeners=[]):a&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!a){this.eButtonsPanel&&rl(this.eButtonsPanel);return}const u=document.createDocumentFragment(),h=d=>{let g;const m=d?this.translate(`${d}Filter`):void 0;switch(d){case"apply":g=S=>this.onBtApply(!1,!1,S);break;case"clear":g=()=>this.onBtClear();break;case"reset":g=()=>this.onBtReset();break;case"cancel":g=S=>{this.onBtCancel(S)};break;default:be(75);return}const w=ni(`<button
                    type="${d==="apply"?"submit":"button"}"
                    data-ref="${d}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${m}
                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(w,{click:g})),u.append(w)};i.forEach(d=>h(d)),this.eButtonsPanel.append(u),this.getGui().appendChild(this.eButtonsPanel)}setupOnBtApplyDebounce(){const e=o_(this.params,this.defaultDebounceMs),t=fr(this,this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel??null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.params.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const n=()=>{this.onUiChanged(!1,"prevent"),t==null||t()};e!=null?this.setModelIntoUi(e).then(n):this.resetUiToDefaults().then(n)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){const t=this.getModelFromUi();if(!this.isModelValid(t))return!1;const n=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(n,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,n){n&&n.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")&&this.params.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:"columnFilter"});const{closeOnApply:s}=this.params;s&&this.applyActive&&!e&&!t&&this.close(n)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e,n=t&&t.key;let s;(n==="Enter"||n==="Space")&&(s={keyboardEvent:t}),this.hidePopup(s),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.params.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const n=this.isModelValid(this.getModelFromUi()),s=this.queryForHtmlElement('[data-ref="applyFilterButton"]');s&&id(s,!n)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e==null?void 0:e.container)}refreshFilterResizer(e){const{positionableFeature:t,gos:n}=this;if(!t||e==="toolPanel")return;e==="floatingFilter"||e==="columnFilter"?(t.restoreLastSize(),t.setResizable(n.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){var e;this.checkApplyDebounce(),(e=this.positionableFeature)==null||e.constrainSizeToAvailableHeight(!1)}refresh(e){const t=this.params;return this.params=e,this.resetButtonsPanel(e,t),!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.getLocaleTextFunc()(e,r_[e])}getCellValue(e){return this.params.getValue(e)}getPositionableElement(){return this.eFilterBody}};function NN(e,t,n){if(t==null)return null;let s=null;const{compName:i,jsComp:r,fwComp:a}=jk(e,t);return i?s={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[i]:r==null&&a==null&&t.filter===!0&&(s=n()),s}var Wg={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},Jw=class extends he{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.gos.get("domLayout"),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},n=t.autoHeight?Wg.AUTO_HEIGHT:t.print?Wg.PRINT:Wg.NORMAL;this.view.updateLayoutClasses(n,t)}},Co="Viewport",rT="fakeVScrollComp",oT=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],aT=100,Jv=150,VN=class extends he{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.scrollTimer=0,this.needsRefreshedScrollPosition=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=fr(this,()=>this.lastScrollSource[1]=null,Jv),this.resetLastVScrollDebounced=fr(this,()=>this.lastScrollSource[0]=null,Jv)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const e=this.requireUpdatedScrollPosition.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),gridSizeChanged:e}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,t=>{this.centerRowsCtrl=t.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}requireUpdatedScrollPosition(){this.needsRefreshedScrollPosition=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,Co)});for(const e of oT){const t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),n=t?fr(this,this.onVScroll.bind(this,Co),aT):this.onVScroll.bind(this,Co),s=t?fr(this,this.onVScroll.bind(this,rT),aT):this.onVScroll.bind(this,rT);this.addManagedElementListeners(this.eBodyViewport,{scroll:n}),this.registerScrollPartner(e,s)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...oT,Co]){if(this.lastScrollSource[1]===t)continue;const n=this.getViewportForSource(t);lp(n,e,this.enableRtl)}}getViewportForSource(e){return e===Co?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.eViewport,{scrollLeft:n}=t;if(this.shouldBlockScrollUpdate(1,n,!0))return;const s=ap(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(s),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(e===Co?t=this.eBodyViewport.scrollTop:t=this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;const{animationFrameSvc:n}=this;n==null||n.setScrollTop(t),this.nextScrollTop=t,e===Co?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,!n||this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded(!0):n.schedule(),this.resetLastVScrollDebounced()}doHorizontalScroll(e){const t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.eventSvc.dispatchEvent({...t,type:"bodyScrollEnd"})},Jv)}shouldBlockScrollUpdate(e,t,n=!1){return n&&!Qa()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=Jp(this.eBodyViewport),{scrollHeight:n}=this.eBodyViewport;return e<0||e+t>n}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:n}=this.centerRowsCtrl.eViewport;if(this.enableRtl&&op()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>n}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll(Co)}scrollGridIfNeeded(e=!1){const t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.requireUpdatedScrollPosition(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e,t=!1){const s=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl&&op()?e=e>0?0:s:e=Math.min(Math.max(e,0),s)),lp(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.requireUpdatedScrollPosition(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.needsRefreshedScrollPosition){const{lastOffsetHeight:n,lastScrollTop:s}=this;return{top:s,bottom:s+n}}this.needsRefreshedScrollPosition=!1;const{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const{rowModel:n}=this.beans,s=n.getRowCount();let i=-1;for(let r=0;r<s;r++){const a=n.getRow(r);if(typeof e=="function"){if(a&&e(a)){i=r;break}}else if(e===a||e===a.data){i=r;break}}i>=0&&this.ensureIndexVisible(i,t)}ensureIndexVisible(e,t){if(Wn(this.gos,"print"))return;const{rowModel:n}=this.beans,s=n.getRowCount();if(typeof e!="number"||e<0||e>=s){be(88,{index:e});return}const r=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel"),{frameworkOverrides:a,pagination:u,pageBounds:h,rowContainerHeight:d,rowRenderer:g}=this.beans;a.wrapIncoming(()=>{var A;r||u==null||u.goToPageWithIndex(e);const m=this.ctrlsSvc.getGridBodyCtrl(),v=m.stickyTopHeight,w=m.stickyBottomHeight,S=n.getRow(e);let T;do{const O=S.rowTop,V=S.rowHeight,H=h.getPixelOffset(),z=S.rowTop-H,U=z+S.rowHeight,K=this.getVScrollPosition(),k=d.divStretchOffset,D=K.top+k,x=K.bottom+k,L=x-D,M=d.getScrollPositionForPixel(z),B=d.getScrollPositionForPixel(U-L),F=Math.min((M+B)/2,z),ye=D+v>z,ve=x-w<U;let ie=null;t==="top"?ie=M:t==="bottom"?ie=B:t==="middle"?ie=F:ye?ie=M-v:ve&&(ie=B+w),ie!==null&&(this.setVerticalScrollPosition(ie),g.redraw({afterScroll:!0})),T=O!==S.rowTop||V!==S.rowHeight}while(T);(A=this.animationFrameSvc)==null||A.flushAllFrames()})}ensureColumnVisible(e,t="auto"){const{colModel:n,frameworkOverrides:s}=this.beans,i=n.getCol(e);if(!i||i.isPinned()||!this.visibleCols.isColDisplayed(i))return;const r=this.getPositionedHorizontalScroll(i,t);s.wrapIncoming(()=>{var a;r!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(r),this.centerRowsCtrl.onHorizontalViewportChanged(),(a=this.animationFrameSvc)==null||a.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:n,columnAfterEnd:s}=this.isColumnOutsideViewport(e),i=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),r=this.centerRowsCtrl.getCenterWidth(),a=this.enableRtl;let u=(a?n:s)||i,h=a?s:n;t!=="auto"&&(u=t==="start",h=t==="end");const d=t==="middle";if(u||h||d){const{colLeft:g,colMiddle:m,colRight:v}=this.getColumnBounds(e);return d?m-r/2:u?a?v:g:a?g-r:v-r}return null}isColumnOutsideViewport(e){const{start:t,end:n}=this.getViewportBounds(),{colLeft:s,colRight:i}=this.getColumnBounds(e),r=this.enableRtl,a=r?t>i:n<i,u=r?n<s:t>s;return{columnBeforeStart:a,columnAfterEnd:u}}getColumnBounds(e){const t=this.enableRtl,n=this.visibleCols.bodyWidth,s=e.getActualWidth(),i=e.getLeft(),r=t?-1:1,a=t?n-i:i,u=a+s*r,h=a+s/2*r;return{colLeft:a,colMiddle:h,colRight:u}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),n=t,s=e+t;return{start:n,end:s,width:e}}},eb=class extends he{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=Wn(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:n}=this.beans,s=t.bodyWidth,i=t.getColsLeftWidth(),r=t.getDisplayedColumnsRightWidth();let a;e?a=s+i+r:(a=s,this.addSpacer&&(this.gos.get("enableRtl")?i:r)===0&&n.verticalScrollShowing&&(a+=n.getScrollbarWidth())),this.callback(a)}},BN=class extends he{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const{beans:e,centerContainerCtrl:t,gridBodyCtrl:n}=this,s=()=>{ii(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(s),n.registerBodyViewportResizeListener(s)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:e,colFlex:t}=this.beans;e==null||e.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const n=this.centerContainerCtrl.getCenterWidth();n!==this.centerWidth&&(this.centerWidth=n,t==null||t.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.eBodyViewport,t=Jp(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}};function a_(e,t,n,s,i,r){if(n==null&&t==null)return;const a={},u={},h=(d,g)=>{d.split(" ").forEach(m=>{m.trim()!=""&&g(m)})};if(n){const d=Object.keys(n);for(let g=0;g<d.length;g++){const m=d[g],v=n[m];let w;typeof v=="string"?w=e?e.evaluate(v,s):!0:typeof v=="function"&&(w=v(s)),h(m,S=>{w?a[S]=!0:u[S]=!0})}}t&&r&&Object.keys(t).forEach(d=>h(d,g=>{a[g]||(u[g]=!0)})),r&&Object.keys(u).forEach(r),Object.keys(a).forEach(i)}function lT(e){if(e.group)return e.level;const t=e.parent;return t?t.level+1:0}var GN=0,ud="renderedRow",Ky=class extends he{constructor(e,t,n,s,i){var r;super(),this.rowNode=e,this.useAnimationFrameForCreate=s,this.printLayout=i,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=((r=t.pagination)==null?void 0:r.getCurrentPage())??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+GN++,this.rowId=On(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=lT(this.rowNode),this.setRowType(),this.setAnimateFlags(n),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=On(e)}updateGui(e,t){e==="left"?this.leftGui=t:e==="right"?this.rightGui=t:e==="fullWidth"?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,n,s){s=Pd(this,this.beans.context,s);const i={rowComp:e,element:t,containerType:n,compBean:s};this.allRowGuis.push(i),this.updateGui(n,i),this.initialiseRowComp(i),!(this.rowType==="FullWidthLoading"||this.rowNode.stub)&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";this.allRowGuis.forEach(n=>n.element.style.display=t)}initialiseRowComp(e){const t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),vD(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const n=e.rowComp;this.getInitialRowClasses(e.containerType).forEach(i=>n.addOrRemoveCssClass(i,!0)),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&Nu(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),Vu(t,e.element,ud,this),e.compBean.addDestroyFunc(()=>Vu(t,e.element,ud,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKey!=null&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){const t=On(this.rowNode.id);this.rowId=t,t!=null&&e.setRowId(t)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(YR(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(YR(()=>{e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){var s;const t=(s=this.beans.rowDragSvc)==null?void 0:s.createRowDragCompForRow(this.rowNode,e.element);if(!t)return;const n=this.createBean(t,this.beans.context);this.rowDragComps.push(n),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(i=>i!==n),this.destroyBean(n,this.beans.context)})}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType),n=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(n)}getFullWidthCellRenderers(){var e,t;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(n=>{var s;return(s=n==null?void 0:n.rowComp)==null?void 0:s.getFullWidthCellRenderer()}):[(t=(e=this.fullWidthGui)==null?void 0:e.rowComp)==null?void 0:t.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;const t={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(t)}areAllContainersReady(){const{leftGui:e,centerGui:t,rightGui:n,beans:{visibleCols:s}}=this,i=!!e||!s.isPinningLeft(),r=!!t,a=!!n||!s.isPinningRight();return i&&r&&a}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this.rowNode}):!1}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),t=this.isNodeFullWidthCell(),n=this.gos.get("masterDetail")&&this.rowNode.detail,s=this.beans.colModel.isPivotMode(),r=!!this.rowNode.group&&!this.rowNode.footer&&Uw(this.gos,s);e?this.rowType="FullWidthLoading":n?this.rowType="FullWidthDetail":t?this.rowType="FullWidth":r?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;const{animationFrameSvc:n}=this.beans;if(!n||e||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(t);return}this.updateColumnListsPending||(n.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}getNewCellCtrl(e){var n;if(!((n=this.beans.rowSpanSvc)!=null&&n.isCellSpanning(e,this.rowNode)))return new Ug(e,this.rowNode,this.beans,this)}shouldRecreateCellCtrl(e){var t;return!!((t=this.beans.rowSpanSvc)!=null&&t.isCellSpanning(e.column,this.rowNode))}createCellCtrls(e,t,n=null){const s={list:[],map:{}},i=(a,u,h)=>{h!=null?s.list.splice(h,0,u):s.list.push(u),s.map[a]=u},r=[];for(const a of t){const u=a.getInstanceId();let h=e.map[u];h&&this.shouldRecreateCellCtrl(h)&&(h.destroy(),h=void 0),h||(h=this.getNewCellCtrl(a)),h&&i(u,h)}for(const a of e.list){const u=a.column.getInstanceId();if(s.map[u]!=null)continue;!this.isCellEligibleToBeRemoved(a,n)?r.push([u,a]):a.destroy()}if(r.length)for(const[a,u]of r){const h=s.list.findIndex(g=>g.column.getLeft()>u.column.getLeft()),d=h===-1?void 0:Math.max(h-1,0);i(a,u,d)}return s}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach(t=>{const n=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(n,e)})}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const n=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n);const s=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,s,"left");const i=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,i,"right")}}isCellEligibleToBeRemoved(e,t){const{column:i}=e;if(i.getPinned()!=t)return!0;const{editing:r,cellPosition:a}=e,{focusSvc:u,visibleCols:h}=this.beans,d=u.isCellFocused(a);return r||d?!(h.allCols.indexOf(i)>=0):!0}getDomOrder(){return this.gos.get("ensureDomOrder")||Wn(this.gos,"print")}listenOnDomOrder(e){const t=()=>{e.rowComp.setDomOrder(this.getDomOrder())};e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],t)}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;const t=Le(this.rowNode.oldRowTop),{visibleCols:n}=this.beans,s=n.isPinningLeft(),i=n.isPinningRight();if(t){const{slideInAnimation:r}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){r.fullWidth=!0;return}r.center=!0,r.left=s,r.right=i}else{const{fadeInAnimation:r}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){r.fullWidth=!0;return}r.center=!0,r.left=s,r.right=i}}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const e=(a,u)=>a?a.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(a.element,u).params):!0,t=e(this.fullWidthGui,null),n=e(this.centerGui,null),s=e(this.leftGui,"left"),i=e(this.rightGui,"right");return t&&n&&s&&i}addListeners(){var e;this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),...((e=this.beans.expansionSvc)==null?void 0:e.getRowExpandedListeners(this))??{}}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventSvc,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.beans.rowSpanSvc&&this.addManagedListeners(this.beans.rowSpanSvc,{spannedCellsUpdated:({pinned:t})=>{t&&!this.rowNode.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(n=>{this.addRowDraggerToRow(n)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onRowIndexChanged())},cellChanged:e=>{this.getAllCellCtrls().forEach(t=>t.onCellChanged(e))}})}onRowNodeDataChanged(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(n=>n.refreshCell({suppressFlash:!e.update,newData:!e.update})),this.allRowGuis.forEach(n=>{this.setRowCompRowId(n.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(n.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.rowNode.highlighted;this.allRowGuis.forEach(t=>{const n=e==="Above",s=e==="Below";t.rowComp.addOrRemoveCssClass("ag-row-highlight-above",n),t.rowComp.addOrRemoveCssClass("ag-row-highlight-below",s)})}postProcessRowDragging(){const e=this.rowNode.dragging;this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass("ag-row-dragging",e))}verifyCells(){this.onDisplayedColumnsChanged()}onDisplayedColumnsChanged(){var e;this.updateColumnLists(!0),(e=this.beans.rowAutoHeight)==null||e.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Mo(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const t=this.findFullWidthInfoForEvent(e);if(!t)return;const{rowGui:n,column:s}=t;if(!(n.element===e.target))return;const a=this.rowNode,{focusSvc:u,navigation:h}=this.beans,d=u.getFocusedCell(),g={rowIndex:a.rowIndex,rowPinned:a.rowPinned,column:(d==null?void 0:d.column)??s};h==null||h.navigateToNextCell(e,e.key,g,!0),e.preventDefault()}onTabKeyDown(e){var u;if(e.defaultPrevented||Cr(e))return;const t=this.allRowGuis.find(h=>h.element.contains(e.target)),n=t?t.element:null,s=n===e.target,i=un(this.beans);let r=!1;n&&i&&(r=n.contains(i)&&i.classList.contains("ag-cell"));let a=null;!s&&!r&&(a=_r(this.beans,n,!1,e.shiftKey)),(this.isFullWidth()&&s||!a)&&((u=this.beans.navigation)==null||u.onTabKeyDown(this,e))}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var t;const e=(t=this.allRowGuis.find(n=>Ss(n.element)))==null?void 0:t.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:-1;this.allRowGuis.forEach(n=>{Iu(n.element,"tabindex",t)})}onFullWidthRowFocused(e){var i;const t=this.rowNode,n=e?this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned:!1,s=this.fullWidthGui?this.fullWidthGui.element:(i=this.centerGui)==null?void 0:i.element;s&&(s.classList.toggle("ag-full-width-focus",n),n&&(e!=null&&e.forceBrowserFocus)&&s.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const n={list:[],map:{}};return e.list.forEach(s=>{s!==t&&(n.list.push(s),n.map[s.column.getInstanceId()]=s)}),n}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t);break}}createRowEvent(e,t){const{rowNode:n}=this;return ke(this.gos,{type:e,node:n,data:n.data,rowIndex:n.rowIndex,rowPinned:n.rowPinned,event:t})}createRowEventWithSource(e,t){const n=this.createRowEvent(e,t);return n.source=this,n}onRowDblClick(e){Cr(e)||this.beans.eventSvc.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",e))}findFullWidthInfoForEvent(e){if(!e)return;const t=this.findFullWidthRowGui(e.target),n=this.getColumnForFullWidth(t);if(!(!t||!n))return{rowGui:t,column:n}}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){const{visibleCols:t}=this.beans;switch(e==null?void 0:e.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=Xa(e.target,"ag-row-drag",3),!this.isFullWidth())return;const t=this.rowNode,{rangeSvc:n,focusSvc:s}=this.beans;n==null||n.removeAllCellRanges();const i=this.findFullWidthInfoForEvent(e);if(!i)return;const{rowGui:r,column:a}=i,u=r.element,h=e.target;let d=e.defaultPrevented||Id();u&&u.contains(h)&&Gw(h)&&(d=!1),s.setFocusedCell({rowIndex:t.rowIndex,column:a,rowPinned:t.rowPinned,forceBrowserFocus:d})}onRowClick(e){if(Cr(e)||this.lastMouseDownOnDragger)return;const{eventSvc:n,selectionSvc:s}=this.beans;n.dispatchEvent(this.createRowEventWithSource("rowClicked",e)),s==null||s.handleSelectionEvent(e,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(e){var t;this.rowType==="FullWidthDetail"&&((t=this.beans.masterDetailSvc)==null||t.setupDetailRowAutoHeight(this,e))}createFullWidthCompDetails(e,t){const{gos:n,rowNode:s}=this,i=ke(n,{fullWidth:!0,data:s.data,node:s,value:s.key,valueFormatted:s.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(a,u,h,d)=>this.addFullWidthRowDragging(a,u,h,d),setTooltip:(a,u)=>{n.assertModuleRegistered("Tooltip",3),this.refreshRowTooltip(a,u)}}),r=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return Vk(r,i);case"FullWidthGroup":return Nk(r,i);case"FullWidthLoading":return kk(r,i);default:return Ok(r,i)}}refreshRowTooltip(e,t){var n;this.fullWidthGui&&(this.tooltipFeature=(n=this.beans.tooltipSvc)==null?void 0:n.refreshRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t,n="",s){const{rowDragSvc:i,context:r}=this.beans;if(!i||!this.isFullWidth())return;const a=i.createRowDragComp(()=>n,this.rowNode,void 0,e,t,s);this.createBean(a,r),this.addDestroyFunc(()=>{this.destroyBean(a,r)})}onUiLevelChanged(){const e=lT(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,n="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(s=>{s.rowComp.addOrRemoveCssClass(t,!0),s.rowComp.addOrRemoveCssClass(n,!1)})}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-first",e))),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-last",t)))}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){var t;const e=[];(t=this.beans.rowStyleSvc)==null||t.processClassesFromGridOptions(e,this.rowNode),e.length&&e.forEach(n=>{this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass(n,!0))})}postProcessRowClassRules(){var e;(e=this.beans.rowStyleSvc)==null||e.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(t,!0))},t=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(t,!1))})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,n=>n.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"||e==="right"?e:null}getInitialRowClasses(e){var u;const t=this.getPinnedForContainer(e),n=this.isFullWidth(),{rowNode:s,beans:i}=this,r=[];r.push("ag-row"),r.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&r.push("ag-opacity-zero"),r.push(s.rowIndex%2===0?"ag-row-even":"ag-row-odd"),s.isRowPinned()&&r.push("ag-row-pinned"),s.isSelected()&&r.push("ag-row-selected"),s.footer&&r.push("ag-row-footer"),r.push("ag-row-level-"+this.rowLevel),s.stub&&r.push("ag-row-loading"),n&&r.push("ag-full-width-row"),(u=i.expansionSvc)==null||u.addExpandedCss(r,s),s.dragging&&r.push("ag-row-dragging");const{rowStyleSvc:a}=i;return a&&(a.processClassesFromGridOptions(r,s),a.preProcessRowClassRules(r,s)),r.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&r.push("ag-row-first"),this.isLastRowOnPage()&&r.push("ag-row-last"),n&&(t==="left"&&r.push("ag-cell-last-left-pinned"),t==="right"&&r.push("ag-cell-first-right-pinned")),r}processStylesFromGridOptions(){var e;return((e=this.beans.rowStyleSvc)==null?void 0:e.processStylesFromGridOptions(this.rowNode))??this.emptyStyle}onRowSelected(e){var t;(t=this.beans.selectionSvc)==null||t.onRowCtrlSelected(this,n=>{(n===this.centerGui||n===this.fullWidthGui)&&this.announceDescription()},e)}announceDescription(){var e;(e=this.beans.selectionSvc)==null||e.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:n}=e,{rowNode:s,beans:i,gos:r}=this;n.addManagedListeners(t,{mouseenter:()=>s.dispatchRowEvent("mouseEnter"),mouseleave:()=>s.dispatchRowEvent("mouseLeave")}),n.addManagedListeners(s,{mouseEnter:()=>{var a;!((a=i.dragSvc)!=null&&a.dragging)&&!r.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),s.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){const t=e?[e]:this.allRowGuis.map(n=>n.element);for(const n of t)n.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){const t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),n=this.applyPaginationOffset(t.top,!0)-100,s=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(n,e),s)}forEachGui(e,t){e?t(e):this.allRowGuis.forEach(t)}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;const t=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),i=yD(this.gos)?Vy(this.beans,this.rowNode).height:void 0,r=i?`${Math.min(n,i)-2}px`:void 0;this.forEachGui(e,a=>{a.element.style.height=`${t}px`,r&&a.element.style.setProperty("--ag-line-height",r)})}destroyFirstPass(e=!1){this.active=!1;const{rowNode:t}=this;if(!e&&Fu(this.gos)&&!t.sticky)if(t.rowTop!=null){const i=this.roundRowTopToBounds(t.rowTop);this.setRowTop(i)}else this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));t.setHovered(!1);const n=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(n),this.beans.eventSvc.dispatchEvent(n),super.destroy()}destroySecondPass(){var t;this.allRowGuis.length=0,(t=this.beans.editSvc)==null||t.stopRowEditing(this);const e=n=>(n.list.forEach(s=>s.destroy()),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,t=>{t.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),t.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const{focusSvc:e,editSvc:t}=this.beans,n=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);n!==this.rowFocused&&(this.rowFocused=n,this.setFocusedClasses()),!n&&this.editing&&(t==null||t.stopRowEditing(this,!1))}onPaginationChanged(){var t;const e=((t=this.beans.pagination)==null?void 0:t.getCurrentPage())??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;const n=this.beans.pageBounds.getPixelOffset();return e+n*(t?1:-1)}setRowTop(e){if(!this.printLayout&&Le(e)){const t=this.applyPaginationOffset(e),i=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t)}px`;this.setRowTopStyle(i)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let n;if(t.sticky)n=t.stickyRowTop;else{const s=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,i=this.applyPaginationOffset(s);n=t.isRowPinned()?i:this.beans.rowContainerHeight.getRealPixelPosition(i)}return n+"px"}setRowTopStyle(e){this.allRowGuis.forEach(t=>this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`))}getCellCtrl(e,t=!1){let n=null;return this.getAllCellCtrls().forEach(s=>{s.column==e&&(n=s)}),n!=null||t||this.getAllCellCtrls().forEach(s=>{s.getColSpanningList().indexOf(e)>=0&&(n=s)}),n}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){var r,a;const t=this.rowNode.getRowIndexString();if(t===null)return;const n=(((r=this.beans.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:r.getRowCount())??0)+(((a=this.beans.filterManager)==null?void 0:a.getHeaderRowCount())??0),s=this.rowNode.rowIndex%2===0,i=n+this.rowNode.rowIndex+1;this.forEachGui(e,u=>{u.rowComp.setRowIndex(t),u.rowComp.addOrRemoveCssClass("ag-row-even",s),u.rowComp.addOrRemoveCssClass("ag-row-odd",!s),qL(u.element,i)})}};function l_(e){var n;return e.altKey||e.ctrlKey||e.metaKey?!1:((n=e.key)==null?void 0:n.length)===1}function uT(e,t,n,s,i){const r=s?s.getColDef().suppressKeyboardEvent:void 0;if(!r)return!1;const a=ke(e,{event:t,editing:i,column:s,node:n,data:n.data,colDef:s.getColDef()});return!!(r&&r(a))}function HN(e){const{pinnedRowModel:t,rowModel:n}=e,[s,i]=[(t==null?void 0:t.isEmpty("top"))??!0,(t==null?void 0:t.isEmpty("bottom"))??!0],r=s?null:"top";let a,u;i?(a=null,u=n.getRowCount()-1):(a="bottom",u=(t==null?void 0:t.getPinnedBottomRowCount())??-1);const{visibleCols:h,rangeSvc:d}=e,g=h.allCols;!d||!(g!=null&&g.length)||d.setCellRange({rowStartIndex:0,rowStartPinned:r,rowEndIndex:u,rowEndPinned:a})}var zN=65,UN=67,WN=86,jN=68,qN=90,$N=89;function KN(e){const{keyCode:t}=e;let n;switch(t){case zN:n=J.A;break;case UN:n=J.C;break;case WN:n=J.V;break;case jN:n=J.D;break;case qN:n=J.Z;break;case $N:n=J.Y;break;default:n=e.code}return n}var YN=class extends he{constructor(e){super(),this.element=e}postConstruct(){var e;this.addKeyboardListeners(),this.addMouseListeners(),(e=this.beans.touchSvc)==null||e.mockRowContextMenu(this)}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",AD("touchstart")?"touchstart":"mousedown"].forEach(n=>{const s=this.processMouseEvent.bind(this,n);this.addManagedElementListeners(this.element,{[n]:s})})}processMouseEvent(e,t){var i;if(!yp(this.gos,t)||Cr(t))return;const{cellCtrl:n,rowCtrl:s}=this.getControlsForEventTarget(t.target);e==="contextmenu"?(n!=null&&n.column&&n.dispatchCellContextMenuEvent(t),(i=this.beans.contextMenuSvc)==null||i.handleContextMenuMouseEvent(t,void 0,s,n)):(n&&n.onMouseEvent(e,t),s&&s.onMouseEvent(e,t))}getControlsForEventTarget(e){const{gos:t}=this;return{cellCtrl:YD(t,e),rowCtrl:xD(t,e,ud)}}processKeyboardEvent(e,t){const{cellCtrl:n,rowCtrl:s}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(n?this.processCellKeyboardEvent(n,e,t):s&&s.isFullWidth()&&this.processFullWidthRowKeyboardEvent(s,e,t))}processCellKeyboardEvent(e,t,n){var u;const{rowNode:s,column:i,editing:r}=e;!uT(this.gos,n,s,i,r)&&t==="keydown"&&(!r&&((u=this.beans.navigation)!=null&&u.handlePageScrollingKey(n))||e.onKeyDown(n),this.doGridOperations(n,e.editing),l_(n)&&e.processCharacter(n)),t==="keydown"&&this.eventSvc.dispatchEvent(e.createEvent(n,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,n){const{rowNode:s}=e,{focusSvc:i,navigation:r}=this.beans,a=i.getFocusedCell(),u=a&&a.column;if(!uT(this.gos,n,s,u,!1)){const d=n.key;if(t==="keydown")switch(d){case J.PAGE_HOME:case J.PAGE_END:case J.PAGE_UP:case J.PAGE_DOWN:r==null||r.handlePageScrollingKey(n,!0);break;case J.UP:case J.DOWN:e.onKeyboardNavigate(n);break;case J.TAB:e.onTabKeyDown(n);break}}t==="keydown"&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",n))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!yp(this.gos,e))return;const n=KN(e),{clipboardSvc:s,undoRedo:i}=this.beans;if(n===J.A)return this.onCtrlAndA(e);if(n===J.C)return this.onCtrlAndC(s,e);if(n===J.D)return this.onCtrlAndD(s,e);if(n===J.V)return this.onCtrlAndV(s,e);if(n===J.X)return this.onCtrlAndX(s,e);if(n===J.Y)return this.onCtrlAndY(i);if(n===J.Z)return this.onCtrlAndZ(i,e)}onCtrlAndA(e){const{beans:{rowModel:t,rangeSvc:n,selectionSvc:s},gos:i}=this;n&&ad(i)&&t.isRowsToRender()?HN(this.beans):s&&(s==null||s.selectAllRowNodes({source:"keyboardSelectAll",selectAll:xO(i)})),e.preventDefault()}onCtrlAndC(e,t){if(!e||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:n,rowCtrl:s}=this.getControlsForEventTarget(t.target);n!=null&&n.editing||s!=null&&s.editing||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:n,rowCtrl:s}=this.getControlsForEventTarget(t.target);n!=null&&n.editing||s!=null&&s.editing||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){const{cellCtrl:n,rowCtrl:s}=this.getControlsForEventTarget(t.target);n!=null&&n.editing||s!=null&&s.editing||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){!this.gos.get("undoRedoCellEditing")||!e||(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){e==null||e.redo("ui")}},u_=class extends he{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){const t=e.uiContainerHeight,n=t!=null?`${t}px`:"";this.eContainer.style.height=n,this.eViewport&&(this.eViewport.style.height=n)}},wg=e=>e.topRowCtrls,bg=e=>e.getStickyTopRowCtrls(),Sg=e=>e.getStickyBottomRowCtrls(),Eg=e=>e.bottomRowCtrls,Rg=e=>e.allRowCtrls,ey=e=>e.getCtrls("top"),ty=e=>e.getCtrls("center"),ny=e=>e.getCtrls("bottom"),QN={center:{type:"center",name:"center-cols",getRowCtrls:Rg,getSpannedRowCtrls:ty},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:Rg,getSpannedRowCtrls:ty},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:Rg,getSpannedRowCtrls:ty},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:Rg},topCenter:{type:"center",name:"floating-top",getRowCtrls:wg,getSpannedRowCtrls:ey},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:wg,getSpannedRowCtrls:ey},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:wg,getSpannedRowCtrls:ey},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:wg},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:bg},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:bg},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:bg},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:bg},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:Sg},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:Sg},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:Sg},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:Sg},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:Eg,getSpannedRowCtrls:ny},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:Eg,getSpannedRowCtrls:ny},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:Eg,getSpannedRowCtrls:ny},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:Eg}};function c_(e){return`ag-${Od(e).name}-viewport`}function jg(e){const t=Od(e);return t.container??`ag-${t.name}-container`}function XN(e){return`ag-${Od(e).name}-spanned-cells-container`}function Od(e){return QN[e]}var ZN=["topCenter","topLeft","topRight"],JN=["bottomCenter","bottomLeft","bottomRight"],eV=["center","left","right"],tV=["center","left","right","fullWidth"],nV=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],sV=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],iV=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],h_=["stickyTopCenter","stickyTopLeft","stickyTopRight"],d_=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],rV=[...h_,"stickyTopFullWidth",...d_,"stickyBottomFullWidth"],oV=[...ZN,...JN,...eV,...h_,...d_],aV=class extends he{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=Od(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new BN(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,n,s){this.comp=e,this.eContainer=t,this.eSpannedContainer=n,this.eViewport=s,this.createManagedBean(new YN(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols:i,rangeSvc:r}=this.beans,a=()=>this.onPinnedWidthChanged();this.forContainers(sV,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(i==null?void 0:i.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:a})}),this.forContainers(iV,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(i==null?void 0:i.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:a})}),this.forContainers(tV,()=>this.createManagedBean(new u_(this.eContainer,this.name==="center"?s:void 0))),r&&this.forContainers(oV,()=>this.createManagedBean(r.createDragListenerFeature(this.eContainer))),this.forContainers(nV,()=>this.createManagedBean(new eb(u=>this.comp.setContainerWidth(`${u}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){const{spannedRowRenderer:e,gos:t}=this.beans;this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsChanged.bind(this),displayedRowsChanged:n=>this.onDisplayedRowsChanged(n.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{const n=this.options.getSpannedRowCtrls(e);n&&this.comp.setSpannedRowCtrls(n,!1)}})}listenOnDomOrder(){if(rV.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const t=()=>{const n=this.gos.get("ensureDomOrder"),s=Wn(this.gos,"print");this.comp.setDomOrder(n||s)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const{dragSvc:e}=this.beans;if(!e)return;const t=n=>{e.dragging&&n.cancelable&&n.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,n,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return rd(this.eViewport)}getCenterViewportScrollLeft(){return ap(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=Dr(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return lD(this.eViewport)}getViewportScrollLeft(){return ap(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||rO(this.eViewport)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){lp(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const n=Wn(this.gos,"print"),i=this.gos.get("embedFullWidthRows")||n,r=t.filter(a=>{const u=a.isFullWidth();return this.options.fullWidth?!i&&u:i||!u});this.comp.setRowCtrls({rowCtrls:r,useFlushSync:e})}},lV="ag-force-vertical-scroll",uV="ag-selectable",cV="ag-column-moving",hV=class extends he{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,n,s,i,r,a){var u,h;this.comp=e,this.eGridBody=t,this.eBodyViewport=n,this.eTop=s,this.eBottom=i,this.eStickyTop=r,this.eStickyBottom=a,this.eCenterColsViewport=n.querySelector(`.${c_("center")}`),this.eFullWidthContainer=n.querySelector(`.${jg("fullWidth")}`),this.eStickyTopFullWidthContainer=r.querySelector(`.${jg("stickyTopFullWidth")}`),this.eStickyBottomFullWidthContainer=a.querySelector(`.${jg("stickyBottomFullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",d=>this.setCellTextSelection(d.currentValue)),this.createManagedBean(new Jw(this.comp)),this.scrollFeature=this.createManagedBean(new VN(this.eBodyViewport)),(u=this.beans.rowDragSvc)==null||u.setupRowDrag(this.eBodyViewport,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([s,n,i,r,a]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),(h=this.filterManager)==null||h.setupAdvFilterHeaderComp(s),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t}),this.addManagedPropertyListener("treeData",t)}onGridColumnsChanged(){const e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const n=t&&e.getScrollbarWidth()||0,s=iD()?16:0,i=`calc(100% + ${n+s}px)`;ii(this.beans,()=>this.comp.setBodyViewportWidth(i)),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:e,colModel:t}=this;let n=this.gos.get("treeData");if(!n){const s=t.isPivotMode();n=(e?e.columns.length:0)>=(s?2:1)}this.comp.setGridRootRole(n?"treegrid":"grid")}addFocusListeners(e){e.forEach(t=>{this.addManagedElementListeners(t,{focusin:n=>{const{target:s}=n,i=Xa(s,"ag-root",t);t.classList.toggle("ag-has-focus",!i)},focusout:n=>{const{target:s,relatedTarget:i}=n,r=t.contains(i),a=Xa(i,"ag-root",t);Xa(s,"ag-root",t)||(!r||a)&&t.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(cV,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(uV,e)}updateScrollingClasses(){const{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){var e;(e=this.beans.editSvc)==null||e.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){var i,r;const e=(((i=this.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:i.getRowCount())??0)+(((r=this.filterManager)==null?void 0:r.getHeaderRowCount())??0),{rowModel:t}=this.beans,n=t.isLastRowIndexKnown()?t.getRowCount():-1,s=n===-1?-1:e+n;this.comp.setRowCount(s)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?lV:null,n=Wn(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||n&&oO(this.eBodyViewport)}setupRowAnimationCssClass(){const{rowContainerHeight:e,environment:t}=this.beans;let n=t.sizesMeasured;const s=()=>{const i=n&&Fu(this.gos)&&!e.stretching,r=i?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(r,i)};s(),this.addManagedEventListeners({heightScaleChanged:s}),this.addManagedPropertyListener("animateRows",s),this.addManagedEventListeners({gridStylesChanged:()=>{!n&&t.sizesMeasured&&(n=!0,s())}})}addBodyViewportListener(){const{popupSvc:e,touchSvc:t}=this.beans,n=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:n}),t==null||t.mockBodyContextMenu(this,n),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this,e)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:n,shiftKey:s}=e;(s||Math.abs(t)>Math.abs(n))&&yp(this.gos,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaX:t,deltaY:n,shiftKey:s}=e,i=s||Math.abs(t)>Math.abs(n),r=e.target;i?(this.eStickyTopFullWidthContainer.contains(r)||this.eStickyBottomFullWidthContainer.contains(r))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(n))}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:n}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||n})}onBodyViewportContextMenu(e,t,n){var i;if(!e&&!n)return;this.gos.get("preventDefaultOnContextMenu")&&(e||n).preventDefault();const{target:s}=e||t;(s===this.eBodyViewport||s===this.ctrlsSvc.get("center").eViewport)&&((i=this.beans.contextMenuSvc)==null||i.showContextMenu({mouseEvent:e,touchEvent:n,value:null,anchorToElement:this.eGridBody,source:"ui"}))}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&e!=null&&e.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){const{pinnedRowModel:e}=this,t=(e==null?void 0:e.getPinnedTopTotalHeight())??0,n=(e==null?void 0:e.getPinnedBottomTotalHeight())??0;this.comp.setTopHeight(t),this.comp.setBottomHeight(n),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(n?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const t=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}setStickyTopOffsetTop(){var i,r;const t=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(((i=this.filterManager)==null?void 0:i.getHeaderHeight())??0),n=((r=this.pinnedRowModel)==null?void 0:r.getPinnedTopTotalHeight())??0;let s=0;t>0&&(s+=t),n>0&&(s+=n),s>0&&(s+=1),this.comp.setStickyTopTop(`${s}px`)}setStickyBottomOffsetBottom(){const{pinnedRowModel:e,scrollVisibleSvc:t,comp:n}=this,s=(e==null?void 0:e.getPinnedBottomTotalHeight())??0,r=t.horizontalScrollShowing&&t.getScrollbarWidth()||0,a=s+r;n.setStickyBottomBottom(`${a}px`)}},f_=class extends vt{constructor(e,t){super(),this.direction=t,this.eViewport=Me,this.eContainer=Me,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",nD()||Qa())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=iD(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),n=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:n,touchend:n})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),ii(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){const t=this.eViewport;fD(()=>Ss(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},dV=class extends f_{constructor(){super(`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>
        </div>`,"horizontal"),this.eLeftSpacer=Me,this.eRightSpacer=Me,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new eb(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){var t;if(!this.invisibleScrollbar)return;const e=((t=this.beans.pinnedRowModel)==null?void 0:t.getPinnedBottomTotalHeight())??0;this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleSvc.verticalScrollShowing;let t=this.visibleCols.getDisplayedColumnsRightWidth();const n=!this.enableRtl&&e,s=this.scrollVisibleSvc.getScrollbarWidth();n&&(t+=s),Fi(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=s);let i=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(i+=s),Fi(this.eLeftSpacer,i),this.eLeftSpacer.classList.toggle("ag-scroller-corner",i<=s)}setScrollVisible(){const e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,n=this.gos.get("suppressHorizontalScroll"),s=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,r=n?0:s===0&&t?16:s,a=()=>{this.setScrollVisibleDebounce=0,this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Wh(this.getGui(),r),Wh(this.eViewport,r),Wh(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(a,100):a()}getScrollPosition(){return ap(this.eViewport,this.enableRtl)}setScrollPosition(e){Ss(this.eViewport)||this.attemptSettingScrollPosition(e),lp(this.eViewport,e,this.enableRtl)}},fV=class extends f_{constructor(){super(`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>
            </div>
        </div>`,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new u_(this.eContainer));const{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){const{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,n=this.invisibleScrollbar,s=t&&e.getScrollbarWidth()||0,i=s===0&&n?16:s;this.addOrRemoveCssClass("ag-scrollbar-invisible",n),Fi(this.getGui(),i),Fi(this.eViewport,i),Fi(this.eContainer,i),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){const n=e.getGridBodyCtrl().eBodyViewport,s=this.getScrollPosition(),i=n.scrollTop;s!=i&&this.setScrollPosition(i,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){!t&&!Ss(this.eViewport)&&this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}};function g_(e){return e.cols?e.cols.treeDepth+1:-1}function gr(e){var t;return((t=e.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:t.getRowCount())??0}function tb(e){const t=[],n=e.ctrlsSvc.getHeaderRowContainerCtrls();for(const s of n){if(!s)continue;const i=s.getGroupRowCount()||0;for(let r=0;r<i;r++){const a=s.getGroupRowCtrlAtIndex(r),u=t[r];if(a){const h=gV(e,a);(u==null||h>u)&&(t[r]=h)}}}return t}function gV(e,t){const n=e.colModel.isPivotMode()?mV(e):m_(e);let s=0;const i=t.getHeaderCtrls();for(const r of i){const{column:a}=r;if(a.isAutoHeaderHeight()){const u=a.getAutoHeaderHeight();u!=null&&u>s&&(s=u)}}return Math.max(n,s)}function nb(e){const t=e.colModel.isPivotMode()?pV(e):om(e),s=e.visibleCols.allCols.filter(i=>i.isAutoHeaderHeight()).map(i=>i.getAutoHeaderHeight()||0);return Math.max(t,...s)}function om(e){return e.gos.get("headerHeight")??e.environment.getDefaultHeaderHeight()}function p_(e){return e.gos.get("floatingFiltersHeight")??om(e)}function m_(e){return e.gos.get("groupHeaderHeight")??om(e)}function pV(e){return e.gos.get("pivotHeaderHeight")??om(e)}function mV(e){return e.gos.get("pivotGroupHeaderHeight")??m_(e)}var CV=class extends he{setComp(e,t,n){this.comp=e,this.eGui=t;const{beans:s}=this,{headerNavigation:i,touchSvc:r,ctrlsSvc:a}=s;i&&this.createManagedBean(new Cc(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,s),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,s)}),this.onPivotModeChanged(s),this.setupHeaderHeight();const u=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:u}),r==null||r.mockHeaderContextMenu(this,u),a.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>ii(this.beans,()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){var r;const{beans:e}=this;let t=0;const n=tb(e).reduce((a,u)=>a+u,0),s=nb(e);if((r=e.filterManager)!=null&&r.hasFloatingFilters()&&(t+=p_(e)),t+=n,t+=s,this.headerHeight===t)return;this.headerHeight=t;const i=`${t+1}px`;this.comp.setHeightAndMinHeight(i),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){const t=e.colModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",t),this.comp.addOrRemoveCssClass("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){const n=e.visibleCols.allCols.some(s=>s.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",n)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),n=e.shiftKey,s=n!==t?"LEFT":"RIGHT",{beans:i}=this,{headerNavigation:r,focusSvc:a}=i;(r.navigateHorizontally(s,!0,e)||!n&&a.focusOverlay(!1)||Gu(i,n,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;const{headerNavigation:n}=this.beans;switch(e.key){case J.LEFT:t="LEFT";case J.RIGHT:{Le(t)||(t="RIGHT"),n.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case J.UP:t="UP";case J.DOWN:{Le(t)||(t="DOWN"),n.navigateVertically(t,null,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget:t}=e,{eGui:n,beans:s}=this;!t&&n.contains(un(s))||n.contains(t)||(s.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,n){var a;const{menuSvc:s,ctrlsSvc:i}=this.beans;if(!e&&!n||!(s!=null&&s.isHeaderContextMenuEnabled()))return;const{target:r}=e??t;(r===this.eGui||r===((a=i.getHeaderRowContainerCtrl())==null?void 0:a.eViewport))&&s.showHeaderContextMenu(void 0,e,n)}},sb=class extends he{constructor(e,t,n,s){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=s,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=n}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){const{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?at(t):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const{gos:e,colAnimation:t}=this.beans,n=e.get("suppressColumnMoveAnimation"),s=Le(this.columnOrGroup.getOldLeft());(t==null?void 0:t.isActive())&&s&&!n?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),n=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=n,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){const{gos:n,visibleCols:s}=this.beans;if(!Wn(n,"print")||e.getPinned()==="left")return t;const r=s.getColsLeftWidth();if(e.getPinned()==="right"){const a=s.bodyWidth;return r+a+t}return r+t}setLeft(e){if(Le(e)&&(this.eCell.style.left=`${e}px`),Vt(this.columnOrGroup)){const t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&KL(this.ariaEl,t.length)}}},vV=0,C_="headerCtrl",ib=class extends he{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.instanceId=e.getUniqueId()+"-"+vV++}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}shouldStopEventPropagation(e){const{headerRowIndex:t,column:n}=this.beans.focusSvc.focusedHeader,s=n.getDefinition(),i=s&&s.suppressHeaderKeyboardEvent;if(!Le(i))return!1;const r=ke(this.gos,{colDef:s,column:n,headerRowIndex:t,event:e});return!!i(r)}getWrapperHasFocus(){return un(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){const e=this.column.getDefinition();if(!e)return;const{headerStyle:t}=e;let n;if(typeof t=="function"){const s=this.getHeaderClassParams();n=t(s)}else n=t;n&&this.comp.setUserStyles(n)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:n,compBean:s}=e,{beans:i}=this,r=m=>{if(!this.isAlive()||!s.isAlive())return;const{paddingTop:v,paddingBottom:w,borderBottomWidth:S,borderTopWidth:T}=fc(this.eGui),A=v+w+S+T,V=t.offsetHeight+A;if(m<5){const H=Jt(i),z=!H||!H.contains(t),U=V==0;if(z||U){ii(i,()=>r(m+1));return}}this.setColHeaderHeight(this.column,V)};let a=!1,u;const h=()=>{const m=this.column.isAutoHeaderHeight();m&&!a&&d(),!m&&a&&g()},d=()=>{a=!0,r(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),u=Dr(this.beans,t,()=>r(0))},g=()=>{a=!1,u&&u(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),u=void 0};h(),s.addDestroyFunc(()=>g()),s.addManagedListeners(this.column,{widthChanged:()=>a&&r(0)}),s.addManagedEventListeners({sortChanged:()=>{a&&window.setTimeout(()=>r(0))}}),n&&n(h)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:n,eGui:s}=this;!e||!t||!s||($D(e,t,n.visibleCols),eD(s,n.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=tl(this.beans);this.eGui&&Iu(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){var r;const t=un(this.beans),n=e.key===J.LEFT||e.key===J.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||n)&&(e.preventDefault(),e.stopImmediatePropagation()),!n))return;const i=e.key===J.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const a=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(a,e.shiftKey),(r=this.resizeFeature)==null||r.toggleColumnResizing(!0)}else this.moveHeader(i)}moveHeader(e){var t;(t=this.beans.colMoves)==null||t.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){const t=this.getResizeDiff(e),{pinnedCols:n}=this.beans;return n?n.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){const{gos:t,column:n}=this;let s=e.key===J.LEFT!==t.get("enableRtl");const i=n.getPinned(),r=t.get("enableRtl");return i&&r!==(i==="right")&&(s=!s),(s?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{var e;(e=this.resizeFeature)==null||e.toggleColumnResizing(!1)},150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case J.PAGE_DOWN:case J.PAGE_UP:case J.PAGE_HOME:case J.PAGE_END:t&&e.preventDefault()}}addDomData(e){const t=C_,{eGui:n,gos:s}=this;Vu(s,n,t,this),e.addDestroyFunc(()=>Vu(s,n,t,null))}focus(e){const{eGui:t}=this;return t?(this.lastFocusEvent=e||null,t.focus(),!0):!1}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){var e;this.dragSource&&((e=this.beans.dragAndDrop)==null||e.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,n){const s=e??t,{menuSvc:i,gos:r}=this.beans;r.get("preventDefaultOnContextMenu")&&s.preventDefault(),i!=null&&i.isHeaderContextMenuEnabled(n)&&i.showHeaderContextMenu(n,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",n)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;const{eventSvc:n}=this;e.isColumn?n.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):n.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},yV=class extends ib{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}setComp(e,t,n,s,i){this.comp=e;const{rowCtrl:r,column:a,beans:u}=this,{colResize:h,context:d,colHover:g,rangeSvc:m}=u,v=Pd(this,d,i);this.setGui(t,v),this.updateState(),this.setupWidth(v),this.setupMovingCss(v),this.setupMenuClass(v),this.setupSortableClass(v),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:s,checkMeasuringCallback:S=>this.setRefreshFunction("measuring",S),compBean:v}),this.addColumnHoverListener(v),this.setupFilterClass(v),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(v),this.setupSelectAll(v),this.setupUserComp(),this.refreshAria(),h?this.resizeFeature=v.createManagedBean(h.createResizeFeature(r.pinned,a,n,e,this)):ot(n,!1),g==null||g.createHoverFeature(v,[a],t),m==null||m.createRangeHighlightFeature(v,a,e),v.createManagedBean(new sb(a,t,u)),v.createManagedBean(new Cc(t,{shouldStopEventPropagation:S=>this.shouldStopEventPropagation(S),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(v),v.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),v.addManagedListeners(a,{colDefChanged:()=>this.refresh()}),v.addManagedListeners(a,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const w=()=>this.checkDisplayName();v.addManagedEventListeners({columnValueChanged:w,columnRowGroupChanged:w,columnPivotChanged:w,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),v.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){var n;(n=this.beans.colResize)==null||n.resizeHeader(this.column,e,t)}getHeaderClassParams(){const{column:e,beans:t}=this,n=e.colDef;return ke(t.gos,{colDef:n,column:e,floatingFilter:!1})}setupUserComp(){const e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return Mk(this.beans.userCompFactory,t,e)}createParams(){const{menuSvc:e,sortSvc:t,colFilter:n,gos:s}=this.beans;return ke(s,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!(e!=null&&e.isHeaderFilterButtonEnabled(this.column)),enableFilterIcon:!!n&&(!this.openFilterEnabled||Dn(this.gos)),showColumnMenu:(r,a)=>{e==null||e.showColumnMenu({column:this.column,buttonElement:r,positionBy:"button",onClosedCallback:a})},showColumnMenuAfterMouseClick:(r,a)=>{e==null||e.showColumnMenu({column:this.column,mouseEvent:r,positionBy:"mouse",onClosedCallback:a})},showFilter:r=>{e==null||e.showFilterMenu({column:this.column,buttonElement:r,containerType:"columnFilter",positionBy:"button"})},progressSort:r=>{t==null||t.progressSort(this.column,!!r,"uiColumnSorted")},setSort:(r,a)=>{t==null||t.setSortForColumn(this.column,r,!!a,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(r,a)=>{s.assertModuleRegistered("Tooltip",3),this.setupTooltip(r,a)}})}setupSelectAll(e){const{selectionSvc:t}=this.beans;t&&(this.selectAllFeature=e.createManagedBean(t.createSelectAllFeature(this.column)),this.selectAllFeature.setComp(this))}getSelectAllGui(){var e;return(e=this.selectAllFeature)==null?void 0:e.getCheckboxGui()}handleKeyDown(e){var t;super.handleKeyDown(e),e.key===J.SPACE&&((t=this.selectAllFeature)==null||t.onSpaceKeyDown(e)),e.key===J.ENTER&&this.onEnterKeyDown(e),e.key===J.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){var t;e.ctrlKey||e.metaKey?this.showMenuOnKeyPress(e,!0):this.sortable&&((t=this.beans.sortSvc)==null||t.progressSort(this.column,e.shiftKey,"uiColumnSorted"))}showMenuOnKeyPress(e,t){const n=this.comp.getUserCompInstance();cT(n)&&n.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),Kw()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){var n;this.tooltipFeature=(n=this.beans.tooltipSvc)==null?void 0:n.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),n=$w(t,this.gos,this.column,null),s=this.userHeaderClasses;this.userHeaderClasses=new Set(n),n.forEach(i=>{s.has(i)?s.delete(i):this.comp.addOrRemoveCssClass(i,!0)}),s.forEach(i=>this.comp.addOrRemoveCssClass(i,!1))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){var t;this.dragSourceElement=e,this.removeDragSource(),!(!e||!this.draggable)&&(this.dragSource=((t=this.beans.colMoves)==null?void 0:t.setDragSourceForHeader(e,this.column,this.displayName))??null)}updateState(){const{menuSvc:e}=this.beans;this.menuEnabled=!!(e!=null&&e.isColumnMenuInHeaderEnabled(this.column)),this.openFilterEnabled=!!(e!=null&&e.isFilterMenuInHeaderEnabled(this.column)),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),Object.values(this.refreshFunctions).forEach(e=>e())}refreshHeaderComp(){const e=this.lookupUserCompDetails();if(!e)return;(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const n=this.column.getActualWidth();this.comp.setWidth(`${n}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{var n;(n=this.comp)==null||n.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const n=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",n),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=e===0,n=e===1;this.comp.addOrRemoveCssClass("ag-header-highlight-before",t),this.comp.addOrRemoveCssClass("ag-header-highlight-after",n)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:n,beans:s}=this,i=tb(this.beans),r=i.reduce((g,m)=>g+=m,0)===0;if(n.addOrRemoveCssClass("ag-header-parent-hidden",r),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),n.addOrRemoveCssClass("ag-header-span-height",!1),n.addOrRemoveCssClass("ag-header-span-total",!1);return}const{numberOfParents:a,isSpanningTotal:u}=this.column.getColumnGroupPaddingInfo();n.addOrRemoveCssClass("ag-header-span-height",a>0);const h=nb(s);if(a===0){n.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${h}px`);return}n.addOrRemoveCssClass("ag-header-span-total",u);let d=0;for(let g=0;g<a;g++)d+=i[i.length-1-g];e.style.setProperty("top",`${-d}px`),e.style.setProperty("height",`${h+d}px`)}refreshAriaSort(){var e;if(this.sortable){const t=this.getLocaleTextFunc(),n=((e=this.beans.sortSvc)==null?void 0:e.getDisplaySortForColumn(this.column))||null;this.comp.setAriaSort(VL(n)),this.setAriaDescriptionProperty("sort",t("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!Dn(this.gos)){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){var t;if(!this.eGui.contains(un(this.beans)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort((n,s)=>n==="filter"?-1:s.charCodeAt(0)-n.charCodeAt(0)).map(n=>this.ariaDescriptionProperties.get(n)).join(". ");(t=this.beans.ariaAnnounce)==null||t.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){var t;(t=this.beans.colHover)==null||t.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){const t=i=>this.handleMouseOverChange(i.type==="mouseenter"),n=()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},s=i=>this.handleContextMenuMouseEvent(i,void 0,this.column);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:n,contextmenu:s})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return cT(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function cT(e){return typeof e.getAnchorElementForMenu=="function"&&typeof e.onMenuKeyboardShortcut=="function"}var wV=0,sy=class extends he{constructor(e,t,n){super(),this.rowIndex=e,this.pinned=t,this.type=n,this.instanceId=wV++;const s=n=="group"?"ag-header-row-column-group":n=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${s}`}postConstruct(){this.isPrintLayout=Wn(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.getHeaderCellCtrls().every(e=>e.eGui!=null):!1}setComp(e,t,n=!0){this.comp=e,t=Pd(this,this.beans.context,t),n&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this),n=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:n,virtualColumnsChanged:s=>this.onVirtualColumnsChanged(s.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",n),e.addManagedPropertyListener("ensureDomOrder",s=>this.isEnsureDomOrder=s.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}getHeaderCellCtrl(e){if(this.headerCellCtrls){for(const t of this.headerCellCtrls.values())if(t.column===e)return t}}onDisplayedColumnsChanged(){this.isPrintLayout=Wn(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleCols:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{filterManager:e}=this.beans,t=[],n=tb(this.beans),s=nb(this.beans);t.push(...n),t.push(s),e!=null&&e.hasFloatingFilters()&&t.push(p_(this.beans));let i=0;for(let a=0;a<this.rowIndex;a++)i+=t[a];const r=t[this.rowIndex];return{topOffset:i,rowHeight:r}}onVirtualColumnsChanged(e=!1){const t=this.getHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,n,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const t=this.getColumnsInViewport();for(const s of t)this.recycleAndCreateHeaderCtrls(s,e);const n=s=>{const{focusSvc:i,visibleCols:r}=this.beans;return i.isHeaderWrapperFocused(s)?r.isVisible(s.column):!1};if(e)for(const[s,i]of e)n(i)?this.headerCellCtrls.set(s,i):this.destroyBean(i);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){var e;return Array.from(((e=this.headerCellCtrls)==null?void 0:e.values())??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls||e.isEmptyGroup())return;const n=e.getUniqueId();let s;if(t&&(s=t.get(n),t.delete(n)),s&&s.column!=e&&(this.destroyBean(s),s=void 0),s==null)switch(this.type){case"filter":{s=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break}case"group":s=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:s=this.createBean(new yV(e,this));break}this.headerCellCtrls.set(n,s)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[];const t=this.getActualDepth(),{colViewport:n}=this.beans;return["left",null,"right"].forEach(s=>{const i=n.getHeadersToRender(s,t);e=e.concat(i)}),e}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.colViewport.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){if(!this.headerCellCtrls)return;const t=this.getHeaderCellCtrls();let n;return typeof e=="function"?n=t.find(e):n=t.find(s=>s.column==e),n}focusHeader(e,t){const n=this.findHeaderCellCtrl(e);return n?n.focus(t):!1}destroy(){var e;(e=this.headerCellCtrls)==null||e.forEach(t=>{this.destroyBean(t)}),this.headerCellCtrls=void 0,super.destroy()}},bV=class extends he{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;const{pinnedCols:n,ctrlsSvc:s,colModel:i,colMoves:r,filterManager:a}=this.beans;this.setupCenterWidth(),n==null||n.setupHeaderPinnedWidth(this),this.setupDragAndDrop(r,this.eViewport);const u=this.onDisplayedColumnsChanged.bind(this,a);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:u,advancedFilterEnabledChanged:u});const h=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;s.register(h,this),i.ready&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const{focusSvc:t,colModel:n,filterManager:s}=this.beans;let i=0;const r=t.getFocusHeaderToUseAfterRefresh(),a=()=>{const g=g_(n)-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let m=0;m<g;m++){const v=this.createBean(new sy(i++,this.pinned,"group"));this.groupsRowCtrls.push(v)}},u=()=>{const g=i++,m=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.rowIndex!==g);(m||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),m&&(this.columnsRowCtrl=this.createBean(new sy(g,this.pinned,"column")))},h=()=>{this.includeFloatingFilter=!!(s!=null&&s.hasFloatingFilters())&&!this.hidden;const g=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){g();return}const m=i++;if(this.filtersRowCtrl){const v=this.filtersRowCtrl.rowIndex!==m;(!e||v)&&g()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new sy(m,this.pinned,"filter")))};a(),u(),h();const d=this.getAllCtrls();this.comp.setCtrls(d),this.restoreFocusOnHeader(t,r)}getHeaderCtrlForColumn(e){var t;if(ki(e))return(t=this.columnsRowCtrl)==null?void 0:t.getHeaderCellCtrl(e);if(this.groupsRowCtrls.length!==0)for(let n=0;n<this.groupsRowCtrls.length;n++){const s=this.groupsRowCtrls[n].getHeaderCellCtrl(e);if(s)return s}}getHtmlElementForColumnHeader(e){var t;return((t=this.getHeaderCtrlForColumn(e))==null?void 0:t.eGui)??null}getRowType(e){var t;return(t=this.getAllCtrls()[e])==null?void 0:t.type}focusHeader(e,t,n){const i=this.getAllCtrls()[e];return i?i.focusHeader(t,n):!1}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){const n=e==null?void 0:e.createBodyDropTarget(this.pinned,t);n&&this.createManagedBean(n)}restoreFocusOnHeader(e,t){if(!t)return;const{column:n}=t;n.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(e){const t=!!(e!=null&&e.hasFloatingFilters())&&!this.hidden;this.includeFloatingFilter!==t&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new eb(e=>this.comp.setCenterWidth(`${e}px`),!0))}},SV=class extends he{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){const{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=e??t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const{enterpriseMenuFactory:t,filterMenuFactory:n}=this.beans,s=t&&Dn(this.gos)?t:n;this.showColumnMenuCommon(s,e,e.containerType,!0)}showHeaderContextMenu(e,t,n){var s;(s=this.activeMenuFactory)==null||s.showMenuAfterContextMenuEvent(e,t,n)}hidePopupMenu(){var e,t;(e=this.beans.contextMenuSvc)==null||e.hideActiveMenu(),(t=this.activeMenuFactory)==null||t.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){var n;const{suppressHeaderMenuButton:t}=e.getColDef();return!t&&!!((n=this.activeMenuFactory)!=null&&n.isMenuEnabled(e))&&(Dn(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){var t;return!e.getColDef().suppressHeaderFilterButton&&!!((t=this.beans.filterManager)!=null&&t.isFilterAllowed(e))}isHeaderContextMenuEnabled(e){const t=e&&ki(e)?e.getColDef():e==null?void 0:e.getColGroupDef();return!(t!=null&&t.suppressHeaderContextMenu)&&this.gos.get("columnMenu")==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(Qa()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!Dn(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){var t;return!!((t=this.beans.filterManager)!=null&&t.isFilterAllowed(e))&&!Dn(this.gos)&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos,t=e.get("suppressMenuHide");return Dn(e)?e.exists("suppressMenuHide")?t:!1:t}showColumnMenuCommon(e,t,n,s){const{positionBy:i,onClosedCallback:r}=t,a=t.column;if(i==="button"){const{buttonElement:u}=t;e==null||e.showMenuAfterButtonClick(a,u,n,r,s)}else if(i==="mouse"){const{mouseEvent:u}=t;e==null||e.showMenuAfterMouseEvent(a,u,n,r,s)}else if(a){const u=this.beans,h=u.ctrlsSvc;h.getScrollFeature().ensureColumnVisible(a,"auto"),ii(u,()=>{var g;const d=(g=h.getHeaderRowContainerCtrl(a.getPinned()))==null?void 0:g.getHeaderCtrlForColumn(a);d&&(e==null||e.showMenuAfterButtonClick(a,d.getAnchorElementForMenu(s),n,r,!0))})}}};function bp(e,t,n){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent("menuVisibleChanged",n))}var v_=class extends vt{constructor(){super()}},EV=class extends v_{init(){var t;const e=Mo((t=this.gos.get("overlayLoadingTemplate"))==null?void 0:t.trim());if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){const n=this.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=n("loadingOoo","Loading...")})}}},RV=class extends v_{init(){var t;const e=Mo((t=this.gos.get("overlayNoRowsTemplate"))==null?void 0:t.trim());if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){const n=this.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=n("noRowsToShow","No Rows To Show")})}}};function Yy(e,t,n){const s=Ge(e,t,n);if(s){const{className:r}=s;if(typeof r=="string"&&r.indexOf("ag-icon")>-1||typeof r=="object"&&r["ag-icon"])return s}const i=document.createElement("span");return i.appendChild(s),i}function Ge(e,t,n){var r;let s=null;e==="smallDown"?be(262):e==="smallLeft"?be(263):e==="smallRight"&&be(264);const i=n&&n.getColDef().icons;if(i&&(s=i[e]),t.gos&&!s){const a=t.gos.get("icons");a&&(s=a[e])}if(s){let a;if(typeof s=="function")a=s();else if(typeof s=="string")a=s;else{be(38,{iconName:e});return}if(typeof a=="string")return ni(a);if(em(a))return a;be(133,{iconName:e});return}else{const a=document.createElement("span"),u=t.registry.getIcon(e);u||(r=t.validation)==null||r.validateIcon(e);const h=u??e;return a.setAttribute("class",`ag-icon ag-icon-${h}`),a.setAttribute("unselectable","on"),Un(a,"presentation"),a}}var TV=".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}",AV=class extends vt{constructor(){super(),this.dragSource=null,this.eIcon=Me,this.eLabel=Me,this.registerCSS(TV)}postConstruct(){const e=t=>Yy(t,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(`<div class="ag-dnd-ghost ag-unselectable">
                <span data-ref="eIcon" class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
                <div data-ref="eLabel" class="ag-dnd-ghost-label"></div>
            </div>`)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){const{eIcon:n,dragSource:s,dropIconMap:i,gos:r}=this;Hi(n);let a=null;e||(e=s!=null&&s.getDefaultIconName?s.getDefaultIconName():"notAllowed"),a=i[e],n.classList.toggle("ag-shake-left-to-right",t),!(a===i.hide&&r.get("suppressDragLeaveHidesColumns"))&&a&&n.appendChild(a)}setLabel(e){this.eLabel.textContent=e}},xV=".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}",DV=class extends vt{constructor(e,t,n){super(t,n),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(xV)}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:n,labelAlignment:s,disabled:i}=this.config;i!=null&&this.setDisabled(i),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),n!=null&&this.setLabelWidth(n),this.setLabelAlignment(s||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label:e,eLabel:t}=this;Hi(t),typeof e=="string"?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),e===""?(ot(t,!1),Un(t,"presentation")):(ot(t,!0),Un(t,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){const e=this.eLabel;return e.id=e.id||`ag-${this.getCompId()}-label`,e.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const n=this.getGui().classList;return n.toggle("ag-label-align-left",e==="left"),n.toggle("ag-label-align-right",e==="right"),n.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(up(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return id(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},y_=class extends DV{constructor(e,t,n,s){super(e,t,n),this.className=s}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:n}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),n!=null&&this.onValueChange(n),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),n=this.getLabel();n==null||n==""||GL(e)!==null?Fy(e,""):Fy(e,t??"")}setAriaLabel(e){return Oi(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Fi(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}},xu=class extends y_{constructor(e,t,n="text",s="input"){super(e,(e==null?void 0:e.template)??`
            <div role="presentation">
                <div data-ref="eLabel" class="ag-input-field-label"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${s} data-ref="eInput" class="ag-input-field-input"></${s}>
                </div>
            </div>`,[],t),this.inputType=n,this.displayFieldTag=s,this.eLabel=Me,this.eWrapper=Me,this.eInput=Me}postConstruct(){super.postConstruct(),this.setInputType();const{eLabel:e,eWrapper:t,eInput:n,className:s}=this;e.classList.add(`${s}-label`),t.classList.add(`${s}-input-wrapper`),n.classList.add(`${s}-input`),this.addCssClass("ag-input-field"),n.id=n.id||`ag-${this.getCompId()}-input`;const{inputName:i,inputWidth:r}=this.config;i!=null&&this.setInputName(i),r!=null&&this.setInputWidth(r),this.addInputListeners(),this.activateTabIndex([n])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return up(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return Iu(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return Oi(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return id(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)Iu(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";Iu(this.eInput,"autocomplete",t)}return this}},w_=class extends xu{constructor(e,t="ag-checkbox",n="checkbox"){super(e,t,n),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0;const n=this.eInput;n.checked=e,n.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,n){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:n});const s=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:s.id,name:s.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),n=this.selected=e.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,t,e)}refreshSelectedClass(e){const t=this.eWrapper.classList;t.toggle("ag-checked",e===!0),t.toggle("ag-indeterminate",e==null)}},am={selector:"AG-CHECKBOX",component:w_},_V=".ag-checkbox-cell{height:100%}",IV=class extends vt{constructor(){super(`
            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[am]),this.eCheckbox=Me,this.registerCSS(_V)}init(e){this.refresh(e);const{eCheckbox:t,beans:n}=this,s=t.getInputElement();s.setAttribute("tabindex","-1"),Qx(s,"polite"),this.addManagedListeners(s,{click:i=>{if(Bu(i),t.isDisabled())return;const r=t.getValue();this.onCheckboxChanged(r)},dblclick:i=>{Bu(i)}}),this.addManagedElementListeners(e.eGridCell,{keydown:i=>{if(i.key===J.SPACE&&!t.isDisabled()){e.eGridCell===un(n)&&t.toggle();const r=t.getValue();this.onCheckboxChanged(r),i.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,n=!0;const{value:s,column:i,node:r}=e;if(r.group&&i)if(typeof s=="boolean")t=s;else{const m=i.getColId();m.startsWith(sm)?t=s==null||s===""?void 0:s==="true":r.aggData&&r.aggData[m]!==void 0?t=s??void 0:n=!1}else t=s??void 0;const{eCheckbox:a}=this;if(!n){a.setDisplayed(!1);return}a.setValue(t);const u=e.disabled??!(i!=null&&i.isCellEditable(r));a.setDisabled(u);const h=this.getLocaleTextFunc(),d=eO(h,t),g=u?d:`${h("ariaToggleCellValue","Press SPACE to toggle cell value")} (${d})`;a.setInputAriaLabel(g)}onCheckboxChanged(e){const{eventSvc:t,params:n}=this,{column:s,node:i,value:r}=n,a={column:s,colDef:s.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:r};t.dispatchEvent({type:"cellEditingStarted",...a});const u=i.setDataValue(s,e,"edit");t.dispatchEvent({type:"cellEditingStopped",...a,oldValue:r,newValue:e,valueChanged:u}),u||this.updateCheckbox(n)}},MV="ROOT_NODE_ID",FV=class extends he{constructor(){super(...arguments),this.nextId=0,this.allNodesMap={},this.rootNode=null}get treeData(){return!1}getRowNode(e){return this.allNodesMap[e]}extractRowData(){var e,t;return(t=(e=this.rootNode)==null?void 0:e.allLeafChildren)==null?void 0:t.map(n=>n.data)}activate(e){this.rootNode=e,e.group=!0,e.level=-1,e.id=MV,e.allLeafChildren=[],e.childrenAfterGroup=[],e.childrenAfterSort=[],e.childrenAfterAggFilter=[],e.childrenAfterFilter=[],this.updateRootSiblingArrays(e)}deactivate(){this.rootNode&&(this.allNodesMap={},this.rootNode=null)}destroy(){super.destroy(),this.allNodesMap={},this.rootNode=null}setNewRowData(e){const t=this.rootNode;t&&(this.dispatchRowDataUpdateStartedEvent(e),t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.allNodesMap={},this.nextId=0,this.loadNewRowData(e),this.updateRootSiblingArrays(t))}updateRootSiblingArrays(e){const t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter,t.childrenAfterGroup=e.childrenAfterGroup,t.childrenAfterAggFilter=e.childrenAfterAggFilter,t.childrenAfterSort=e.childrenAfterSort,t.childrenMapped=e.childrenMapped,t.allLeafChildren=e.allLeafChildren)}loadNewRowData(e){this.rootNode.allLeafChildren=(e==null?void 0:e.map((t,n)=>this.createRowNode(t,n)))??[]}setImmutableRowData(e,t){const n=zy(this.gos),s=!this.gos.get("suppressMaintainUnsortedOrder"),i=e.changedRowNodes,r=new Set,a=this.rootNode,u=a.allLeafChildren,h=u.length;let d=!1,g=!1,m=!1,v=!1;for(let S=0,T=-1,A=t.length;S<A;S++){const O=t[S];let V=this.getRowNode(n({data:O,level:0}));if(!V)d=!0,V=this.createRowNode(O,-1),i.add(V);else{if(s){const H=V.sourceRowIndex;v||(v=H<=T||d),T=H}V.data!==O&&(m=!0,V.updateData(O),i.update(V))}r.add(V)}const w=[];for(let S=0;S<h;S++){const T=u[S];r.has(T)||(g=!0,T.isSelected()&&w.push(T),this.rowNodeDeleted(T),i.remove(T))}if(d||g||v){const S=new Array(r.size);let T=0;if(!s)for(let O=0;O<h;++O){const V=u[O];r.delete(V)&&(V.sourceRowIndex=T,S[T++]=V)}for(const O of r)O.sourceRowIndex=T,S[T++]=O;a.allLeafChildren=S;const A=a.sibling;A&&(A.allLeafChildren=S),e.rowNodesOrderChanged||(e.rowNodesOrderChanged=v)}(d||g||v||m)&&(this.deselectNodes(w),e.rowDataUpdated=!0)}rowNodeDeleted(e){e.clearRowTopAndRowIndex();const t=e.id,n=this.allNodesMap;n[t]===e&&delete n[t]}updateRowData(e,t){this.dispatchRowDataUpdateStartedEvent(e.add);const n={changedRowNodes:t,rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},s=[],i=zy(this.gos);return this.executeRemove(i,e,n,s),this.executeUpdate(i,e,n,s),this.executeAdd(e,n),this.deselectNodes(s),n}executeAdd(e,t){const n=e.add;if(!(n!=null&&n.length))return;let s=this.rootNode.allLeafChildren,i=s.length;if(typeof e.addIndex=="number"&&(i=this.sanitizeAddIndex(e.addIndex),i>0&&this.gos.get("treeData")&&this.gos.get("getDataPath")))for(let m=0;m<s.length;m++){const v=s[m];if((v==null?void 0:v.rowIndex)==i-1){i=m+1;break}}const r=n.length,a=t.changedRowNodes,u=new Array(r);for(let g=0;g<r;g++){const m=this.createRowNode(n[g],i+g);a.add(m),u[g]=m}const h=this.rootNode;if(i<s.length){const g=s.slice(0,i),m=s.slice(i,s.length),v=g.length+u.length;for(let w=0,S=m.length;w<S;++w)m[w].sourceRowIndex=v+w;s=[...g,...u,...m],t.rowsInserted=!0}else s=s.concat(u);h.allLeafChildren=s;const d=h.sibling;d&&(d.allLeafChildren=s),t.rowNodeTransaction.add=u}executeRemove(e,t,{changedRowNodes:n,rowNodeTransaction:s},i){var d,g;const{remove:r}=t;if(!(r!=null&&r.length))return;const a={};r.forEach(m=>{const v=this.lookupRowNode(e,m);v&&(v.isSelected()&&i.push(v),v.clearRowTopAndRowIndex(),a[v.id]=!0,delete this.allNodesMap[v.id],s.remove.push(v),n.remove(v))});const u=this.rootNode;u.allLeafChildren=((d=u.allLeafChildren)==null?void 0:d.filter(m=>!a[m.id]))??null,(g=u.allLeafChildren)==null||g.forEach((m,v)=>{m.sourceRowIndex=v});const h=u.sibling;h&&(h.allLeafChildren=u.allLeafChildren)}executeUpdate(e,t,{changedRowNodes:n,rowNodeTransaction:s},i){const{update:r}=t;r!=null&&r.length&&r.forEach(a=>{const u=this.lookupRowNode(e,a);u&&(u.updateData(a),!u.selectable&&u.isSelected()&&i.push(u),s.update.push(u),n.update(u))})}dispatchRowDataUpdateStartedEvent(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e!=null&&e.length?e[0]:null})}deselectNodes(e){var i;const t="rowDataChanged",n=this.beans.selectionSvc,s=e.length>0;s&&(n==null||n.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t})),(i=n==null?void 0:n.updateGroupsFromChildrenSelections)==null||i.call(n,t),s&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:t})}sanitizeAddIndex(e){var n;const t=((n=this.rootNode.allLeafChildren)==null?void 0:n.length)??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}createRowNode(e,t){const n=new t_(this.beans);return n.parent=this.rootNode,n.level=0,n.group=!1,n.expanded=!1,n.sourceRowIndex=t,n.setDataAndId(e,String(this.nextId)),this.allNodesMap[n.id]&&be(2,{nodeId:n.id}),this.allNodesMap[n.id]=n,this.nextId++,n}lookupRowNode(e,t){var s,i;let n;if(e){const r=e({data:t,level:0});if(n=this.allNodesMap[r],!n)return Bt(4,{id:r}),null}else if(n=(i=(s=this.rootNode)==null?void 0:s.allLeafChildren)==null?void 0:i.find(r=>r.data===t),!n)return Bt(5,{data:t}),null;return n||null}},PV=class extends w_{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){const t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}},rb=class extends xu{constructor(e,t="ag-text-field",n="text"){super(e,t,n)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){const n=this.eInput;return n.value!==e&&(n.value=Le(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=n=>{l_(n)&&n.key&&!e.test(n.key)&&n.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:n=>{var i;const s=(i=n.clipboardData)==null?void 0:i.getData("text");s&&s.split("").some(r=>!e.test(r))&&n.preventDefault()}})}},LV={selector:"AG-INPUT-TEXT-FIELD",component:rb};function hT(e,t){return e.toString().padStart(t,"0")}function dT(e,t=!0,n="-"){if(!e)return null;let s=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(i=>hT(i,2)).join(n);return t&&(s+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(i=>hT(i,2)).join(":")),s}function fT(e){if(!e)return null;const[t,n]=e.split(" ");if(!t)return null;const s=t.split("-").map(m=>parseInt(m,10));if(s.filter(m=>!isNaN(m)).length!==3)return null;const[i,r,a]=s,u=new Date(i,r-1,a);if(u.getFullYear()!==i||u.getMonth()!==r-1||u.getDate()!==a)return null;if(!n||n==="00:00:00")return u;const[h,d,g]=n.split(":").map(m=>parseInt(m,10));return h>=0&&h<24&&u.setHours(h),d>=0&&d<60&&u.setMinutes(d),g>=0&&g<60&&u.setSeconds(g),u}function OV(e){return e.get("tooltipShowMode")==="whenTruncated"}function b_(e,t){return OV(e)?S_(t):void 0}function S_(e){return()=>{const t=e();return t?t.scrollWidth>t.clientWidth:!0}}var kV=class extends vt{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const t=e.key;switch(t){case J.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const n=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(n)}break;case J.DOWN:case J.UP:e.preventDefault(),this.navigate(t);break;case J.PAGE_DOWN:case J.PAGE_UP:case J.PAGE_HOME:case J.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}navigate(e){const t=e===J.DOWN;let n;const{itemEls:s,highlightedEl:i}=this;if(!i)n=s[t?0:s.length-1];else{let a=s.indexOf(i)+(t?1:-1);a=Math.min(Math.max(a,0),s.length-1),n=s[a]}this.highlightItem(n)}navigateToPage(e){const{itemEls:t,highlightedEl:n}=this;if(!n||t.length===0)return;const s=t.indexOf(n),i=this.options.length-1,r=t[0].clientHeight,a=Math.floor(this.getGui().clientHeight/r);let u=-1;e===J.PAGE_HOME?u=0:e===J.PAGE_END?u=i:e===J.PAGE_DOWN?u=Math.min(s+a,i):e===J.PAGE_UP&&(u=Math.max(s-a,0)),u!==-1&&this.highlightItem(t[u])}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){const{value:t,text:n}=e,s=n||t;return this.options.push({value:t,text:s}),this.renderOption(t,s),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{rl(e)}),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,n)=>{Jx(t,n+1),Zx(t,e.length)})}renderOption(e,t){const n=Jt(this.beans),s=n.createElement("div");Un(s,"option"),s.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const i=n.createElement("span");s.appendChild(i),i.textContent=t,this.unFocusable||(s.tabIndex=-1),this.itemEls.push(s),this.addManagedListeners(s,{mouseover:()=>this.highlightItem(s),mousedown:r=>{r.preventDefault(),r.stopPropagation(),this.setValue(e)}}),this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getTooltipValue:()=>t,getGui:()=>s,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>i.scrollWidth>i.clientWidth})),this.getGui().appendChild(s)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;const n=this.options.findIndex(s=>s.value===e);if(n!==-1){const s=this.options[n];this.value=s.value,this.displayValue=s.text,this.highlightItem(this.itemEls[n]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!Ss(e))return;this.clearHighlighted(),this.highlightedEl=e,e.classList.add(this.activeClass),jR(e,!0);const t=this.getGui(),{scrollTop:n,clientHeight:s}=t,{offsetTop:i,offsetHeight:r}=e;(i+r>n+s||i<n)&&e.scrollIntoView({block:"nearest"}),this.unFocusable||e.focus()}clearHighlighted(){const e=this.highlightedEl;!e||!Ss(e)||(e.classList.remove(this.activeClass),jR(e,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},NV=".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:disabled{opacity:.5}&.ag-picker-has-focus,&:focus-within{background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow)}}",VV=class extends y_{constructor(e){if(super(e,(e==null?void 0:e.template)||`
            <div class="ag-picker-field" role="presentation">
                <div data-ref="eLabel"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,(e==null?void 0:e.agComponents)||[],e==null?void 0:e.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=Me,this.eWrapper=Me,this.eDisplayField=Me,this.eIcon=Me,this.registerCSS(NV),this.ariaRole=e==null?void 0:e.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:n,variableWidth:s,minPickerWidth:i,maxPickerWidth:r}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!s,n!=null&&this.setPickerMaxHeight(n),i!=null&&this.setPickerMinWidth(i),r!=null&&this.setPickerMaxWidth(r)}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:n,inputWidth:s}=this.config;if(n){const i=Ge(n,this.beans);i&&this.eIcon.appendChild(i)}s!=null&&this.setInputWidth(s)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),Nu(e,!1),this.ariaRole&&Un(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&(e==null?void 0:e.target)===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case J.UP:case J.DOWN:case J.ENTER:case J.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case J.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:n,pickerAriaLabelValue:s,modalPicker:i=!0},maxPickerHeight:r,minPickerWidth:a,maxPickerWidth:u,variableWidth:h,beans:d,eWrapper:g}=this,m={modal:i,eChild:e,closeOnEsc:!0,closedCallback:()=>{const T=od(d);this.beforeHidePicker(),T&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(n,s),anchorToElement:g};e.style.position="absolute";const v=d.popupSvc,w=v.addPopup(m);h?(a&&(e.style.minWidth=a),e.style.width=Hw(rp(g)),u&&(e.style.maxWidth=u)):up(e,u??rp(g));const S=r??`${Jp(v.getPopupParent())}px`;return e.style.setProperty("max-height",S),this.alignPickerToComponent(),w.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerGap:e,config:{pickerType:t},beans:{popupSvc:n,gos:s},eWrapper:i,pickerComponent:r}=this,a=s.get("enableRtl")?"right":"left";n.positionPopupByComponent({type:t,eventSource:i,ePopup:r.getGui(),position:"under",alignSide:a,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();Nu(t,e);const n=this.eWrapper.classList;n.toggle("ag-picker-expanded",e),n.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;(t=this.pickerComponent)!=null&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){var e;(e=this.hideCurrentPicker)==null||e.call(this)}setInputWidth(e){return up(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},BV=".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}",GV=class extends VV{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox",...e}),this.registerCSS(BV)}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:S_(()=>this.eDisplayField),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:n}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),n&&t==null&&(this.eDisplayField.textContent=n),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){const e=this.createBean(new kV("select",!0));this.listComponent=e,e.setParentComponent(this);const t=e.getAriaElement(),n=`ag-select-list-${e.getCompId()}`;t.setAttribute("id",n),ZL(this.getAriaElement(),t),e.addManagedElementListeners(e.getGui(),{mousedown:s=>{s==null||s.preventDefault()}}),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){var n;const{key:t}=e;switch(t===J.TAB&&this.hidePicker(),t){case J.ENTER:case J.UP:case J.DOWN:case J.PAGE_UP:case J.PAGE_DOWN:case J.PAGE_HOME:case J.PAGE_END:e.preventDefault(),this.isPickerDisplayed?(n=this.listComponent)==null||n.handleKeyDown(e):super.onKeyDown(e);break;case J.ESCAPE:super.onKeyDown(e);break;case J.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){const e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return(e=this.listComponent)==null||e.clearOptions(),this}setValue(e,t,n){const{listComponent:s,config:{placeholder:i},eDisplayField:r,tooltipFeature:a}=this;if(this.value===e||!s)return this;if(n||s.setValue(e,!0),s.getValue()===this.getValue())return this;let h=s.getDisplayValue();return h==null&&i&&(h=i),r.textContent=h,a==null||a.setTooltipAndRefresh(h??null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}},nl={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"},E_=class extends he{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:n,eBottomGuard:s,focusTrapActive:i,forceFocusOutWhenTabGuardsAreEmpty:r,isFocusableContainer:a,focusInnerElement:u,onFocusIn:h,onFocusOut:d,shouldStopEventPropagation:g,onTabKeyDown:m,handleKeyDown:v,isEmpty:w,eFocusableElement:S}=e;this.comp=t,this.eTopGuard=n,this.eBottomGuard=s,this.providedFocusInnerElement=u,this.eFocusableElement=S,this.focusTrapActive=!!i,this.forceFocusOutWhenTabGuardsAreEmpty=!!r,this.isFocusableContainer=!!a,this.providedFocusIn=h,this.providedFocusOut=d,this.providedShouldStopEventPropagation=g,this.providedOnTabKeyDown=m,this.providedHandleKeyDown=v,this.providedIsEmpty=w}postConstruct(){this.createManagedBean(new Cc(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():el(this.eFocusableElement,".ag-tab-guard").length===0)){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){var h;const t=Jt(this.beans),n=el(t.body,null,!0),s=n.indexOf(e?this.eTopGuard:this.eBottomGuard);if(s===-1)return;let i,r;e?(i=0,r=s):(i=s+1,r=n.length);const a=n.slice(i,r),u=this.gos.get("tabIndex");a.sort((d,g)=>{const m=parseInt(d.getAttribute("tabindex")||"0"),v=parseInt(g.getAttribute("tabindex")||"0");return v===u?1:m===u?-1:m===0?1:v===0?-1:m-v}),(h=a[e?a.length-1:0])==null||h.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const n=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),n&&(n.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=el(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length?(t[e?t.length-1:0].focus({preventScroll:!0}),!0):!1}getNextFocusableElement(e){return _r(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},R_=class extends he{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:n,eFocusableElement:s}=this,i=[t,n],r={setTabIndex:A=>{i.forEach(O=>A!=null?O.setAttribute("tabindex",A):O.removeAttribute("tabindex"))}};this.addTabGuards(t,n);const{focusTrapActive:a=!1,onFocusIn:u,onFocusOut:h,focusInnerElement:d,handleKeyDown:g,onTabKeyDown:m,shouldStopEventPropagation:v,isEmpty:w,forceFocusOutWhenTabGuardsAreEmpty:S,isFocusableContainer:T}=e;this.tabGuardCtrl=this.createManagedBean(new E_({comp:r,focusTrapActive:a,eTopGuard:t,eBottomGuard:n,eFocusableElement:s,onFocusIn:u,onFocusOut:h,focusInnerElement:d,handleKeyDown:g,onTabKeyDown:m,shouldStopEventPropagation:v,isEmpty:w,forceFocusOutWhenTabGuardsAreEmpty:S,isFocusableContainer:T}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=Jt(this.beans).createElement("div"),n=e==="top"?nl.TAB_GUARD_TOP:nl.TAB_GUARD_BOTTOM;return t.classList.add(nl.TAB_GUARD,n),Un(t,"presentation"),t}addTabGuards(e,t){const n=this.eFocusableElement;n.insertAdjacentElement("afterbegin",e),n.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];Hi(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,n){em(t)||(t=t.getGui());const{eBottomGuard:s}=this;s?s.insertAdjacentElement("beforebegin",t):e(t,n)}destroy(){const{eFocusableElement:e,eTopGuard:t,eBottomGuard:n}=this;e.removeChild(t),e.removeChild(n),super.destroy()}},lm=class extends vt{initialiseTabGuard(t){this.tabGuardFeature=this.createManagedBean(new R_(this)),this.tabGuardFeature.initialiseTabGuard(t)}forceFocusOutOfContainer(t=!1){this.tabGuardFeature.forceFocusOutOfContainer(t)}appendChild(t,n){this.tabGuardFeature.appendChild(super.appendChild.bind(this),t,n)}},bu=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new ko,this.preventMouseClick=t;const n=this.onTouchStart.bind(this),s=this.onTouchMove.bind(this),i=this.onTouchEnd.bind(this);e.addEventListener("touchstart",n,{passive:!0}),e.addEventListener("touchmove",s,{passive:!0}),e.addEventListener("touchend",i,{passive:!1}),this.destroyFuncs.push(()=>{e.removeEventListener("touchstart",n,{passive:!0}),e.removeEventListener("touchmove",s,{passive:!0}),e.removeEventListener("touchend",i,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout(()=>{const n=this.touchStart===t;if(this.touching&&n&&!this.moved){this.moved=!0;const s={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(s)}},500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!ZD(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const t={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const n={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(n),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}},T_=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t(),this.baseDocLink=`${hD}/${this.frameworkName}-data-grid`,dO(this.baseDocLink)}setInterval(e,t){return new ht(n=>{n(window.setInterval(e,t))})}addEventListener(e,t,n,s){let i={};if(typeof s=="object"?i=s:typeof s=="boolean"&&(i={capture:s}),i.passive==null){const r=DD(t);r!=null&&(i.passive=r)}e.addEventListener(t,n,i)}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`${this.baseDocLink}${e?`/${e}`:""}`}};function HV(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var zV=["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","rowSpanSvc","pageBoundsListener","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","funcColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"],gT=Object.fromEntries(zV.map((e,t)=>[e,t]));function UV(e,t){const n=(e.beanName?gT[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,s=(t.beanName?gT[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return n-s}function WV(e,t){return(e==null?void 0:e.beanName)==="gridDestroySvc"?-1:0}var jV=class extends he{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,n){this.view=e,this.eGridHostDiv=t,this.eGui=n,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());const{dragAndDrop:s,ctrlsSvc:i}=this.beans;s==null||s.registerGridDropTarget(()=>this.eGui,this),XD(this.gos,t),this.createManagedBean(new Jw(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const r=Dr(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>r()),i.register("gridCtrl",this)}isDetailGrid(){var t;const e=Yw(this.getGui());return((t=e==null?void 0:e.getAttribute("row-id"))==null?void 0:t.startsWith("detail"))||!1}getOptionalSelectors(){var t,n,s,i;const e=this.beans;return{paginationSelector:(t=e.pagination)==null?void 0:t.getPaginationSelector(),gridHeaderDropZonesSelector:e.registry.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:(n=e.sideBar)==null?void 0:n.getSelector(),statusBarSelector:(s=e.registry)==null?void 0:s.getSelector("AG-STATUS-BAR"),watermarkSelector:(i=e.licenseManager)==null?void 0:i.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:n,nextIndex:s}=this.getNextFocusableIndex(t,e);if(s<0||s>=t.length)return!1;if(s===0){if(n>0){const{visibleCols:i,focusSvc:r}=this.beans,a=i.allCols,u=at(a);if(r.focusGridView({column:u,backwards:!0}))return!0}return!1}return this.focusContainer(t[s],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;const n=this.getFocusableContainers(),{focusSvc:s,visibleCols:i}=this.beans,r=i.allCols;if(e){if(n.length>1)return this.focusContainer(at(n),e);const a=at(r);if(s.focusGridView({column:a,backwards:e}))return!0}if(this.gos.get("headerHeight")===0||tl(this.beans)){if(s.focusGridView({column:r[0],backwards:e}))return!0;for(let a=1;a<n.length;a++)if(qs(n[a].getGui(),e))return!0;return!1}return s.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){var r;const t=this.view.getFocusableContainers(),{nextIndex:n,indexWithFocus:s}=this.getNextFocusableIndex(t,e);if(s===-1||n<0||n>=t.length)return;const i=t[n];(r=i.setAllowFocus)==null||r.call(i,!0),setTimeout(()=>{var a;(a=i.setAllowFocus)==null||a.call(i,!1)})}isFocusable(){var t,n;const e=this.beans;return!Qw(e)||!tl(e)||!!((n=(t=e.sideBar)==null?void 0:t.comp)!=null&&n.isDisplayed())}getNextFocusableIndex(e,t){const n=un(this.beans),s=e.findIndex(r=>r.getGui().contains(n)),i=s+(t?-1:1);return{indexWithFocus:s,nextIndex:i}}focusContainer(e,t){var s,i;(s=e.setAllowFocus)==null||s.call(e,!0);const n=qs(e.getGui(),t,!1,!0);return(i=e.setAllowFocus)==null||i.call(e,!1),n}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},Ne=(e,t)=>{for(const n of Object.keys(t))t[n]=e;return t},pT={dispatchEvent:"CommunityCore",...Ne("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0}),...Ne("GridState",{getState:0}),...Ne("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0}),...Ne("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0}),...Ne("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0}),...Ne("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0}),...Ne("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0}),...Ne("ValueCache",{expireValueCache:0}),...Ne("CellApi",{getCellValue:0}),...Ne("SharedMenu",{showColumnMenu:0,hidePopupMenu:0}),...Ne("Sort",{onSortChanged:0}),...Ne("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0}),...Ne("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0}),...Ne("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0}),...Ne("HighlightChanges",{flashCells:0}),...Ne("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0}),...Ne("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0}),...Ne("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0}),...Ne("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0}),...Ne("ColumnMove",{moveColumnByIndex:0,moveColumns:0}),...Ne("ColumnResize",{setColumnWidths:0}),...Ne("ColumnHover",{isColumnHovered:0}),...Ne("EditCore",{getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0}),...Ne("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0}),...Ne("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0}),...Ne("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0}),...Ne("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0}),...Ne("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0}),...Ne("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0,onRowHeightChanged:0}),...Ne("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...Ne("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0}),...Ne("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0}),...Ne("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...Ne("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...Ne("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...Ne("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...Ne("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...Ne("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...Ne("ContextMenu",{showContextMenu:0}),...Ne("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0}),...Ne("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...Ne("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0}),...Ne("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0}),...Ne("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...Ne("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0}),...Ne("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...Ne("StatusBar",{getStatusPanel:0})},iy={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},qV=(e,t)=>e.eventSvc.dispatchEvent(t),A_=class{};Reflect.defineProperty(A_,"name",{value:"GridApi"});var $V=class extends he{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new A_,this.fns={...iy,dispatchEvent:qV},this.preDestroyLink="";const{api:e}=this;for(const t of Object.keys(pT))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){var i;const{fns:n,beans:s}=this;n!==iy&&(n[e]=((i=s==null?void 0:s.validation)==null?void 0:i.validateApiFunction(e,t))??t)}makeApi(e){return{[e]:(...t)=>{const{beans:n,fns:{[e]:s}}=this;return s?s(n,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:n,preDestroyLink:s}=this;if(!t)be(26,{fnName:e,preDestroyLink:s});else{const i=pT[e];n.assertModuleRegistered(i,`api.${e}`)&&be(27,{fnName:e,module:i})}}destroy(){super.destroy(),this.fns=iy,this.beans=null}};function KV(e){return e.context.getGridId()}function YV(e){e.gridDestroySvc.destroy()}function QV(e){return e.gridDestroySvc.destroyCalled}function XV(e,t){return e.gos.get(t)}function ZV(e,t,n){x_(e,{[t]:n})}function x_(e,t){e.gos.updateGridOptions({options:t})}var JV=class extends he{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:n}=this.beans;return n.addDragSource(t),()=>n.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const n=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(n)}setResizeIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},D_={moduleName:"Drag",version:Je,beans:[MN]},__={moduleName:"SharedDragAndDrop",version:Je,beans:[AN],dependsOn:[D_],userComponents:{agDragAndDropImage:AV},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},e2={moduleName:"HorizontalResize",version:Je,beans:[JV],dependsOn:[D_]},t2=":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}",n2=class extends he{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;const{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){const{executeNextFuncs:n,executeLaterFuncs:s}=this;if(n.length===0&&s.length===0){e(),t();return}const i=r=>{for(;r.length;){const a=r.pop();a&&a()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),i(n)},0),window.setTimeout(()=>{t(),i(s)},200)})}};function s2(e,t,n){var s;(s=e.colMoves)==null||s.moveColumnByIndex(t,n,"api")}function i2(e,t,n){var s;(s=e.colMoves)==null||s.moveColumns(t,n,"api")}var r2=class extends he{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach(n=>{n.isPrimary()&&(n.isAnyFunctionActive()||(n.isAllowValue()?this.columnsToAggregate.push(n):n.isAllowRowGroup()?this.columnsToGroup.push(n):n.isAllowPivot()&&this.columnsToPivot.push(n)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){const{valueColsSvc:t,rowGroupColsSvc:n,pivotColsSvc:s}=this.beans;this.columnsToAggregate.length>0&&(t==null||t.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop")),this.columnsToGroup.length>0&&(n==null||n.addColumns(this.columnsToGroup,"toolPanelDragAndDrop")),this.columnsToPivot.length>0&&(s==null||s.addColumns(this.columnsToPivot,"toolPanelDragAndDrop"))}onDragCancel(){this.clearColumnsList()}};function o2(e,t){!t||t.length<=1||t.filter(s=>e.indexOf(s)<0).length>0||t.sort((s,i)=>{const r=e.indexOf(s),a=e.indexOf(i);return r-a})}function I_(e){const{isFromHeader:t,fromLeft:n,xPosition:s,fromEnter:i,fakeEvent:r,pinned:a,gos:u,colModel:h,colMoves:d,visibleCols:g}=e;let{allMovingColumns:m}=e;if(t){const U=[];m.forEach(K=>{var x;let k=null,D=K.getParent();for(;D!=null&&D.getDisplayedLeafColumns().length===1;)k=D,D=D.getParent();k!=null?(!!((x=k.getColGroupDef())!=null&&x.marryChildren)?k.getProvidedColumnGroup().getLeafColumns():k.getLeafColumns()).forEach(B=>{U.includes(B)||U.push(B)}):U.includes(K)||U.push(K)}),m=U}const v=m.slice();o2(h.getCols(),v);const w=c2({movingCols:v,draggingRight:n,xPosition:s,pinned:a,gos:u,colModel:h,visibleCols:g}),S=a2(v,h);if(w.length===0)return;const T=w[0];let A=S!==null&&!i;if(t&&(A=S!==null),A&&!r&&(!n&&T>=S||n&&T<=S))return;const O=g.allCols,V=[];let H=null;for(let U=0;U<w.length;U++){const K=w[U],k=d.getProposedColumnOrder(v,K);if(!d.doesOrderPassRules(k))continue;const D=k.filter(L=>O.includes(L));if(H===null)H=D;else if(!Fd(D,H))break;const x=l2(k);V.push({move:K,fragCount:x})}if(V.length===0)return;V.sort((U,K)=>U.fragCount-K.fragCount);const z=V[0].move;if(!(z>h.getCols().length-m.length))return{columns:m,toIndex:z}}function M_(e){const{columns:t,toIndex:n}=I_(e)||{},{finished:s,colMoves:i}=e;return!t||n==null?null:(i.moveColumns(t,n,"uiColumnMoved",s),s?null:{columns:t,toIndex:n})}function a2(e,t){const n=t.getCols(),s=qO(e.map(h=>n.indexOf(h))),i=s[0];return at(s)-i!==s.length-1?null:i}function l2(e){function t(s){const i=[];let r=s.getOriginalParent();for(;r!=null;)i.push(r),r=r.getOriginalParent();return i}let n=0;for(let s=0;s<e.length-1;s++){let i=t(e[s]),r=t(e[s+1]);[i,r]=i.length>r.length?[i,r]:[r,i],i.forEach(a=>{r.indexOf(a)===-1&&n++})}return n}function u2(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}function c2(e){const{movingCols:t,draggingRight:n,xPosition:s,pinned:i,gos:r,colModel:a,visibleCols:u}=e;if(r.get("suppressMovableColumns")||t.some(H=>H.getColDef().suppressMovable))return[];const d=u2(u,i),g=a.getCols(),m=d.filter(H=>t.includes(H)),v=d.filter(H=>!t.includes(H)),w=g.filter(H=>!t.includes(H));let S=0,T=s;if(n){let H=0;m.forEach(z=>H+=z.getActualWidth()),T-=H}if(T>0){for(let H=0;H<v.length;H++){const z=v[H];if(T-=z.getActualWidth(),T<0)break;S++}n&&S++}let A;if(S>0){const H=v[S-1];A=w.indexOf(H)+1}else A=w.indexOf(v[0]),A===-1&&(A=0);const O=[A],V=(H,z)=>H-z;if(n){let H=A+1;const z=g.length-1;for(;H<=z;)O.push(H),H++;O.sort(V)}else{let H=A;const z=g.length-1;let U=g[H];for(;H<=z&&d.indexOf(U)<0;)H++,O.push(H),U=g[H];H=A-1;const K=0;for(;H>=K;)O.push(H),H--;O.sort(V).reverse()}return O}function Qy(e){var d;const{pinned:t,fromKeyboard:n,gos:s,ctrlsSvc:i,useHeaderRow:r,skipScrollPadding:a}=e;let u=(d=i.getHeaderRowContainerCtrl(t))==null?void 0:d.eViewport,{x:h}=e;return u?(n&&(h-=u.getBoundingClientRect().left),s.get("enableRtl")&&(r&&(u=u.querySelector(".ag-header-row")),h=u.clientWidth-h),t==null&&!a&&(h+=i.get("center").getCenterViewportScrollLeft()),h):0}function ry(e,t){for(const n of e)n.moving=t,n.dispatchColEvent("movingChanged","uiColumnMoved")}var mT=7,Xy=100,Tg=Xy/2,h2=5,d2=100,f2=class extends he{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!Le(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){const{pinned:e,lastDraggingEvent:t}=this,n=(t==null?void 0:t.dragItem.columns)??[];for(const s of n){const i=s.getPinned();if(s.getColDef().lockPinned){if(i==e)return"move";continue}if(i===e||!e)return"move";if(!i&&e)return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem,n=t.columns;if(e.dragSource.type===0)this.setColumnsVisible(n,!0,"uiColumnDragged");else{const i=t.visibleState,r=(n||[]).filter(a=>i[a.getId()]);this.setColumnsVisible(r,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(n,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,n=!1,s=!1){const{gos:i,ctrlsSvc:r}=this.beans,a=i.get("suppressMoveWhenColumnDragging");if(s&&!a){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!s&&$t(e.hDirection))return;const u=Qy({x:e.x,pinned:this.pinned,gos:i,ctrlsSvc:r});t||this.checkCenterForScrolling(u),a?this.handleColumnDragWhileSuppressingMovement(e,t,n,u,s):this.handleColumnDragWhileAllowingMovement(e,t,n,u,s)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,n){if(!e)return;const s=e.filter(i=>!i.getColDef().lockVisible);this.beans.colModel.setColsVisible(s,t,n)}finishColumnMoving(){this.clearHighlighted();const e=this.lastMovedInfo;if(!e)return;const{columns:t,toIndex:n}=e;this.beans.colMoves.moveColumns(t,n,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(e,t,n,s,i){const r=this.getAllMovingColumns(e,!0);if(i){const a=this.isAttemptingToPin(r);a&&this.attemptToPinColumns(r,void 0,!0);const{fromLeft:u,xPosition:h}=this.getNormalisedXPositionInfo(r,a)||{};if(u==null||h==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:r,xPosition:h,fromEnter:t,fakeEvent:n,fromLeft:u})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(r,s)}}handleColumnDragWhileAllowingMovement(e,t,n,s,i){const r=this.getAllMovingColumns(e),a=this.normaliseDirection(e.hDirection)==="right",u=e.dragSource.type===1,h=this.getMoveColumnParams({allMovingColumns:r,isFromHeader:u,xPosition:s,fromLeft:a,fromEnter:t,fakeEvent:n}),d=M_({...h,finished:i});d&&(this.lastMovedInfo=d)}getAllMovingColumns(e,t=!1){const n=e.dragSource.getDragItem();let s=null;t?(s=n.columnsInSplit,s||(s=n.columns)):s=n.columns;const i=r=>r.getColDef().lockPinned?r.getPinned()==this.pinned:!0;return s?s.filter(i):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:n,xPosition:s,fromLeft:i,fromEnter:r,fakeEvent:a}=e,{gos:u,colModel:h,colMoves:d,visibleCols:g}=this.beans;return{allMovingColumns:t,isFromHeader:n,fromLeft:i,xPosition:s,pinned:this.pinned,fromEnter:r,fakeEvent:a,gos:u,colModel:h,colMoves:d,visibleCols:g}}highlightHoveredColumn(e,t){var g;const{gos:n,colModel:s}=this.beans,i=n.get("enableRtl"),r=s.getCols().filter(m=>m.isVisible()&&m.getPinned()===this.pinned);let a=null,u=null,h=null;for(const m of r){if(u=m.getActualWidth(),a=this.getNormalisedColumnLeft(m,0,i),a!=null){const v=a+u;if(a<=t&&v>=t){h=m;break}}a=null,u=null}if(h)e.indexOf(h)!==-1&&(h=null);else{for(let m=r.length-1;m>=0;m--){const v=r[m],w=r[m].getParent();if(!w){h=v;break}const S=w==null?void 0:w.getDisplayedLeafColumns();if(S.length){h=at(S);break}}if(!h)return;a=this.getNormalisedColumnLeft(h,0,i),u=h.getActualWidth()}if(((g=this.lastHighlightedColumn)==null?void 0:g.column)!==h&&this.clearHighlighted(),h==null||a==null||u==null)return;let d;t-a<u/2!==i?d=0:d=1,CT(h,d),this.lastHighlightedColumn={column:h,position:d}}getNormalisedXPositionInfo(e,t){const{gos:n,visibleCols:s}=this.beans,i=n.get("enableRtl"),{firstMovingCol:r,column:a,position:u}=this.getColumnMoveAndTargetInfo(e,t,i);if(!r||!a||u==null)return;const h=s.allCols,d=h.indexOf(r),g=h.indexOf(a),m=u===0!==i,v=d<g||d===g&&!m;let w=0;if(m?v&&(w-=1):v||(w+=1),g+w===d)return;const S=h[g+w];if(!S)return;const T=this.getNormalisedColumnLeft(S,20,i);return{fromLeft:v,xPosition:T}}getColumnMoveAndTargetInfo(e,t,n){const s=this.lastHighlightedColumn||{},{firstMovingCol:i,lastMovingCol:r}=g2(e);if(!i||!r||s.column||!t)return{firstMovingCol:i,...s};const u=this.getPinDirection()==="left";return{firstMovingCol:i,position:u?1:0,column:u!==n?i:r}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,n){const{gos:s,ctrlsSvc:i}=this.beans,r=e.getLeft();if(r==null)return null;const a=e.getActualWidth();return Qy({x:n?r+a-t:r+t,pinned:e.getPinned(),useHeaderRow:n,skipScrollPadding:!0,gos:s,ctrlsSvc:i})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,n=this.failedMoveAttempts>mT;return t&&n||e.some(s=>s.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:n,fromEnter:s,fakeEvent:i,fromLeft:r}=e,a=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:n,fromLeft:r,fromEnter:s,fakeEvent:i}),{columns:u,toIndex:h}=I_(a)||{};u&&h!=null&&(this.lastMovedInfo={columns:u,toIndex:h}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:e}=this;e&&(CT(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.beans.ctrlsSvc.get("center"),n=t.getCenterViewportScrollLeft(),s=n+t.getCenterWidth();let i,r;this.gos.get("enableRtl")?(i=e<n+Tg,r=e>s-Tg):(r=e<n+Tg,i=e>s-Tg),this.needToMoveRight=i,this.needToMoveLeft=r,r||i?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){var e;this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),d2),(e=this.beans.dragAndDrop.getDragAndDropImageComponent())==null||e.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){var e;this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,(e=this.beans.dragAndDrop.getDragAndDropImageComponent())==null||e.setIcon(this.getIconName(),!1))}moveInterval(){var s,i;let e;this.intervalCount++,e=10+this.intervalCount*h2,e>Xy&&(e=Xy);let t=null;const n=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=n.scrollHorizontally(-e):this.needToMoveRight&&(t=n.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const{pinnedCols:r,dragAndDrop:a,gos:u}=this.beans;if(this.failedMoveAttempts<=mT+1||!r)return;if((s=a.getDragAndDropImageComponent())==null||s.setIcon("pinned",!1),!u.get("suppressMoveWhenColumnDragging")){const h=(i=this.lastDraggingEvent)==null?void 0:i.dragItem.columns;this.attemptToPinColumns(h,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,n=!1){const s=(e||[]).filter(a=>!a.getColDef().lockPinned);if(!s.length)return 0;n&&(t=this.getPinDirection());const{pinnedCols:i,dragAndDrop:r}=this.beans;return i==null||i.setColsPinned(s,t,"uiColumnDragged"),n&&r.nudge(),s.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function CT(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}function g2(e){const t=e.length;let n,s;for(let i=0;i<t;i++){if(!n){const r=e[i];r.getLeft()!=null&&(n=r)}if(!s){const r=e[t-1-i];r.getLeft()!=null&&(s=r)}if(n&&s)break}return{firstMovingCol:n,lastMovingCol:s}}var p2=class extends he{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){const{ctrlsSvc:e,dragAndDrop:t}=this.beans,n=this.pinned;e.whenReady(this,s=>{let i;const r=s.gridBodyCtrl.eBodyViewport;switch(n){case"left":i=[[r,s.left.eContainer],[s.bottomLeft.eContainer],[s.topLeft.eContainer]];break;case"right":i=[[r,s.right.eContainer],[s.bottomRight.eContainer],[s.topRight.eContainer]];break;default:i=[[r,s.center.eViewport],[s.bottomCenter.eViewport],[s.topCenter.eViewport]];break}this.eSecondaryContainers=i}),this.moveColumnFeature=this.createManagedBean(new f2(n)),this.bodyDropPivotTarget=this.createManagedBean(new r2(n)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},m2=class extends he{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,n){const s=this.beans.colModel.getCols();if(!s)return;const i=s[e];this.moveColumns([i],t,n)}moveColumns(e,t,n,s=!0){const{colModel:i,colAnimation:r,visibleCols:a,eventSvc:u}=this.beans,h=i.getCols();if(!h)return;if(t>h.length-e.length){be(30,{toIndex:t});return}r==null||r.start();const d=i.getColsForKeys(e);this.doesMovePassRules(d,t)&&(eT(i.getCols(),d,t),a.refresh(n),u.dispatchEvent({type:"columnMoved",columns:d,column:d.length===1?d[0]:null,toIndex:t,finished:s,source:n})),r==null||r.finish()}doesMovePassRules(e,t){const n=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(n)}doesOrderPassRules(e){const{colModel:t,gos:n}=this.beans;return!(!kD(e,t.getColTree())||!(i=>{const r=d=>d?d==="left"||d===!0?-1:1:0,a=n.get("enableRtl");let u=a?1:-1,h=!0;return i.forEach(d=>{const g=r(d.getColDef().lockPosition);a?g>u&&(h=!1):g<u&&(h=!1),u=g}),h})(e))}getProposedColumnOrder(e,t){const s=this.beans.colModel.getCols().slice();return eT(s,e,t),s}createBodyDropTarget(e,t){return new p2(e,t)}moveHeader(e,t,n,s,i){const{ctrlsSvc:r,gos:a,colModel:u,visibleCols:h,focusSvc:d}=this.beans,g=t.getBoundingClientRect(),m=g.left,v=Vt(n),w=v?g.width:n.getActualWidth(),S=e==="left"!==a.get("enableRtl"),T=Qy({x:S?m-20:m+w+20,pinned:s,fromKeyboard:!0,gos:a,ctrlsSvc:r}),A=d.focusedHeader;M_({allMovingColumns:v?n.getLeafColumns():[n],isFromHeader:!0,fromLeft:e==="right",xPosition:T,pinned:s,fromEnter:!1,fakeEvent:!1,gos:a,colModel:u,colMoves:this,visibleCols:h,finished:!0});let O;if(v){const V=n.getDisplayedLeafColumns();O=S?V[0]:at(V)}else O=n;if(r.getScrollFeature().ensureColumnVisible(O,"auto"),(!i.isAlive()||a.get("ensureDomOrder"))&&A){let V;if(v){const H=n.getGroupId(),z=n.getLeafColumns();if(!z.length)return;const U=z[0].getParent();if(!U)return;V=C2(U,H)}else V=n;V&&d.focusHeaderPosition({headerPosition:{...A,column:V}})}}setDragSourceForHeader(e,t,n){const{gos:s,colModel:i,dragAndDrop:r,visibleCols:a}=this.beans;let u=!s.get("suppressDragLeaveHidesColumns");const h=Vt(t),d=h?t.getProvidedColumnGroup().getLeafColumns():[t],m={type:1,eElement:e,getDefaultIconName:()=>u?"hide":"notAllowed",getDragItem:h?()=>y2(t,a.allCols):()=>v2(t),dragItemName:n,onDragStarted:()=>{u=!s.get("suppressDragLeaveHidesColumns"),ry(d,!0)},onDragStopped:()=>ry(d,!1),onDragCancelled:()=>ry(d,!1),onGridEnter:v=>{if(u){const{columns:w=[],visibleState:S}=v??{},T=h?O=>!S||S[O.getColId()]:()=>!0,A=w.filter(O=>!O.getColDef().lockVisible&&T(O));i.setColsVisible(A,!0,"uiColumnMoved")}},onGridExit:v=>{var w;if(u){const S=((w=v==null?void 0:v.columns)==null?void 0:w.filter(T=>!T.getColDef().lockVisible))||[];i.setColsVisible(S,!1,"uiColumnMoved")}}};return r.addDragSource(m,!0),m}};function C2(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}}function v2(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}function y2(e,t){const n=e.getProvidedColumnGroup().getLeafColumns(),s={};n.forEach(u=>s[u.getId()]=u.isVisible());const i=[];t.forEach(u=>{n.indexOf(u)>=0&&(i.push(u),wr(n,u))}),n.forEach(u=>i.push(u));const r=[],a=e.getLeafColumns();for(const u of i)a.indexOf(u)!==-1&&r.push(u);return{columns:i,columnsInSplit:r,visibleState:s}}var F_={moduleName:"ColumnMove",version:Je,beans:[m2,n2],apiFunctions:{moveColumnByIndex:s2,moveColumns:i2},dependsOn:[__],css:[t2]},w2=class extends he{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const n=this.getHeaderCellForColumn(e);if(!n)return-1;const s=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||s.push(n),this.getPreferredWidthForElements(s)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){const n=document.createElement("form");n.style.position="fixed";const s=this.centerRowContainerCtrl.eContainer;e.forEach(r=>this.cloneItemIntoDummy(r,n)),s.appendChild(n);const i=n.offsetWidth;return s.removeChild(n),t=t??this.gos.get("autoSizePadding"),i+t}getHeaderCellForColumn(e){let t=null;return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().forEach(n=>{const s=n.getHtmlElementForColumnHeader(e);s!=null&&(t=s)}),t}cloneItemIntoDummy(e,t){const n=e.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";const s=document.createElement("div"),i=s.classList;["ag-header-cell","ag-header-group-cell"].some(u=>n.classList.contains(u))?(i.add("ag-header","ag-header-row"),s.style.position="static"):i.add("ag-row");let a=e.parentElement;for(;a;){if(["ag-header-row","ag-row"].some(h=>a.classList.contains(h))){for(let h=0;h<a.classList.length;h++){const d=a.classList[h];d!="ag-row-position-absolute"&&i.add(d)}break}a=a.parentElement}s.appendChild(n),t.appendChild(s)}},b2={moduleName:"AutoWidth",version:Je,beans:[w2]};function S2(e,t,n=!0,s="api"){var i;(i=e.colResize)==null||i.setColumnWidths(t,!1,n,s)}var E2=class extends he{constructor(e,t,n,s){super(),this.comp=e,this.eResize=t,this.pinned=n,this.columnGroup=s}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const{horizontalResizeSvc:e,gos:t,colAutosize:n}=this.beans,s=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(s),!t.get("suppressAutoSize")&&n&&this.addDestroyFunc(n.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(e){const{columnsToResize:t,resizeStartWidth:n,resizeRatios:s,groupAfterColumns:i,groupAfterStartWidth:r,groupAfterRatios:a}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=n,this.resizeRatios=s,this.resizeTakeFromCols=i,this.resizeTakeFromStartWidth=r,this.resizeTakeFromRatios=a,this.toggleColumnResizing(!0)}onResizing(e,t,n="uiColumnResized"){const s=this.normaliseDragChange(t),i=this.resizeStartWidth+s;this.resizeColumnsFromLocalValues(i,n,e)}getInitialValues(e){var h;const t=d=>d.reduce((g,m)=>g+m.getActualWidth(),0),n=(d,g)=>d.map(m=>m.getActualWidth()/g),s=this.getColumnsToResize(),i=t(s),r=n(s,i),a={columnsToResize:s,resizeStartWidth:i,resizeRatios:r};let u=null;if(e&&(u=((h=this.beans.colGroupSvc)==null?void 0:h.getGroupAtDirection(this.columnGroup,"After"))??null),u){const d=u.getDisplayedLeafColumns(),g=a.groupAfterColumns=d.filter(v=>v.isResizable()),m=a.groupAfterStartWidth=t(g);a.groupAfterRatios=n(g,m)}else a.groupAfterColumns=void 0,a.groupAfterStartWidth=void 0,a.groupAfterRatios=void 0;return a}resizeLeafColumnsToFit(e){const t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();t>n.resizeStartWidth&&this.resizeColumns(n,t,e,!0)}resizeColumnsFromLocalValues(e,t,n=!0){if(!this.resizeCols||!this.resizeRatios)return;const s={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(s,e,t,n)}resizeColumns(e,t,n,s=!0){var m;const{columnsToResize:i,resizeStartWidth:r,resizeRatios:a,groupAfterColumns:u,groupAfterStartWidth:h,groupAfterRatios:d}=e,g=[];if(g.push({columns:i,ratios:a,width:t}),u){const v=t-r;g.push({columns:u,ratios:d,width:h-v})}(m=this.beans.colResize)==null||m.resizeColumnSets({resizeSets:g,finished:s,source:n}),s&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},R2=class extends he{constructor(e,t,n,s,i){super(),this.pinned=e,this.column=t,this.eResize=n,this.comp=s,this.ctrl=i}postConstruct(){const e=[];let t,n;const s=()=>{if(ot(this.eResize,t),!t)return;const{horizontalResizeSvc:a,colAutosize:u}=this.beans,h=a.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(h),n&&u&&e.push(u.addColumnAutosize(this.eResize,this.column))},i=()=>{e.forEach(a=>a()),e.length=0},r=()=>{const a=this.column.isResizable(),u=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(a!==t||u!==n)&&(t=a,n=u,i(),s())};r(),this.addDestroyFunc(i),this.ctrl.setRefreshFunction("resize",r)}onResizing(e,t){const{column:n,lastResizeAmount:s,resizeStartWidth:i,beans:r}=this,a=this.normaliseResizeAmount(t),u=i+a,h=[{key:n,newWidth:u}],{pinnedCols:d,ctrlsSvc:g,colResize:m}=r;if(this.column.getPinned()){const v=(d==null?void 0:d.leftWidth)??0,w=(d==null?void 0:d.rightWidth)??0,S=rd(g.getGridBodyCtrl().eBodyViewport)-50;if(v+w+(a-s)>S)return}this.lastResizeAmount=a,m==null||m.setColumnWidths(h,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const n=this.pinned!=="left",s=this.pinned==="right";return this.gos.get("enableRtl")?n&&(t*=-1):s&&(t*=-1),t}},T2=class extends he{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,n,s){const i=[],{colModel:r,gos:a,visibleCols:u}=this.beans;e.forEach(h=>{const d=r.getColDefCol(h.key)||r.getCol(h.key);if(!d)return;if(i.push({width:h.newWidth,ratios:[1],columns:[d]}),a.get("colResizeDefault")==="shift"&&(t=!t),t){const m=u.getColAfter(d);if(!m)return;const v=d.getActualWidth()-h.newWidth,w=m.getActualWidth()+v;i.push({width:w,ratios:[1],columns:[m]})}}),i.length!==0&&this.resizeColumnSets({resizeSets:i,finished:n,source:s})}resizeColumnSets(e){const{resizeSets:t,finished:n,source:s}=e;if(!(!t||t.every(g=>A2(g)))){if(n){const g=t&&t.length>0?t[0].columns:null;gp(this.eventSvc,g,n,s)}return}const r=[],a=[];t.forEach(g=>{const{width:m,columns:v,ratios:w}=g,S={},T={};v.forEach(V=>a.push(V));let A=!0,O=0;for(;A;){if(O++,O>1e3){Bt(31);break}A=!1;const V=[];let H=0,z=m;v.forEach((K,k)=>{if(T[K.getId()])z-=S[K.getId()];else{V.push(K);const x=w[k];H+=x}});const U=1/H;V.forEach((K,k)=>{const D=k===V.length-1;let x;D?x=z:(x=Math.round(w[k]*m*U),z-=x);const L=K.getMinWidth(),M=K.getMaxWidth();x<L?(x=L,T[K.getId()]=!0,A=!0):M>0&&x>M&&(x=M,T[K.getId()]=!0,A=!0),S[K.getId()]=x})}v.forEach(V=>{const H=S[V.getId()];V.getActualWidth()!==H&&(V.setActualWidth(H,s),r.push(V))})});const u=r.length>0;let h=[];if(u){const{colFlex:g,visibleCols:m,colViewport:v}=this.beans;h=(g==null?void 0:g.refreshFlexedColumns({resizingCols:a,skipSetLeft:!0}))??[],m.setLeftValues(s),m.updateBodyWidths(),v.checkViewportColumns()}const d=a.concat(h);(u||n)&&gp(this.eventSvc,d,n,s,h)}resizeHeader(e,t,n){if(!e.isResizable())return;const s=e.getActualWidth(),i=e.getMinWidth(),r=e.getMaxWidth(),a=Math.min(Math.max(s+t,i),r);this.setColumnWidths([{key:e,newWidth:a}],n,!0,"uiColumnResized")}createResizeFeature(e,t,n,s,i){return new R2(e,t,n,s,i)}createGroupResizeFeature(e,t,n,s){return new E2(e,t,n,s)}};function A2(e){const{columns:t,width:n}=e;let s=0,i=0,r=!0;t.forEach(h=>{const d=h.getMinWidth();s+=d||0;const g=h.getMaxWidth();g>0?i+=g:r=!1});const a=n>=s,u=!r||n<=i;return a&&u}var x2={moduleName:"ColumnResize",version:Je,beans:[T2],apiFunctions:{setColumnWidths:S2},dependsOn:[e2,b2]},D2=class extends he{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}},_2=class extends ib{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}setComp(e,t,n,s,i){const{column:r,beans:a}=this,{context:u,colNames:h,colHover:d,rangeSvc:g,colResize:m}=a;this.comp=e,i=Pd(this,u,i),this.setGui(t,i),this.displayName=h.getDisplayNameForColumnGroup(r,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(i),this.setupExpandable(i),this.setupTooltip(),this.setupAutoHeight({wrapperElement:s,compBean:i}),this.setupUserComp(),this.addHeaderMouseListeners(i),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const v=this.rowCtrl.pinned,w=r.getProvidedColumnGroup().getLeafColumns();d==null||d.createHoverFeature(i,w,t),g==null||g.createRangeHighlightFeature(i,r,e),i.createManagedBean(new sb(r,t,a)),i.createManagedBean(new D2(e,r)),m?this.resizeFeature=i.createManagedBean(m.createGroupResizeFeature(e,n,v,r)):e.setResizableDisplayed(!1),i.createManagedBean(new Cc(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(i,w),i.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(i),i.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){const{column:e,beans:t}=this,n=e.getDefinition();return ke(t.gos,{colDef:n,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,n=e.get("groupHeaderHeight");n!=null?n===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(n):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const n of t)e.addManagedListeners(n,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,n)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),n=t[0]===e,s=at(t)===e;if(!n&&!s)return;const i=e.getHighlighted(),r=!!this.rowCtrl.findHeaderCellCtrl(h=>h.column.isMoving());let a=!1,u=!1;if(r){const h=this.beans.gos.get("enableRtl"),d=i===1,g=i===0;n&&(h?u=d:a=g),s&&(h?a=g:u=d)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",a),this.comp.addOrRemoveCssClass("ag-header-highlight-after",u)}resizeHeader(e,t){const{resizeFeature:n}=this;if(!n)return;const s=n.getInitialValues(t);n.resizeColumns(s,s.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){var t;(t=this.resizeFeature)==null||t.resizeLeafColumnsToFit(e)}setupUserComp(){const{colGroupSvc:e,userCompFactory:t,gos:n}=this.beans,s=ke(n,{displayName:this.displayName,columnGroup:this.column,setExpanded:r=>{e.setColumnGroupOpened(this.column.getProvidedColumnGroup(),r,"gridInitializing")},setTooltip:(r,a)=>{n.assertModuleRegistered("Tooltip",3),this.setupTooltip(r,a)}}),i=Pk(t,s);i&&this.comp.setUserCompDetails(i)}addHeaderMouseListeners(e){const t=i=>this.handleMouseOverChange(i.type==="mouseenter"),n=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),s=i=>this.handleContextMenuMouseEvent(i,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:n,contextmenu:s})}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){var n;this.tooltipFeature=(n=this.beans.tooltipSvc)==null?void 0:n.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const n=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:n,expandableChanged:n})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){const{column:e}=this,t=e.getColGroupDef(),n=$w(t,this.gos,null,e);e.isPadding()?(n.push("ag-header-group-cell-no-group"),e.getLeafColumns().every(i=>i.isSpanHeaderHeight())&&n.push("ag-header-span-height")):(n.push("ag-header-group-cell-with-group"),t!=null&&t.wrapHeaderText&&n.push("ag-header-cell-wrap-text")),n.forEach(s=>this.comp.addOrRemoveCssClass(s,!0))}setupMovingCss(e){const{column:t}=this,s=t.getProvidedColumnGroup().getLeafColumns(),i=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",t.isMoving());s.forEach(r=>{e.addManagedListeners(r,{movingChanged:i})}),i()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||this.focusThis()}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===J.ENTER){const n=this.column,s=!n.isExpanded();this.beans.colGroupSvc.setColumnGroupOpened(n.getProvidedColumnGroup(),s,"uiColumnExpanded")}}setDragSource(e){var t;!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),e&&(this.dragSource=((t=this.beans.colMoves)==null?void 0:t.setDragSourceForHeader(e,this.column,this.displayName))??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function I2(e,t,n){var s;(s=e.colGroupSvc)==null||s.setColumnGroupOpened(t,n,"api")}function M2(e,t,n){var s;return((s=e.colGroupSvc)==null?void 0:s.getColumnGroup(t,n))??null}function F2(e,t){var n;return((n=e.colGroupSvc)==null?void 0:n.getProvidedColGroup(t))??null}function P2(e,t,n){return e.colNames.getDisplayNameForColumnGroup(t,n)||""}function L2(e){var t;return((t=e.colGroupSvc)==null?void 0:t.getColumnGroupState())??[]}function O2(e,t){var n;(n=e.colGroupSvc)==null||n.setColumnGroupState(t,"api")}function k2(e){var t;(t=e.colGroupSvc)==null||t.resetColumnGroupState("api")}function N2(e){return e.visibleCols.treeLeft}function V2(e){return e.visibleCols.treeCenter}function B2(e){return e.visibleCols.treeRight}function G2(e){return e.visibleCols.getAllTrees()}function H2(e,t){for(let n=0;n<t.length;n++){const s=e.indexOf(t[n]);s>=0&&(e[s]=e[e.length-1],e.pop())}}var z2=class extends he{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e,t=!1){var u;const{colModel:n,colGroupSvc:s,colViewport:i}=this.beans;t||this.buildTrees(n,s),s==null||s.updateOpenClosedVisibility();const r=oy(this.treeLeft);this.leftCols=r,this.centerCols=oy(this.treeCenter);const a=oy(this.treeRight);this.rightCols=a,this.joinColsAriaOrder(n),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(h=>h.isAutoHeight()),(u=this.beans.colFlex)==null||u.refreshFlexedColumns(),this.updateBodyWidths(),i.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(n,r,a,e),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}updateBodyWidths(){const e=du(this.centerCols),t=du(this.leftCols),n=du(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==n)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=n,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,n,s){let i,r;this.gos.get("enableRtl")?(i=t?t[0]:null,r=n?at(n):null):(i=t?at(t):null,r=n?n[0]:null),e.getCols().forEach(a=>{a.setLastLeftPinned(a===i,s),a.setFirstRightPinned(a===r,s)})}buildTrees(e,t){const n=e.getColsToShow(),s=n.filter(h=>h.getPinned()=="left"),i=n.filter(h=>h.getPinned()=="right"),r=n.filter(h=>h.getPinned()!="left"&&h.getPinned()!="right"),a=new HD,u=h=>t?t.createColumnGroups(h):h.columns;this.treeLeft=u({columns:s,idCreator:a,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=u({columns:i,idCreator:a,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=u({columns:r,idCreator:a,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){const t=e.getCols(),n=[],s=[],i=[];for(const r of t){const a=r.getPinned();a?a===!0||a==="left"?n.push(r):i.push(r):s.push(r)}this.ariaOrderColumns=n.concat(s).concat(i)}getAriaColIndex(e){let t;return Vt(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(t=>{Vt(t)&&t.checkLeft()})})}setLeftValuesOfCols(e){const{colModel:t}=this.beans;if(!t.getColDefCols())return;const s=t.getCols().slice(0),i=this.gos.get("enableRtl");[this.leftCols,this.rightCols,this.centerCols].forEach(r=>{if(i){let a=du(r);r.forEach(u=>{a-=u.getActualWidth(),u.setLeft(a,e)})}else{let a=0;r.forEach(u=>{u.setLeft(a,e),a+=u.getActualWidth()})}H2(s,r)}),s.forEach(r=>{r.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){const{leftCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){const{rightCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,n,s){const i=[];let r=null;for(let a=0;a<t.length;a++){const u=t[a],h=t.length-a,d=Math.min(u.getColSpan(e),h),g=[u];if(d>1){const v=d-1;for(let w=1;w<=v;w++)g.push(t[a+w]);a+=v}let m;n?(m=!1,g.forEach(v=>{n(v)&&(m=!0)})):m=!0,m&&(i.length===0&&r&&(s&&s(u))&&i.push(r),i.push(u)),r=u}return i}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){const t=this.allCols,n=t.indexOf(e);return n>0?t[n-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};sl(this.treeCenter,!1,e),sl(this.treeLeft,!1,e),sl(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let n=0;n<t.length;n++){const s=this[t[n]];if(s.length)return e?at(s):s[0]}return null}getColAfter(e){const t=this.allCols,n=t.indexOf(e);return n<t.length-1?t[n+1]:null}getColsLeftWidth(){return du(this.leftCols)}getDisplayedColumnsRightWidth(){return du(this.rightCols)}isColAtEdge(e,t){const n=this.allCols;if(!n.length)return!1;const s=t==="first";let i;if(Vt(e)){const r=e.getDisplayedLeafColumns();if(!r.length)return!1;i=s?r[0]:at(r)}else i=e;return(s?n[0]:at(n))===i}};function sl(e,t,n){if(e)for(let s=0;s<e.length;s++){const i=e[s];if(Vt(i)){const r=t?i.getDisplayedChildren():i.getChildren();sl(r,t,n)}n(i)}}function oy(e){const t=[];return sl(e,!0,n=>{ki(n)&&t.push(n)}),t}var U2=class extends he{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const e=[],t=this.beans.colModel.getColTree();return vr(null,t,n=>{Cn(n)&&e.push({groupId:n.getGroupId(),open:n.isExpanded()})}),e}resetColumnGroupState(e){const t=this.beans.colModel.getColDefColTree();if(!t)return;const n=[];vr(null,t,s=>{if(Cn(s)){const i=s.getColGroupDef(),r={groupId:s.getGroupId(),open:i?i.openByDefault:void 0};n.push(r)}}),this.setColumnGroupState(n,e)}setColumnGroupState(e,t){const{colModel:n,colAnimation:s,visibleCols:i,eventSvc:r}=this.beans;if(!n.getColTree().length)return;s==null||s.start();const u=[];e.forEach(h=>{const d=h.groupId,g=h.open,m=this.getProvidedColGroup(d);m&&m.isExpanded()!==g&&(m.setExpanded(g),u.push(m))}),i.refresh(t,!0),u.length&&r.dispatchEvent({type:"columnGroupOpened",columnGroup:u.length===1?u[0]:void 0,columnGroups:u}),s==null||s.finish()}setColumnGroupOpened(e,t,n){let s;Cn(e)?s=e.getId():s=e||"",this.setColumnGroupState([{groupId:s,open:t}],n)}getProvidedColGroup(e){let t=null;return vr(null,this.beans.colModel.getColTree(),n=>{Cn(n)&&n.getId()===e&&(t=n)}),t}getGroupAtDirection(e,t){const n=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),s=e.getDisplayedLeafColumns(),i=t==="After"?at(s):s[0],r=`getCol${t}`;for(;;){const a=this.beans.visibleCols[r](i);if(!a)return null;const u=this.getColGroupAtLevel(a,n);if(u!==e)return u}}getColGroupAtLevel(e,t){let n=e.getParent(),s,i;for(;s=n.getProvidedColumnGroup().getLevel(),i=n.getPaddingLevel(),!(s+i<=t);)n=n.getParent();return n}updateOpenClosedVisibility(){const e=this.beans.visibleCols.getAllTrees();sl(e,!1,t=>{Vt(t)&&t.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if(Vt(e))return e;const n=this.beans.visibleCols.getAllTrees(),s=typeof t=="number";let i=null;return sl(n,!1,r=>{if(Vt(r)){const a=r;let u;s?u=e===a.getGroupId()&&t===a.getPartId():u=e===a.getGroupId(),u&&(i=a)}}),i}createColumnGroups(e){const{columns:t,idCreator:n,pinned:s,oldDisplayedGroups:i,isStandaloneStructure:r}=e,a=this.mapOldGroupsById(i),u=[];let h=t;for(;h.length;){const d=h;h=[];let g=0;const m=v=>{const w=g;g=v;const S=d[w],A=(Vt(S)?S.getProvidedColumnGroup():S).getOriginalParent();if(A==null){for(let V=w;V<v;V++)u.push(d[V]);return}const O=this.createColumnGroup(A,n,a,s,r);for(let V=w;V<v;V++)O.addChild(d[V]);h.push(O)};for(let v=1;v<d.length;v++){const w=d[v],T=(Vt(w)?w.getProvidedColumnGroup():w).getOriginalParent(),A=d[g],V=(Vt(A)?A.getProvidedColumnGroup():A).getOriginalParent();T!==V&&m(v)}g<d.length&&m(d.length)}return r||this.setupParentsIntoCols(u,null),u}createProvidedColumnGroup(e,t,n,s,i,r,a){const u=i.getUniqueKey(t.groupId||null,null),h=this.createMergedColGroupDef(t,u),d=new qh(h,u,!1,n);this.createBean(d);const g=this.findExistingGroup(t,r);g&&r.splice(g.idx,1);const m=g==null?void 0:g.group;m&&d.setExpanded(m.isExpanded());const v=PD(this.beans,h.children,n+1,e,s,i,r,a);return d.setChildren(v),d}balanceColumnTree(e,t,n,s){const i=[];for(let r=0;r<e.length;r++){const a=e[r];if(Cn(a)){const u=a,h=this.balanceColumnTree(u.getChildren(),t+1,n,s);u.setChildren(h),i.push(u)}else{let u,h;for(let d=n-1;d>=t;d--){const g=s.getUniqueKey(null,null),m=this.createMergedColGroupDef(null,g),v=new qh(m,g,!0,t);this.createBean(v),h&&h.setChildren([v]),h=v,u||(u=h)}if(u&&h)if(i.push(u),e.some(g=>Cn(g))){h.setChildren([a]);continue}else{h.setChildren(e);break}i.push(a)}}return i}findDepth(e){let t=0,n=e;for(;n&&n[0]&&Cn(n[0]);)t++,n=n[0].getChildren();return t}findMaxDepth(e,t){let n=t;for(let s=0;s<e.length;s++){const i=e[s];if(Cn(i)){const r=i,a=this.findMaxDepth(r.getChildren(),t+1);n<a&&(n=a)}}return n}balanceTreeForAutoCols(e,t){const n=[];return e.forEach(s=>{let i=s;for(let r=t-1;r>=0;r--){const a=new qh(null,`FAKE_PATH_${s.getId()}}_${r}`,!0,r);this.createBean(a),a.setChildren([i]),i.originalParent=a,i=a}t===0&&(s.originalParent=null),n.push(i)}),n}createMergedColGroupDef(e,t){const n={},{gos:s,validation:i}=this.beans;return Object.assign(n,s.get("defaultColGroupDef")),Object.assign(n,e),i==null||i.validateColDef(n,t),n}findExistingGroup(e,t){if(e.groupId!=null)for(let s=0;s<t.length;s++){const i=t[s];if(i.getColGroupDef()&&i.getId()===e.groupId)return{idx:s,group:i}}}createColumnGroup(e,t,n,s,i){const r=e.getGroupId(),a=t.getInstanceIdForKey(r),u=JD(r,a);let h=n[u];return h&&h.getProvidedColumnGroup()!==e&&(h=null),Le(h)?h.reset():(h=new e_(e,r,a,s),i||this.createBean(h)),h}mapOldGroupsById(e){const t={},n=s=>{s.forEach(i=>{if(Vt(i)){const r=i;t[i.getUniqueId()]=r,n(r.getChildren())}})};return e&&n(e),t}setupParentsIntoCols(e,t){e.forEach(n=>{if(n.parent=t,Vt(n)){const s=n;this.setupParentsIntoCols(s.getChildren(),s)}})}},W2={moduleName:"ColumnGroup",version:Je,dynamicBeans:{headerGroupCellCtrl:_2},beans:[U2],apiFunctions:{getAllDisplayedColumnGroups:G2,getCenterDisplayedColumnGroups:V2,getColumnGroup:M2,getColumnGroupState:L2,getDisplayNameForColumnGroup:P2,getLeftDisplayedColumnGroups:N2,getProvidedColumnGroup:F2,getRightDisplayedColumnGroups:B2,resetColumnGroupState:k2,setColumnGroupOpened:I2,setColumnGroupState:O2}},j2={moduleName:"CheckboxCellRenderer",version:Je,userComponents:{agCheckboxCellRenderer:IV}},q2=class extends he{constructor(){super(...arguments),this.beanName="colFlex"}refreshFlexedColumns(e={}){const t=e.source??"flex";e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth);const n=this.flexViewportWidth;if(!n)return[];const{visibleCols:s}=this.beans,i=s.centerCols;let r=-1;if(e.resizingCols){const S=new Set(e.resizingCols);for(let T=i.length-1;T>=0;T--)if(S.has(i[T])){r=T;break}}let a=!1;const u=i.map((S,T)=>{const A=S.getFlex(),O=A!=null&&A>0&&T>r;return a||(a=O),{col:S,isFlex:O,flex:Math.max(0,A??0),initialSize:S.getActualWidth(),min:S.getMinWidth(),max:S.getMaxWidth(),targetSize:0}});if(!a)return[];let h=u.length,d=u.reduce((S,T)=>S+T.flex,0),g=n;const m=(S,T)=>{S.frozenSize=T,S.col.setActualWidth(T,t),g-=T,d-=S.flex,h-=1},v=S=>S.frozenSize!=null;for(const S of u)S.isFlex||m(S,S.initialSize);for(;h>0;){const S=Math.round(d<1?g*d:g);let T,A=0,O=0;for(const z of u){if(v(z))continue;T=z,O+=S*(z.flex/d);const U=O-A,K=Math.round(U);z.targetSize=K,A+=K}T&&(T.targetSize+=S-A);let V=0;for(const z of u){if(v(z))continue;const U=z.targetSize,K=Math.min(Math.max(U,z.min),z.max);V+=K-U,z.violationType=K===U?void 0:K<U?"max":"min",z.targetSize=K}const H=V===0?"all":V>0?"min":"max";for(const z of u)v(z)||(H==="all"||z.violationType===H)&&m(z,z.targetSize)}e.skipSetLeft||s.setLeftValues(t),e.updateBodyWidths&&s.updateBodyWidths();const w=u.filter(S=>S.isFlex&&!S.violationType).map(S=>S.col);if(e.fireResizedEvent){const S=u.filter(A=>A.initialSize!==A.frozenSize).map(A=>A.col),T=u.filter(A=>A.flex).map(A=>A.col);gp(this.eventSvc,S,!0,t,T)}return w}initCol(e){const{flex:t,initialFlex:n}=e.colDef;t!==void 0?e.flex=t:n!==void 0&&(e.flex=n)}setColFlex(e,t){e.flex=t??null,e.dispatchStateUpdatedEvent("flex")}},$2=class extends he{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes(),t={};this.dataTypeDefinitions=t;const n={};this.formatValueFuncs=n;const s=a=>u=>{const{column:h,node:d,value:g}=u;let m=h.getColDef().valueFormatter;return m===a.groupSafeValueFormatter&&(m=a.valueFormatter),this.beans.valueSvc.formatValue(h,d,g,m)};for(const a of Object.keys(e)){const u=e[a],h={...u,groupSafeValueFormatter:wT(u,this.gos)};t[a]=h,n[a]=s(h)}const i=this.gos.get("dataTypeDefinitions")??{},r={};this.dataTypeMatchers=r;for(const a of Object.keys(i)){const u=i[a],h=this.processDataTypeDefinition(u,i,[a],e);h&&(t[a]=h,u.dataTypeMatcher&&(r[a]=u.dataTypeMatcher),n[a]=s(h))}this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(a=>{const u=r[a];u&&delete r[a],r[a]=u??e[a].dataTypeMatcher})}processDataTypeDefinition(e,t,n,s){let i;const r=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let a=s[r];const u=t[r];if(a&&u&&(a=u),!yT(e,a,r))return;i=vT(a,e)}else{if(n.includes(r)){be(44);return}const a=t[r];if(!yT(e,a,r))return;const u=this.processDataTypeDefinition(a,t,[...n,r],s);if(!u)return;i=vT(u,e)}return{...i,groupSafeValueFormatter:wT(i,this.gos)}}updateColDefAndGetColumnType(e,t,n){let{cellDataType:s}=t;const{field:i}=t;if(s===void 0&&(s=e.cellDataType),(s==null||s===!0)&&(s=this.canInferCellDataType(e,t)?this.inferCellDataType(i,n):!1),!s){e.cellDataType=!1;return}const r=this.dataTypeDefinitions[s];if(!r){be(47,{cellDataType:s});return}return e.cellDataType=s,r.groupSafeValueFormatter&&(e.valueFormatter=r.groupSafeValueFormatter),r.valueParser&&(e.valueParser=r.valueParser),r.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,s,r,n),r.columnTypes}addColumnListeners(e){if(!this.isPendingInference)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const n=s=>{t.add(s.key)};e.__addEventListener("columnStateUpdated",n),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener("columnStateUpdated",n))}canInferCellDataType(e,t){const{gos:n}=this;if(!gc(n))return!1;const s={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(ay(t,s))return!1;const i=t.type===null?e.type:t.type;if(i){const r=n.get("columnTypes")??{};if(fp(i).some(u=>{const h=r[u.trim()];return h&&ay(h,s)}))return!1}return!ay(e,s)}inferCellDataType(e,t){if(!e)return;let n;const s=this.getInitialData();if(s){const i=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");n=Gg(s,e,i)}else this.initWaitForRowData(t);if(n!=null)return Object.keys(this.dataTypeMatchers).find(i=>this.dataTypeMatchers[i](n))??"object"}getInitialData(){var t;const e=this.gos.get("rowData");if(e!=null&&e.length)return e[0];if(this.initialData)return this.initialData;{const n=(t=this.beans.rowModel.rootNode)==null?void 0:t.allLeafChildren;if(n!=null&&n.length)return n[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:n,eventSvc:s}=this.beans;t&&n&&(n.shouldQueueResizeOperations=!0);const[i]=this.addManagedEventListeners({rowDataUpdateStarted:r=>{const{firstRowData:a}=r;a&&(i==null||i(),this.isPendingInference=!1,this.processColumnsPendingInference(a,t),this.columnStateUpdatesPendingInference={},t&&(n==null||n.processResizeOperations()),s.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;const n=[];this.destroyColumnStateUpdateListeners();const s={},i={};for(const r of Object.keys(this.columnStateUpdatesPendingInference)){const a=this.columnStateUpdatesPendingInference[r],u=this.colModel.getCol(r);if(!u)return;const h=u.getColDef();if(!this.resetColDefIntoCol(u,"cellDataTypeInferred"))return;const d=u.getColDef();if(t&&d.type&&d.type!==h.type){const g=Y2(u,a);g.rowGroup&&g.rowGroupIndex==null&&(s[r]=g),g.pivot&&g.pivotIndex==null&&(i[r]=g),n.push(g)}}t&&n.push(...this.generateColumnStateForRowGroupAndPivotIndexes(s,i)),n.length&&pc(this.beans,{state:n},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){const n={},{rowGroupColsSvc:s,pivotColsSvc:i}=this.beans;return s==null||s.restoreColumnOrder(n,e),i==null||i.restoreColumnOrder(n,t),Object.values(n)}resetColDefIntoCol(e,t){const n=e.getUserProvidedColDef();if(!n)return!1;const s=Wy(this.beans,n,e.getColId());return e.setColDef(s,n,t),!0}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,n=e.object;this.hasObjectValueParser=t.valueParser!==n.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==n.valueFormatter}getDateStringTypeDefinition(e){const{dateString:t}=this.dataTypeDefinitions;return e?this.getDataTypeDefinition(e)??t:t}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return(t=this.getDataTypeDefinition(e))==null?void 0:t.baseDataType}checkType(e,t){var s;if(t==null)return!0;const n=(s=this.getDataTypeDefinition(e))==null?void 0:s.dataTypeMatcher;return n?n(t):!0}validateColDef(e){const t=n=>be(48,{property:n});if(e.cellDataType==="object"){const{object:n}=this.dataTypeDefinitions;e.valueFormatter===n.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===n.valueParser&&!this.hasObjectValueParser&&t("Parser")}}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,n,s){var r;const i=this.formatValueFuncs[t];switch(n.baseDataType){case"number":{e.cellEditor="agNumberCellEditor";break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=a=>!!a.colDef.editable&&a.event.key===J.SPACE;break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=i;break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=i;break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(a,u)=>{const h=this.colModel.getColDefCol(s),d=h==null?void 0:h.getColDef();if(!h||!d)return 0;const g=a==null?"":i({column:h,node:null,value:a}),m=u==null?"":i({column:h,node:null,value:u});return g===m?0:g>m?1:-1},e.keyCreator=i;break}}(r=this.beans.filterManager)==null||r.setColDefPropertiesForDataType(e,n,i)}getDefaultDataTypes(){const e=n=>!!n.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:n=>{var s,i;return((i=(s=n.newValue)==null?void 0:s.trim)==null?void 0:i.call(s))===""?null:Number(n.newValue)},valueFormatter:n=>n.value==null?"":typeof n.value!="number"||isNaN(n.value)?t("invalidNumber","Invalid Number"):String(n.value),dataTypeMatcher:n=>typeof n=="number"},text:{baseDataType:"text",valueParser:n=>n.newValue===""?null:Oy(n.newValue),dataTypeMatcher:n=>typeof n=="string"},boolean:{baseDataType:"boolean",valueParser:n=>{var s,i;return n.newValue==null?n.newValue:((i=(s=n.newValue)==null?void 0:s.trim)==null?void 0:i.call(s))===""?null:String(n.newValue).toLowerCase()==="true"},valueFormatter:n=>n.value==null?"":String(n.value),dataTypeMatcher:n=>typeof n=="boolean"},date:{baseDataType:"date",valueParser:n=>fT(n.newValue==null?null:String(n.newValue)),valueFormatter:n=>n.value==null?"":!(n.value instanceof Date)||isNaN(n.value.getTime())?t("invalidDate","Invalid Date"):dT(n.value,!1)??"",dataTypeMatcher:n=>n instanceof Date},dateString:{baseDataType:"dateString",dateParser:n=>fT(n)??void 0,dateFormatter:n=>dT(n??null,!1)??void 0,valueParser:n=>e(String(n.newValue))?n.newValue:null,valueFormatter:n=>e(String(n.value))?n.value:"",dataTypeMatcher:n=>typeof n=="string"&&e(n)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:n=>Oy(n.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}};function vT(e,t){const n={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(n.columnTypes=[...fp(e.columnTypes),...fp(t.columnTypes)]),n}function yT(e,t,n){return t?t.baseDataType!==e.baseDataType?(be(46),!1):!0:(be(45,{parentCellDataType:n}),!1)}function wT(e,t){if(e.valueFormatter)return n=>{var s,i;if((s=n.node)!=null&&s.group){const r=(n.colDef.pivotValueColumn??n.column).getAggFunc();if(r){if(r==="first"||r==="last")return e.valueFormatter(n);if(e.baseDataType==="number"&&r!=="count"){if(typeof n.value=="number")return e.valueFormatter(n);if(typeof n.value=="object"){if(!n.value)return;if("toNumber"in n.value)return e.valueFormatter({...n,value:n.value.toNumber()});if("value"in n.value)return e.valueFormatter({...n,value:n.value.value})}}return}if(t.get("groupDisplayType")==="groupRows"&&!t.get("treeData"))return}else if(t.get("groupHideOpenParents")&&n.column.isRowGroupActive()&&typeof n.value=="string"&&!((i=e.dataTypeMatcher)!=null&&i.call(e,n.value)))return;return e.valueFormatter(n)}}function K2(e,t,n,s){if(!t[n])return!1;const i=e[n];return i===null?(t[n]=!1,!1):s===void 0?!!i:i===s}function ay(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([n,s])=>K2(e,t,n,s))}function Y2(e,t){const n=GD(e);return t.forEach(s=>{delete n[s],s==="rowGroup"?delete n.rowGroupIndex:s==="pivot"&&delete n.pivotIndex}),n}var Q2={moduleName:"DataType",version:Je,beans:[$2],dependsOn:[j2]},X2={moduleName:"ColumnFlex",version:Je,beans:[q2]};function Z2(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,n=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(n,"$1 $2$3").replace(/\./g," ").split(" ").map(i=>i.substring(0,1).toUpperCase()+(i.length>1?i.substring(1,i.length):"")).join(" ")}var J2=class extends he{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t,n=!1){if(!e)return null;const s=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:i}=this.beans;return n&&i?i.getHeaderName(e,s):s}getDisplayNameForProvidedColumnGroup(e,t,n){const s=t==null?void 0:t.getColGroupDef();return s?this.getHeaderName(s,null,e,t,n):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,n,s,i){var a;const r=e.headerValueGetter;if(r){const u=ke(this.gos,{colDef:e,column:t,columnGroup:n,providedColumnGroup:s,location:i});return typeof r=="function"?r(u):typeof r=="string"?((a=this.beans.expressionSvc)==null?void 0:a.evaluate(r,u))??null:""}else{if(e.headerName!=null)return e.headerName;if(e.field)return Z2(e.field)}return""}},eB=class extends he{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,n=!1){const{visibleCols:s}=this,i=s.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!i)){if(this.scrollWidth=e,this.scrollPosition=t,s.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const a=s.bodyWidth;this.viewportLeft=a-t-e,this.viewportRight=a-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(n)}}getHeadersToRender(e,t){let n;switch(e){case"left":n=this.rowsOfHeadersToRenderLeft[t];break;case"right":n=this.rowsOfHeadersToRenderRight[t];break;default:n=this.rowsOfHeadersToRenderCenter[t];break}return n||[]}extractViewportColumns(){const e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(e){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},e||(this.colsWithinViewportHash="")}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||tB(e)?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,n=t+e.getActualWidth(),s=this.viewportLeft-200,i=this.viewportRight+200,r=t<s&&n<s,a=t>i&&n>i;return!r&&!a}getViewportColumns(){const{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const t=r=>{const a=r.getLeft();return Le(a)&&a>this.viewportLeft},n=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:s}=this,i=s.centerCols;return s.getColsForRow(e,i,n,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){this.clear(!0);const e={},{leftCols:t,rightCols:n,treeLeft:s,treeRight:i,treeCenter:r}=this.visibleCols;this.headerColsWithinViewport.concat(t).concat(n).forEach(h=>e[h.getId()]=!0);const u=(h,d,g)=>{let m=!1;for(let v=0;v<h.length;v++){const w=h[v];let S=!1;if(ki(w))S=e[w.getId()]===!0;else{const A=w.getDisplayedChildren();A&&(S=u(A,d,g+1))}S&&(m=!0,d[g]||(d[g]=[]),d[g].push(w))}return m};u(s,this.rowsOfHeadersToRenderLeft,0),u(i,this.rowsOfHeadersToRenderRight,0),u(r,this.rowsOfHeadersToRenderCenter,0)}extractViewport(){const e=s=>`${s.getId()}-${s.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.getViewportColumns().map(e).join("#"),n=this.colsWithinViewportHash!==t;return n&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),n}};function tB(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}var nB=class extends he{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;class n{refresh(){return!1}getGui(){return this.eGui}init(i){const r=t(i),a=typeof r;if(a==="string"||a==="number"||a==="boolean"){this.eGui=ni("<span>"+r+"</span>");return}if(r==null){this.eGui=ni("<span></span>");return}this.eGui=r}}return n}},sB={moduleName:"CellRendererFunction",version:Je,beans:[nB]},iB=class extends he{constructor(){super(...arguments),this.beanName="registry",this.agGridDefaults={},this.agGridDefaultParams={},this.jsComps={},this.dynamicBeans={},this.selectors={},this.icons={}}postConstruct(){const e=this.gos.get("components");if(e!=null)for(const t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){const{icons:t,userComponents:n,dynamicBeans:s,selectors:i}=e;if(n){const r=(a,u,h)=>{this.agGridDefaults[a]=u,h&&(this.agGridDefaultParams[a]=h)};for(const a of Object.keys(n)){const u=n[a];typeof u=="object"?r(a,u.classImp,u.params):r(a,u)}}if(s)for(const r of Object.keys(s))this.dynamicBeans[r]=s[r];if(i==null||i.forEach(r=>{this.selectors[r.selector]=r}),t)for(const r of Object.keys(t))this.icons[r]=t[r]}getUserComponent(e,t){var u;const n=(h,d,g)=>({componentFromFramework:d,component:h,params:g}),{frameworkOverrides:s}=this.beans,i=s.frameworkComponent(t,this.gos.get("components"));if(i!=null)return n(i,!0);const r=this.jsComps[t];if(r){const h=s.isFrameworkComponent(r);return n(r,h)}const a=this.agGridDefaults[t];return a?n(a,!1,this.agGridDefaultParams[t]):((u=this.beans.validation)==null||u.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null)}createDynamicBean(e,t,...n){const s=this.dynamicBeans[e];if(s==null){if(t)throw new Error(mr(256));return}return new s(...n)}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}},rB=23,oB=class extends he{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){var e,t;this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(n=>n(this.params)),this.readyCallbacks.length=0)},((t=(e=this.beans.frameworkOverrides).runWhenReadyAsync)==null?void 0:t.call(e))??!1)}updateReady(){const e=Object.values(this.params);this.ready=e.length===rB&&e.every(t=>(t==null?void 0:t.isAlive())??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const n=this.readyCallbacks.indexOf(t);n>=0&&this.readyCallbacks.splice(n,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:n}=this.params;return[e,n,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},aB=':where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none}}:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}:where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value,.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom,.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}.ag-floating-bottom{border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-large-text-input{display:block}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row-hover.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{opacity:1}50%{opacity:.4}to{opacity:1}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-chart,.ag-dnd-ghost,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab}.ag-list-item,.ag-virtual-list-item{height:var(--ag-list-item-height)}.ag-virtual-list-item{position:absolute;width:100%}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-list-item{align-items:center;display:flex;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-column-select-column-group-readonly,.ag-column-select-column-readonly,.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-column-select-column-readonly{&.ag-icon-grip,.ag-icon-grip{opacity:.35}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);position:relative;&:after{background-color:var(--ag-accent-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}:where(.ag-ltr) .ag-filter-active{&:after{right:-1px}}:where(.ag-rtl) .ag-filter-active{&:after{left:-1px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto}.ag-menu,.ag-resizer{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-resizer{pointer-events:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}',Hx,zx,ob=typeof window!="object"||!((zx=(Hx=window==null?void 0:window.document)==null?void 0:Hx.fonts)!=null&&zx.forEach),Zy=new WeakMap,Hu=(e,t,n,s,i)=>{if(ob)return;s&&(e=`@layer ${CSS.escape(s)} { ${e} }`);let r=Zy.get(t);if(r||(r=[],Zy.set(t,r)),r.find(d=>d.css===e))return;const a=document.createElement("style");a.dataset.agGlobalCss=n,a.textContent=e;const u={css:e,el:a,priority:i};let h;for(const d of r){if(d.priority>i)break;h=d}if(h){h.el.insertAdjacentElement("afterend",a);const d=r.indexOf(h);r.splice(d+1,0,u)}else t.insertBefore(a,t.querySelector(":not(title, meta)")),r.push(u)},P_=(e,t)=>{Hu(aB,e,"core",t,0),Array.from(Zk()).sort((n,s)=>n.moduleName.localeCompare(s.moduleName)).forEach(n=>{var s;return(s=n.css)==null?void 0:s.forEach(i=>Hu(i,e,`module-${n.moduleName}`,t,0))})},Jy=new Set,lB=e=>{Jy.add(e)},uB=e=>{if(Jy.delete(e),Jy.size===0){Zy=new WeakMap;for(const t of document.head.querySelectorAll("style[data-ag-global-css]"))t.remove()}},br=e=>new L_(e),So="$default",cB=0,L_=class{constructor({feature:e,params:t,modeParams:n={},css:s,cssImports:i}){this.feature=e,this.css=s,this.cssImports=i,this.modeParams={[So]:{...n[So]??{},...t??{}},...n}}use(e,t){let n=this._inject;if(n==null){let{css:s}=this;if(s){const i=`ag-theme-${this.feature??"part"}-${++cB}`;typeof s=="function"&&(s=s()),s=`:where(.${i}) {
${s}
}
`;for(const r of this.cssImports??[])s=`@import url(${JSON.stringify(r)});
${s}`;n={css:s,class:i}}else n=!1;this._inject=n}return n&&e&&Hu(n.css,e,n.class,t,1),n?n.class:!1}},hB=e=>e.replace(/[A-Z]/g,t=>`-${t}`).toLowerCase(),O_=e=>`--ag-${hB(e)}`,Ni=e=>`var(${O_(e)})`,dB=(e,t,n)=>Math.max(t,Math.min(n,e)),fB=e=>{const t=new Map;return n=>{const s=n;return t.has(s)||t.set(s,e(n)),t.get(s)}},Ti=e=>({ref:"accentColor",mix:e}),Hs=e=>({ref:"foregroundColor",mix:e}),si=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),gB=e=>({ref:"foregroundColor",mix:e,onto:"headerBackgroundColor"}),ti={ref:"backgroundColor"},ly={ref:"foregroundColor"},Ao={ref:"accentColor"},Sp={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:Hs(.15),chromeBackgroundColor:si(.02),browserColorScheme:"light"},pB={...Sp,textColor:ly,accentColor:"#2196f3",invalidColor:"#e02525",wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:ti,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},subtleTextColor:{ref:"textColor",mix:.5},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:Ao,rangeSelectionBackgroundColor:Ti(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:Ti(.5),rangeHeaderHighlightColor:gB(.08),rowNumbersSelectedColor:Ti(.5),rowHoverColor:Ti(.08),columnHoverColor:Ti(.05),selectedRowBackgroundColor:Ti(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},oddRowBackgroundColor:ti,borderRadius:4,wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",spacing:8,fontSize:14,rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},dragAndDropImageBackgroundColor:ti,dragAndDropImageBorder:!0,dragAndDropImageShadow:{ref:"popupShadow"},dragHandleColor:Hs(.7),focusShadow:{spread:3,color:Ti(.5)},headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},iconSize:16,iconColor:"inherit",iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:Hs(.1),iconButtonActiveColor:Ao,iconButtonActiveBackgroundColor:Ti(.28),iconButtonActiveIndicatorColor:Ao,toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:Ao,toggleButtonOffBackgroundColor:si(.3),toggleButtonSwitchBackgroundColor:ti,toggleButtonSwitchInset:2,menuBorder:{color:Hs(.2)},menuBackgroundColor:si(.03),menuTextColor:si(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:Hs(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:Ao},cellEditingShadow:{ref:"cardShadow"},dialogBorder:{color:Hs(.2)},panelBackgroundColor:ti,panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipTextColor:{ref:"textColor"},tooltipBorder:!0,columnDropCellBackgroundColor:Hs(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:Hs(.13)},selectCellBackgroundColor:Hs(.07),selectCellBorder:{color:Hs(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:Hs(.15),statusBarLabelColor:ly,statusBarLabelFontWeight:500,statusBarValueColor:ly,statusBarValueFontWeight:500},mB=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}",CB={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}},vB=()=>br({feature:"buttonStyle",params:{...CB,buttonBackgroundColor:ti,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:Ao}},css:mB}),yB=vB(),wB=".ag-column-drop-vertical-empty-message{align-items:center;border:1px dashed;border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}",bB=()=>br({feature:"columnDropStyle",css:wB}),k_=bB(),SB=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],EB=fB(e=>(e=e.toLowerCase(),SB.find(t=>e.endsWith(t.toLowerCase()))??"length")),um=e=>typeof e=="object"&&(e!=null&&e.ref)?Ni(e.ref):typeof e=="string"?e:typeof e=="number"?String(e):!1,ab=e=>{if(typeof e=="string")return e;if(e&&"ref"in e){const t=Ni(e.ref);return e.mix==null?t:`color-mix(in srgb, ${e.onto?Ni(e.onto):"transparent"}, ${t} ${dB(e.mix*100,0,100)}%)`}return!1},RB=um,Du=e=>typeof e=="string"?e:typeof e=="number"?`${e}px`:e&&"calc"in e?`calc(${e.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,n=>n[0]==="-"?n:` ${Ni(n)} `)})`:e&&"ref"in e?Ni(e.ref):!1,TB=um,AB=(e,t)=>typeof e=="string"?e:e===!0?"solid 1px var(--ag-border-color)":e===!1?t==="columnBorder"?"solid 1px transparent":"none":e&&"ref"in e?Ni(e.ref):N_(e.style??"solid")+" "+Du(e.width??1)+" "+ab(e.color??{ref:"borderColor"}),xB=e=>typeof e=="string"?e:e===!1?"none":e&&"ref"in e?Ni(e.ref):[Du(e.offsetX??0),Du(e.offsetY??0),Du(e.radius??0),Du(e.spread??0),ab(e.color??{ref:"foregroundColor"})].join(" "),N_=um,V_=e=>typeof e=="string"?e:e&&"googleFont"in e?V_(e.googleFont):e&&"ref"in e?Ni(e.ref):Array.isArray(e)?e.map(t=>(typeof t=="object"&&"googleFont"in t&&(t=t.googleFont),DB(t))).join(", "):!1,DB=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),_B=um,B_=e=>typeof e=="string"?e:e&&"url"in e?`url(${JSON.stringify(e.url)})`:e&&"svg"in e?B_({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):e&&"ref"in e?Ni(e.ref):!1,IB=(e,t)=>typeof e=="string"?e:typeof e=="number"?(e>=10&&Bt(104,{value:e,param:t}),`${e}s`):e&&"ref"in e?Ni(e.ref):!1,MB={color:ab,colorScheme:RB,length:Du,scale:TB,border:AB,borderStyle:N_,shadow:xB,image:B_,fontFamily:V_,fontWeight:_B,duration:IB},FB=(e,t)=>{const n=EB(e);return MB[n](t,e)},PB=()=>new G_().withPart(yB).withPart(k_),G_=class H_{constructor(t=[]){this.parts=t}withPart(t){return typeof t=="function"&&(t=t()),t instanceof L_?new H_([...this.parts,t]):(Ny(259,{part:t},"Invalid part"),this)}withoutPart(t){return this.withPart(br({feature:t}))}withParams(t,n=So){return this.withPart(br({modeParams:{[n]:t}}))}_startUse({styleContainer:t,cssLayer:n,loadThemeGoogleFonts:s}){if(ob)return;OB(),P_(t,n);const i=LB(this);if(i.length>0)for(const r of i)s&&NB(r);for(const r of this.parts)r.use(t,n)}_getCssClass(){return this._cssClassCache??(this._cssClassCache=bT(this.parts).map(t=>t.use(void 0,void 0)).filter(Boolean).join(" "))}_getModeParams(){let t=this._paramsCache;if(!t){const n={[So]:{...pB}};for(const s of bT(this.parts))for(const i of Object.keys(s.modeParams)){const r=s.modeParams[i];if(r){const a=n[i]??(n[i]={}),u=new Set;for(const h of Object.keys(r)){const d=r[h];d!==void 0&&(a[h]=d,u.add(h))}if(i===So)for(const h of Object.keys(n)){const d=n[h];if(h!==So)for(const g of u)delete d[g]}}}this._paramsCache=t=n}return t}_getPerGridCss(t){const n="##SELECTOR##";let s=this._paramsCssCache;if(!s){let i="",r="";const a=this._getModeParams();for(const h of Object.keys(a)){const d=a[h];if(h!==So){const m=`:where([data-ag-theme-mode="${typeof CSS=="object"?CSS.escape(h):h}"]) & {
`;i+=m,r+=m}for(const g of Object.keys(d).sort()){const m=d[g],v=FB(g,m);if(v===!1)Bt(107,{key:g,value:m});else{const w=O_(g),S=w.replace("--ag-","--ag-inherited-");i+=`	${w}: var(${S}, ${v});
`,r+=`	${S}: var(${w});
`}}h!==So&&(i+=`}
`,r+=`}
`)}let u=`${n} {
${i}}
`;u+=`:has(> ${n}):not(${n}) {
${r}}
`,this._paramsCssCache=s=u}return s.replaceAll(n,`:where(.${t})`)}},bT=e=>{const t=new Map;for(const s of e)t.set(s.feature,s);const n=[];for(const s of e)(!s.feature||t.get(s.feature)===s)&&n.push(s);return n},LB=e=>{const t=new Set,n=r=>{if(Array.isArray(r))r.forEach(n);else{const a=r==null?void 0:r.googleFont;typeof a=="string"&&t.add(a)}};return Object.values(e._getModeParams()).flatMap(r=>Object.values(r)).forEach(n),Array.from(t).sort()},ST=!1,OB=()=>{if(!ST){ST=!0;for(const e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},kB=new Set,NB=async e=>{kB.add(e);const t=`@import url('https://${VB}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`;Hu(t,document.head,`googleFont:${e}`,void 0,0)},VB="fonts.googleapis.com",BB='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}',GB=()=>br({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:ti,checkboxUncheckedBorderColor:si(.3),checkboxCheckedBackgroundColor:Ao,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:ti,checkboxIndeterminateBackgroundColor:si(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:ti,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:BB}),HB=GB(),z_=()=>({...Sp,backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:si(.05),rowHoverColor:Ti(.15),selectedRowBackgroundColor:Ti(.2),menuBackgroundColor:si(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",checkboxUncheckedBorderColor:si(.4),toggleButtonOffBackgroundColor:si(.4)}),zB=()=>({...z_(),backgroundColor:"#1f2836"}),UB=()=>br({feature:"colorScheme",params:Sp,modeParams:{light:Sp,dark:z_(),"dark-blue":zB()}}),WB=UB(),U_={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>'},W_={"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>'},jB=(e={})=>{let t="";for(const n of[...Object.keys(U_),...Object.keys(W_)]){const s=qB(n,e.strokeWidth);t+=`.ag-icon-${n}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(s)}'); }
`}return t},qB=(e,t=1.5)=>{const n=W_[e];if(n)return n;const s=U_[e];if(!s)throw new Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+s+"</svg>"},$B=(e={})=>br({feature:"iconSet",css:()=>jB(e)}),KB=$B(),YB=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}:where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) :where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) :where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',QB=":where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){&:focus{box-shadow:var(--ag-focus-shadow)}}",XB={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"}},ZB=()=>br({feature:"inputStyle",params:{...XB,inputBackgroundColor:ti,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:Ao},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:si(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0},css:()=>YB+QB}),JB=ZB(),eG='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:1px solid var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:1px solid var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}',tG={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:1,tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},nG=()=>br({feature:"tabStyle",params:{...tG,tabBarBorder:!0,tabBarBackgroundColor:Hs(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:ti},css:eG}),sG=nG(),iG=()=>PB().withPart(HB).withPart(WB).withPart(KB).withPart(sG).withPart(JB).withPart(k_).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}),rG=iG(),ET={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},RT={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},TT={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},uy={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},oG=0,aG=class extends he{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1,this.paramsClass=`ag-theme-params-${++oG}`,this.globalCSS=[]}wireBeans(e){const{eGridDiv:t,gridOptions:n}=e;this.eGridDiv=t,this.eStyleContainer=n.themeStyleContainer??(t.getRootNode()===document?document.head:t),this.cssLayer=n.themeCssLayer}postConstruct(){this.addManagedPropertyListener("theme",()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(ET),this.getSizeEl(RT),this.getSizeEl(TT),this.getSizeEl(uy),this.refreshRowBorderWidthVariable(),this.addDestroyFunc(()=>uB(this)),this.mutationObserver=new MutationObserver(()=>{this.fireGridStylesChangedEvent("themeChanged")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}getDefaultRowHeight(){return this.getCSSVariablePixelValue(ET)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(RT)}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(TT)}getRowBorderWidth(){return this.getCSSVariablePixelValue(uy)}applyThemeClasses(e){const{gridTheme:t}=this;let n="";if(t)n=`${this.paramsClass} ${t._getCssClass()}`;else{this.mutationObserver.disconnect();let s=this.eGridDiv;for(;s;){let i=!1;for(const r of Array.from(s.classList))r.startsWith("ag-theme-")&&(i=!0,n=n?`${n} ${r}`:r);i&&this.mutationObserver.observe(s,{attributes:!0,attributeFilter:["class"]}),s=s.parentElement}}for(const s of Array.from(e.classList))s.startsWith("ag-theme-")&&e.classList.remove(s);if(n){const s=e.className;e.className=s+(s?" ":"")+n}}refreshRowHeightVariable(){const{eGridDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),n=this.gos.get("rowHeight");if(n==null||isNaN(n)||!isFinite(n))return t!==null&&e.style.setProperty("--ag-line-height",null),-1;const s=`${n}px`;return t!=s?(e.style.setProperty("--ag-line-height",s),n):t!=""?parseFloat(t):-1}addGlobalCSS(e,t){this.gridTheme?Hu(e,this.eStyleContainer,t,this.cssLayer,0):this.globalCSS.push([e,t])}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(t!=null)return t;const n=this.measureSizeEl(e);return n==="detached"||n==="no-styles"?e.defaultValue:(this.lastKnownValues.set(e,n),n)}measureSizeEl(e){const t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";const n=t.offsetWidth;return n===cy?"no-styles":(this.sizesMeasured=!0,n)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=document.createElement("div"),e.className="ag-measurement-container",this.eGridDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;const n=this.getMeasurementContainer();t=document.createElement("div");const{border:s}=e;s?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border",`var(${e.cssName}, solid ${cy}px`)):t.style.width=`var(${e.cssName}, ${cy}px)`,n.appendChild(t),this.sizeEls.set(e,t);let i=this.measureSizeEl(e);i==="no-styles"&&be(9,{variable:e});const r=Dr(this.beans,t,()=>{const a=this.measureSizeEl(e);a==="detached"||a==="no-styles"||(this.lastKnownValues.set(e,a),a!==i&&(i=a,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>r()),t}fireGridStylesChangedEvent(e){e==="rowBorderWidthChanged"&&this.refreshRowBorderWidthVariable(),this.eventSvc.dispatchEvent({type:"gridStylesChanged",[e]:!0})}refreshRowBorderWidthVariable(){const e=this.getCSSVariablePixelValue(uy);this.eGridDiv.style.setProperty("--ag-internal-row-border-width",`${e}px`)}handleThemeGridOptionChange(){const{gos:e,eGridDiv:t,globalCSS:n,gridTheme:s}=this,i=e.get("theme");let r;if(i==="legacy")r=void 0;else{const a=i??rG;a instanceof G_?r=a:Bt(240,{theme:a})}if(r!==s){if(r){lB(this),P_(this.eStyleContainer,this.cssLayer);for(const[u,h]of n)Hu(u,this.eStyleContainer,h,this.cssLayer,0);n.length=0}this.gridTheme=r,r==null||r._startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer});let a=this.eParamsStyle;a||(a=this.eParamsStyle=document.createElement("style"),t.appendChild(a)),ob||(a.textContent=(r==null?void 0:r._getPerGridCss(this.paramsClass))||""),this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged")}r&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&Bt(i?106:239)}},cy=15538,lG=class extends he{constructor(){super(...arguments),this.beanName="eventSvc",this.globalEventService=new ko}postConstruct(){const{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}addEventListener(e,t,n){this.globalEventService.addEventListener(e,t,n)}removeEventListener(e,t,n){this.globalEventService.removeEventListener(e,t,n)}addGlobalListener(e,t=!1){this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(ke(this.gos,e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(ke(this.gos,e))}};function j_(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}function ew(e,t){let n;if(Vt(e)&&j_(e)&&e.isPadding()){const s=e;n=s.getLeafColumns()[0];let i=n;for(;i!==s;)t++,i=i.getParent()}return{column:n||e,headerRowIndex:t}}var uG=class extends he{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,n=>{this.gridBodyCon=n.gridBodyCtrl});const t=Jt(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let n;const{colModel:s,colGroupSvc:i,ctrlsSvc:r}=this.beans;if(typeof e=="string"?(n=s.getCol(e),n||(n=(i==null?void 0:i.getColumnGroup(e))??null)):n=e,!n)return null;const a=r.getHeaderRowContainerCtrl(),u=a==null?void 0:a.getAllCtrls(),h=at(u||[]).type==="filter",d=gr(this.beans)-1;let g=-1,m=n;for(;m;)g++,m=m.getParent();let v=g;return t&&h&&v===d-1&&v++,v===-1?null:{headerRowIndex:v,column:n}}navigateVertically(e,t,n){const s=this.beans.focusSvc;if(t||(t=s.focusedHeader),!t)return!1;const{headerRowIndex:i}=t,r=t.column,a=gr(this.beans),u=e==="UP",h=this.getHeaderRowType(i);let{headerRowIndex:d,column:g,headerRowIndexWithoutSpan:m}=u?cG(h,r,i):hG(h,r,i),v=!1;return d<0&&(d=0,g=r,v=!0),d>=a?(d=-1,this.currentHeaderRowWithoutSpan=-1):m!==void 0&&(this.currentHeaderRowWithoutSpan=m),!v&&!g?!1:s.focusHeaderPosition({headerPosition:{headerRowIndex:d,column:g},allowUserOverride:!0,event:n})}navigateHorizontally(e,t=!1,n){const{focusSvc:s,gos:i}=this.beans,r=s.focusedHeader;let a,u;if(this.currentHeaderRowWithoutSpan!==-1?r.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=r.headerRowIndex,e==="LEFT"!==i.get("enableRtl")?(u="Before",a=this.findHeader(r,u)):(u="After",a=this.findHeader(r,u)),a||!t)return s.focusHeaderPosition({headerPosition:a,direction:u,fromTab:t,allowUserOverride:!0,event:n});if(t){const h=i.getCallback("tabToNextHeader");if(h)return s.focusHeaderPositionFromUserFunc({userFunc:h,headerPosition:a,direction:u})}return this.focusNextHeaderRow(r,u,n)}focusNextHeaderRow(e,t,n){const s=e.headerRowIndex;let i=null,r;const a=this.beans;if(t==="Before"?s>0&&(r=s-1,this.currentHeaderRowWithoutSpan-=1,i=this.findColAtEdgeForHeaderRow(r,"end")):(r=s+1,this.currentHeaderRowWithoutSpan<gr(a)?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1,i=this.findColAtEdgeForHeaderRow(r,"start")),!i)return!1;const{column:u,headerRowIndex:h}=ew(i.column,i==null?void 0:i.headerRowIndex);return a.focusSvc.focusHeaderPosition({headerPosition:{column:u,headerRowIndex:h},direction:t,fromTab:!0,allowUserOverride:!0,event:n})}scrollToColumn(e,t="After"){if(e.getPinned())return;let n;if(Vt(e)){const s=e.getDisplayedLeafColumns();n=t==="Before"?at(s):s[0]}else n=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(n)}findHeader(e,t){let n,s;const{colGroupSvc:i,visibleCols:r}=this.beans;if(Vt(e.column)?n=(i==null?void 0:i.getGroupAtDirection(e.column,t))??void 0:(s=`getCol${t}`,n=r[s](e.column)),!n)return;const{headerRowIndex:a}=e;if(this.getHeaderRowType(a)!=="filter"){const d=[n];for(;n.getParent();)n=n.getParent(),d.push(n);n=d[Math.max(0,d.length-1-a)]}const{column:u,headerRowIndex:h}=ew(n,a);return{column:u,headerRowIndex:h}}getHeaderRowType(e){const t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const{visibleCols:n,ctrlsSvc:s,colGroupSvc:i}=this.beans,r=n.allCols,a=r[t==="start"?0:r.length-1];if(!a)return;const u=s.getHeaderRowContainerCtrl(a.getPinned()),h=u==null?void 0:u.getRowType(e);if(h=="group"){const d=i==null?void 0:i.getColGroupAtLevel(a,e);return{headerRowIndex:e,column:d}}return{headerRowIndex:h==null?-1:e,column:a}}};function cG(e,t,n){const s=e==="filter",i=e==="column";let r=s?t:t.getParent(),a=n-1,u=a;if(i&&j_(t.getParent())){for(;r&&r.isPadding();)r=r.getParent(),a--;u=a,a<0&&(r=t,a=n,u=void 0)}return{column:r,headerRowIndex:a,headerRowIndexWithoutSpan:u}}function hG(e,t,n,s="After"){let i=t,r=n+1;const a=r;if(e==="group"){const u=t.getDisplayedLeafColumns(),h=s==="After"?u[0]:at(u),d=[];let g=h;for(;g.getParent()!==t;)g=g.getParent(),d.push(g);if(i=h,h.isSpanHeaderHeight())for(let m=d.length-1;m>=0;m--){const v=d[m];if(!v.isPadding()){i=v;break}r++}else i=at(d),i||(i=h)}return{column:i,headerRowIndex:r,headerRowIndexWithoutSpan:a}}var dG=class extends he{constructor(){super(...arguments),this.beanName="focusSvc"}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(cN(this.beans))}onColumnEverythingChanged(){if(!this.focusedCell)return;const e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCell||this.isDomDataMissingInHierarchy(un(this.beans),ud)?null:this.focusedCell}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||this.isDomDataMissingInHierarchy(un(this.beans),C_)?null:this.focusedHeader}isDomDataMissingInHierarchy(e,t){let n=e;for(;n;){if(dp(this.gos,n,t))return!1;n=n.parentNode}return!0}getFocusedCell(){return this.focusedCell}shouldRestoreFocus(e){return this.isCellRestoreFocused(e)?(setTimeout(()=>{this.restoredFocusedCell=null},0),!0):!1}clearRestoreFocus(){this.restoredFocusedCell=null,this.awaitRestoreFocusedCell=!1}restoreFocusedCell(e,t){this.awaitRestoreFocusedCell=!0,setTimeout(()=>{this.awaitRestoreFocusedCell&&(this.setRestoreFocusedCell(e),t())})}isCellRestoreFocused(e){return this.restoredFocusedCell==null?!1:"cellSpan"in e?e.doesSpanContain(this.restoredFocusedCell):qy(e,this.restoredFocusedCell)}setRestoreFocusedCell(e){this.beans.frameworkOverrides.renderingEngine==="react"&&(this.restoredFocusedCell=e)}getFocusEventParams(e){const{rowIndex:t,rowPinned:n,column:s}=e,i={rowIndex:t,rowPinned:n,column:s,isFullWidthCell:!1},r=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n});return r&&(i.isFullWidthCell=r.isFullWidth()),i}clearFocusedCell(){if(this.restoredFocusedCell=null,this.focusedCell==null)return;const e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent({type:"cellFocusCleared",...e})}setFocusedCell(e){const{column:t,rowIndex:n,rowPinned:s,forceBrowserFocus:i=!1,preventScrollOnBrowserFocus:r=!1}=e,a=this.colModel.getCol(t);if(!a){this.focusedCell=null;return}this.focusedCell={rowIndex:n,rowPinned:Mo(s),column:a},this.eventSvc.dispatchEvent({type:"cellFocused",...this.getFocusEventParams(this.focusedCell),forceBrowserFocus:i,preventScrollOnBrowserFocus:r})}isCellFocused(e){return this.focusedCell==null?!1:qy(e,this.focusedCell)}isRowNodeFocused(e){return this.isRowFocused(e.rowIndex,e.rowPinned)}isHeaderWrapperFocused(e){if(this.focusedHeader==null)return!1;const{column:t,rowCtrl:{rowIndex:n,pinned:s}}=e,{column:i,headerRowIndex:r}=this.focusedHeader;return t===i&&n===r&&s==i.getPinned()}focusHeaderPosition(e){var h;if(tl(this.beans))return!1;const{direction:t,fromTab:n,allowUserOverride:s,event:i,fromCell:r,rowWithoutSpanValue:a}=e;let{headerPosition:u}=e;if(r&&((h=this.filterManager)!=null&&h.isAdvFilterHeaderActive()))return this.focusAdvancedFilter(u);if(s){const d=this.focusedHeader,g=gr(this.beans);if(n){const m=this.gos.getCallback("tabToNextHeader");m&&(u=this.getHeaderPositionFromUserFunc({userFunc:m,direction:t,currentPosition:d,headerPosition:u,headerRowCount:g}))}else{const m=this.gos.getCallback("navigateToNextHeader");if(m&&i){const v={key:i.key,previousHeaderPosition:d,nextHeaderPosition:u,headerRowCount:g,event:i};u=m(v)}}}return u?this.focusProvidedHeaderPosition({headerPosition:u,direction:t,event:i,fromCell:r,rowWithoutSpanValue:a}):!1}focusHeaderPositionFromUserFunc(e){if(tl(this.beans))return!1;const{userFunc:t,headerPosition:n,direction:s,event:i}=e,r=this.focusedHeader,a=gr(this.beans),u=this.getHeaderPositionFromUserFunc({userFunc:t,direction:s,currentPosition:r,headerPosition:n,headerRowCount:a});return!!u&&this.focusProvidedHeaderPosition({headerPosition:u,direction:s,event:i})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:n,currentPosition:s,headerPosition:i,headerRowCount:r}=e,u=t({backwards:n==="Before",previousHeaderPosition:s,nextHeaderPosition:i,headerRowCount:r});return u===!0?s:u===!1?null:u}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:n,fromCell:s,rowWithoutSpanValue:i,event:r}=e,{column:a,headerRowIndex:u}=t,{filterManager:h,ctrlsSvc:d,headerNavigation:g}=this.beans;if(u===-1)return h!=null&&h.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:a,event:r});g==null||g.scrollToColumn(a,n);const m=d.getHeaderRowContainerCtrl(a.getPinned()),v=(m==null?void 0:m.focusHeader(t.headerRowIndex,a,r))||!1;return g&&v&&(i!=null||s)&&(g.currentHeaderRowWithoutSpan=i??-1),v}focusFirstHeader(){var s;if((s=this.overlays)!=null&&s.isExclusive()&&this.focusOverlay())return!0;let e=this.visibleCols.allCols[0];if(!e)return!1;const{colGroupSvc:t}=this.beans;t&&e.getParent()&&(e=t.getColGroupAtLevel(e,0));const n=ew(e,0);return this.focusHeaderPosition({headerPosition:n,rowWithoutSpanValue:0})}focusLastHeader(e){var s;if((s=this.overlays)!=null&&s.isExclusive()&&this.focusOverlay(!0))return!0;const t=gr(this.beans)-1,n=at(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:n},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){var t;return(t=this.filterManager)!=null&&t.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return this.focusedCell==null?!1:this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===Mo(t)}focusOverlay(e){var n,s;const t=((n=this.overlays)==null?void 0:n.isVisible())&&((s=this.overlays.eWrapper)==null?void 0:s.getGui());return!!t&&qs(t,e)}focusGridView(e){var r,a,u,h,d,g;const{backwards:t=!1,canFocusOverlay:n=!0,event:s}=e;if((r=this.overlays)!=null&&r.isExclusive())return n&&this.focusOverlay(t);if(Qw(this.beans))return t&&!tl(this.beans)?this.focusLastHeader():n&&this.focusOverlay(t)?!0:t?!1:Gu(this.beans,t);const i=t?IN(this.beans):_N(this.beans);if(i){const m=e.column??((a=this.focusedHeader)==null?void 0:a.column),{rowIndex:v,rowPinned:w}=i,S=Xw(this.beans,i);if(!m||!S||v==null)return!1;if(m.isSuppressNavigable(S)){const T=this.gos.get("enableRtl");let A;return!s||s.key===J.TAB?A=T?J.LEFT:J.RIGHT:A=s.key,(u=this.beans.navigation)==null||u.navigateToNextCell(null,A,{rowIndex:v,column:m,rowPinned:w||null},!0),!0}if((h=this.navigation)==null||h.ensureCellVisible({rowIndex:v,column:m,rowPinned:w}),t){const T=this.rowRenderer.getRowByPosition(i);if(T!=null&&T.isFullWidth()&&((d=this.navigation)!=null&&d.tryToFocusFullWidthRow(i,t)))return!0}return this.setFocusedCell({rowIndex:v,column:m,rowPinned:Mo(w),forceBrowserFocus:!0}),(g=this.beans.rangeSvc)==null||g.setRangeToCell({rowIndex:v,rowPinned:w,column:m}),!0}return!!(n&&this.focusOverlay(t)||t&&this.focusLastHeader())}focusAdvancedFilter(e){var t;return this.advFilterFocusColumn=e==null?void 0:e.column,((t=this.beans.advancedFilter)==null?void 0:t.getCtrl().focusHeaderComp())??!1}focusNextFromAdvancedFilter(e,t){var s;const n=(t?void 0:this.advFilterFocusColumn)??((s=this.visibleCols.allCols)==null?void 0:s[0]);return e?this.focusHeaderPosition({headerPosition:{column:n,headerRowIndex:gr(this.beans)-1}}):this.focusGridView({column:n})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},fG=class extends he{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){const{colAnimation:e}=this;e!=null&&e.isActive()?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){var n;const e=this.ctrlsSvc.get("center");if(!e||(n=this.colAnimation)!=null&&n.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),n=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==n)&&(this.horizontalScrollGap=t,this.verticalScrollGap=n,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=this.gos.get("scrollbarWidth"),n=typeof e=="number"&&e>=0?e:nO();n!=null&&(this.scrollbarWidth=n,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},gG=class extends he{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){var s;if(this.destroyCalled)return;const{stateSvc:e,ctrlsSvc:t,context:n}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:(e==null?void 0:e.getState())??{}}),this.destroyCalled=!0,(s=t.get("gridCtrl"))==null||s.destroyGridUi(),n.destroy(),super.destroy()}},pG=new Set(["gridPreDestroyed","fillStart","pasteStart"]),mG={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,rowNumbers:!1},CG=0,vG=0,yG=class extends he{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.gridInstanceId=vG++,this.propEventSvc=new ko,this.globalEventHandlerFactory=e=>(t,n)=>{if(!this.isAlive())return;const s=pG.has(t);if(s&&!e||!s&&e)return;const i=RD(t),r=this.gridOptions[i];typeof r=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{r(n)})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:"gridOptionsUpdated"})}})}get(e){return this.gridOptions[e]??mG[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return Le(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(n=>e(this.addGridCommonParams(n)))}updateGridOptions({options:e,force:t,source:n="api"}){const s={id:CG++,properties:[]},i=[],{gridOptions:r,validation:a}=this;for(const u of Object.keys(e)){const h=e[u];a==null||a.warnOnInitialPropertyUpdate(n,u);const d=t||typeof h=="object"&&n==="api",g=r[u];if(d||g!==h){r[u]=h;const m={type:u,currentValue:h,previousValue:g,changeSet:s,source:n};i.push(m)}}a==null||a.processGridOptions(this.gridOptions),s.properties=i.map(u=>u.type),i.forEach(u=>{cp(this,`Updated property ${u.type} from`,u.previousValue," to ",u.currentValue),this.propEventSvc.dispatchEvent(u)})}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addGridCommonParams(e){return e.api=this.api,e.context=this.gridOptionsContext,e}assertModuleRegistered(e,t){const n=Array.isArray(e)?e.some(s=>this.isModuleRegistered(s)):this.isModuleRegistered(e);return n||Bt(200,{...this.getModuleErrorParams(),moduleName:e,reasonOrId:t}),n}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:qw(),rowModelType:this.get("rowModelType"),isUmd:eN()}}isModuleRegistered(e){return jD(e,this.gridId,this.get("rowModelType"))}};function wG(e){return`<div class="ag-cell-label-container" role="presentation">
        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">
            <span data-ref="eText" class="ag-header-cell-text"></span>
            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
            ${e?'<ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>':""}
        </div>
    </div>`}var bG=class extends vt{constructor(){super(...arguments),this.eFilter=Me,this.eFilterButton=Me,this.eSortIndicator=Me,this.eMenu=Me,this.eLabel=Me,this.eText=Me,this.eSortOrder=Me,this.eSortAsc=Me,this.eSortDesc=Me,this.eSortMixed=Me,this.eSortNone=Me,this.isLoadingInnerComponent=!1}refresh(e){var n,s;const t=this.params;return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||this.currentSuppressMenuHide!=null&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon?!1:(this.innerHeaderComponent?(s=(n=this.innerHeaderComponent).refresh)==null||s.call(n,e):this.setDisplayName(e),!0)}workOutTemplate(){const{params:e,beans:t}=this,n=e.template??wG(!!t.sortSvc);return n!=null&&n.trim?n.trim():n}init(e){this.params=e;const{sortSvc:t,touchSvc:n,rowNumbersSvc:s,userCompFactory:i}=this.beans;this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,t?[t.getSortIndicatorSelector()]:void 0),n==null||n.setupForHeader(this),this.setMenu(),this.setupSort(),s==null||s.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(i,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){const n=Fk(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(s=>{this.isLoadingInnerComponent=!1,s&&(this.isAlive()?(this.innerHeaderComponent=s,this.eText.appendChild(s.getGui())):this.destroyBean(s))}))}setDisplayName(e){const{displayName:t}=e,n=this.currentDisplayName;if(this.currentDisplayName=t,n===t||this.innerHeaderComponent||this.isLoadingInnerComponent)return;const s=On(t,!0);this.eText.textContent=s}addInIcon(e,t,n){if(t==null)return;const s=Ge(e,this.beans,n);s&&t.appendChild(s)}workOutShowMenu(){var e;return this.params.enableMenu&&!!((e=this.beans.menuSvc)!=null&&e.isHeaderMenuButtonEnabled())}shouldSuppressMenuHide(){var e;return!!((e=this.beans.menuSvc)!=null&&e.isHeaderMenuButtonAlwaysShowEnabled())}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){rl(this.eMenu),this.eMenu=void 0;return}const{gos:e,eMenu:t,params:n}=this,s=Dn(e);this.addInIcon(s?"menu":"menuAlt",t,n.column),t.classList.toggle("ag-header-menu-icon",!s);const i=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=i,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(i)}toggleMenuAlwaysShow(e){var t;(t=this.eMenu)==null||t.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){const{currentSuppressMenuHide:t,params:n}=this;t||this.toggleMenuAlwaysShow(!0),n.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){var h;const{params:t,gos:n,beans:s,eMenu:i,eFilterButton:r}=this,a=t.column,u=Dn(n);if(e&&!u){if((h=s.menuSvc)!=null&&h.isFilterMenuInHeaderEnabled(a))return t.showFilter(r??i??this.getGui()),!0}else if(t.enableMenu)return this.showColumnMenu(i??r??this.getGui()),!0;return!1}setupSort(){const{sortSvc:e}=this.beans;if(!e)return;const{enableSorting:t,column:n}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));const{eSortIndicator:s,eSortOrder:i,eSortAsc:r,eSortDesc:a,eSortMixed:u,eSortNone:h}=this;s.attachCustomElements(i,r,a,u,h)}this.eSortIndicator.setupSort(n),this.currentSort&&e.setupHeader(this,n,this.eLabel)}setupFilterIcon(){const{eFilter:e,params:t}=this;e&&this.configureFilter(t.enableFilterIcon,e,this.onFilterChangedIcon.bind(this),"filterActive")}setupFilterButton(){const{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,n,s){if(!e)return rl(t),!1;const i=this.params.column;return this.addInIcon(s,t,i),this.addManagedListeners(i,{filterChanged:n}),n(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();ot(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){const{eFilterButton:t,eMenu:n}=this;return e?t??n??this.getGui():n??t??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent&&(this.destroyBean(this.innerHeaderComponent),this.innerHeaderComponent=void 0)}},SG=class extends vt{constructor(){super(`<div class="ag-header-group-cell-label" role="presentation">
            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`),this.agOpened=Me,this.agClosed=Me,this.agLabel=Me,this.isLoadingInnerComponent=!1}init(e){const{userCompFactory:t}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons()}checkWarnings(){this.params.template&&be(89)}workOutInnerHeaderGroupComponent(e,t){const n=Lk(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(s=>{this.isLoadingInnerComponent=!1,s&&(this.isAlive()?(this.innerHeaderGroupComponent=s,this.agLabel.appendChild(s.getGui())):this.destroyBean(s))}))}setupExpandIcons(){const{agOpened:e,agClosed:t,params:{columnGroup:n},beans:s}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);const i=h=>{if(Cr(h))return;const d=!n.isExpanded();s.colGroupSvc.setColumnGroupOpened(n.getProvidedColumnGroup(),d,"uiColumnExpanded")};this.addTouchAndClickListeners(s,t,i),this.addTouchAndClickListeners(s,e,i);const r=h=>{Bu(h)};this.addManagedElementListeners(t,{dblclick:r}),this.addManagedElementListeners(e,{dblclick:r}),this.addManagedElementListeners(this.getGui(),{dblclick:i}),this.updateIconVisibility();const a=n.getProvidedColumnGroup(),u=this.updateIconVisibility.bind(this);this.addManagedListeners(a,{expandedChanged:u,expandableChanged:u})}addTouchAndClickListeners(e,t,n){var s;(s=e.touchSvc)==null||s.setupForHeaderGroup(this,t,n),this.addManagedElementListeners(t,{click:n})}updateIconVisibility(){const{agOpened:e,agClosed:t,params:{columnGroup:n}}=this;if(n.isExpandable()){const s=n.isExpanded();ot(e,s),ot(t,!s)}else ot(e,!1),ot(t,!1)}addInIcon(e,t){const n=Ge(e,this.beans,null);n&&t.appendChild(n)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){const{agOpened:t,agClosed:n}=this;ot(t,!1),ot(n,!1);return}}setupLabel(e){var i;const{displayName:t,columnGroup:n}=e,s=this.innerHeaderGroupComponent||this.isLoadingInnerComponent;if(Le(t)&&!s){const r=On(t,!0);this.agLabel.textContent=r}this.addOrRemoveCssClass("ag-sticky-label",!((i=n.getColGroupDef())!=null&&i.suppressStickyLabel))}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}},EG={moduleName:"ColumnHeaderComp",version:Je,userComponents:{agColumnHeader:bG},icons:{menu:"menu",menuAlt:"menu-alt"}},RG={moduleName:"ColumnGroupHeaderComp",version:Je,userComponents:{agColumnGroupHeader:SG},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},TG={moduleName:"AnimationFrame",version:Je,beans:[aN]},AG=class extends he{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!Qa())return;const t=(n,s,i)=>{var u;const{rowCtrl:r,cellCtrl:a}=e.getControlsForEventTarget((i==null?void 0:i.target)??null);a!=null&&a.column&&a.dispatchCellContextMenuEvent(i??null),(u=this.beans.contextMenuSvc)==null||u.handleContextMenuMouseEvent(void 0,i,r,a)};this.mockContextMenu(e,e.element,t)}handleCellDoubleClick(e,t){return(()=>{if(!Qa()||AD("dblclick"))return!1;const s=new Date().getTime(),i=s-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=s,i})()?(e.onCellDoubleClicked(t),t.preventDefault(),!0):!1}setupForHeader(e){const{gos:t,sortSvc:n}=this.beans;if(t.get("suppressTouch"))return;const{params:s,eMenu:i,eFilterButton:r}=e,a=new bu(e.getGui(),!0),u=e.shouldSuppressMenuHide(),h=u&&Le(i),d=h?new bu(i,!0):a;if(s.enableMenu){const g=h?"tap":"longTap",m=v=>s.showColumnMenuAfterMouseClick(v.touchStart);e.addManagedListeners(d,{[g]:m})}if(s.enableSorting){const g=m=>{const v=m.touchStart.target;u&&(i!=null&&i.contains(v)||r!=null&&r.contains(v))||n==null||n.progressSort(s.column,!1,"uiColumnSorted")};e.addManagedListeners(a,{tap:g})}if(s.enableFilterButton&&r){const g=new bu(r,!0);e.addManagedListeners(g,{tap:()=>s.showFilter(r)}),e.addDestroyFunc(()=>g.destroy())}e.addDestroyFunc(()=>a.destroy()),h&&e.addDestroyFunc(()=>d.destroy())}setupForHeaderGroup(e,t,n){const s=new bu(t,!0);e.addManagedListeners(s,{tap:n}),e.addDestroyFunc(()=>s.destroy())}mockContextMenu(e,t,n){if(!Qa())return;const s=new bu(t),i=r=>{n(void 0,r.touchStart,r.touchEvent)};e.addManagedListeners(s,{longTap:i}),e.addDestroyFunc(()=>s.destroy())}},xG={moduleName:"Touch",version:Je,beans:[AG]},DG=class extends he{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t,n=!1){return n?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const n=e===J.UP,s=e===J.DOWN,i=e===J.LEFT;let r,a;const{pageBounds:u,gos:h,visibleCols:d}=this.beans;if(n||s)a=n?u.getFirstRow():u.getLastRow(),r=t.column;else{const g=h.get("enableRtl");a=t.rowIndex,r=(i!==g?d.allCols:[...d.allCols].reverse()).find(v=>this.isCellGoodToFocusOn({rowIndex:a,rowPinned:null,column:v}))}return r?{rowIndex:a,rowPinned:null,column:r}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let n=t,s=!1;for(;!s;){switch(e){case J.UP:n=this.getCellAbove(n);break;case J.DOWN:n=this.getCellBelow(n);break;case J.RIGHT:n=this.gos.get("enableRtl")?this.getCellToLeft(n):this.getCellToRight(n);break;case J.LEFT:n=this.gos.get("enableRtl")?this.getCellToRight(n):this.getCellToLeft(n);break;default:n=null,be(8,{key:e});break}n?s=this.isCellGoodToFocusOn(n):s=!0}return n}isCellGoodToFocusOn(e){const t=e.column;let n;const{pinnedRowModel:s,rowModel:i}=this.beans;switch(e.rowPinned){case"top":n=s==null?void 0:s.getPinnedTopRow(e.rowIndex);break;case"bottom":n=s==null?void 0:s.getPinnedBottomRow(e.rowIndex);break;default:n=i.getRow(e.rowIndex);break}return n?!this.isSuppressNavigable(t,n):!1}getCellToLeft(e){if(!e)return null;const t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,n=e.rowPinned;let s=!1;const{pageBounds:i,pinnedRowModel:r,rowModel:a}=this.beans;if(this.isLastRowInContainer(e))switch(n){case"bottom":return null;case"top":return a.isRowsToRender()?{rowIndex:i.getFirstRow(),rowPinned:null}:r!=null&&r.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return r!=null&&r.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}else n&&(s=!0);const u=a.getRow(e.rowIndex),h=s?void 0:this.getNextStickyPosition(u);return h||{rowIndex:t+1,rowPinned:n}}getNextStickyPosition(e,t){const{gos:n,rowRenderer:s}=this.beans;if(!SD(n)||!e||!e.sticky)return;const i=s.getStickyTopRowCtrls().some(d=>d.rowNode.rowIndex===e.rowIndex);let r=[];i?r=[...s.getStickyTopRowCtrls()].sort((d,g)=>d.rowNode.rowIndex-g.rowNode.rowIndex):r=[...s.getStickyBottomRowCtrls()].sort((d,g)=>g.rowNode.rowIndex-d.rowNode.rowIndex);const a=t?-1:1,u=r.findIndex(d=>d.rowNode.rowIndex===e.rowIndex),h=r[u+a];if(h)return{rowIndex:h.rowNode.rowIndex,rowPinned:null}}getCellBelow(e){var s;if(!e)return null;const t=((s=this.rowSpanSvc)==null?void 0:s.getCellEnd(e))??e,n=this.getRowBelow(t);return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,n=e.rowIndex,{pinnedRowModel:s,pageBounds:i}=this.beans;return t==="top"?((s==null?void 0:s.getPinnedTopRowCount())??-1)<=n:t==="bottom"?((s==null?void 0:s.getPinnedBottomRowCount())??-1)<=n:i.getLastRow()<=n}getRowAbove(e){const t=e.rowIndex,n=e.rowPinned,{pageBounds:s,pinnedRowModel:i,rowModel:r}=this.beans,a=n?t===0:t===s.getFirstRow();let u=!1;const h=()=>({rowIndex:(i==null?void 0:i.getPinnedTopRowCount())??-1,rowPinned:"top"});if(a)return n==="top"?null:n&&r.isRowsToRender()?{rowIndex:s.getLastRow(),rowPinned:null}:i!=null&&i.isRowsToRender("top")?h():null;n&&(u=!0);const d=r.getRow(e.rowIndex),g=u?void 0:this.getNextStickyPosition(d,!0);return g||{rowIndex:t-1,rowPinned:n}}getCellAbove(e){var s;if(!e)return null;const t=((s=this.rowSpanSvc)==null?void 0:s.getCellStart(e))??e,n=this.getRowAbove({rowIndex:t.rowIndex,rowPinned:t.rowPinned});return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const{visibleCols:t,pagination:n}=this.beans,s=t.allCols;let i=e.rowIndex,r=e.rowPinned,a=t.getColAfter(e.column);if(!a){a=s[0];const u=this.getRowBelow(e);if($t(u)||!u.rowPinned&&!((n==null?void 0:n.isRowInPage(u))??!0))return null;i=u?u.rowIndex:null,r=u?u.rowPinned:null}return{rowIndex:i,column:a,rowPinned:r}}getNextTabbedCellBackwards(e){const{visibleCols:t,pagination:n}=this.beans,s=t.allCols;let i=e.rowIndex,r=e.rowPinned,a=t.getColBefore(e.column);if(!a){a=at(s);const u=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if($t(u)||!u.rowPinned&&!((n==null?void 0:n.isRowInPage(u))??!0))return null;i=u?u.rowIndex:null,r=u?u.rowPinned:null}return{rowIndex:i,column:a,rowPinned:r}}isSuppressNavigable(e,t){const{suppressNavigable:n}=e.colDef;if(typeof n=="boolean")return n;if(typeof n=="function"){const s=e.createColumnFunctionCallbackParams(t);return n(s)}return!1}};function _G(e){return e.focusSvc.getFocusedCell()}function IG(e){return e.focusSvc.clearFocusedCell()}function MG(e,t,n,s){e.focusSvc.setFocusedCell({rowIndex:t,column:n,rowPinned:s,forceBrowserFocus:!0})}function FG(e,t){var n;return((n=e.navigation)==null?void 0:n.tabToNextCell(!1,t))??!1}function PG(e,t){var n;return((n=e.navigation)==null?void 0:n.tabToNextCell(!0,t))??!1}function LG(e,t,n=!1){var i;const s=(i=e.headerNavigation)==null?void 0:i.getHeaderPositionForColumn(t,n);s&&e.focusSvc.focusHeaderPosition({headerPosition:s})}var OG=class extends he{constructor(){super(),this.beanName="navigation",this.onPageDown=QR(this.onPageDown,100),this.onPageUp=QR(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const n=e.key,s=e.altKey,i=e.ctrlKey||e.metaKey,r=!!this.beans.rangeSvc&&e.shiftKey,a=TN(this.gos,e);let u=!1;switch(n){case J.PAGE_HOME:case J.PAGE_END:!i&&!s&&(this.onHomeOrEndKey(n),u=!0);break;case J.LEFT:case J.RIGHT:case J.UP:case J.DOWN:if(!a)return!1;i&&!s&&!r&&(this.onCtrlUpDownLeftRight(n,a),u=!0);break;case J.PAGE_DOWN:case J.PAGE_UP:!i&&!s&&(u=this.handlePageUpDown(n,a,t));break}return u&&e.preventDefault(),u}handlePageUpDown(e,t,n){return n&&(t=this.beans.focusSvc.getFocusedCell()),t?(e===J.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){const{scrollIndex:t,scrollType:n,scrollColumn:s,focusIndex:i,focusColumn:r}=e,{scrollFeature:a}=this.gridBodyCon;Le(s)&&!s.isPinned()&&a.ensureColumnVisible(s),Le(t)&&a.ensureIndexVisible(t,n),e.isAsync||a.ensureIndexVisible(i);const{focusSvc:u,rangeSvc:h}=this.beans;u.setFocusedCell({rowIndex:i,column:r,rowPinned:null,forceBrowserFocus:!0}),h==null||h.setRangeToCell({rowIndex:i,rowPinned:null,column:r})}onPageDown(e){const t=this.beans,n=hy(t),s=this.getViewportHeight(),{pageBounds:i,rowModel:r,rowAutoHeight:a}=t,u=i.getPixelOffset(),h=n.top+s,d=r.getRowIndexAtPixel(h+u);a!=null&&a.active?this.navigateToNextPageWithAutoHeight(e,d):this.navigateToNextPage(e,d)}onPageUp(e){const t=this.beans,n=hy(t),{pageBounds:s,rowModel:i,rowAutoHeight:r}=t,a=s.getPixelOffset(),u=n.top,h=i.getRowIndexAtPixel(u+a);r!=null&&r.active?this.navigateToNextPageWithAutoHeight(e,h,!0):this.navigateToNextPage(e,h,!0)}navigateToNextPage(e,t,n=!1){const{pageBounds:s,rowModel:i}=this.beans,r=this.getViewportHeight(),a=s.getFirstRow(),u=s.getLastRow(),h=s.getPixelOffset(),d=i.getRow(e.rowIndex),g=n?(d==null?void 0:d.rowHeight)-r-h:r-h,m=(d==null?void 0:d.rowTop)+g;let v=i.getRowIndexAtPixel(m+h);if(v===e.rowIndex){const S=n?-1:1;t=v=e.rowIndex+S}let w;n?(w="bottom",v<a&&(v=a),t<a&&(t=a)):(w="top",v>u&&(v=u),t>u&&(t=u)),this.isRowTallerThanView(i.getRow(v))&&(t=v,w="top"),this.navigateTo({scrollIndex:t,scrollType:w,scrollColumn:null,focusIndex:v,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,n=!1){this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const s=this.getNextFocusIndexForAutoHeight(e,n);this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:s,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const n=t?-1:1,s=this.getViewportHeight(),{pageBounds:i,rowModel:r}=this.beans,a=i.getLastRow();let u=0,h=e.rowIndex;for(;h>=0&&h<=a;){const d=r.getRow(h);if(d){const g=d.rowHeight??0;if(u+g>s)break;u+=g}h+=n}return Math.max(0,Math.min(h,a))}getViewportHeight(){const e=this.beans,t=hy(e),n=this.beans.scrollVisibleSvc.getScrollbarWidth();let s=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(s-=n),s}isRowTallerThanView(e){if(!e)return!1;const t=e.rowHeight;return typeof t!="number"?!1:t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const n=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),{rowIndex:s}=n,i=n.column;this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:i,focusIndex:s,focusColumn:i})}onHomeOrEndKey(e){const t=e===J.PAGE_HOME,{visibleCols:n,pageBounds:s,rowModel:i}=this.beans,r=n.allCols,a=t?s.getFirstRow():s.getLastRow(),u=i.getRow(a);if(!u)return;const h=(t?r:[...r].reverse()).find(d=>!d.isSuppressNavigable(u));h&&this.navigateTo({scrollIndex:a,scrollType:null,scrollColumn:h,focusIndex:a,focusColumn:h})}onTabKeyDown(e,t){const n=t.shiftKey,s=this.tabToNextCellCommon(e,n,t),i=this.beans,{ctrlsSvc:r,pageBounds:a,focusSvc:u,gos:h}=i;if(s!==!1){s?t.preventDefault():s===null&&r.get("gridCtrl").allowFocusForNextCoreContainer(n);return}if(n){const{rowIndex:d,rowPinned:g}=e.getRowPosition();(g?d===0:d===a.getFirstRow())&&(h.get("headerHeight")===0||tl(i)?Gu(i,!0,!0):(t.preventDefault(),u.focusPreviousFromFirstCell(t)))}else e instanceof Ug&&e.focusCell(!0),(!n&&u.focusOverlay(!1)||Gu(i,n))&&t.preventDefault()}tabToNextCell(e,t){const n=this.beans,{focusSvc:s,rowRenderer:i}=n,r=s.getFocusedCell();if(!r)return!1;let a=yg(n,r);return!a&&(a=i.getRowByPosition(r),!a||!a.isFullWidth())?!1:!!this.tabToNextCellCommon(a,e,t)}tabToNextCellCommon(e,t,n){let s=e.editing;if(!s&&e instanceof Ug){const a=e.rowCtrl;a&&(s=a.editing)}let i;return s?this.gos.get("editType")==="fullRow"?i=this.moveToNextEditingRow(e,t,n):i=this.moveToNextEditingCell(e,t,n):i=this.moveToNextCellNotEditing(e,t),i===null?i:i||!!this.beans.focusSvc.focusedHeader}moveToNextEditingCell(e,t,n=null){var r;const s=e.cellPosition;e.eGui.focus(),e.stopEditing();const i=this.findNextCellToFocusOn(s,t,!0);return i===!1?null:i==null?!1:((r=this.beans.editSvc)==null||r.startEditing(i,null,!0,n),i.focusCell(!1),!0)}moveToNextEditingRow(e,t,n=null){const s=e.cellPosition,i=this.findNextCellToFocusOn(s,t,!0);if(i===!1)return null;if(i==null)return!1;const r=i.cellPosition,a=this.isCellEditable(s),u=this.isCellEditable(r),h=r&&s.rowIndex===r.rowIndex&&s.rowPinned===r.rowPinned,{editSvc:d,rowEditSvc:g}=this.beans;if(a&&(d==null||d.setFocusOutOnEditor(e)),!h){const m=e.rowCtrl;d==null||d.stopRowEditing(m);const v=i.rowCtrl;g==null||g.startEditing(v,void 0,void 0,n)}return u?(d==null||d.setFocusInOnEditor(i),i.focusCell()):i.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const n=this.beans.visibleCols.allCols;let s;e instanceof Ky?s={...e.getRowPosition(),column:t?n[0]:at(n)}:s=e.getFocusedCellPosition();const i=this.findNextCellToFocusOn(s,t,!1);if(i===!1)return null;if(i instanceof Ug)i.focusCell(!0);else if(i)return this.tryToFocusFullWidthRow(i.getRowPosition(),t);return Le(i)}findNextCellToFocusOn(e,t,n){let s=e;const i=this.beans,{cellNavigation:r,gos:a,focusSvc:u,rowRenderer:h,rangeSvc:d}=i;for(;;){e!==s&&(e=s),t||(s=this.getLastCellOfColSpan(s)),s=r.getNextTabbedCell(s,t);const g=a.getCallback("tabToNextCell");if(Le(g)){const S=g({backwards:t,editing:n,previousCellPosition:e,nextCellPosition:s||null});if(S===!0)s=e;else{if(S===!1)return!1;s={rowIndex:S.rowIndex,column:S.column,rowPinned:S.rowPinned}}}if(!s)return null;if(s.rowIndex<0){const w=gr(i);return u.focusHeaderPosition({headerPosition:{headerRowIndex:w+s.rowIndex,column:s.column},fromCell:!0}),null}const m=a.get("editType")==="fullRow";if(n&&!m&&!this.isCellEditable(s))continue;this.ensureCellVisible(s);const v=yg(i,s);if(!v){const w=h.getRowByPosition(s);if(!w||!w.isFullWidth()||n)continue;return w}if(!r.isSuppressNavigable(v.column,v.rowNode))return v.setFocusedCellPosition(s),d==null||d.setRangeToCell(s),v}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}lookupRowNodeForCell({rowIndex:e,rowPinned:t}){const{pinnedRowModel:n,rowModel:s}=this.beans;return t==="top"?n==null?void 0:n.getPinnedTopRow(e):t==="bottom"?n==null?void 0:n.getPinnedBottomRow(e):s.getRow(e)}navigateToNextCell(e,t,n,s){let i=n,r=!1;const a=this.beans,{cellNavigation:u,focusSvc:h,gos:d}=a;for(;i&&(i===n||!this.isValidNavigateCell(i));)d.get("enableRtl")?t===J.LEFT&&(i=this.getLastCellOfColSpan(i)):t===J.RIGHT&&(i=this.getLastCellOfColSpan(i)),i=u.getNextCellToFocus(t,i),r=$t(i);if(r&&e&&e.key===J.UP&&(i={rowIndex:-1,rowPinned:null,column:n.column}),s){const m=d.getCallback("navigateToNextCell");if(Le(m)){const w=m({key:t,previousCellPosition:n,nextCellPosition:i||null,event:e});Le(w)?i={rowPinned:w.rowPinned,rowIndex:w.rowIndex,column:w.column}:i=null}}if(!i)return;if(i.rowIndex<0){const m=gr(a);h.focusHeaderPosition({headerPosition:{headerRowIndex:m+i.rowIndex,column:n.column},event:e||void 0,fromCell:!0});return}const g=this.getNormalisedPosition(i);g?this.focusPosition(g):this.tryToFocusFullWidthRow(i)}getNormalisedPosition(e){var s;if(!!((s=this.beans.spannedRowRenderer)!=null&&s.getCellByPosition(e)))return e;this.ensureCellVisible(e);const n=yg(this.beans,e);return n?(e=n.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const{visibleCols:n,rowRenderer:s,focusSvc:i,eventSvc:r}=this.beans,a=n.allCols,u=s.getRowByPosition(e);if(!u||!u.isFullWidth())return!1;const h=i.getFocusedCell(),d={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?at(a):a[0])};this.focusPosition(d);const g=t??(h!=null&&DN(d,h));return r.dispatchEvent({type:"fullWidthRowFocused",rowIndex:d.rowIndex,rowPinned:d.rowPinned,column:d.column,isFullWidthCell:!0,fromBelow:g}),!0}focusPosition(e){const{focusSvc:t,rangeSvc:n}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),n==null||n.setRangeToCell(e)}isValidNavigateCell(e){return!!Xw(this.beans,e)}getLastCellOfColSpan(e){const t=yg(this.beans,e);if(!t)return e;const n=t.getColSpanningList();return n.length===1?e:{rowIndex:e.rowIndex,column:at(n),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=SD(this.gos),n=this.beans.rowModel.getRow(e.rowIndex),s=t&&(n==null?void 0:n.sticky),{scrollFeature:i}=this.gridBodyCon;!s&&$t(e.rowPinned)&&i.ensureIndexVisible(e.rowIndex),e.column.isPinned()||i.ensureColumnVisible(e.column)}};function hy(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var kG={moduleName:"KeyboardNavigation",version:Je,beans:[OG,DG,uG],apiFunctions:{getFocusedCell:_G,clearFocusedCell:IG,setFocusedCell:MG,setFocusedHeader:LG,tabToNextCell:FG,tabToPreviousCell:PG}},NG=class extends he{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:(e==null?void 0:e.animate)??!1,newData:(e==null?void 0:e.newData)??!1,newPage:(e==null?void 0:e.newPage)??!1,newPageSize:(e==null?void 0:e.newPageSize)??!1,keepRenderedRows:(e==null?void 0:e.keepRenderedRows)??!1})}calculatePages(){const{pageBounds:e,pagination:t,rowModel:n}=this.beans;t?t.calculatePages():e.calculateBounds(0,n.getRowCount()-1)}},VG=class extends he{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){var e;return((e=this.topRowBounds)==null?void 0:e.rowIndex)??-1}getLastRow(){var e;return((e=this.bottomRowBounds)==null?void 0:e.rowIndex)??-1}getCurrentPageHeight(){const{topRowBounds:e,bottomRowBounds:t}=this;return!e||!t?0:Math.max(t.rowTop+t.rowHeight-e.rowTop,0)}getCurrentPagePixelRange(){const{topRowBounds:e,bottomRowBounds:t}=this,n=(e==null?void 0:e.rowTop)??0,s=t?t.rowTop+t.rowHeight:0;return{pageFirstPixel:n,pageLastPixel:s}}calculateBounds(e,t){const{rowModel:n}=this.beans,s=n.getRowBounds(e);s&&(s.rowIndex=e),this.topRowBounds=s;const i=n.getRowBounds(t);i&&(i.rowIndex=t),this.bottomRowBounds=i,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){var t;const e=((t=this.topRowBounds)==null?void 0:t.rowTop)??0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},BG=".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}",GG=class extends he{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?"left":"right"}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const e=this.getWidth(),t=e>0;for(const n of this.elements)n&&(ot(n,t),Fi(n,e))}},HG=class extends he{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCtrl=t.gridBodyCtrl});const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const{gos:e,visibleCols:t,eventSvc:n}=this.beans,s=Wn(e,"print"),i=s?0:t.getColsLeftWidth(),r=s?0:t.getDisplayedColumnsRightWidth();i!=this.leftWidth&&(this.leftWidth=i,n.dispatchEvent({type:"leftPinnedWidthChanged"})),r!=this.rightWidth&&(this.rightWidth=r,n.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.eBodyViewport,t=rd(e);if(t<=50)return;const n=this.getPinnedColumnsOverflowingViewport(t-50),s=this.gos.getCallback("processUnpinnedColumns"),{columns:i,hasLockedPinned:r}=n;let a=i;!a.length&&!r||(s&&(a=s({columns:a,viewportWidth:t})),!(!a||!a.length)&&(a=a.filter(u=>!im(u)),this.setColsPinned(a,null,"viewportSizeFeature")))}createPinnedWidthFeature(e,...t){return new GG(e,t)}setColsPinned(e,t,n){const{colModel:s,colAnimation:i,visibleCols:r,gos:a}=this.beans;if(!s.cols||!(e!=null&&e.length))return;if(Wn(a,"print")){be(37);return}i==null||i.start();let u;t===!0||t==="left"?u="left":t==="right"?u="right":u=null;const h=[];e.forEach(d=>{if(!d)return;const g=s.getCol(d);g&&g.getPinned()!==u&&(this.setColPinned(g,u),h.push(g))}),h.length&&(r.refresh(n),VD(this.eventSvc,h,n)),i==null||i.finish()}initCol(e){const{pinned:t,initialPinned:n}=e.colDef;t!==void 0?this.setColPinned(e,t):this.setColPinned(e,n)}setColPinned(e,t){t===!0||t==="left"?e.pinned="left":t==="right"?e.pinned="right":e.pinned=null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){const{scrollVisibleSvc:t}=this.beans;if(e.pinned==null)return;const n=e.pinned==="left",s=e.pinned==="right";e.hidden=!0;const i=()=>{const r=n?this.leftWidth:this.rightWidth;if(r==null)return;const a=r==0,u=e.hidden!==a,h=this.gos.get("enableRtl"),d=t.getScrollbarWidth(),m=t.verticalScrollShowing&&(h&&n||!h&&s)?r+d:r;e.comp.setPinnedContainerWidth(`${m}px`),e.comp.setDisplayed(!a),u&&(e.hidden=a,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:i,rightPinnedWidthChanged:i,scrollVisibilityChanged:i,scrollbarWidthChanged:i})}getHeaderResizeDiff(e,t){if(t.getPinned()){const{leftWidth:s,rightWidth:i}=this,r=rd(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(s+i+e>r)if(r>s+i)e=r-s-i;else return 0}return e}getPinnedColumnsOverflowingViewport(e){const t=this.rightWidth??0,n=this.leftWidth??0,s=t+n;let i=!1;if(s<e)return{columns:[],hasLockedPinned:i};const{visibleCols:r}=this.beans,a=[...r.leftCols],u=[...r.rightCols];let h=0,d=0;const g=0,m=[];let v=s-g-e;for(;(d<a.length||h<u.length)&&v>0;){if(h<u.length){const w=u[h++];if(w.colDef.lockPinned){i=!0;continue}v-=w.getActualWidth(),m.push(w)}if(d<a.length&&v>0){const w=a[d++];if(w.colDef.lockPinned){i=!0;continue}v-=w.getActualWidth(),m.push(w)}}return{columns:m,hasLockedPinned:i}}},zG={moduleName:"PinnedColumn",version:Je,beans:[HG],css:[BG]},UG=class extends he{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=fr(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const e=this.beans,t=Jt(e),n=this.descriptionContainer=t.createElement("div");n.classList.add("ag-aria-description-container"),Qx(n,"polite"),zL(n,"additions text"),HL(n,!0),e.eGridDiv.appendChild(n)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{if(this.isAlive()&&this.descriptionContainer){let t=e;this.lastAnnouncement===t&&(t=`${t}.`),this.lastAnnouncement=t,this.descriptionContainer.textContent=t}},50)}destroy(){var t;super.destroy();const{descriptionContainer:e}=this;e&&(Hi(e),(t=e.parentElement)==null||t.removeChild(e)),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},WG={moduleName:"Aria",version:Je,beans:[UG]};function jG(e){var t;(t=e.overlays)==null||t.showLoadingOverlay()}function qG(e){var t;(t=e.overlays)==null||t.showNoRowsOverlay()}function $G(e){var t;(t=e.overlays)==null||t.hideOverlay()}var KG=".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:1px solid var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}",q_=class extends vt{constructor(){super(`
            <div class="ag-overlay" role="presentation">
                <div class="ag-overlay-panel" role="presentation">
                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>
                </div>
            </div>`),this.eOverlayWrapper=Me,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeCssClass=null,this.elToFocusAfter=null,this.registerCSS(KG)}handleKeyDown(e){if(e.key!==J.TAB||e.defaultPrevented||Cr(e))return;const t=this.beans;if(_r(t,this.eOverlayWrapper,!1,e.shiftKey))return;let s=!1;e.shiftKey?s=t.focusSvc.focusGridView({column:at(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):s=Gu(t,!1),s&&e.preventDefault()}updateLayoutClasses(e,t){const n=this.eOverlayWrapper.classList,{AUTO_HEIGHT:s,NORMAL:i,PRINT:r}=Wg;n.toggle(s,t.autoHeight),n.toggle(i,t.normal),n.toggle(r,t.print)}postConstruct(){this.createManagedBean(new Jw(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,n,s){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),n&&this.isGridFocused()){const i=un(this.beans);i&&!od(this.beans)&&(this.elToFocusAfter=i)}e.then(i=>{if(this.activePromise!==e){this.activeOverlay!==i&&(this.destroyBean(i),i=null);return}if(this.activePromise=null,!!i){if(this.activeOverlay!==i&&(this.eOverlayWrapper.appendChild(i.getGui()),this.activeOverlay=i,s)){const r=i;this.updateListenerDestroyFunc=this.addManagedPropertyListener(s,({currentValue:a})=>{var u;(u=r.refresh)==null||u.call(r,ke(this.gos,{...a??{}}))})}n&&this.isGridFocused()&&qs(this.eOverlayWrapper)}})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){var s;this.activePromise=null;const e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.isGridFocused()&&(t=null);const n=this.updateListenerDestroyFunc;n&&(n(),this.updateListenerDestroyFunc=null),this.destroyBean(e),Hi(this.eOverlayWrapper),(s=t==null?void 0:t.focus)==null||s.call(t,{preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const e=un(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setOverlayWrapperComp(void 0),super.destroy()}},YG={selector:"AG-OVERLAY-WRAPPER",component:q_},QG=class extends he{constructor(){super(...arguments),this.beanName="overlays",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}postConstruct(){this.isClientSide=gc(this.gos),this.isServerSide=!this.isClientSide&&Md(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.refreshWrapperPadding.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.eWrapper=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.eWrapper}isExclusive(){return this.state===1&&!!this.eWrapper}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos,t=e.get("loading");!t&&(t!==void 0||e.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1;const e=this.gos;e.get("loading")||e.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){be(99);return}this.doHideOverlay()}getOverlayWrapperSelector(){return YG}getOverlayWrapperCompClass(){return q_}updateOverlayVisibility(){if(!this.eWrapper){this.state=0;return}const{state:e,isClientSide:t,isServerSide:n,beans:{gos:s,colModel:i,rowModel:r}}=this;let a=this.gos.get("loading");a!==void 0&&(this.showInitialOverlay=!1),this.showInitialOverlay&&a===void 0&&!s.get("suppressLoadingOverlay")&&(a=!s.get("columnDefs")||!i.ready||!s.get("rowData")&&t),a?e!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,t&&r.isEmpty()&&!s.get("suppressNoRowsOverlay")?e!==2&&this.doShowNoRowsOverlay():(e===1||!n&&e!==0)&&this.doHideOverlay())}doShowLoadingOverlay(){this.eWrapper&&(this.state=1,this.showOverlay(zk(this.beans.userCompFactory,ke(this.gos,{})),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.eWrapper&&(this.state=2,this.showOverlay(Uk(this.beans.userCompFactory,ke(this.gos,{})),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.eWrapper&&(this.state=0,this.eWrapper.hideOverlay(),this.updateExclusive())}showOverlay(e,t,n){var i;const s=(e==null?void 0:e.newAgStackInstance())??null;(i=this.eWrapper)==null||i.showOverlay(s,t,this.isExclusive(),n),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"})}refreshWrapperPadding(){const e=this.eWrapper;if(!e)return;let t=0;if(this.state===2){const n=this.beans.ctrlsSvc.get("gridHeaderCtrl");t=(n==null?void 0:n.headerHeight)||0}else this.wrapperPadding!==0&&(t=0);this.wrapperPadding!==t&&(this.wrapperPadding=t,e.updateOverlayWrapperPaddingTop(t))}},XG={moduleName:"Overlay",version:Je,userComponents:{agLoadingOverlay:EV,agNoRowsOverlay:RV},apiFunctions:{showLoadingOverlay:jG,showNoRowsOverlay:qG,hideOverlay:$G},beans:[QG]},ZG=class extends he{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=tO(),cp(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;cp(this.gos,`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),n=e/t;return this.maxScrollY*n}},JG=400,eH=class extends he{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach(r=>r.onCellSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(r=>r.updateRangeBordersIfRangeCount())},n=()=>{this.eventSvc.addEventListener("cellSelectionChanged",e),this.eventSvc.addEventListener("columnMoved",t),this.eventSvc.addEventListener("columnPinned",t),this.eventSvc.addEventListener("columnVisible",t)},s=()=>{this.eventSvc.removeEventListener("cellSelectionChanged",e),this.eventSvc.removeEventListener("columnMoved",t),this.eventSvc.removeEventListener("columnPinned",t),this.eventSvc.removeEventListener("columnVisible",t)};this.addDestroyFunc(()=>s()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{ad(this.gos)?n():s()}),ad(this.gos)&&n()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",n=>this.onSuppressCellFocusChanged(n.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue:n,previousValue:s})=>{(!s&&n||s&&!n)&&this.redrawRows()});const{stickyRowSvc:e,gos:t}=this.beans;if(e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const n=this.gridBodyCtrl;n.setStickyTopHeight(0),n.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=Wn(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new tH(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){var e;return((e=this.stickyRowFeature)==null?void 0:e.stickyTopRowCtrls)??[]}getStickyBottomRowCtrls(){var e;return((e=this.stickyRowFeature)==null?void 0:e.stickyBottomRowCtrls)??[]}updateAllRowCtrls(){var s;const e=Object.values(this.rowCtrlsByRowIndex),t=Object.values(this.zombieRowCtrls),n=((s=this.cachedRowCtrls)==null?void 0:s.getEntries())??[];t.length>0||n.length>0?this.allRowCtrls=[...e,...t,...n]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onSuppressCellFocusChanged(e)),this.getFullWidthRowCtrls().forEach(t=>t.onSuppressCellFocusChanged(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{const{cellFlashSvc:t}=this.beans;t&&this.getAllCellCtrls().forEach(n=>t.onFlashCells(n,e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.colModel.getCols().forEach(t=>{const n=h=>{this.getAllCellCtrls().forEach(d=>{d.column===t&&h(d)})},s=()=>{n(h=>h.onLeftChanged())},i=()=>{n(h=>h.onWidthChanged())},r=()=>{n(h=>h.onFirstRightPinnedChanged())},a=()=>{n(h=>h.onLastLeftPinnedChanged())},u=()=>{n(h=>h.onColDefChanged())};t.__addEventListener("leftChanged",s),t.__addEventListener("widthChanged",i),t.__addEventListener("firstRightPinnedChanged",r),t.__addEventListener("lastLeftPinnedChanged",a),t.__addEventListener("colDefChanged",u),this.destroyFuncsForColumnListeners.push(()=>{t.__removeEventListener("leftChanged",s),t.__removeEventListener("widthChanged",i),t.__removeEventListener("firstRightPinnedChanged",r),t.__removeEventListener("lastLeftPinnedChanged",a),t.__removeEventListener("colDefChanged",u)})})}onDomLayoutChanged(){const e=Wn(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),n=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){const t=[];return this.getAllRowCtrls().forEach(n=>{var i;const s=(i=n.getCellCtrl(e,!0))==null?void 0:i.eGui;s&&t.push(s)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}refreshFloatingRows(e,t){const{pinnedRowModel:n,beans:s,printLayout:i}=this,r=Object.fromEntries(e.map(u=>[u.rowNode.id,u]));n==null||n.forEachPinnedRow(t,(u,h)=>{const d=e[h];d&&n.getPinnedRowById(d.rowNode.id,t)===void 0&&(d.destroyFirstPass(),d.destroySecondPass()),u.id in r?(e[h]=r[u.id],delete r[u.id]):e[h]=new Ky(u,s,!1,!1,i)});const a=(t==="top"?n==null?void 0:n.getPinnedTopRowCount():n==null?void 0:n.getPinnedBottomRowCount())??0;e.length=a}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,t=!1){var n,s;if(e.sticky)(n=this.stickyRowFeature)==null||n.refreshStickyNode(e);else if((s=this.cachedRowCtrls)!=null&&s.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const i=r=>{const a=r[e.rowIndex];a&&a.rowNode===e&&(a.destroyFirstPass(),a.destroySecondPass(),r[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":i(this.topRowCtrls);break;case"bottom":i(this.bottomRowCtrls);break;default:i(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e==null||e.forEach(n=>this.redrawRow(n,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const t=e!=null&&e.suppressKeepFocus?null:this.focusSvc.getFocusCellToUseAfterRefresh();if(t==null)return null;const n=un(this.beans),s=dp(this.gos,n,vp),i=dp(this.gos,n,ud);return s||i?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const n=!e.domLayoutChanged&&!!e.recycleRows,s=e.animate&&Fu(this.gos),i=n?this.getRowsToRecycle():null;n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:r}=this;if(r){r.checkStickyRows();const a=r.extraTopHeight+r.extraBottomHeight;a&&this.updateContainerHeights(a)}this.recycleRows(i,s),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){var s;const t=e.newData||e.newPage,n=this.gos.get("suppressScrollOnNewData");t&&!n&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),(s=this.stickyRowFeature)==null||s.resetOffsets())}updateContainerHeights(e=0){const{rowContainerHeight:t}=this;if(this.printLayout){t.setModelHeight(null);return}let n=this.pageBounds.getCurrentPageHeight();n===0&&(n=1),t.setModelHeight(n+e)}getLockOnRefresh(){var e,t;if(this.refreshInProgress)throw new Error(mr(252));this.refreshInProgress=!0,(t=(e=this.beans.frameworkOverrides).getLockOnRefresh)==null||t.call(e)}releaseLockOnRefresh(){var e,t;this.refreshInProgress=!1,(t=(e=this.beans.frameworkOverrides).releaseLockOnRefresh)==null||t.call(e)}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&this.focusSvc.restoreFocusedCell(e,()=>{this.onCellFocusChanged(ke(this.gos,{rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))})}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),n=t.length;for(let s=0;s<n;s++){const i=t[s].getAllCellCtrls(),r=i.length;for(let a=0;a<r;a++)e.push(i[a])}return e}getAllRowCtrls(){const{spannedRowRenderer:e}=this.beans,t=this.getStickyTopRowCtrls(),n=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...t,...n,...(e==null?void 0:e.getCtrls("top"))??[],...(e==null?void 0:e.getCtrls("bottom"))??[],...(e==null?void 0:e.getCtrls("center"))??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,n){const s=this.rowCtrlsByRowIndex[t];s&&s.addEventListener(e,n)}refreshCells(e={}){const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(const n of this.getCellCtrls(e.rowNodes,e.columns))n.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(const n of this.getRowCtrls(e)){if(!n.isFullWidth())continue;n.refreshFullWidth()||this.redrawRow(n.rowNode,!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getRowCtrls(e){const t=AT(e),n=this.getAllRowCtrls();return!e||!t?n:n.filter(s=>{const i=s.rowNode;return xT(i,t)})}getCellCtrls(e,t){let n;Le(t)&&(n={},t.forEach(i=>{const r=this.colModel.getCol(i);Le(r)&&(n[r.getId()]=!0)}));const s=[];return this.getRowCtrls(e).forEach(i=>{i.getAllCellCtrls().forEach(r=>{const a=r.column.getId();n&&!n[a]||s.push(r)})}),s}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){var n;const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),(n=this.stickyRowFeature)==null||n.destroyStickyCtrls()}getRowsToRecycle(){const e=[];for(const n of Object.keys(this.rowCtrlsByRowIndex))this.rowCtrlsByRowIndex[n].rowNode.id==null&&e.push(n);this.removeRowCtrls(e);const t={};for(const n of Object.values(this.rowCtrlsByRowIndex)){const s=n.rowNode;t[s.id]=n}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(n=>{const s=this.rowCtrlsByRowIndex[n];s&&(s.destroyFirstPass(t),s.destroySecondPass()),delete this.rowCtrlsByRowIndex[n]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){var h;const{afterScroll:t}=e;let n;const s=this.stickyRowFeature;s&&(n=this.getCellToRestoreFocusToAfterRefresh()||void 0);const i=this.firstRenderedRow,r=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let a=!1;if(s){a=s.checkStickyRows();const d=s.extraTopHeight+s.extraBottomHeight;d&&this.updateContainerHeights(d)}const u=this.firstRenderedRow!==i||this.lastRenderedRow!==r;if(!(t&&!a&&!u)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!a),n!=null)){const d=this.getCellToRestoreFocusToAfterRefresh();n!=null&&d==null&&((h=this.beans.animationFrameSvc)==null||h.flushAllFrames(),this.restoreFocusedCell(n))}}removeRowCompsNotToDraw(e,t){const n={};e.forEach(r=>n[r]=!0);const i=Object.keys(this.rowCtrlsByRowIndex).filter(r=>!n[r]);this.removeRowCtrls(i,t)}calculateIndexesToDraw(e){const t=[];for(let i=this.firstRenderedRow;i<=this.lastRenderedRow;i++)t.push(i);const n=i=>{const r=i.rowNode.rowIndex;r!=null&&(r<this.firstRenderedRow||r>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(i)&&t.push(r)};for(const i of Object.values(this.rowCtrlsByRowIndex))n(i);if(e)for(const i of Object.values(e))n(i);t.sort((i,r)=>i-r);const s=[];for(let i=0;i<t.length;i++){const r=t[i],a=this.rowModel.getRow(r);a&&!a.sticky&&s.push(r)}return s}recycleRows(e,t=!1,n=!1){const s=this.calculateIndexesToDraw(e);if((this.printLayout||n)&&(t=!1),this.removeRowCompsNotToDraw(s,!t),s.forEach(i=>{this.createOrUpdateRowCtrl(i,e,t,n)}),e){const{animationFrameSvc:i}=this.beans;i&&n&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?i.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const{visibleCols:e}=this.beans,t=e.isPinningLeft(),n=e.isPinningRight();(this.pinningLeft!==t||n!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=n,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach(t=>{const n=t.rowNode.rowIndex;e.push(n.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=AT(e);return this.getAllRowCtrls().filter(n=>{if(!n.isFullWidth())return!1;const s=n.rowNode;return!(t!=null&&!xT(s,t))})}createOrUpdateRowCtrl(e,t,n,s){let i,r=this.rowCtrlsByRowIndex[e];if(r||(i=this.rowModel.getRow(e),Le(i)&&Le(t)&&t[i.id]&&i.alreadyRendered&&(r=t[i.id],t[i.id]=null)),!r)if(i||(i=this.rowModel.getRow(e)),Le(i))r=this.createRowCon(i,n,s);else return;return i&&(i.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=r,r}destroyRowCtrls(e,t){const n=[];if(e){for(const s of Object.values(e))if(s){if(this.cachedRowCtrls&&s.isCacheable()){this.cachedRowCtrls.addRow(s);continue}if(s.destroyFirstPass(!t),t){const i=s.instanceId;this.zombieRowCtrls[i]=s,n.push(()=>{s.destroySecondPass(),delete this.zombieRowCtrls[i]})}else s.destroySecondPass()}}t&&(n.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),window.setTimeout(()=>n.forEach(s=>s()),JG))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=wD(this.beans);return e*t}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:e,pageBounds:t,rowModel:n}=this;e.updateOffset();let s,i;if(!n.isRowsToRender())s=0,i=-1;else if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),s=t.getFirstRow(),i=t.getLastRow();else{const g=this.getRowBufferInPixels(),m=this.ctrlsSvc.getScrollFeature(),v=this.gos.get("suppressRowVirtualisation");let w=!1,S,T;do{const z=t.getPixelOffset(),{pageFirstPixel:U,pageLastPixel:K}=t.getCurrentPagePixelRange(),k=e.divStretchOffset,D=m.getVScrollPosition(),x=D.top,L=D.bottom;v?(S=U+k,T=K+k):(S=Math.max(x+z-g,U)+k,T=Math.min(L+z+g,K)+k),this.firstVisibleVPixel=Math.max(x+z,U)+k,this.lastVisibleVPixel=Math.min(L+z,K)+k,w=this.ensureAllRowsInRangeHaveHeightsCalculated(S,T)}while(w);let A=n.getRowIndexAtPixel(S),O=n.getRowIndexAtPixel(T);const V=t.getFirstRow(),H=t.getLastRow();A<V&&(A=V),O>H&&(O=H),s=A,i=O}const r=Wn(this.gos,"normal"),a=this.gos.get("suppressMaxRenderedRowRestriction"),u=Math.max(this.getRowBuffer(),500);r&&!a&&i-s>u&&(i=s+u);const h=s!==this.firstRenderedRow,d=i!==this.lastRenderedRow;(h||d)&&(this.firstRenderedRow=s,this.lastRenderedRow=i,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:s,lastRow:i}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,ii(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){var u,h;const n=(u=this.pinnedRowModel)==null?void 0:u.ensureRowHeightsValid(),s=(h=this.stickyRowFeature)==null?void 0:h.ensureRowHeightsValid(),{pageBounds:i,rowModel:r}=this,a=r.ensureRowHeightsValid(e,t,i.getFirstRow(),i.getLastRow());return(a||s)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),s||a||n?(this.updateContainerHeights(),!0):!1}doNotUnVirtualiseRow(e){const s=e.rowNode,i=this.focusSvc.isRowNodeFocused(s),r=e.editing,a=s.detail;return i||r||a?!!this.isRowPresent(s):!1}isRowPresent(e){var t;return this.rowModel.isRowPresent(e)?((t=this.beans.pagination)==null?void 0:t.isRowPresent(e))??!0:!1}createRowCon(e,t,n){var u;const s=((u=this.cachedRowCtrls)==null?void 0:u.getRow(e))??null;if(s)return s;const i=this.gos.get("suppressAnimationFrame"),r=n&&!i&&!this.printLayout&&!!this.beans.animationFrameSvc;return new Ky(e,this.beans,t,r,this.printLayout)}getRenderedNodes(){const e=Object.values(this.rowCtrlsByRowIndex).map(s=>s.rowNode),t=this.getStickyTopRowCtrls().map(s=>s.rowNode),n=this.getStickyBottomRowCtrls().map(s=>s.rowNode);return[...t,...e,...n]}getRowByPosition(e){let t;const{rowIndex:n}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[n];break;case"bottom":t=this.bottomRowCtrls[n];break;default:t=this.rowCtrlsByRowIndex[n],t||(t=this.getStickyTopRowCtrls().find(s=>s.rowNode.rowIndex===n)||null,t||(t=this.getStickyBottomRowCtrls().find(s=>s.rowNode.rowIndex===n)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const s=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!s}},tH=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.rowNode!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,n=this.entriesMap[t];delete this.entriesMap[t],wr(this.entriesList,n)}removeFromCache(e){const t=e.rowNode.id;delete this.entriesMap[t],wr(this.entriesList,e)}getEntries(){return this.entriesList}};function AT(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach(n=>{const s=n.id;switch(n.rowPinned){case"top":t.top[s]=n;break;case"bottom":t.bottom[s]=n;break;default:t.normal[s]=n;break}}),t}function xT(e,t){const n=e.id;switch(e.rowPinned){case"top":return t.top[n]!=null;case"bottom":return t.bottom[n]!=null;default:return t.normal[n]!=null}}var nH=class extends he{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){const{gos:e}=this;this.isAccentedSort=e.get("accentedSort"),this.primaryColumnsSortGroups=Di(e),this.addManagedPropertyListener("accentedSort",t=>this.isAccentedSort=t.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=Di(e))}doFullSort(e,t){const n=e.map((s,i)=>({currentPos:i,rowNode:s}));return n.sort(this.compareRowNodes.bind(this,t)),n.map(s=>s.rowNode)}compareRowNodes(e,t,n){const s=t.rowNode,i=n.rowNode;for(let r=0,a=e.length;r<a;r++){const u=e[r],h=u.sort==="desc",d=this.getValue(s,u.column),g=this.getValue(i,u.column);let m;const v=this.getComparator(u,s);if(v?m=v(d,g,s,i,h):m=cO(d,g,this.isAccentedSort),!isNaN(m)&&m!==0)return u.sort==="asc"?m:m*-1}return t.currentPos-n.currentPos}getComparator(e,t){const n=e.column,s=n.getColDef().comparator;if(s!=null)return s;if(!n.getColDef().showRowGroup)return;const i=!t.group&&n.getColDef().field;if(!i)return;const r=this.beans.colModel.getColDefCol(i);if(r)return r.getColDef().comparator}getValue(e,t){var u,h;const{valueSvc:n,colModel:s,showRowGroupCols:i,gos:r}=this.beans;if(!this.primaryColumnsSortGroups)return n.getValue(t,e,!1);if(e.rowGroupColumn===t){if(Uw(r,s.isPivotActive())){const m=(u=e.allLeafChildren)==null?void 0:u[0];return m?n.getValue(t,m,!1):void 0}const g=i==null?void 0:i.getShowRowGroupCol(t.getId());return g?(h=e.groupData)==null?void 0:h[g.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return n.getValue(t,e,!1)}};function sH(e){var t;(t=e.sortSvc)==null||t.onSortChanged("api")}function Fh(e,t){return`<span data-ref="eSort${e}" class="ag-sort-indicator-icon ag-sort-${t} ag-hidden" aria-hidden="true"></span>`}var iH=`<span class="ag-sort-indicator-container">
        ${Fh("Order","order")}
        ${Fh("Asc","ascending-icon")}
        ${Fh("Desc","descending-icon")}
        ${Fh("Mixed","mixed-icon")}
        ${Fh("None","none-icon")}
    </span>`,lb=class extends vt{constructor(e){super(),this.eSortOrder=Me,this.eSortAsc=Me,this.eSortDesc=Me,this.eSortMixed=Me,this.eSortNone=Me,e||this.setTemplate(iH)}attachCustomElements(e,t,n,s,i){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=n,this.eSortMixed=s,this.eSortNone=i}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const n=this.updateIcons.bind(this),s=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",n),this.addManagedEventListeners({newColumnsLoaded:n,sortChanged:s,columnRowGroupChanged:s}),this.onSortChanged()}addInIcon(e,t,n){if(t==null)return;const s=Ge(e,this.beans,n);s&&t.appendChild(s)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc:e,eSortDesc:t,eSortNone:n,column:s,gos:i,beans:r}=this,a=r.sortSvc.getDisplaySortForColumn(s);if(e&&ot(e,a==="asc",{skipAriaHidden:!0}),t&&ot(t,a==="desc",{skipAriaHidden:!0}),n){const u=!s.getColDef().unSortIcon&&!i.get("unSortIcon"),h=a==null;ot(n,!u&&h,{skipAriaHidden:!0})}}setupMultiSortIndicator(){const{eSortMixed:e,column:t,gos:n}=this;this.addInIcon("sortUnSort",e,t);const s=t.getColDef().showRowGroup;Di(n)&&s&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){const{eSortMixed:e,beans:t,column:n}=this;if(e){const s=t.sortSvc.getDisplaySortForColumn(n)==="mixed";ot(e,s,{skipAriaHidden:!0})}}updateSortOrder(){const{eSortOrder:e,column:t,beans:{sortSvc:n}}=this;if(!e)return;const s=n.getColumnsWithSortingOrdered(),i=n.getDisplaySortIndexForColumn(t)??-1,r=s.some(u=>n.getDisplaySortIndexForColumn(u)??!1),a=i>=0&&r;ot(e,a,{skipAriaHidden:!0}),i>=0?e.textContent=(i+1).toString():Hi(e)}},rH={selector:"AG-SORT-INDICATOR",component:lb},cd=["asc","desc",null],oH=class extends he{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,n){const s=this.getNextSortDirection(e);this.setSortForColumn(e,s,t,n)}progressSortFromEvent(e,t){const s=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,s,"uiColumnSorted")}setSortForColumn(e,t,n,s){var g;t!=="asc"&&t!=="desc"&&(t=null);const{gos:i,showRowGroupCols:r}=this.beans,a=Di(i);let u=[e];if(a&&e.getColDef().showRowGroup){const m=(g=r==null?void 0:r.getSourceColumnsForGroupColumn)==null?void 0:g.call(r,e),v=m==null?void 0:m.filter(w=>w.isSortable());v&&(u=[e,...v])}u.forEach(m=>this.setColSort(m,t,s));const h=(n||i.get("alwaysMultiSort"))&&!i.get("suppressMultiSort"),d=[];if(!h){const m=this.clearSortBarTheseColumns(u,s);d.push(...m)}this.updateSortIndex(e),d.push(...u),this.dispatchSortChangedEvents(s,d)}updateSortIndex(e){const{gos:t,colModel:n,showRowGroupCols:s}=this.beans,i=Di(t),r=s==null?void 0:s.getShowRowGroupCol(e.getId()),a=i&&r||e,u=this.getColumnsWithSortingOrdered();n.getAllCols().forEach(g=>this.setColSortIndex(g,null));const h=u.filter(g=>i&&g.getColDef().showRowGroup?!1:g!==a);(a.getSort()?[...h,a]:h).forEach((g,m)=>this.setColSortIndex(g,m))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){const t=this.beans.colModel.getAllCols().filter(n=>!!n.getSort());return t&&t.length>0}dispatchSortChangedEvents(e,t){const n={type:"sortChanged",source:e};t&&(n.columns=t),this.eventSvc.dispatchEvent(n)}clearSortBarTheseColumns(e,t){const n=[];return this.beans.colModel.getAllCols().forEach(s=>{e.includes(s)||(s.getSort()&&n.push(s),this.setColSort(s,void 0,t))}),n}getNextSortDirection(e){const t=e.getColDef().sortingOrder??this.gos.get("sortingOrder")??cd,n=t.indexOf(e.getSort()),s=n<0,i=n==t.length-1;return s||i?t[0]:t[n+1]}getIndexedSortMap(){const{gos:e,colModel:t,showRowGroupCols:n,rowGroupColsSvc:s}=this.beans;let i=t.getAllCols().filter(d=>!!d.getSort());if(t.isPivotMode()){const d=Di(e);i=i.filter(g=>{const m=!!g.getAggFunc(),v=!g.isPrimary(),w=d?n==null?void 0:n.getShowRowGroupCol(g.getId()):g.getColDef().showRowGroup;return m||v||w})}const r=(s==null?void 0:s.columns.filter(d=>!!d.getSort()))??[],a={};i.forEach((d,g)=>a[d.getId()]=g),i.sort((d,g)=>{const m=d.getSortIndex(),v=g.getSortIndex();if(m!=null&&v!=null)return m-v;if(m==null&&v==null){const w=a[d.getId()],S=a[g.getId()];return w>S?1:-1}else return v==null?-1:1});const u=Di(e)&&!!r.length;u&&(i=[...new Set(i.map(d=>(n==null?void 0:n.getShowRowGroupCol(d.getId()))??d))]);const h=new Map;return i.forEach((d,g)=>h.set(d,g)),u&&r.forEach(d=>{const g=n.getShowRowGroupCol(d.getId());h.set(d,h.get(g))}),h}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[n,s])=>t-s).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=Di(this.gos),n=!!e.getColDef().showRowGroup;return t&&n}getDisplaySortForColumn(e){var a;const t=(a=this.beans.showRowGroupCols)==null?void 0:a.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!(t!=null&&t.length))return e.getSort();const s=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,i=s[0].getSort();return s.every(u=>u.getSort()==i)?i:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t,n){let s=0;e.addManagedListeners(t,{movingChanged:()=>{s=new Date().getTime()}}),n&&e.addManagedElementListeners(n,{click:r=>{const a=t.isMoving(),h=new Date().getTime()-s<50;a||h||this.progressSortFromEvent(t,r)}});const i=()=>{var a;const r=t.getSort();if(e.addOrRemoveCssClass("ag-header-cell-sorted-asc",r==="asc"),e.addOrRemoveCssClass("ag-header-cell-sorted-desc",r==="desc"),e.addOrRemoveCssClass("ag-header-cell-sorted-none",!r),t.getColDef().showRowGroup){const u=(a=this.beans.showRowGroupCols)==null?void 0:a.getSourceColumnsForGroupColumn(t),d=!(u==null?void 0:u.every(g=>t.getSort()==g.getSort()));e.addOrRemoveCssClass("ag-header-cell-sorted-mixed",d)}};e.addManagedEventListeners({sortChanged:i,columnRowGroupChanged:i})}initCol(e){const{sort:t,initialSort:n,sortIndex:s,initialSortIndex:i}=e.colDef;t!==void 0?(t==="asc"||t==="desc")&&(e.sort=t):(n==="asc"||n==="desc")&&(e.sort=n),s!==void 0?s!==null&&(e.sortIndex=s):i!==null&&(e.sortIndex=i)}updateColSort(e,t,n){t!==void 0&&(t==="desc"||t==="asc"?this.setColSort(e,t,n):this.setColSort(e,void 0,n))}setColSort(e,t,n){e.sort!==t&&(e.sort=t,e.dispatchColEvent("sortChanged",n)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new lb(e)}getSortIndicatorSelector(){return rH}},$_={moduleName:"Sort",version:Je,beans:[oH,nH],apiFunctions:{onSortChanged:sH},userComponents:{agSortIndicator:lb},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"}},aH=class extends he{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){const{colModel:t,rowModel:n}=this.beans;t.setColumnDefs(e??[],"gridInitializing"),n.start()}gridReady(){const{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),cp(t,`initialised successfully, enterprise = ${t.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.beans.colModel.setColumnDefs(t,Hg(e.source))}}},K_=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){const{rowNode:n,children:s}=e;if(s)for(let i=0;i<s.length;++i)this.depthFirstSearchChangedPath(s[i],t);t(n)}depthFirstSearchEverything(e,t,n){const s=e.childrenAfterGroup;if(s)for(let i=0,r=s.length;i<r;++i){const a=s[i];a.childrenAfterGroup?this.depthFirstSearchEverything(a,t,n):n&&t(a)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,n=!1){this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,n=0;for(;!this.mapToItems[t.id];){const s={rowNode:t,children:null};this.mapToItems[t.id]=s,n++,t=t.parent}return n}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let n=e;for(;n;)this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={}),t.forEach(s=>this.nodeIdsToColumns[n.id][s.getId()]=!0),n=n.parent}linkPathItems(e,t){let n=e;for(let s=0;s<t;s++){const i=this.mapToItems[n.id],r=this.mapToItems[n.parent.id];r.children||(r.children=[]),r.children.push(i),n=n.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const n=this.createPathItems(e);this.linkPathItems(e,n),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const n=this.nodeIdsToColumns[e.id];return t.filter(i=>n[i.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const n=this.nodeIdsToColumns[e.id];return t.filter(i=>!n[i.getId()])}},lH="paste",uH=class extends he{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos:e,rowModel:t}=this.beans;gc(e)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){const{gos:t,rowRenderer:n}=this.beans;if(e.source===lH||t.get("suppressChangeDetection"))return;const s=e.node,i=[s],r=this.clientSideRowModel,a=r==null?void 0:r.rootNode;if(a&&!s.isRowPinned()){const u=t.get("aggregateOnlyChangedColumns"),h=new K_(u,a);h.addParentNode(s.parent,[e.column]),r.doAggregate(h),h.forEachChangedNodeDepthFirst(d=>{i.push(d)})}n.refreshCells({rowNodes:i})}},cH=class extends he{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);Bt(15,{expression:e})}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(n){return Bt(16,{expression:e,params:t,e:n}),null}}createExpressionFunction(e){const t=this.cache;if(t[e])return t[e];const n=this.createFunctionBody(e),s=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",n);return t[e]=s,s}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},hH={moduleName:"Expression",version:Je,beans:[cH]},dH={moduleName:"ChangeDetection",version:Je,beans:[uH]},fH=class extends he{constructor(){super(...arguments),this.beanName="valueSvc",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc}postConstruct(){this.initialised||this.init()}init(){this.executeValueGetter=this.valueCache?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=Md(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=t=>this.callColumnCellValueChangedHandler(t);this.eventSvc.addEventListener("cellValueChanged",e,!0),this.addDestroyFunc(()=>this.eventSvc.removeEventListener("cellValueChanged",e,!0)),this.addManagedPropertyListener("treeData",t=>this.isTreeData=t.currentValue)}getValueForDisplay(e,t){const n=t.leafGroup&&this.colModel.isPivotMode(),s=t.group&&t.expanded&&!t.footer&&!n,i=this.gos.get("groupSuppressBlankHeader");if(!s||i)return this.getValue(e,t);let r=!1;const a=this.gos.get("groupTotalRow");typeof a!="function"?r=!!a:r=!!this.gos.getCallback("groupTotalRow")({node:this});const u=s&&r;return this.getValue(e,t,u)}getValue(e,t,n=!1){if(this.initialised||this.init(),!t)return;const s=e.getColDef(),i=s.field,r=e.getColId(),a=t.data;let u;const h=t.groupData&&t.groupData[r]!==void 0,d=!n&&t.aggData&&t.aggData[r]!==void 0,g=this.isSsrm&&n&&!!e.getColDef().aggFunc,m=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(this.isTreeData&&d?u=t.aggData[r]:this.isTreeData&&s.valueGetter?u=this.executeValueGetter(s.valueGetter,a,e,t):this.isTreeData&&i&&a?u=Gg(a,i,e.isFieldContainsDots()):h?u=t.groupData[r]:d?u=t.aggData[r]:s.valueGetter?u=this.executeValueGetter(s.valueGetter,a,e,t):m?u=Gg(a,t.field,e.isFieldContainsDots()):i&&a&&!g&&(u=Gg(a,i,e.isFieldContainsDots())),this.cellExpressions&&typeof u=="string"&&u.indexOf("=")===0){const v=u.substring(1);u=this.executeValueGetter(v,a,e,t)}if(u==null){const v=this.getOpenedGroup(t,e);if(v!=null)return v}return u}parseValue(e,t,n,s){var a;const i=e.getColDef(),r=i.valueParser;if(Le(r)){const u=ke(this.gos,{node:t,data:t==null?void 0:t.data,oldValue:s,newValue:n,colDef:i,column:e});return typeof r=="function"?r(u):(a=this.expressionSvc)==null?void 0:a.evaluate(r,u)}return n}getDeleteValue(e,t){return Le(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t))??null:null}formatValue(e,t,n,s,i=!0){let r=null,a;const u=e.getColDef();if(s?a=s:i&&(a=u.valueFormatter),a){const h=ke(this.gos,{value:n,node:t,data:t?t.data:null,colDef:u,column:e});typeof a=="function"?r=a(h):r=this.expressionSvc?this.expressionSvc.evaluate(a,h):null}else if(u.refData)return u.refData[n]||"";return r==null&&Array.isArray(n)&&(r=n.join(", ")),r}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;const s=t.getColDef().showRowGroup;let i=e.parent;for(;i!=null;){if(i.rowGroupColumn&&(s===!0||s===i.rowGroupColumn.getColId()))return i.key;i=i.parent}}setValue(e,t,n,s){var g,m;const i=this.colModel.getColDefCol(t);if(!e||!i)return!1;$t(e.data)&&(e.data={});const{field:r,valueSetter:a}=i.getColDef();if($t(r)&&$t(a))return be(17),!1;if(this.dataTypeSvc&&!this.dataTypeSvc.checkType(i,n))return be(135),!1;const u=ke(this.gos,{node:e,data:e.data,oldValue:this.getValue(i,e),newValue:n,colDef:i.getColDef(),column:i});u.newValue=n;let h;if(Le(a)?typeof a=="function"?h=a(u):h=(g=this.expressionSvc)==null?void 0:g.evaluate(a,u):h=this.setValueUsingField(e.data,r,n,i.isFieldContainsDots()),h===void 0&&(h=!0),!h)return!1;e.resetQuickFilterAggregateText(),(m=this.valueCache)==null||m.onDataChanged();const d=this.getValue(i,e);return this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:u.column,colDef:u.colDef,data:e.data,node:e,oldValue:u.oldValue,newValue:d,value:d,source:s}),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,n,s){if(!t)return!1;let i=!1;if(!s)i=e[t]===n,i||(e[t]=n);else{const r=t.split(".");let a=e;for(;r.length>0&&a;){const u=r.shift();r.length===0?(i=a[u]===n,i||(a[u]=n)):a=a[u]}}return!i}executeValueGetterWithValueCache(e,t,n,s){const i=n.getColId(),r=this.valueCache.getValue(s,i);if(r!==void 0)return r;const a=this.executeValueGetterWithoutValueCache(e,t,n,s);return this.valueCache.setValue(s,i,a),a}executeValueGetterWithoutValueCache(e,t,n,s){var a;const i=ke(this.gos,{data:t,node:s,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,s)});let r;return typeof e=="function"?r=e(i):r=(a=this.expressionSvc)==null?void 0:a.evaluate(e,i),r}getValueCallback(e,t){const n=this.colModel.getColDefCol(t);return n?this.getValue(n,e):null}getKeyForNode(e,t){const n=this.getValue(e,t),s=e.getColDef().keyCreator;let i=n;if(s){const r=ke(this.gos,{value:n,colDef:e.getColDef(),column:e,node:t,data:t.data});i=s(r)}return typeof i=="string"||i==null||(i=String(i),i==="[object Object]"&&be(121)),i}},gH={moduleName:"CommunityCore",version:Je,beans:[gG,$V,iB,pk,ZG,z2,lG,yG,hk,VG,NG,eH,fH,dG,aG,fG,oB,aH,J2,eB],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:KV,destroy:YV,isDestroyed:QV,getGridOption:XV,setGridOption:ZV,updateGridOptions:x_},dependsOn:[Q2,F_,x2,$_,EG,W2,RG,XG,dH,TG,kG,zG,WG,xG,sB,X2,hH]},ub=class La{static applyGlobalGridOptions(t){if(!La.gridOptions)return{...t};let n={};return ns(n,La.gridOptions,!0,!0),La.mergeStrategy==="deep"?ns(n,t,!0,!0):n={...n,...t},La.gridOptions.context&&(n.context=La.gridOptions.context),t.context&&(La.mergeStrategy==="deep"&&n.context&&ns(t.context,n.context,!0,!0),n.context=t.context),n}};ub.gridOptions=void 0;ub.mergeStrategy="shallow";var Y_=ub;function pH(e){var t;return(t=Y_.gridOptions)==null?void 0:t[e]}var mH=1,CH=class{create(e,t,n,s,i,r){const a=Y_.applyGlobalGridOptions(t),u=a.gridId??String(mH++),h=a.rowModelType??"clientSide",d=this.getRegisteredModules(i,u,h),g=this.createBeansList(h,d,u),m=this.createProvidedBeans(e,a,i);if(!g)return;const v={providedBeanInstances:m,beanClasses:g,gridId:u,beanInitComparator:UV,beanDestroyComparator:WV,derivedBeans:[HV],destroyCallback:r},w=new sN(v);return this.registerModuleFeatures(w,d),n(w),w.getBean("syncSvc").start(),s&&s(w),w.getBean("gridApi")}getRegisteredModules(e,t,n){var s;return ld(gH,void 0),(s=e==null?void 0:e.modules)==null||s.forEach(i=>ld(i,t)),Xk(t,n)}registerModuleFeatures(e,t){const n=e.getBean("registry"),s=e.getBean("apiFunctionSvc");t.forEach(i=>{n.registerModule(i);const r=i.apiFunctions;r&&Object.keys(r).forEach(u=>{s==null||s.addFunction(u,r[u])})})}createProvidedBeans(e,t,n){let s=n?n.frameworkOverrides:null;$t(s)&&(s=new T_);const i={gridOptions:t,eGridDiv:e,globalListener:n?n.globalListener:null,globalSyncListener:n?n.globalSyncListener:null,frameworkOverrides:s};return n&&n.providedBeanInstances&&Object.assign(i,n.providedBeanInstances),i}createBeansList(e,t,n){const i={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"}[e];if(!i){Ny(201,{rowModelType:e},`Unknown rowModelType ${e}.`);return}if(!jD(i,n,e)){Ny(200,{reasonOrId:`rowModelType = '${e}'`,moduleName:i,gridScoped:qw(),gridId:n,rowModelType:e},`Missing module ${i}Module for rowModelType ${e}. 
If upgrading from before v33, see ${Za}/upgrading-to-ag-grid-33/#changes-to-modules/`);return}const r=new Set;return t.forEach(a=>{var u;return(u=a.beans)==null?void 0:u.forEach(h=>r.add(h))}),Array.from(r)}},vH=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel"],yH=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged","beforeRefreshModel"],wH=[...vH,...yH],bH=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow","themeCssLayer"],SH=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","selectionColumnDef"],EH=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],Q_=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"],RH=["theme","rowSelection"],TH=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild"],X_=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"],AH=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter"],xH=[...EH,...SH,...bH,...Q_,...AH,...X_,...TH,...RH],DH=class{wrap(e,t,n,s){const i=this.createWrapper(e,s);return t==null||t.forEach(r=>{this.createMethod(i,r,!0)}),n==null||n.forEach(r=>{this.createMethod(i,r,!1)}),i}createMethod(e,t,n){e.addMethod(t,this.createMethodProxy(e,t,n))}createMethodProxy(e,t,n){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(n&&be(49,{methodName:t}),null)}}};function Z_(e){const{inputValue:t,allSuggestions:n,hideIrrelevant:s,filterByPercentageOfBestMatch:i,addSequentialWeight:r}=e;let a=n.map((d,g)=>({value:d,relevance:IH(t.toLowerCase(),d.toLocaleLowerCase(),r),idx:g}));if(a.sort((d,g)=>g.relevance-d.relevance),s&&(a=a.filter(d=>d.relevance!==0)),a.length>0&&i&&i>0){const g=a[0].relevance*i;a=a.filter(m=>g-m.relevance<0)}const u=[],h=[];for(const d of a)u.push(d.value),h.push(d.idx);return{values:u,indices:h}}function _H(e){const t=[],n=e.length;for(let s=1;s<=n;s++)for(let i=0;i<=n-s;i++){const r=i+s-1;t.push(e.slice(i,r+1))}return t}function IH(e,t,n=!1){const s=e.replace(/\s/g,""),i=t.replace(/\s/g,""),r=s.length,a=i.length,u=new Array(r+1).fill(null).map(()=>new Array(a+1).fill(0));for(let m=0;m<=r;m+=1)u[m][0]=m;for(let m=0;m<=a;m+=1)u[0][m]=m;for(let m=1;m<=r;m++)for(let v=1;v<=a;v++)s[m-1]===i[v-1]?u[m][v]=u[m-1][v-1]:u[m][v]=1+Math.min(u[m][v-1],Math.min(u[m-1][v],u[m-1][v-1]));const h=u[r][a];let g=Math.max(r,a)-h;if(n){const m=_H(s);for(let v=0;v<m.length;v++){const w=m[v];i.indexOf(w)!==-1&&(g+=1,g*=w.length)}}return g}var MH=class extends he{getFileName(e){const t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},FH=class{constructor(e){this.groupColumns=[];const{colModel:t,rowGroupColsSvc:n,colNames:s,valueSvc:i,gos:r,processCellCallback:a,processHeaderCallback:u,processGroupHeaderCallback:h,processRowGroupCallback:d}=e;this.colModel=t,this.rowGroupColsSvc=n,this.colNames=s,this.valueSvc=i,this.gos=r,this.processCellCallback=a,this.processHeaderCallback=u,this.processGroupHeaderCallback=h,this.processRowGroupCallback=d}prepare(e){this.groupColumns=e.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,n,s,i){const a=(!this.gos.get("groupHideOpenParents")||i.footer)&&this.shouldRenderGroupSummaryCell(i,e,t)?this.createValueForGroupNode(e,i):this.valueSvc.getValue(e,i);return this.processCell({accumulatedRowIndex:n,rowNode:i,column:e,value:a,processCellCallback:this.processCellCallback,type:s})}shouldRenderGroupSummaryCell(e,t,n){var a,u;if(!(e.group&&!this.gos.get("treeData")))return!1;if(this.groupColumns.indexOf(t)!==-1){if(((a=e.groupData)==null?void 0:a[t.getId()])!==void 0||Md(this.gos)&&e.group)return!0;if(e.footer&&e.level===-1){const h=t.getColDef();return h==null||h.showRowGroup===!0||h.showRowGroup===((u=this.rowGroupColsSvc)==null?void 0:u.columns[0].getId())}}const r=Uw(this.gos,this.colModel.isPivotMode());return n===0&&r}getHeaderName(e,t){return e?e(ke(this.gos,{column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(ke(this.gos,{column:e,node:t}));const n=this.gos.get("treeData"),s=u=>{var d;if(n)return u.key;const h=(d=u.groupData)==null?void 0:d[e.getId()];return!h||!u.rowGroupColumn||u.rowGroupColumn.getColDef().useValueFormatterForExport===!1?h:this.valueSvc.formatValue(u.rowGroupColumn,u,h)??h},i=t.footer,r=[s(t)];if(!SO(this.gos))for(;t.parent;)t=t.parent,r.push(s(t));const a=r.reverse().join(" -> ");return i?`Total ${a}`:a}processCell(e){const{accumulatedRowIndex:t,rowNode:n,column:s,value:i,processCellCallback:r,type:a}=e;return r?{value:r(ke(this.gos,{accumulatedRowIndex:t,column:s,node:n,value:i,type:a,parseValue:u=>this.valueSvc.parseValue(s,n,u,this.valueSvc.getValue(s,n)),formatValue:u=>this.valueSvc.formatValue(s,n,u)??u}))??""}:s.getColDef().useValueFormatterForExport!==!1?{value:i??"",valueFormatted:this.valueSvc.formatValue(s,n,i)}:{value:i??""}}};function J_(e,t){const n=document.defaultView||window;if(!n){be(52);return}const s=document.createElement("a"),i=n.URL.createObjectURL(t);s.setAttribute("href",i),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:n})),document.body.removeChild(s),n.setTimeout(()=>{n.URL.revokeObjectURL(i)},0)}var PH={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0},us="clientSide",Jn="serverSide",fu="infinite",LH={onGroupExpandedOrCollapsed:[us],refreshClientSideRowModel:[us],isRowDataEmpty:[us],forEachLeafNode:[us],forEachNodeAfterFilter:[us],forEachNodeAfterFilterAndSort:[us],resetRowHeights:[us],applyTransaction:[us],applyTransactionAsync:[us],flushAsyncTransactions:[us],getBestCostNodeSelection:[us],getServerSideSelectionState:[Jn],setServerSideSelectionState:[Jn],applyServerSideTransaction:[Jn],applyServerSideTransactionAsync:[Jn],applyServerSideRowData:[Jn],retryServerSideLoads:[Jn],flushServerSideAsyncTransactions:[Jn],refreshServerSide:[Jn],getServerSideGroupLevelState:[Jn],refreshInfiniteCache:[fu],purgeInfiniteCache:[fu],getInfiniteRowCount:[fu],isLastRowIndexKnown:[fu,Jn],expandAll:[us,Jn],collapseAll:[us,Jn],onRowHeightChanged:[us,Jn],setRowCount:[fu,Jn],getCacheBlockState:[fu,Jn]},OH={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};function kH(e,t,n){const s=OH[e];if(s){const{version:r,new:a,old:u,message:h}=s,d=u??e;return(...g)=>{const m=a?`Please use ${a} instead. `:"";return jh(`Since ${r} api.${d} is deprecated. ${m}${h??""}`),t.apply(t,g)}}const i=LH[e];return i?(...r)=>{const a=n.rowModel.getType();if(!i.includes(a)){Mu(`api.${e} can only be called when gridOptions.rowModelType is ${i.join(" or ")}`);return}return t.apply(t,r)}:t}var eI={AdvancedFilter:1,AllEnterprise:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1},dy=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"],NH={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:dy,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...dy,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...dy,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},VH={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"};function BH(e,t){const n=[];return(Array.isArray(e)?e:[e]).forEach(s=>{const i=NH[s];i?i.forEach(r=>{const a=VH[r];(!a||a===t)&&n.push(r)}):n.push(s)}),n}var Pu={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar"},GH=e=>{const t=e.map(s=>`import { ${$h(s)} } from '${eI[s]?"ag-grid-enterprise":"ag-grid-community"}';`);return e.some(s=>s==="IntegratedCharts"||s==="Sparklines")&&t.push("import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';"),`import { ModuleRegistry } from 'ag-grid-community'; 
${t.join(` 
`)} 

ModuleRegistry.registerModules([ ${e.map(s=>$h(s,!0)).join(", ")} ]); 

For more info see: ${Za}/modules/`};function $h(e,t=!1){return t&&(e==="IntegratedCharts"||e==="Sparklines")?`${e}Module.with(AgChartsEnterpriseModule)`:`${e}Module`}function HH(e,t){const n=t.filter(r=>r==="IntegratedCharts"||r==="Sparklines");let s="";return!(globalThis==null?void 0:globalThis.agCharts)&&n.length>0?s=`Unable to use ${e} as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.
`:t.some(r=>eI[r])&&(s=s+`Unable to use ${e} as that requires the ag-grid-enterprise script to be included.
`),s}var DT=({reasonOrId:e,moduleName:t,gridScoped:n,gridId:s,rowModelType:i,additionalText:r,isUmd:a})=>{const u=BH(t,i),h=typeof e=="string"?e:jH[e];if(a)return HH(h,u);const d=u.filter(v=>v==="IntegratedCharts"||v==="Sparklines"),g=d.length>0?`${d.map(v=>$h(v)).join()} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.`:"";return`${`Unable to use ${h} as ${u.length>1?"one of "+u.map(v=>$h(v)).join(", "):$h(u[0])} is not registered${n?" for gridId: "+s:""}. ${g} Check if you have registered the module:
`}
${GH(u)}`+(r?` 

${r}`:"")},_T=e=>`${e} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.

import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';
import { ModuleRegistry } from 'ag-grid-community';
import { ${e} } from 'ag-grid-enterprise';
    
ModuleRegistry.registerModules([${e}.with(AgChartsEnterpriseModule)]);
    `,zH=e=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${e}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`,UH={1:()=>"`rowData` must be an array",2:({nodeId:e})=>`Duplicate node id '${e}' detected from getRowId callback, this could cause issues in your grid.`,3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:({id:e})=>`Could not find row id=${e}, data item was not found for this id`,5:({data:e})=>["Could not find data item as object was not found.",e," Consider using getRowId to help the Grid find matching row data"],6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:({key:e})=>`Unknown key for navigation ${e}`,9:({variable:e})=>`No value for ${e==null?void 0:e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e==null?void 0:e.defaultValue} will be used and updated when styles load.`,10:({eventType:e})=>`As of v33, the '${e}' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.`,11:()=>"No gridOptions provided to createGrid",12:({colKey:e})=>["column ",e," not found"],13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:({groupPrefix:e})=>`Row IDs cannot start with ${e}, this is a reserved prefix for AG Grid's row grouping feature.`,15:({expression:e})=>["value should be either a string or a function",e],16:({expression:e,params:t,e:n})=>["Processing of the expression failed","Expression = ",e,"Params = ",t,"Exception = ",n],17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`,21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:({key:e})=>`${e} is an initial property and cannot be updated.`,23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:({id:e})=>["The getRowId callback must return a string. The ID ",e," is being cast to a string."],26:({fnName:e,preDestroyLink:t})=>`Grid API function ${e}() cannot be called as the grid has been destroyed.
 Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
 To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`,27:({fnName:e,module:t})=>`API function '${e}' not registered to module '${t}'`,28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:({toIndex:e})=>["tried to insert columns in invalid location, toIndex = ",e,"remember that you should not count the moving columns when calculating the new index"],31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:({key:e})=>`the column type '${e}' is a default column type and cannot be overridden.`,35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:({t:e})=>"colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes",37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:({iconName:e})=>`provided icon '${e}' needs to be a string or a function`,39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:({e,method:t})=>`${e}
${zH(t)}`,41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:({iconName:e})=>`As of v33, icon '${e}' is deprecated. Use the icon CSS name instead.`,44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:({parentCellDataType:e})=>`The data type definition ${e} does not exist.`,46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:({cellDataType:e})=>`Missing data type definition - "${e}"`,48:({property:e})=>`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`,49:({methodName:e})=>`Framework component is missing the method ${e}()`,50:({compName:e})=>`Could not find component ${e}, did you forget to configure this component?`,51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:({colId:e})=>`setFilterModel() - no column found for colId: ${e}`,63:({colId:e})=>`setFilterModel() - unable to fully apply model, filtering disabled for colId: ${e}`,64:({colId:e})=>`setFilterModel() - unable to fully apply model, unable to create filter for colId: ${e}`,65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:({guiFromFilter:e})=>`getGui method from filter returned ${e}; it should be a DOM element.`,70:({newFilter:e})=>`Grid option quickFilterText only supports string inputs, received: ${typeof e}`,71:()=>"debounceMs is ignored when apply button is present",72:({keys:e})=>["ignoring FilterOptionDef as it doesn't contain one of ",e],73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:({filterModelType:e})=>['Unexpected type of filter "',e,'", it looks like the filter was configured with incorrect Filter Options'],77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:({param:e})=>`DateFilter ${e} is not a number`,83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:({index:e})=>`Invalid row index for ensureIndexVisible: ${e}`,89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:({methodName:e})=>`AnimationFrameService.${e} called but animation frames are off`,93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:({paginationPageSizeOption:e,pageSizeSet:t,pageSizesSet:n,pageSizeOptions:s})=>`'paginationPageSize=${e}'${t?"":" (default value)"}, but ${e} is not included in${n?"":" the default"} paginationPageSizeSelector=[${s==null?void 0:s.join(", ")}].`,95:({paginationPageSizeOption:e,paginationPageSizeSelector:t})=>`Either set '${t}' to an array that includes ${e} or to 'false' to disable the page size selector.`,96:({id:e,data:t})=>["Duplicate ID",e,"found for pinned row with data",t,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."],97:({colId:e})=>`cellEditor for column ${e} is missing getGui() method`,98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",100:({rowModelType:e})=>`selectAll only available when rowModelType='clientSide', ie not ${e}`,101:({propertyName:e,componentName:t,agGridDefaults:n,jsComps:s})=>{const i=[],r=[...Object.keys(n??[]).filter(u=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(u)),...Object.keys(s??[])],a=Z_({inputValue:t,allSuggestions:r,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return i.push(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.
`),a.length>0&&i.push(`         Did you mean: [${a.slice(0,3)}]?
`),i.push("If using a custom component check it has been registered correctly."),i},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:({value:e,param:t})=>`Numeric value ${e} passed to ${t} param will be interpreted as ${e} seconds. If this is intentional use "${e}s" to silence this warning.`,105:({e})=>["chart rendering failed",e],106:()=>`Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ${Za}/theming-migration/`,107:({key:e,value:t})=>`Invalid value for theme param ${e} - ${t}`,108:({e})=>["chart update failed",e],109:({aggFuncOrString:e})=>`unrecognised aggregation function ${e}`,110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:({component:e})=>`Could not find component with name of ${e}. Is it in Vue.components?`,116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:({chartId:e})=>`Unable to update chart. No active chart found with ID: ${e}.`,126:()=>"unable to restore chart as no chart model is provided",127:({allRange:e})=>`unable to create chart as ${e?"there are no columns in the grid":"no range is selected"}.`,128:({feature:e})=>`${e} is only available if using 'multiRow' selection mode.`,129:({feature:e,rowModel:t})=>`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`,130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:({iconName:e})=>`icon '${e}' function should return back a string or a dom object`,134:({iconName:e})=>`Did not find icon '${e}'`,135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:({type:e,currentChartType:t})=>`Unable to update chart as a '${e}' update type is not permitted on a ${t}.`,138:({chartType:e})=>`invalid chart type supplied: ${e}`,139:({customThemeName:e})=>`a custom chart theme with the name ${e} has been supplied but not added to the 'chartThemes' list`,140:({name:e})=>`no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`,141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:({panel:e})=>`'${e}' is not a valid Chart Tool Panel name`,144:({type:e})=>`Invalid charts data panel group name supplied: '${e}'`,145:({group:e})=>`As of v32, only one charts customize panel group can be expanded at a time. '${e}' will not be expanded.`,146:({comp:e})=>`Unable to instantiate component '${e}' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.`,147:({group:e})=>`Invalid charts customize panel group name supplied: '${e}'`,148:({group:e})=>`invalid chartGroupsDef config '${e}'`,149:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:({chartType:e})=>`invalid chartType '${e}' supplied in 'seriesChartTypes', converting to 'line' instead.`,152:({colId:e})=>`no 'seriesChartType' found for colId = '${e}', defaulting to 'line'.`,153:({chartDataType:e})=>`unexpected chartDataType value '${e}' supplied, instead use 'category', 'series' or 'excluded'`,154:({colId:e})=>`cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ${e}`,155:({option:e})=>`'${e}' is not a valid Chart Toolbar Option`,156:({panel:e})=>`Invalid panel in chartToolPanelsDef.panels: '${e}'`,157:({unrecognisedGroupIds:e})=>["unable to find group(s) for supplied groupIds:",e],158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:({id:e,dataType:t})=>`Unrecognized data type for excel export [${e}.dataType=${t}]`,163:({featureName:e})=>`Excel table export does not work with ${e}. The exported Excel file will not contain any Excel tables.
 Please turn off ${e} to enable Excel table exports.`,164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:({unrecognisedGroupIds:e})=>["unable to find groups for these supplied groupIds:",e],167:({unrecognisedColIds:e})=>["unable to find columns for these supplied colIds:",e],168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:({providedStrategy:e})=>`invalid cellRendererParams.refreshStrategy = ${e} supplied, defaulting to refreshStrategy = 'rows'.`,171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:({group:e})=>`invalid chartGroupsDef config '${e}'`,174:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,175:({menuTabName:e,itemsToConsider:t})=>[`Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of `,t],176:({key:e})=>`unknown menu item type ${e}`,177:()=>"valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.",178:({colId:e})=>`column ${e} is not visible`,179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:({parentGroupData:e,childNodeData:t})=>["duplicate group keys for row data, keys should be unique",[e,t]],185:({data:e})=>["getDataPath() should not return an empty path",[e]],186:({rowId:e,rowData:t,duplicateRowsData:n})=>["duplicate group keys for row data, keys should be unique",e,t,...n??[]],187:({rowId:e,firstData:t,secondData:n})=>[`Duplicate node id ${e}. Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`,"first instance",t,"second instance",n],188:()=>"getRowId callback must be provided for Server Side Row Model selection to work correctly.",189:({startRow:e})=>`invalid value ${e} for startRow, the value should be >= 0`,190:({rowGroupId:e,data:t})=>["null and undefined values are not allowed for server side row model keys",e?`column = ${e}`:"","data is ",t],194:({method:e})=>`calling gridApi.${e}() is only possible when using rowModelType=\`clientSide\`.`,195:({justCurrentPage:e})=>`selecting just ${e?"current page":"filtered"} only works when gridOptions.rowModelType='clientSide'`,196:({key:e})=>`Provided ids must be of string type. Invalid id provided: ${e}`,197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:DT,201:({rowModelType:e})=>`Could not find row model for rowModelType = ${e}`,202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:({duplicateIdText:e})=>`Unable to display rows as duplicate row ids (${e}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`,206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>`Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ${Za}/filter-set-filter-list/#filter-value-types`,210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:({key:e})=>`unable to lookup Tool Panel as invalid key supplied: ${e}`,215:({key:e,defaultByKey:t})=>`the key ${e} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(t??{}).join(",")}`,216:({name:e})=>`Missing component for '${e}'`,217:({invalidColIds:e})=>["unable to find grid columns for the supplied colDef(s):",e],218:({property:e,defaultOffset:t})=>`${e} must be a number, the value you provided is not a valid number. Using the default of ${t}px.`,219:({property:e})=>`Property ${e} does not exist on the target object.`,220:({lineDash:e})=>`'${e}' is not a valid 'lineDash' option.`,221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:({menuItemOrString:e})=>`unrecognised menu item ${e}`,229:({index:e})=>["invalid row index for ensureIndexVisible: ",e],230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:({methodName:e})=>`Framework component is missing the method ${e}()`,234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:({theme:e})=>`theme grid option must be a Theming API theme object or the string "legacy", received: ${e}`,243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>`Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. 
Please rebuild the selection state and reapply it.`,248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:({chartType:e})=>`AG Grid: Unable to create chart as an invalid chartType = '${e}' was supplied.`,252:()=>`cannot get grid to draw rows when it is in the middle of drawing rows. 
Your code probably called a grid API method while the grid was in the render stage. 
To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). 
To see what part of your code that caused the refresh check this stacktrace.`,253:({version:e})=>["Illegal version string: ",e],254:()=>"Cannot create chart: no chart themes available.",255:({point:e})=>`Lone surrogate U+${e==null?void 0:e.toString(16).toUpperCase()} is not a scalar value`,256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>_T("IntegratedChartsModule"),258:()=>_T("SparklinesModule"),259:({part:e})=>`the argument to theme.withPart must be a Theming API part object, received: ${e}`,260:({propName:e,compName:t,gridScoped:n,gridId:s,rowModelType:i})=>DT({reasonOrId:`AG Grid '${e}' component: ${t}`,moduleName:Pu[t],gridId:s,gridScoped:n,rowModelType:i}),261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:({colId:e})=>`Unable to infer chart data type for column '${e}' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ${Za}/integrated-charts-range-chart#coldefchartdatatype .`,266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection"};function WH(e,t){const n=UH[e];if(!n)return[`Missing error text for error id ${e}!`];const s=n(t),r=`
See ${mD(e,t)}`;return Array.isArray(s)?s.concat(r):[s,r]}var jH={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"},qH=()=>({checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}}),$H=()=>({aggFunc:{module:"SharedAggregation"},autoHeight:{supportedRowModels:["clientSide","serverSide"],module:"RowAutoHeight"},cellClass:{module:"CellStyle"},cellClassRules:{module:"CellStyle"},cellEditor:({cellEditor:e,editable:t})=>{if(!t)return null;if(typeof e=="string"){const n=Pu[e];if(n)return{module:n}}return{module:"CustomEditor"}},cellRenderer:({cellRenderer:e})=>{if(typeof e!="string")return null;const t=Pu[e];return t?{module:t}:null},cellRendererParams:{validate:e=>(e.rowGroup!=null||e.rowGroupIndex!=null||e.cellRenderer==="agGroupCellRenderer")&&"checkbox"in e.cellRendererParams?'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.':null},cellStyle:{module:"CellStyle"},children:()=>tI(),columnChooserParams:{module:"ColumnMenu"},contextMenuItems:{module:"ContextMenu"},dndSource:{module:"DragAndDrop"},dndSourceOnRowDrag:{module:"DragAndDrop"},editable:({editable:e,cellEditor:t})=>e&&!t?{module:"TextEditor"}:null,enableCellChangeFlash:{module:"HighlightChanges"},enablePivot:{module:"SharedPivot"},enableRowGroup:{module:"SharedRowGrouping"},enableValue:{module:"SharedAggregation"},filter:({filter:e})=>{if(e&&typeof e!="string"&&typeof e!="boolean")return{module:"CustomFilter"};if(typeof e=="string"){const t=Pu[e];if(t)return{module:t}}return{module:"ColumnFilter"}},floatingFilter:{module:"ColumnFilter"},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerTooltip:{module:"Tooltip"},headerValueGetter:{validate:e=>{const t=e.headerValueGetter;return typeof t=="function"||typeof t=="string"?null:"headerValueGetter must be a function or a valid string expression"}},icons:{validate:({icons:e})=>{if(e){if(e.smallDown)return mr(262);if(e.smallLeft)return mr(263);if(e.smallRight)return mr(264)}return null}},mainMenuItems:{module:"ColumnMenu"},menuTabs:e=>{var n;const t=["columnsMenuTab","generalMenuTab"];return(n=e.menuTabs)!=null&&n.some(s=>t.includes(s))?{module:"ColumnMenu"}:null},pivot:{module:"SharedPivot"},pivotIndex:{module:"SharedPivot"},rowDrag:{module:"RowDrag"},rowGroup:{module:"SharedRowGrouping"},rowGroupIndex:{module:"SharedRowGrouping"},sortingOrder:{validate:e=>{const t=e.sortingOrder;if(Array.isArray(t)&&t.length>0){const n=t.filter(s=>!cd.includes(s));if(n.length>0)return`sortingOrder must be an array with elements from [${cd.map(hp).join()}], currently it includes [${n.map(hp).join()}]`}else if(!Array.isArray(t)||t.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${t}`;return null}},tooltipField:{module:"Tooltip"},tooltipValueGetter:{module:"Tooltip"},type:{validate:e=>{const t=e.type;return t instanceof Array?t.some(s=>typeof s!="string")?"if colDef.type is supplied an array it should be of type 'string[]'":null:typeof t=="string"?null:"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(e,{suppressRowTransform:t})=>t?null:"colDef.rowSpan requires suppressRowTransform to be enabled."},spanRows:{module:"CellSpan",dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[!1,void 0]},rowSpan:{required:[!1,void 0]}},validate:(e,{rowSelection:t,cellSelection:n,suppressRowTransform:s,enableCellSpan:i,pagination:r,rowDragEntireRow:a,enableCellTextSelection:u})=>typeof t=="object"&&(t==null?void 0:t.mode)==="singleRow"&&t!=null&&t.enableClickSelection?"colDef.spanRows is not supported with rowSelection.clickSelection":n?"colDef.spanRows is not supported with cellSelection.":s?"colDef.spanRows is not supported with suppressRowTransform.":i?r?"colDef.spanRows is not supported with pagination.":a?"colDef.spanRows is not supported with rowDragEntireRow.":u?"colDef.spanRows is not supported with enableCellTextSelection.":null:"colDef.spanRows requires enableCellSpan to be enabled."}}),KH={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0},YH=()=>Object.keys(KH),tI=()=>({objectName:"colDef",allProperties:YH(),docsUrl:"column-properties/",deprecations:qH(),validations:$H()}),QH=()=>({suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."}});function Ri(e,t,n,s=Number.MAX_VALUE){return typeof t=="number"||t==null?t==null||t>=n&&t<=s?null:s===Number.MAX_VALUE?`${e}: value should be greater than or equal to ${n}`:`${e}: value should be between ${n} and ${s}`:`${e}: value should be a number`}var XH=()=>{const e={alignedGrids:{module:"AlignedGrids"},allowContextMenuWithControlKey:{module:"ContextMenu"},autoSizePadding:{validate({autoSizePadding:n}){return Ri("autoSizePadding",n,0)}},autoSizeStrategy:{module:"ColumnAutoSize"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate({cacheBlockSize:n}){return Ri("cacheBlockSize",n,1)}},cacheOverflowSize:{validate({cacheOverflowSize:n}){return Ri("cacheOverflowSize",n,1)}},cellSelection:{module:"CellSelection"},columnHoverHighlight:{module:"ColumnHover"},datasource:{supportedRowModels:["infinite"],module:"InfiniteRowModel"},doesExternalFilterPass:{module:"ExternalFilter"},domLayout:{validate:n=>{const s=n.domLayout,i=["autoHeight","normal","print"];return s&&!i.includes(s)?`domLayout must be one of [${i.join()}], currently it's ${s}`:null}},editType:{module:"EditCore"},enableAdvancedFilter:{module:"AdvancedFilter"},enableCharts:{module:"IntegratedCharts"},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{module:"CellSelection",dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},rowNumbers:{module:"RowNumbers"},getContextMenuItems:{module:"ContextMenu"},getLocaleText:{module:"Locale"},getMainMenuItems:{module:"ColumnMenu"},getRowClass:{module:"RowStyle"},getRowStyle:{module:"RowStyle"},grandTotalRow:{module:"SharedRowGrouping"},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},icons:{validate:({icons:n})=>{if(n){if(n.smallDown)return mr(262);if(n.smallLeft)return mr(263);if(n.smallRight)return mr(264)}return null}},infiniteInitialRowCount:{validate({infiniteInitialRowCount:n}){return Ri("infiniteInitialRowCount",n,1)}},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},initialState:{module:"GridState"},isExternalFilterPresent:{module:"ExternalFilter"},keepDetailRowsCount:{validate({keepDetailRowsCount:n}){return Ri("keepDetailRowsCount",n,1)}},localeText:{module:"Locale"},masterDetail:{module:"SharedMasterDetail"},pagination:{module:"Pagination"},paginationPageSize:{validate({paginationPageSize:n}){return Ri("paginationPageSize",n,1)}},paginationPageSizeSelector:{validate:n=>{const s=n.paginationPageSizeSelector;return typeof s=="boolean"||s==null||s.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},pinnedTopRowData:{module:"PinnedRow"},pinnedBottomRowData:{module:"PinnedRow"},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}},module:"SharedPivot"},pivotPanelShow:{module:"RowGroupingPanel"},quickFilterText:{supportedRowModels:["clientSide"],module:"QuickFilter"},rowBuffer:{validate({rowBuffer:n}){return Ri("rowBuffer",n,0)}},rowClass:{validate:n=>typeof n.rowClass=="function"?"rowClass should not be a function, please use getRowClass instead":null,module:"RowStyle"},rowClassRules:{module:"RowStyle"},rowData:{supportedRowModels:["clientSide"],module:"ClientSideRowModel"},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{treeData:{required:[!1,void 0]},pagination:{required:[!1,void 0]}},module:"RowDrag"},rowGroupPanelShow:{module:"RowGroupingPanel"},rowSelection:{validate({rowSelection:n}){return n&&typeof n=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':n&&typeof n!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":n&&n.mode!=="multiRow"&&n.mode!=="singleRow"?`Selection mode "${n.mode}" is invalid. Use one of 'singleRow' or 'multiRow'.`:null},module:"SharedRowSelection"},rowStyle:{validate:n=>{const s=n.rowStyle;return s&&typeof s=="function"?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null},module:"RowStyle"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"ServerSideRowModel"},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate({serverSideInitialRowCount:n}){return Ri("serverSideInitialRowCount",n,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sideBar:{module:"SideBar"},sortingOrder:{validate:n=>{const s=n.sortingOrder;if(Array.isArray(s)&&s.length>0){const i=s.filter(r=>!cd.includes(r));if(i.length>0)return`sortingOrder must be an array with elements from [${cd.map(hp).join()}], currently it includes [${i.map(hp).join()}]`}else if(!Array.isArray(s)||s.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${s}`;return null}},statusBar:{module:"StatusBar"},tooltipHideDelay:{validate:n=>n.tooltipHideDelay&&n.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null},tooltipShowDelay:{validate:n=>n.tooltipShowDelay&&n.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null},treeData:{supportedRowModels:["clientSide","serverSide"],module:"SharedTreeData",validate:n=>{const s=n.rowModelType??"clientSide";switch(s){case"clientSide":{const{treeDataChildrenField:i,getDataPath:r}=n;return!i&&!r?"treeData requires either 'treeDataChildrenField' or 'getDataPath' in the clientSide row model.":i&&r?"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.":null}case"serverSide":{const i=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${s} row model.`;return n.isServerSideGroup&&n.getServerSideGroupKey?null:i}}return null}},treeDataChildrenField:{module:"SharedTreeData"},undoRedoCellEditing:{module:"UndoRedoEdit"},valueCache:{module:"ValueCache"},viewportDatasource:{supportedRowModels:["viewport"],module:"ViewportRowModel"},viewportRowModelBufferSize:{validate({viewportRowModelBufferSize:n}){return Ri("viewportRowModelBufferSize",n,0)}},viewportRowModelPageSize:{validate({viewportRowModelPageSize:n}){return Ri("viewportRowModelPageSize",n,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},enableCellSpan:{module:"CellSpan"}},t={};return X_.forEach(n=>{t[n]={expectedType:"boolean"}}),Q_.forEach(n=>{t[n]={expectedType:"number"}}),ns(t,e),t},ZH=()=>({objectName:"gridOptions",allProperties:[...xH,...wH.map(e=>RD(e))],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:QH(),validations:XH()}),JH={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1},ez={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore"},tz=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"]),nz={pinSubMenu:"PinnedColumn",pinLeft:"PinnedColumn",pinRight:"PinnedColumn",clearPinned:"PinnedColumn",valueAggSubMenu:"SharedAggregation",autoSizeThis:"ColumnAutoSize",autoSizeAll:"ColumnAutoSize",rowGroup:"SharedRowGrouping",rowUnGroup:"SharedRowGrouping",resetColumns:"CommunityCore",expandAll:["ClientSideRowModelHierarchy","ServerSideRowModel"],contractAll:["ClientSideRowModelHierarchy","ServerSideRowModel"],copy:"Clipboard",copyWithHeaders:"Clipboard",copyWithGroupHeaders:"Clipboard",cut:"Clipboard",paste:"Clipboard",export:["CsvExport","ExcelExport"],csvExport:"CsvExport",excelExport:"ExcelExport",separator:"CommunityCore",pivotChart:"IntegratedCharts",chartRange:"IntegratedCharts",columnFilter:"ColumnFilter",columnChooser:"ColumnMenu",sortAscending:"Sort",sortDescending:"Sort",sortUnSort:"Sort"},sz=class extends he{constructor(){super(...arguments),this.beanName="validation"}wireBeans(e){this.gridOptions=e.gridOptions,hO(this)}postConstruct(){this.processGridOptions(this.gridOptions)}warnOnInitialPropertyUpdate(e,t){e==="api"&&PH[t]&&be(22,{key:t})}processGridOptions(e){this.processOptions(e,ZH())}validateApiFunction(e,t){return kH(e,t,this.beans)}missingUserComponent(e,t,n,s){const i=Pu[t];i?this.gos.assertModuleRegistered(i,`AG Grid '${e}' component: ${t}`):be(101,{propertyName:e,componentName:t,agGridDefaults:n,jsComps:s})}checkRowEvents(e){rz.has(e)&&be(10,{eventType:e})}validateIcon(e){if(tz.has(e)&&be(43,{iconName:e}),JH[e])return;const t=ez[e];if(t){Bt(200,{reasonOrId:`icon '${e}'`,moduleName:t,gridScoped:qw(),gridId:this.beans.context.getGridId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."});return}be(134,{iconName:e})}validateMenuItem(e){const t=nz[e];t&&this.gos.assertModuleRegistered(t,`menu item '${e}'`)}isProvidedUserComp(e){return!!Pu[e]}validateColDef(e,t,n){var s;(n||!((s=this.beans.dataTypeSvc)!=null&&s.isColPendingInference(t)))&&this.processOptions(e,tI())}processOptions(e,t){const{validations:n,deprecations:s,allProperties:i,propertyExceptions:r,objectName:a,docsUrl:u}=t;i&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...r??[],...Object.keys(s)],i,a,u);const h=new Set,d=m=>{const v=n[m];if(v)if(typeof v=="function"){const w=v(e,this.gridOptions,this.beans);if(!w)return;if("objectName"in w){const S=e[m];if(Array.isArray(S)){S.forEach(T=>{this.processOptions(T,w)});return}this.processOptions(e[m],w);return}return w}else return v;else return};Object.keys(e).forEach(m=>{const v=s[m];if(v){const{message:z,version:U}=v;h.add(`As of v${U}, ${String(m)} is deprecated. ${z??""}`)}const w=e[m];if(w==null||w===!1)return;const S=d(m);if(!S)return;const{module:T,dependencies:A,validate:O,supportedRowModels:V,expectedType:H}=S;if(H){const z=typeof w;if(z!==H){h.add(`${String(m)} should be of type '${H}' but received '${z}' (${w}).`);return}}if(V){const z=this.gridOptions.rowModelType??"clientSide";if(!V.includes(z)){h.add(`${String(m)} is not supported with the '${z}' row model. It is only valid with: ${V.join(", ")}.`);return}}if(T){const z=Array.isArray(T)?T:[T];let U=!0;if(z.forEach(K=>{this.gos.assertModuleRegistered(K,String(m))||(U=!1)}),!U)return}if(A){const z=this.checkForRequiredDependencies(m,A,e);if(z){h.add(z);return}}if(O){const z=O(e,this.gridOptions,this.beans);if(z){h.add(z);return}}}),h.size>0&&h.forEach(m=>{jh(m)})}checkForRequiredDependencies(e,t,n){const i=Object.entries(t).filter(([r,a])=>{const u=n[r];return!a.required.includes(u)});return i.length===0?null:i.map(([r,a])=>`'${String(e)}' requires '${r}' to be one of [${a.required.map(u=>u===null?"null":u===void 0?"undefined":u).join(", ")}]. ${a.reason??""}`).join(`
           `)}checkProperties(e,t,n,s,i){const r=["__ob__","__v_skip","__metadata__"],a=iz(Object.getOwnPropertyNames(e),[...r,...t,...n],n),u=Object.keys(a);for(const h of u){const d=a[h];let g=`invalid ${s} property '${h}' did you mean any of these: ${d.slice(0,8).join(", ")}.`;n.includes("context")&&(g+=`
If you are trying to annotate ${s} with application data, use the '${s}.context' property instead.`),jh(g)}if(u.length>0&&i){const h=this.beans.frameworkOverrides.getDocLink(i);jh(`to see all the valid ${s} properties please check: ${h}`)}}getConsoleMessage(e,t){return WH(e,t)}};function iz(e,t,n){const s={},i=e.filter(r=>!t.some(a=>a===r));return i.length>0&&i.forEach(r=>s[r]=Z_({inputValue:r,allSuggestions:n}).values),s}var rz=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"]),oz={moduleName:"Validation",version:Je,beans:[sz]};function nI(e){e.sibling&&(e.sibling.childrenAfterFilter=e.childrenAfterFilter)}var az=class extends he{constructor(){super(...arguments),this.beanName="filterStage",this.refreshProps=new Set(["excludeChildrenWhenTreeDataFiltering"]),this.step="filter"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){var n;const t=!!((n=this.filterManager)!=null&&n.isChildFilterPresent());this.filterNodes(t,e)}filterNodes(e,t){const n=(s,i)=>{s.hasChildren()&&e&&!i?s.childrenAfterFilter=s.childrenAfterGroup.filter(r=>{const a=r.childrenAfterFilter&&r.childrenAfterFilter.length>0,u=r.data&&this.filterManager.doesRowPassFilter({rowNode:r});return a||u}):s.childrenAfterFilter=s.childrenAfterGroup,nI(s)};if(this.doingTreeDataFiltering()){const s=(r,a)=>{if(r.childrenAfterGroup)for(let u=0;u<r.childrenAfterGroup.length;u++){const h=r.childrenAfterGroup[u],d=a||this.filterManager.doesRowPassFilter({rowNode:h});h.childrenAfterGroup?s(r.childrenAfterGroup[u],d):n(h,d)}n(r,a)},i=r=>s(r,!1);t.executeFromRootNode(i)}else{const s=i=>n(i,!1);t.forEachChangedNodeDepthFirst(s,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},lz=class extends ib{constructor(){super(...arguments),this.iconCreated=!1}setComp(e,t,n,s,i){this.comp=e;const r=Pd(this,this.beans.context,i);this.eButtonShowMainFilter=n,this.eFloatingFilterBody=s,this.setGui(t,r),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(r),this.setupLeft(r),this.setupHover(r),this.setupFocus(r),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(r),this.setupUi(),r.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(r),r.addManagedListeners(this.column,{colDefChanged:()=>this.onColDefChanged(r)}),r.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}getHeaderClassParams(){const{column:e,beans:t}=this,n=e.colDef;return ke(t.gos,{colDef:n,column:e,floatingFilter:!0})}setupActive(){const e=this.column.getColDef(),t=!!e.filter,n=!!e.floatingFilter;this.active=t&&n}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=Ge("filter",this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new Cc(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.getLocaleTextFunc();Oi(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){var a;const{beans:t}=this;if(un(t)===this.eGui)return;const i=_r(t,this.eGui,null,e.shiftKey);if(i){(a=t.headerNavigation)==null||a.scrollToColumn(this.column),e.preventDefault(),i.focus();return}const r=this.findNextColumnWithFloatingFilter(e.shiftKey);r&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:r},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleCols;let n=this.column;do if(n=e?t.getColBefore(n):t.getColAfter(n),!n)break;while(!n.getColDef().filter||!n.getColDef().floatingFilter);return n}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case J.UP:case J.DOWN:t||e.preventDefault();case J.LEFT:case J.RIGHT:if(t)return;e.stopPropagation();case J.ENTER:t&&qs(this.eGui)&&e.preventDefault();break;case J.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const n=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),s=!!e.relatedTarget&&Xa(e.relatedTarget,"ag-floating-filter");if(n&&s&&e.target===this.eGui){const i=this.lastFocusEvent,r=!!(i&&i.key===J.TAB);if(i&&r){const a=i.shiftKey;qs(this.eGui,a)}}this.focusThis()}setupHover(e){var t;(t=this.beans.colHover)==null||t.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){const t=new sb(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){var e;this.suppressFilterButton=!((e=this.beans.menuSvc)!=null&&e.isFloatingFilterButtonEnabled(this.column)),this.highlightFilterButtonWhenActive=!Dn(this.gos)}setupUserComp(){var t;if(!this.active)return;const e=(t=this.beans.filterManager)==null?void 0:t.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){var t;const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;(t=this.beans.menuSvc)==null||t.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{filterManager:t}=this.beans,n=s=>{if((s==null?void 0:s.source)==="filterDestroyed"&&!this.isAlive())return;const i=this.comp.getFloatingFilterComp();i&&i.then(r=>{if(r){const a=t==null?void 0:t.getCurrentFloatingFilterParentModel(this.column),u=s?{...s,columns:s.columns??[],source:s.source==="api"?"api":"columnFilter"}:null;r.onParentModelChanged(a,u)}})};[this.destroySyncListener]=e.addManagedListeners(this.column,{filterChanged:n}),t!=null&&t.isFilterActive(this.column)&&n(null)}setupWidth(e){const t=()=>{const n=`${this.column.getActualWidth()}px`;this.comp.setWidth(n)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){var e;if(!this.suppressFilterButton&&this.comp){const t=!!((e=this.beans.filterManager)!=null&&e.isFilterAllowed(this.column));this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){var r;const t=this.active;this.setupActive();const n=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const s=this.active?(r=this.beans.filterManager)==null?void 0:r.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,i=this.comp.getFloatingFilterComp();!i||!s?this.updateCompDetails(e,s,n):i.then(a=>{var u;!a||(u=this.beans.filterManager)!=null&&u.areFilterCompsDifferent(this.userCompDetails??null,s)?this.updateCompDetails(e,s,n):this.updateFloatingFilterParams(s)})}updateCompDetails(e,t,n){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),n&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e){var n;if(!e)return;const t=e.params;(n=this.comp.getFloatingFilterComp())==null||n.then(s=>{s!=null&&s.refresh&&typeof s.refresh=="function"&&s.refresh(t)})}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};function uz(e,t){var s;const n=e.colModel.getCol(t);if(!n){Bt(12,{colKey:t});return}(s=e.menuSvc)==null||s.showColumnMenu({column:n,positionBy:"auto"})}function cz(e){var t;(t=e.menuSvc)==null||t.hidePopupMenu()}var sI={moduleName:"SharedMenu",version:Je,beans:[SV],apiFunctions:{showColumnMenu:uz,hidePopupMenu:cz}},hz=0,dz=200,fz=class extends he{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:n,column:s,node:i,event:r}=e,a=t.getBoundingClientRect(),u=this.getParentRect();this.setAlignedTo(t,n);let h=!1;const d=()=>{const g=this.keepXYWithinBounds(n,a.top-u.top,0),m=n.clientWidth>0?n.clientWidth:200;h||(n.style.minWidth=`${m}px`,h=!0);const w=u.right-u.left-m;let S;return this.gos.get("enableRtl")?(S=A(),S<0&&(S=T(),this.setAlignedStyles(n,"left")),S>w&&(S=0,this.setAlignedStyles(n,"right"))):(S=T(),S>w&&(S=A(),this.setAlignedStyles(n,"right")),S<0&&(S=0,this.setAlignedStyles(n,"left"))),{x:S,y:g};function T(){return a.right-u.left-2}function A(){return a.left-u.left-m}};this.positionPopup({ePopup:n,keepWithinBounds:!0,updatePosition:d,postProcessCallback:()=>this.callPostProcessPopup("subMenu",n,t,r instanceof MouseEvent?r:void 0,s,i)})}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:n,nudgeY:s,skipObserver:i}=e;this.positionPopup({ePopup:t,nudgeX:n,nudgeY:s,keepWithinBounds:!0,skipObserver:i,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:n,nudgeY:s,keepWithinBounds:i,eventSource:r,alignSide:a="left",position:u="over",column:h,rowNode:d,type:g}=e,m=r.getBoundingClientRect(),v=this.getParentRect();this.setAlignedTo(r,t);const w=()=>{let S=m.left-v.left;a==="right"&&(S-=t.offsetWidth-m.width);let T;return u==="over"?(T=m.top-v.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,m,v,e.nudgeY||0)==="under"?T=m.top-v.top+m.height:T=m.top-t.offsetHeight-(s||0)*2-v.top),{x:S,y:T}};this.positionPopup({ePopup:t,nudgeX:n,nudgeY:s,keepWithinBounds:i,updatePosition:w,postProcessCallback:()=>this.callPostProcessPopup(g,t,r,null,h,d)})}shouldRenderUnderOrAbove(e,t,n,s){const i=n.bottom-t.bottom,r=t.top-n.top,a=e.offsetHeight+s;return i>a?"under":r>a||r>i?"above":"under"}setAlignedStyles(e,t){const n=this.getPopupIndex(e);if(n===-1)return;const s=this.popupList[n],{alignedToElement:i}=s;!i||(["right","left","over","above","under"].forEach(a=>{i.classList.remove(`ag-has-popup-positioned-${a}`),e.classList.remove(`ag-popup-positioned-${a}`)}),!t)||(i.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}setAlignedTo(e,t){const n=this.getPopupIndex(t);if(n!==-1){const s=this.popupList[n];s.alignedToElement=e}}callPostProcessPopup(e,t,n,s,i,r){const a=this.gos.getCallback("postProcessPopup");a&&a({column:i,rowNode:r,ePopup:t,type:e,eventSource:n,mouseEvent:s})}positionPopup(e){const{ePopup:t,keepWithinBounds:n,nudgeX:s,nudgeY:i,skipObserver:r,updatePosition:a}=e,u={width:0,height:0},h=(d=!1)=>{let{x:g,y:m}=a();d&&t.clientWidth===u.width&&t.clientHeight===u.height||(u.width=t.clientWidth,u.height=t.clientHeight,s&&(g+=s),i&&(m+=i),n&&(g=this.keepXYWithinBounds(t,g,1),m=this.keepXYWithinBounds(t,m,0)),t.style.left=`${g}px`,t.style.top=`${m}px`,e.postProcessCallback&&e.postProcessCallback())};if(h(),!r){const d=Dr(this.beans,t,()=>h(!0));setTimeout(()=>d(),dz)}}getActivePopups(){return this.popupList.map(e=>e.element)}getParentRect(){const e=Jt(this.beans);let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),aD(t)}keepXYWithinBounds(e,t,n){const s=n===0,i=s?"clientHeight":"clientWidth",r=s?"top":"left",a=s?"height":"width",u=s?"scrollTop":"scrollLeft",h=Jt(this.beans),d=h.documentElement,g=this.getPopupParent(),m=e.getBoundingClientRect(),v=g.getBoundingClientRect(),w=h.documentElement.getBoundingClientRect(),S=g===h.body,T=Math.ceil(m[a]);let O=S?(s?oD:rp)(d)+d[u]:g[i];S&&(O-=Math.abs(w[r]-v[r]));const V=O-T;return Math.min(Math.max(t,0),Math.abs(V))}addPopup(e){const t=Jt(this.beans),{eChild:n,ariaLabel:s,alwaysOnTop:i,positionCallback:r,anchorToElement:a}=e;if(!t)return be(122),{hideFunc:()=>{}};const u=this.getPopupIndex(n);if(u!==-1)return{hideFunc:this.popupList[u].hideFunc};this.initialisePopupPosition(n);const h=this.createPopupWrapper(n,s,!!i),d=this.addEventListenersToPopup({...e,wrapperEl:h});return r&&r(),this.addPopupToPopupList(n,h,d,a),{hideFunc:d}}initialisePopupPosition(e){const n=this.getPopupParent().getBoundingClientRect();Le(e.style.top)||(e.style.top=`${n.top*-1}px`),Le(e.style.left)||(e.style.left=`${n.left*-1}px`)}createPopupWrapper(e,t,n){const s=this.getPopupParent(),i=document.createElement("div"),{environment:r,gos:a}=this.beans;return r.applyThemeClasses(i),i.classList.add("ag-popup"),e.classList.add(a.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||Un(e,"dialog"),Oi(e,t),i.appendChild(e),s.appendChild(i),n?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),i}handleThemeChange(e){if(e.themeChanged){const t=this.beans.environment;for(const n of this.popupList)t.applyThemeClasses(n.wrapper)}}addEventListenersToPopup(e){const t=this.beans,n=Jt(t),s=this.getPopupParent(),{wrapperEl:i,eChild:r,closedCallback:a,afterGuiAttached:u,closeOnEsc:h,modal:d}=e;let g=!1;const m=T=>{if(!i.contains(un(t)))return;T.key===J.ESCAPE&&!Cr(T)&&S({keyboardEvent:T})},v=T=>S({mouseEvent:T}),w=T=>S({touchEvent:T}),S=(T={})=>{const{mouseEvent:A,touchEvent:O,keyboardEvent:V,forceHide:H}=T;!H&&(this.isEventFromCurrentPopup({mouseEvent:A,touchEvent:O},r)||g)||(g=!0,s.removeChild(i),n.removeEventListener("keydown",m),n.removeEventListener("mousedown",v),n.removeEventListener("touchstart",w),n.removeEventListener("contextmenu",v),this.eventSvc.removeEventListener("dragStarted",v),a&&a(A||O||V),this.removePopupFromPopupList(r))};return u&&u({hidePopup:S}),window.setTimeout(()=>{h&&n.addEventListener("keydown",m),d&&(n.addEventListener("mousedown",v),this.eventSvc.addEventListener("dragStarted",v),n.addEventListener("touchstart",w),n.addEventListener("contextmenu",v))},0),S}addPopupToPopupList(e,t,n,s){this.popupList.push({element:e,wrapper:t,hideFunc:n,instanceId:hz++,isAnchored:!!s}),s&&this.setPopupPositionRelatedToElement(e,s)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const n=this.getPopupIndex(e);if(n===-1)return;const s=this.popupList[n];if(s.stopAnchoringPromise&&s.stopAnchoringPromise.then(r=>r&&r()),s.stopAnchoringPromise=void 0,s.isAnchored=!1,!t)return;const i=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:s.hideFunc});return s.stopAnchoringPromise=i,s.isAnchored=!0,i}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),n=t.getBoundingClientRect(),{element:s,ePopup:i}=e,r=s.getBoundingClientRect(),a=m=>parseInt(m.substring(0,m.length-1),10),u=(m,v)=>{const w=n[m]-r[m],S=a(i.style[m]);return{initialDiff:w,lastDiff:w,initial:S,last:S,direction:v}},h=u("top",0),d=u("left",1),g=this.beans.frameworkOverrides;return new ht(m=>{g.wrapIncoming(()=>{g.setInterval(()=>{const v=t.getBoundingClientRect(),w=s.getBoundingClientRect();if(w.top==0&&w.left==0&&w.height==0&&w.width==0){e.hidePopup();return}const T=(A,O)=>{const V=a(i.style[O]);A.last!==V&&(A.initial=V,A.last=V);const H=v[O]-w[O];if(H!=A.lastDiff){const z=this.keepXYWithinBounds(i,A.initial+A.initialDiff-H,A.direction);i.style[O]=`${z}px`,A.last=z}A.lastDiff=H};T(h,"top"),T(d,"left")},200).then(v=>{m(()=>{v!=null&&window.clearInterval(v)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){const{mouseEvent:n,touchEvent:s}=e,i=n||s;if(!i)return!1;const r=this.getPopupIndex(t);if(r===-1)return!1;for(let a=r;a<this.popupList.length;a++){const u=this.popupList[a];if(PO(u.element,i))return!0}return this.isElementWithinCustomPopup(i.target)}isElementWithinCustomPopup(e){const t=Jt(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const n=this.getWrapper(e);n&&(n.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(n))}bringPopupToFront(e){const t=this.getPopupParent(),n=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),s=n.length,i=this.getWrapper(e);if(!i||s<=1||!t.contains(e))return;const r=[],a=[];for(const v of n)v!==i&&(v.classList.contains("ag-always-on-top")?a.push(v):r.push(v));const u=[],h=a.length,m=i.classList.contains("ag-always-on-top")||!h?[...r,...a,i]:[...r,i,...a];for(let v=0;v<=s;v++){const w=m[v];if(n[v]===m[v]||w===i)continue;w.querySelectorAll("div").forEach(T=>{T.scrollTop!==0&&u.push([T,T.scrollTop])}),v===0?t.insertAdjacentElement("afterbegin",w):m[v-1].insertAdjacentElement("afterend",w)}for(;u.length;){const v=u.pop();v[0].scrollTop=v[1]}}},iI={moduleName:"Popup",version:Je,beans:[fz]},gz=".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-set-floating-filter-input [disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:1px solid var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}";function pz(e){const t=e.filterManager;return!!(t!=null&&t.isColumnFilterPresent())||!!(t!=null&&t.isAggregateFilterPresent())}function mz(e,t){var n;return((n=e.filterManager)==null?void 0:n.getColumnFilterInstance(t))??Promise.resolve(void 0)}function Cz(e,t){var s;const n=e.colModel.getColDefCol(t);if(n)return(s=e.filterManager)==null?void 0:s.destroyFilter(n,"api")}function vz(e,t){e.frameworkOverrides.wrapIncoming(()=>{var n;return(n=e.filterManager)==null?void 0:n.setFilterModel(t)})}function yz(e){var t;return((t=e.filterManager)==null?void 0:t.getFilterModel())??{}}function wz(e,t){var n;return((n=e.filterManager)==null?void 0:n.getColumnFilterModel(t))??null}function bz(e,t,n){var s;return((s=e.filterManager)==null?void 0:s.setColumnFilterModel(t,n))??Promise.resolve()}function Sz(e,t){var s;const n=e.colModel.getCol(t);if(!n){Bt(12,{colKey:t});return}(s=e.menuSvc)==null||s.showFilterMenu({column:n,containerType:"columnFilter",positionBy:"auto"})}var IT={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},MT=["january","february","march","april","may","june","july","august","september","october","november","december"];function Ez(e,t){return e==null?-1:t==null?1:parseFloat(e)-parseFloat(t)}var Rz=class extends he{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}postConstruct(){var e,t;this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),beforeRefreshModel:({params:n})=>{var s;(n.rowDataUpdated||(s=n.changedProps)!=null&&s.has("treeData"))&&this.onNewRowsLoaded("rowDataUpdated")},dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel={...((t=(e=this.gos.get("initialState"))==null?void 0:e.filter)==null?void 0:t.filterModel)??{}}}setFilterModel(e,t="api"){const{colModel:n,dataTypeSvc:s,filterManager:i}=this.beans;if(s!=null&&s.isPendingInference){this.filterModelUpdateQueue.push({model:e,source:t});return}const r=[],a=this.getFilterModel(!0);if(e){const u=new Set(Object.keys(e));this.allColumnFilters.forEach((h,d)=>{const g=e[d];r.push(Ag(h.filterPromise,g)),u.delete(d)}),u.forEach(h=>{const d=n.getColDefCol(h)||n.getCol(h);if(!d){be(62,{colId:h});return}if(!d.isFilterAllowed()){be(63,{colId:h});return}const g=this.getOrCreateFilterWrapper(d);if(!g){be(64,{colId:h});return}r.push(Ag(g.filterPromise,e[h]))})}else this.allColumnFilters.forEach(u=>{r.push(Ag(u.filterPromise,null))});ht.all(r).then(()=>{const u=this.getFilterModel(!0),h=[];this.allColumnFilters.forEach((d,g)=>{const m=a?a[g]:null,v=u?u[g]:null;cD(m,v)||h.push(d.column)}),h.length>0&&(i==null||i.onFilterChanged({columns:h,source:t}))})}getFilterModel(e){var r;const t={},{allColumnFilters:n,initialFilterModel:s,beans:{colModel:i}}=this;if(n.forEach((a,u)=>{const h=this.getModelFromFilterWrapper(a);Le(h)&&(t[u]=h)}),!e)for(const a of Object.keys(s)){const u=s[a];Le(u)&&!n.has(a)&&((r=i.getCol(a))!=null&&r.isFilterAllowed())&&(t[a]=u)}return t}getModelFromFilterWrapper(e){const{filter:t}=e;return t?typeof t.getModel!="function"?(be(66),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){const{allColumnFilters:e}=this;return e.size?(e.forEach(t=>this.disposeFilterWrapper(t,"advancedFilterEnabled")),!0):!1}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){const e=u=>u?u.isFilterActive?u.isFilterActive():(be(67),!1):!1,{colModel:t,gos:n}=this.beans,s=!!Hy(n),i=u=>{if(!u.isPrimary())return!0;const d=!t.isPivotActive();return!u.isValueActive()||!d?!1:t.isPivotMode()?!0:s},r=[],a=[];return this.forEachColumnFilter((u,h)=>{e(u)&&(i(h.column)?r.push(u):a.push(u))}).then(()=>{this.activeAggregateFilters=r,this.activeColumnFilters=a})}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter((n,s)=>this.setColFilterActive(s.column,n.isFilterActive(),e,t))}forEachColumnFilter(e){const t=[];return this.allColumnFilters.forEach(n=>{const s=n.filterPromise;s&&t.push(s.then(i=>e(i,n)))}),ht.all(t)}doColumnFiltersPass(e,t,n){const{data:s,aggData:i}=e,r=n?this.activeAggregateFilters:this.activeColumnFilters,a=n?i:s;for(let u=0;u<r.length;u++){const h=r[u];if(!(h==null||h===t)){if(typeof h.doesFilterPass!="function"){Bt(91);continue}if(!h.doesFilterPass({node:e,data:a}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){const{rowRenderer:t,filterManager:n}=this.beans,s=()=>{this.isAlive()&&(n==null||n.onFilterChanged(e))};t.isRefreshInProgress()?setTimeout(s,0):s()}updateBeforeFilterChanged(e={}){const{filterInstance:t,additionalEventAttributes:n}=e;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",n).then(()=>{this.allColumnFilters.forEach(s=>{s.filterPromise&&s.filterPromise.then(i=>{i&&i!==t&&i.onAnyFilterChanged&&i.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter(t=>{var n;(n=t.onNewRowsLoaded)==null||n.call(t)}).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createGetValue(e){const{filterValueSvc:t,colModel:n}=this.beans;return(s,i)=>{const r=i?n.getCol(i):e;return r?t.getValue(r,s):void 0}}isFilterActive(e){const{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():this.getModelFromInitialState(e)!=null}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;const{gos:n,dataTypeSvc:s}=this.beans;if(Xv(n))t="agSetColumnFilter";else{const i=s==null?void 0:s.getBaseDataType(e);i==="number"?t="agNumberColumnFilter":i==="date"||i==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;const{gos:n,dataTypeSvc:s}=this.beans;if(Xv(n))t="agSetColumnFloatingFilter";else{const i=s==null?void 0:s.getBaseDataType(e);i==="number"?t="agNumberColumnFloatingFilter":i==="date"||i==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){const n=this.getDefaultFilter(e),s=e.getColDef();let i;const r={...this.createFilterParams(e,s),filterModifiedCallback:()=>this.filterModifiedCallbackFactory(i,e)(),filterChangedCallback:u=>this.filterChangedCallbackFactory(i,e)(u),doesRowPassOtherFilter:u=>{var h;return((h=this.beans.filterManager)==null?void 0:h.doesRowPassOtherFilters(i,u))??!0}},a=Hk(this.beans.userCompFactory,s,r,n);return a?{filterPromise:()=>{const u=a.newAgStackInstance();return u.then(h=>{i=h,t&&(t.filter=h??void 0)}),u},compDetails:a}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return ke(this.gos,{column:e,colDef:t,rowModel:this.beans.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){const t={column:e,filterPromise:null,compDetails:null},{filterPromise:n,compDetails:s}=this.createFilterInstance(e,t);return t.filterPromise=(n==null?void 0:n())??null,t.compDetails=s,t}onColumnsChanged(){const e=[],{colModel:t,filterManager:n}=this.beans;this.allColumnFilters.forEach((i,r)=>{let a;i.column.isPrimary()?a=t.getColDefCol(r):a=t.getCol(r),!(a&&a===i.column)&&(e.push(i.column),this.disposeFilterWrapper(i,"columnChanged"),this.disposeColumnListener(r))});const s=e.every(FT);e.length>0&&!s?n==null||n.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){var e,t;(t=(e=this.beans.autoColSvc)==null?void 0:e.getColumns())==null||t.forEach(n=>{FT(n)&&this.getOrCreateFilterWrapper(n)})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const{filter:n}=this.allColumnFilters.get(e.getColId())??{};return n&&typeof(n==null?void 0:n.isFilterAllowed)=="function"?n.isFilterAllowed():!0}getFloatingFilterCompDetails(e,t){const n=g=>{var v;const m=(v=this.getOrCreateFilterWrapper(e))==null?void 0:v.filterPromise;m!=null&&m.then(w=>{g(iT(w))})},s=e.getColDef(),i={...this.createFilterParams(e,s),filterChangedCallback:()=>n(g=>this.filterChangedCallbackFactory(g,e)())},{userCompFactory:r,frameworkOverrides:a}=this.beans,u=qk(r,s,i);let h=NN(a,s,()=>this.getDefaultFloatingFilter(e));h==null&&(h="agReadOnlyFloatingFilter");const d=ke(this.gos,{column:e,filterParams:u,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:n,showParentFilter:t});return Wk(r,s,d,h)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,t="api"){const n=e.getColId(),s=this.allColumnFilters.get(n);this.disposeColumnListener(n),delete this.initialFilterModel[n],s&&this.disposeFilterWrapper(s,t).then(i=>{var r;i&&this.isAlive()&&((r=this.beans.filterManager)==null||r.onFilterChanged({columns:[e],source:"api"}))})}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){var n;return((n=e.filterPromise)==null?void 0:n.then(s=>{const i=!!(s!=null&&s.isFilterActive());return this.destroyBean(s),this.setColFilterActive(e.column,!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:t,column:e.column}),i}))??ht.resolve(!1)}filterModifiedCallbackFactory(e,t){return()=>{this.eventSvc.dispatchEvent({type:"filterModified",column:t,filterInstance:e})}}filterChangedCallbackFactory(e,t){return n=>{const s=(n==null?void 0:n.source)??"columnFilter",i={filter:e,additionalEventAttributes:n,columns:[t],source:s};this.callOnFilterChangedOutsideRenderCycle(i)}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const n=t.column,{compDetails:s}=n.isFilterAllowed()?this.createFilterInstance(n):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,s)){this.destroyFilter(n,"paramsUpdated");return}const i=n.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(n,"paramsUpdated");return}t.filterPromise.then(r=>{(r!=null&&r.refresh?r.refresh({...this.createFilterParams(n,n.getColDef()),filterModifiedCallback:this.filterModifiedCallbackFactory(r,n),filterChangedCallback:this.filterChangedCallbackFactory(r,n),doesRowPassOtherFilter:u=>{var h;return((h=this.beans.filterManager)==null?void 0:h.doesRowPassOtherFilters(r,u))??!0},...i}):!0)===!1&&this.destroyFilter(n,"paramsUpdated")})}setColumnFilterWrapper(e,t){const n=e.getColId();this.allColumnFilters.set(n,t),this.allColumnListeners.set(n,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(n)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:n}=e,{componentClass:s}=t;return!(n===s||(n==null?void 0:n.render)&&(s==null?void 0:s.render)&&n.render===s.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some(t=>t.getColDef().floatingFilter)}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstanceImpl(e).then(n=>{t(iT(n))})})}getFilterInstanceImpl(e){var s;const t=this.beans.colModel.getColDefCol(e);return t?((s=this.getOrCreateFilterWrapper(t))==null?void 0:s.filterPromise)??ht.resolve(null):ht.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:n})=>{this.setColumnFilterModel(e,t).then(()=>n())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){const{colModel:n,dataTypeSvc:s}=this.beans;if(s!=null&&s.isPendingInference){let u=()=>{};const h=new Promise(d=>{u=d});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:u}),h}const i=n.getColDefCol(e),r=i?this.getOrCreateFilterWrapper(i):null;return r?(u=>new Promise(h=>{u.then(d=>h(d))}))(Ag(r.filterPromise,t)):Promise.resolve()}getFilterWrapper(e){const t=this.beans.colModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}setColDefPropertiesForDataType(e,t,n){const s=Xv(this.gos),i=this.getLocaleTextFunc(),r=a=>{const{filterParams:u}=e;e.filterParams=typeof u=="object"?{...u,...a}:a};switch(t.baseDataType){case"number":{s&&r({comparator:Ez});break}case"boolean":{r(s?{valueFormatter:a=>Le(a.value)?i(String(a.value),a.value?"True":"False"):i("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(a,u)=>u,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(a,u)=>u===!1,numberOfInputs:0}]});break}case"date":{r(s?{valueFormatter:a=>{const u=n(a);return Le(u)?u:i("blanks","(Blanks)")},treeList:!0,treeListFormatter:(a,u)=>{if(a==="NaN")return i("invalidDate","Invalid Date");if(u===1&&a!=null){const h=MT[Number(a)-1];return i(h,IT[h])}return a??i("blanks","(Blanks)")}}:{isValidDate:PT});break}case"dateString":{const a=t.dateParser;r(s?{valueFormatter:u=>{const h=n(u);return Le(h)?h:i("blanks","(Blanks)")},treeList:!0,treeListPathGetter:u=>{const h=a(u??void 0);return h?[String(h.getFullYear()),String(h.getMonth()+1),String(h.getDate())]:null},treeListFormatter:(u,h)=>{if(h===1&&u!=null){const d=MT[Number(u)-1];return i(d,IT[d])}return u??i("blanks","(Blanks)")}}:{comparator:(u,h)=>{const d=a(h);return h==null||d<u?-1:d>u?1:0},isValidDate:u=>typeof u=="string"&&PT(a(u))});break}case"object":{s?r({valueFormatter:a=>{const u=n(a);return Le(u)?u:i("blanks","(Blanks)")}}):e.filterValueGetter=a=>n({column:a.column,node:a.node,value:this.beans.valueSvc.getValue(a.column,a.node)});break}}}setColFilterActive(e,t,n,s){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent("filterActiveChanged",n)),e.dispatchColEvent("filterChanged",n,s)}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};function Ag(e,t){return e?new ht(n=>{e.then(s=>{typeof s.setModel!="function"&&(be(65),n()),(s.setModel(t)||ht.resolve()).then(()=>n())})}):ht.resolve()}function FT(e){return e.getColDef().filter==="agGroupColumnFilter"}function PT(e){return e instanceof Date&&!isNaN(e.getTime())}function Tz(e){var t;return!!((t=e.filterManager)!=null&&t.isAnyFilterPresent())}function Az(e,t="api"){var n;(n=e.filterManager)==null||n.onFilterChanged({source:t})}var xz=class extends he{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:s})=>this.onAdvFilterEnabledChanged(s),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});const{gos:n}=this;this.alwaysPassFilter=n.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",()=>{this.alwaysPassFilter=n.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return typeof t=="function"&&t(e)}setFilterModel(e,t="api"){var n;if(this.isAdvFilterEnabled()){this.warnAdvFilters();return}(n=this.colFilter)==null||n.setFilterModel(e,t)}getFilterModel(){var e;return((e=this.colFilter)==null?void 0:e.getFilterModel())??{}}isColumnFilterPresent(){var e;return!!((e=this.colFilter)!=null&&e.isColumnFilterPresent())}isAggregateFilterPresent(){var e;return!!((e=this.colFilter)!=null&&e.isAggregateFilterPresent())}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){var t,n;e?(t=this.colFilter)!=null&&t.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):(n=this.advancedFilter)!=null&&n.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){var e;return!!((e=this.advancedFilter)!=null&&e.isEnabled())}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){Hy(this.gos)&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:n,columns:s=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):ht.resolve()).then(()=>{var r;const i={source:t,type:"filterChanged",columns:s};n&&ns(i,n),this.eventSvc.dispatchEvent(i),(r=this.colFilter)==null||r.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){var e;return!!((e=this.colFilter)!=null&&e.isSuppressFlashingCellsBecauseFiltering())}isQuickFilterPresent(){var e;return!!((e=this.quickFilter)!=null&&e.isFilterPresent())}updateAggFiltering(){this.aggFiltering=!!Hy(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){var n;const{rowNode:t}=e;return(n=this.alwaysPassFilter)!=null&&n.call(this,t)?!0:!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.isAggregateFilterPresent()&&!this.colFilter.doAggregateFiltersPass(t,e.filterInstanceToSkip))}doesRowPassFilter(e){var n;const{rowNode:t}=e;return(n=this.alwaysPassFilter)!=null&&n.call(this,t)?!0:!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.externalFilterPresent&&!this.doesExternalFilterPass(t)||this.isColumnFilterPresent()&&!this.colFilter.doColumnFiltersPass(t,e.filterInstanceToSkip)||this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(t))}isFilterActive(e){var t;return!!((t=this.colFilter)!=null&&t.isFilterActive(e))}getOrCreateFilterWrapper(e){var t;return((t=this.colFilter)==null?void 0:t.getOrCreateFilterWrapper(e))??null}getDefaultFloatingFilter(e){return this.colFilter.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.colFilter.createFilterParams(e,t)}isFilterAllowed(e){var t;return this.isAdvFilterEnabled()?!1:!!((t=this.colFilter)!=null&&t.isFilterAllowed(e))}getFloatingFilterCompDetails(e,t){var n;return(n=this.colFilter)==null?void 0:n.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){var t;return(t=this.colFilter)==null?void 0:t.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,t="api"){var n;(n=this.colFilter)==null||n.destroyFilter(e,t)}areFilterCompsDifferent(e,t){var n;return!!((n=this.colFilter)!=null&&n.areFilterCompsDifferent(e,t))}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e,t="api"){var n;if(this.isAdvFilterEnabled()){if((n=this.beans.dataTypeSvc)!=null&&n.isPendingInference){this.advFilterModelUpdateQueue.push(e);return}this.advancedFilter.setModel(e??null),this.onFilterChanged({source:t})}}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){var e;return this.isAdvFilterEnabled()?!1:!!((e=this.colFilter)!=null&&e.hasFloatingFilters())}getColumnFilterInstance(e){var t;return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):((t=this.colFilter)==null?void 0:t.getColumnFilterInstance(e))??Promise.resolve(void 0)}warnAdvFilters(){be(68)}setupAdvFilterHeaderComp(e){var t;(t=this.advancedFilter)==null||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advFilterModelUpdateQueue.forEach(e=>this.setAdvFilterModel(e)),this.advFilterModelUpdateQueue=[]}getColumnFilterModel(e){var t;return(t=this.colFilter)==null?void 0:t.getColumnFilterModel(e)}setColumnFilterModel(e,t){var n;return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):((n=this.colFilter)==null?void 0:n.setColumnFilterModel(e,t))??Promise.resolve()}setColDefPropertiesForDataType(e,t,n){var s;(s=this.colFilter)==null||s.setColDefPropertiesForDataType(e,t,n)}},Dz=class extends he{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){var e;(e=this.hidePopup)==null||e.call(this)}showMenuAfterMouseEvent(e,t,n,s){this.showPopup(e,i=>{var r;(r=this.popupSvc)==null||r.positionPopupUnderMouseEvent({column:e,type:n,mouseEvent:t,ePopup:i})},n,t.target,Dn(this.gos),s)}showMenuAfterButtonClick(e,t,n,s){let i=-1,r="left";const a=Dn(this.gos);!a&&this.gos.get("enableRtl")&&(i=1,r="right");const u=a?void 0:4*i,h=a?void 0:4;this.showPopup(e,d=>{var g;(g=this.popupSvc)==null||g.positionPopupByComponent({type:n,eventSource:t,ePopup:d,nudgeX:u,nudgeY:h,alignSide:r,keepWithinBounds:!0,position:"under",column:e})},n,t,a,s)}showPopup(e,t,n,s,i,r){var T;const a=e?this.createBean(new n_(e,"COLUMN_MENU")):void 0;if(this.activeMenu=a,!(a!=null&&a.hasFilter())||!e){Bt(57);return}const u=document.createElement("div");Un(u,"presentation"),u.classList.add("ag-menu"),i||u.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(u,{keydown:A=>this.trapFocusWithin(A,u)}),u.appendChild(a==null?void 0:a.getGui());let h;const d=()=>a==null?void 0:a.afterGuiDetached(),g=ED(this.gos)?s??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,m=A=>{bp(e,!1,"contextMenu");const O=A instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),O&&s&&Ss(s)){const V=Yw(s);V==null||V.focus({preventScroll:!0})}d(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,n,e),r==null||r()},v=this.getLocaleTextFunc(),w=i&&n!=="columnFilter"?v("ariaLabelColumnMenu","Column Menu"):v("ariaLabelColumnFilter","Column Filter"),S=(T=this.popupSvc)==null?void 0:T.addPopup({modal:!0,eChild:u,closeOnEsc:!0,closedCallback:m,positionCallback:()=>t(u),anchorToElement:g,ariaLabel:w});S&&(this.hidePopup=h=S.hideFunc),a.afterInit().then(()=>{t(u),a.afterGuiAttached({container:n,hidePopup:h})}),bp(e,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,n,e)}trapFocusWithin(e,t){e.key!==J.TAB||e.defaultPrevented||_r(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),qs(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,n){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:n??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},_z=class extends he{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(e,t){if(!t)return;const n=e.getColDef(),{filterValueGetter:s}=n;return s?this.executeFilterValueGetter(s,t.data,e,t,n):this.beans.valueSvc.getValue(e,t)}executeFilterValueGetter(e,t,n,s,i){const{expressionSvc:r,valueSvc:a}=this.beans,u=ke(this.gos,{data:t,node:s,column:n,colDef:i,getValue:a.getValueCallback.bind(a,s)});return typeof e=="function"?e(u):r==null?void 0:r.evaluate(e,u)}},rI=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}mapCustomOptions(){const{filterOptions:e}=this;e&&e.forEach(t=>{if(typeof t=="string")return;const n=[["displayKey"],["displayName"],["predicate","test"]],s=i=>i.some(r=>t[r]!=null)?!0:(be(72,{keys:i}),!1);if(!n.every(s)){this.filterOptions=e.filter(i=>i===t)||[];return}this.customFilterOptions[t.displayKey]=t})}selectDefaultItem(e){const{filterOptions:t}=this;if(e.defaultOption)this.defaultOption=e.defaultOption;else if(t.length>=1){const n=t[0];typeof n=="string"?this.defaultOption=n:n.displayKey?this.defaultOption=n.displayKey:be(73)}else be(74)}getCustomOption(e){return this.customFilterOptions[e]}};function LT(e,t,n){return n==null?e.splice(t):e.splice(t,n)}function OT(e){return e==null||typeof e=="string"&&e.trim().length===0}function Iz(e){return e==="AND"||e==="OR"?e:"AND"}function Mz(e,t,n){if(e==null)return;const{predicate:s}=e;if(s!=null&&!t.some(i=>i==null))return s(t,n)}function Fz(e,t){let n=e.length;return n>t&&(e.splice(t),be(78),n=t),n}var Pz=class extends kN{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const t=this.optionsFactory.getCustomOption(e);if(t){const{numberOfInputs:s}=t;return s??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,n)=>{const s=n===0?e:this.optionsFactory.defaultOption;t.setValue(s,!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){const{eJoinOperatorsOr:e,defaultJoinOperator:t}=this;return e.length===0?t:e[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;const n=!e.operator,s=!t.operator;if(!n&&s||n&&!s)return!1;let r;if(n){const a=e,u=t;r=this.areSimpleModelsEqual(a,u)}else{const a=e,u=t;r=a.operator===u.operator&&Fd(a.conditions,u.conditions,(h,d)=>this.areSimpleModelsEqual(h,d))}return r}shouldRefresh(e){var r;const t=this.getModel(),n=t?t.conditions??[t]:null,s=((r=e.filterOptions)==null?void 0:r.map(a=>typeof a=="string"?a:a.displayKey))??this.getDefaultFilterOptions();return!(!(!n||n.every(a=>s.find(u=>u===a.type)!==void 0))||typeof e.maxNumConditions=="number"&&n&&n.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){const n=e;let s=n.conditions;s==null&&(s=[],be(77));const i=Fz(s,this.maxNumConditions),r=this.getNumConditions();if(i<r)this.removeConditionsAndOperators(i);else if(i>r)for(let u=r;u<i;u++)this.createJoinOperatorPanel(),this.createOption();const a=n.operator==="OR";this.eJoinOperatorsAnd.forEach(u=>u.setValue(!a,!0)),this.eJoinOperatorsOr.forEach(u=>u.setValue(a,!0)),s.forEach((u,h)=>{this.eTypes[h].setValue(u.type,!0),this.setConditionIntoUi(u,h)})}else{const n=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(n.type,!0),this.setConditionIntoUi(n,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),ht.resolve()}doesFilterPass(e){const t=this.getModel();if(t==null)return!0;const{operator:n}=t,s=[];if(n){const r=t;s.push(...r.conditions??[])}else s.push(t);return s[n&&n==="OR"?"some":"every"](r=>this.individualConditionPasses(e,r))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=Iz(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new rI,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){let t=e.maxNumConditions??2;t<1&&(be(79),t=1),this.maxNumConditions=t;let n=e.numAlwaysVisibleConditions??1;n<1&&(be(80),n=1),n>t&&(be(81),n=t),this.numAlwaysVisibleConditions=n}createOption(){const e=this.createManagedBean(new GV);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);const n=this.getNumConditions()-1;this.forEachPositionInput(n,s=>this.resetInput(s)),this.addChangedListeners(e,n)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),n=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const s=this.eJoinOperatorPanels.length-1,i=this.joinOperatorId++;this.resetJoinOperatorAnd(t,s,i),this.resetJoinOperatorOr(n,s,i),this.isReadOnly()||(t.onValueChange(this.listener),n.onValueChange(this.listener))}createJoinOperator(e,t,n){const s=this.createManagedBean(new PV);e.push(s);const i="ag-filter-condition-operator";return s.addCssClass(i),s.addCssClass(`${i}-${n}`),t.appendChild(s.getGui()),s}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map(e=>typeof e=="string"?this.createBoilerplateListOption(e):this.createCustomListOption(e))}putOptionsIntoDropdown(e){const{filterListOptions:t}=this;t.forEach(n=>{e.addOption(n)}),e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,n=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:n?this.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)?e=n:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const n=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<n){this.removeConditionsAndOperators(n+1);const s=e+1,i=n-s;i>0&&this.removeConditionsAndOperators(s,i),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((s,i)=>{const r=this.isConditionDisabled(i,e);s.setDisabled(r||this.filterListOptions.length<=1),i===1&&(id(this.eJoinOperatorPanels[0],r),this.eJoinOperatorsAnd[0].setDisabled(r),this.eJoinOperatorsOr[0].setDisabled(r))}),this.eConditionBodies.forEach((s,i)=>{ot(s,this.isConditionBodyVisible(i))});const n=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(s=>{s.setValue(!n,!0)}),this.eJoinOperatorsOr.forEach(s=>{s.setValue(n,!0)}),this.forEachInput((s,i,r,a)=>{this.setElementDisplayed(s,i<a),this.setElementDisabled(s,this.isConditionDisabled(r,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;const{eTypes:n,eConditionBodies:s,eJoinOperatorPanels:i,eJoinOperatorsAnd:r,eJoinOperatorsOr:a}=this;this.removeComponents(n,e,t),this.removeElements(s,e,t),this.removeValueElements(e,t);const u=Math.max(e-1,0);this.removeElements(i,u,t),this.removeComponents(r,u,t),this.removeComponents(a,u,t)}removeElements(e,t,n){LT(e,t,n).forEach(i=>rl(i))}removeComponents(e,t,n){LT(e,t,n).forEach(i=>{rl(i.getGui()),this.destroyBean(i)})}afterGuiAttached(e){var t;if(super.afterGuiAttached(e),this.resetPlaceholder(),!(e!=null&&e.suppressFocus)){const{eFilterBody:n,eTypes:s}=this;let i;if(!this.isReadOnly()){const r=this.getInputs(0)[0];r instanceof xu&&this.isConditionBodyVisible(0)?i=r.getInputElement():i=(t=s[0])==null?void 0:t.getFocusableElement()}(i??n).focus({preventScroll:!0})}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let t=-1,n=-1,s=!1;const i=this.getJoinOperator();for(let a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))t===-1&&(t=a,n=a);else{const u=a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1),h=a<t;(u||h)&&(this.removeConditionsAndOperators(a,1),s=!0,h&&n--)}let r=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),r=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),r=!0),r&&this.updateConditionStatusesAndValues(n,i),s&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n}getPlaceholderText(e,t){let n=this.translate(e);if(typeof this.filterPlaceholder=="function"){const s=this.eTypes[t].getValue(),i=this.translate(s);n=this.filterPlaceholder({filterOptionKey:s,filterOption:i,placeholder:n})}else typeof this.filterPlaceholder=="string"&&(n=this.filterPlaceholder);return n}resetPlaceholder(){const e=this.getLocaleTextFunc();this.forEachInput((t,n,s,i)=>{if(!(t instanceof xu))return;const r=n===0&&i>1?"inRangeStart":n===0?"filterOoo":"inRangeEnd",a=n===0&&i>1?e("ariaFilterFromValue","Filter from value"):n===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(r,s)),t.setInputAriaLabel(a)})}setElementValue(e,t,n){e instanceof xu&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof vt&&ot(e.getGui(),t)}setElementDisabled(e,t){e instanceof vt&&id(e.getGui(),t)}attachElementOnChange(e,t){e instanceof xu&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,n)=>{this.forEachPositionTypeInput(n,t,e)})}forEachPositionInput(e,t){const n=this.getConditionType(e);this.forEachPositionTypeInput(e,n,t)}forEachPositionTypeInput(e,t,n){const s=this.getNumberOfInputs(t),i=this.getInputs(e);for(let r=0;r<i.length;r++){const a=i[r];a!=null&&n(a,r,e,s)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(n=>n==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinOperatorsAnd.forEach((t,n)=>this.resetJoinOperatorAnd(t,n,this.joinOperatorId+n)),this.eJoinOperatorsOr.forEach((t,n)=>this.resetJoinOperatorOr(t,n,this.joinOperatorId+n)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),ht.resolve()}resetType(e){const n=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(n).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,n){this.resetJoinOperator(e,t,this.defaultJoinOperator==="AND",this.translate("andCondition"),n)}resetJoinOperatorOr(e,t,n){this.resetJoinOperator(e,t,this.defaultJoinOperator==="OR",this.translate("orCondition"),n)}resetJoinOperator(e,t,n,s,i){this.updateJoinOperatorDisabled(e.setValue(n,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${i}`).setLabel(s),t)}updateJoinOperatorsDisabled(){const e=(t,n)=>this.updateJoinOperatorDisabled(t,n);this.eJoinOperatorsAnd.forEach(e),this.eJoinOperatorsOr.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const n=this.mapValuesFromModel(e);this.forEachInput((s,i,r)=>{r===t&&this.setElementValue(s,n[i]!=null?n[i]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,n,s)=>{this.setElementValue(t,n===0&&s===0?e:null,!0)})}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,n=>{this.attachElementOnChange(n,this.listener)}))}individualConditionPasses(e,t){const n=this.getCellValue(e.node),s=this.mapValuesFromModel(t),i=this.optionsFactory.getCustomOption(t.type),r=Mz(i,s,n);return r??(n==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(s,n,t,e))}hasInvalidInputs(){return!1}},Lz=class{constructor(e,t,n){this.getLocaleTextFunc=e,this.optionsFactory=t,this.valueFormatter=n}getModelAsString(e){if(!e)return null;const t=e.operator!=null,n=this.getLocaleTextFunc();if(t){const s=e,r=(s.conditions??[]).map(u=>this.getModelAsString(u)),a=s.operator==="AND"?"andCondition":"orCondition";return r.join(` ${n(a,r_[a])} `)}else{if(e.type==="blank"||e.type==="notBlank")return n(e.type,e.type);{const s=e,i=this.optionsFactory.getCustomOption(s.type),{displayKey:r,displayName:a,numberOfInputs:u}=i||{};return r&&a&&u===0?(n(r,a),a):this.conditionToString(s,i)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){const t=this.valueFormatter;return t?t(e??null)??"":String(e)}},Oz=class extends vt{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.defaultOption;return}const t=e.operator;let n;t?n=e.conditions[0]:n=e,this.lastType=n.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const n=e;return this.isTypeEditable(n.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){const n=new rI;this.optionsFactory=n,n.init(e.filterParams,this.getDefaultOptions());const s=n.defaultOption;t||(this.lastType=s),this.readOnly=!!e.filterParams.readOnly;const i=this.isTypeEditable(s);this.setEditable(i)}refresh(e){this.setSimpleParams(e)}hasSingleInput(e){var n;const t=(n=this.optionsFactory.getCustomOption(e))==null?void 0:n.numberOfInputs;return t==null||t==1}isTypeEditable(e){const t=["inRange","empty","blank","notBlank"];return!!e&&!this.readOnly&&this.hasSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){return`${this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0)} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}},kz=class extends he{constructor(e){super(),this.params=e,this.eInput=Me,this.onValueChanged=()=>{}}setupGui(e){var s;this.eInput=this.createManagedBean(new rb((s=this.params)==null?void 0:s.config));const t=this.eInput.getGui();e.appendChild(t);const n=i=>this.onValueChanged(i);this.addManagedListeners(t,{input:n,keydown:n})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams({ariaLabel:e,autoComplete:t}){const{eInput:n}=this;n.setInputAriaLabel(e),t!==void 0&&n.setAutoComplete(t)}};function oI(e){const t=e==null?void 0:e.trim();return t===""?e:t}var Nz=class extends Oz{constructor(){super(...arguments),this.eFloatingFilterInputContainer=Me,this.defaultDebounceMs=500}postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>
        `)}onParentModelChanged(e,t){t!=null&&t.afterFloatingFilter||t!=null&&t.afterDataChange||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;const t=e.browserAutoComplete??!1,{inputSvc:n,defaultDebounceMs:s,readOnly:i}=this;if(n.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=wp(e.filterParams),!i){const r=o_(e.filterParams,s),a=fr(this,this.syncUpWithParentFilter.bind(this),r);n.setValueChangedListener(a)}}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const{inputSvc:t}=this,n=t.getValue();Hi(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(n,!0)}syncUpWithParentFilter(e){const t=e.key===J.ENTER;if(this.applyActive&&!t)return;const{inputSvc:n,params:s}=this;let i=n.getValue();s.filterParams.trimInput&&(i=oI(i),n.setValue(i,!0)),s.parentFilterInstance(r=>{r==null||r.onFloatingFilterChanged(this.lastType||null,i||null)})}setEditable(e){this.inputSvc.setEditable(e)}},aI=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],lI=class extends Lz{conditionToString(e,t){const{numberOfInputs:n}=t||{},{filter:s,filterTo:i,type:r}=e;return r=="inRange"||n===2?`${s}-${i}`:s!=null?`${s}`:`${r}`}},Vz=class extends Pz{constructor(){super("textFilter"),this.filterType="text",this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>e==null?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:t,filterText:n})=>{if(n==null)return!1;switch(e){case"contains":return t.indexOf(n)>=0;case"notContains":return t.indexOf(n)<0;case"equals":return t===n;case"notEqual":return t!=n;case"startsWith":return t.indexOf(n)===0;case"endsWith":{const s=t.lastIndexOf(n);return s>=0&&s===t.length-n.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=e.textMatcher||this.defaultMatcher,this.formatter=e.textFormatter||(e.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new lI(this.getLocaleTextFunc.bind(this),this.optionsFactory)}createCondition(e){const t=this.getConditionType(e),n={filterType:this.filterType,type:t},s=this.getValuesWithSideEffects(e,!0);return s.length>0&&(n.filter=s[0]),s.length>1&&(n.filterTo=s[1]),n}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){const{eValuesFrom:t,eValuesTo:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const n=[];return this.forEachPositionInput(e,(s,i,r,a)=>{if(i<a){let u=Mo(s.getValue());t&&this.textFilterParams.trimInput&&(u=oI(u)??null,s.setValue(u,!0)),n.push(u)}}),n}getDefaultFilterOptions(){return aI}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),Un(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,n){const s=this.createManagedBean(new rb);s.addCssClass(`ag-filter-${n}`),s.addCssClass("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeValueElements(e,t){const n=s=>this.removeComponents(s,e,t);n(this.eValuesFrom),n(this.eValuesTo)}mapValuesFromModel(e){const{filter:t,filterTo:n,type:s}=e||{};return[t||null,n||null].slice(0,this.getNumberOfInputs(s))}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,n,s){const i=e.map(v=>this.formatter(v))||[],r=this.formatter(t),{api:a,colDef:u,column:h,context:d,textFormatter:g}=this.textFilterParams;if(n.type==="blank")return OT(t);if(n.type==="notBlank")return!OT(t);const m={api:a,colDef:u,column:h,context:d,node:s.node,data:s.data,filterOption:n.type,value:r,textFormatter:g};return i.some(v=>this.matcher({...m,filterText:v}))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}},Bz=class extends Nz{init(e){super.init(e),this.filterModelFormatter=new lI(this.getLocaleTextFunc.bind(this),this.optionsFactory)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultOptions(){return aI}createFloatingFilterInputService(){return this.createManagedBean(new kz)}},Gz={moduleName:"ClientSideRowModelFilter",version:Je,rowModels:["clientSide"],beans:[az]},Hz={moduleName:"FilterCore",version:Je,beans:[xz],apiFunctions:{isAnyFilterPresent:Tz,onFilterChanged:Az},css:[gz],dependsOn:[Gz]},zz={moduleName:"FilterValue",version:Je,beans:[_z]},Uz={moduleName:"ColumnFilter",version:Je,beans:[Rz,Dz],dynamicBeans:{headerFilterCellCtrl:lz},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:pz,getColumnFilterInstance:mz,destroyFilter:Cz,setFilterModel:vz,getFilterModel:yz,getColumnFilterModel:wz,setColumnFilterModel:bz,showColumnFilter:Sz},dependsOn:[Hz,iI,zz,sI]},Wz={moduleName:"TextFilter",version:Je,dependsOn:[Uz],userComponents:{agTextColumnFilter:Vz,agTextColumnFloatingFilter:Bz}},jz=class extends FV{constructor(){super(...arguments),this.beanName="csrmNodeSvc"}},fy=class{constructor(){this.removals=new Set,this.updates=new Set,this.adds=new Set}remove(e){this.adds.delete(e)||(this.updates.delete(e),this.removals.add(e))}update(e){this.adds.has(e)||this.updates.add(e)}add(e){this.adds.add(e)}};function qz(e){if($t(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let n=0;n<t.length;n++){const s=t[n],i=n===0,r=n===e.childrenAfterSort.length-1;s.setFirstChild(i),s.lastChild!==r&&(s.lastChild=r,s.dispatchRowEvent("lastChildChanged")),s.childIndex!==n&&(s.childIndex=n,s.dispatchRowEvent("childIndexChanged"))}}function uI(e){e.sibling&&(e.sibling.childrenAfterSort=e.childrenAfterSort),qz(e)}var $z=class extends he{constructor(){super(...arguments),this.beanName="sortStage",this.refreshProps=new Set(["postSortRows","groupDisplayType","accentedSort"]),this.step="sort"}execute(e){const t=this.beans,n=t.sortSvc.getSortOptions(),s=Le(n)&&n.length>0,i=s&&!!e.changedRowNodes&&this.gos.get("deltaSort"),r=n.some(({column:a})=>Di(t.gos)?a.isPrimary()&&a.isRowGroupActive():!!a.getColDef().showRowGroup);this.sort(t,n,s,i,e.changedRowNodes,e.changedPath,r)}sort(e,t,n,s,i,r,a){const{gos:u,colModel:h,rowGroupColsSvc:d,groupHideOpenParentsSvc:g,rowNodeSorter:m}=e,v=u.get("groupMaintainOrder"),w=h.getCols().some(O=>O.isRowGroupActive()),S=h.isPivotMode(),T=u.getCallback("postSortRows"),A=O=>{var U;g==null||g.pullDownGroupDataForHideOpenParents(O.childrenAfterAggFilter,!0);const V=S&&O.leafGroup,H=v&&w&&!O.leafGroup&&!a;let z;if(H){const K=(U=d==null?void 0:d.columns)==null?void 0:U[O.level+1],k=(K==null?void 0:K.getSort())===null,D=O.childrenAfterAggFilter.slice(0);if(O.childrenAfterSort&&!k){const x={};O.childrenAfterSort.forEach((L,M)=>{x[L.id]=M}),D.sort((L,M)=>(x[L.id]??0)-(x[M.id]??0))}z=D}else!n||V?z=O.childrenAfterAggFilter.slice(0):s&&i?z=Kz(m,O,i,r,t):z=m.doFullSort(O.childrenAfterAggFilter,t);if(O.childrenAfterSort=z,uI(O),T){const K={nodes:O.childrenAfterSort};T(K)}};r==null||r.forEachChangedNodeDepthFirst(A)}};function Kz(e,t,n,s,i){const r=t.childrenAfterAggFilter,a=t.childrenAfterSort;if(!a)return e.doFullSort(r,i);const u=new Set,h=[],{updates:d,adds:g}=n;for(let v=0,w=r.length;v<w;++v){const S=r[v];d.has(S)||g.has(S)||s&&!s.canSkip(S)?h.push({currentPos:h.length,rowNode:S}):u.add(S.id)}const m=a.filter(v=>u.has(v.id)).map((v,w)=>({currentPos:w,rowNode:v}));return h.sort((v,w)=>e.compareRowNodes(i,v,w)),Yz(e,i,h,m)}function Yz(e,t,n,s){const i=[];let r=0,a=0;const u=n.length,h=s.length;for(;r<u&&a<h;){const d=n[r],g=s[a],m=e.compareRowNodes(t,d,g);let v;m<0?(v=d,++r):(v=g,++a),i.push(v.rowNode)}for(;r<u;)i.push(n[r++].rowNode);for(;a<h;)i.push(s[a++].rowNode);return i}var Qz=class extends he{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowsToDisplay=[],this.started=!1,this.isRefreshingModel=!1,this.rowNodesCountReady=!1,this.rowCountReady=!1,this.onRowHeightChanged_debounced=fr(this,this.onRowHeightChanged.bind(this),100)}wireBeans(e){this.colModel=e.colModel,this.valueCache=e.valueCache,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggStage=e.aggStage,this.pivotStage=e.pivotStage,this.filterAggStage=e.filterAggStage}postConstruct(){this.orderedStages=[this.groupStage,this.filterStage,this.pivotStage,this.aggStage,this.sortStage,this.filterAggStage,this.flattenStage].filter(s=>!!s);const e=this.refreshModel.bind(this,{step:"group"}),t=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")});this.addManagedEventListeners({newColumnsLoaded:t,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new t_(this.beans);const n=this.getNewNodeManager();this.nodeManager=n,n.activate(this.rootNode)}getNewNodeManager(){const{gos:e,beans:t}=this;let n;return e.get("treeData")&&(e.get("treeDataChildrenField")?n=t.csrmChildrenTreeNodeSvc:n=t.csrmPathTreeNodeSvc),n??t.csrmNodeSvc}addPropertyListeners(){const e=["treeData","treeDataChildrenField",...this.orderedStages.flatMap(({refreshProps:t})=>[...t])];this.addManagedPropertyListeners(e,t=>{var s;const n=(s=t.changeSet)==null?void 0:s.properties;n&&this.onPropChange(n)}),this.addManagedPropertyListener("rowData",()=>this.onPropChange(["rowData"])),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(e,t,n,s){let i,r=!1;do{i=!1;const a=this.getRowIndexAtPixel(e),u=this.getRowIndexAtPixel(t),h=Math.max(a,n),d=Math.min(u,s);for(let g=h;g<=d;g++){const m=this.getRow(g);if(m.rowHeightEstimated){const v=Vy(this.beans,m);m.setRowHeight(v.height),i=!0,r=!0}}i&&this.setRowTopAndRowIndex()}while(i);return r}onPropChange(e){var g;if(!this.rootNode)return;const t=this.gos,n=new Set(e),s={step:"nothing",changedProps:n},i=n.has("rowData"),r=n.has("treeData"),a=this.nodeManager,u=this.getNewNodeManager(),h=a!==u||n.has("treeDataChildrenField")&&t.get("treeData");let d;if(r&&(s.step="group"),(h||i)&&(d=t.get("rowData"),d!=null&&!Array.isArray(d)&&(d=null,be(1))),h&&(i||(d=(a==null?void 0:a.extractRowData())??d),a!==u&&(a==null||a.deactivate(),this.nodeManager=u),u.activate(this.rootNode)),d&&(!h&&!this.isEmpty()&&d.length>0&&t.exists("getRowId")&&!t.get("resetRowDataOnUpdate")?(s.keepRenderedRows=!0,s.animate=!this.gos.get("suppressAnimationFrame"),s.changedRowNodes=new fy,u.setImmutableRowData(s,d)):(s.rowDataUpdated=!0,s.newData=!0,(g=this.beans.selectionSvc)==null||g.reset("rowDataChanged"),this.rowNodesCountReady=!0,u.setNewRowData(d))),s.rowDataUpdated)s.step="group";else if(s.step==="nothing"){for(const{refreshProps:m,step:v}of this.orderedStages)if(e.some(w=>m.has(w))){s.step=v;break}}s.step!=="nothing"&&this.refreshModel(s)}setRowTopAndRowIndex(){const{beans:e}=this,t=e.environment.getDefaultRowHeight();let n=0;const s=new Set,i=Wn(this.gos,"normal"),r=this.rowsToDisplay;for(let a=0,u=r.length;a<u;++a){const h=r[a];if(h.id!=null&&s.add(h.id),h.rowHeight==null){const d=Vy(e,h,i,t);h.setRowHeight(d.height,d.estimated)}h.setRowTop(n),h.setRowIndex(a),n+=h.rowHeight}return s}clearRowTopAndRowIndex(e,t){const n=e.active,s=r=>{r&&r.id!=null&&!t.has(r.id)&&r.clearRowTopAndRowIndex()},i=r=>{if(r!==null&&(s(r),s(r.detailNode),s(r.sibling),r.hasChildren()&&r.childrenAfterGroup)){const a=r.level==-1;n&&!a&&!r.expanded||r.childrenAfterGroup.forEach(i)}};i(this.rootNode)}ensureRowsAtPixel(e,t,n=0){var u;const s=this.getRowIndexAtPixel(t),i=this.getRow(s),r=!this.gos.get("suppressAnimationFrame");if(i===e[0])return!1;const a=(u=this.rootNode)==null?void 0:u.allLeafChildren;return a?(e.forEach(h=>{wr(a,h)}),e.forEach((h,d)=>{a.splice(Math.max(s+n,0)+d,0,h)}),e.forEach((h,d)=>{h.sourceRowIndex=d}),this.refreshModel({step:"group",keepRenderedRows:!0,animate:r,rowNodesOrderChanged:!0}),!0):!1}highlightRowAtPixel(e,t){const n=t!=null?this.getRowIndexAtPixel(t):null,s=n!=null?this.getRow(n):null;if(!s||!e||t==null){this.clearHighlightedRow();return}const i=this.getHighlightPosition(t,s),r=this.isHighlightingCurrentPosition(e,s,i),a=this.lastHighlightedRow!=null&&this.lastHighlightedRow!==s;(r||a)&&(this.clearHighlightedRow(),r)||(this.setRowNodeHighlighted(s,i),this.lastHighlightedRow=s)}setRowNodeHighlighted(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchRowEvent("rowHighlightChanged"))}getHighlightPosition(e,t){if(!t){const i=this.getRowIndexAtPixel(e);if(t=this.getRow(i||0),!t)return"Below"}const{rowTop:n,rowHeight:s}=t;return e-n<s/2?"Above":"Below"}getLastHighlightedRowNode(){return this.lastHighlightedRow}isHighlightingCurrentPosition(e,t,n){if(e===t)return!0;const s=n==="Above"?-1:1;return this.getRow(t.rowIndex+s)===e}clearHighlightedRow(){this.lastHighlightedRow&&(this.setRowNodeHighlighted(this.lastHighlightedRow,null),this.lastHighlightedRow=null)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){const e=this.rootNode;if(!e||this.rowsToDisplay.length===0)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===e)return 1;const n=e.childrenAfterAggFilter,s=e.sibling?1:0;return(n?n.length:0)+s}getTopLevelRowDisplayedIndex(e){const{rootNode:t,rowsToDisplay:n}=this;if(!t||!n.length||n[0]===t)return e;const{childrenAfterSort:i}=t,r=u=>{let h=i[u];if(this.gos.get("groupHideOpenParents"))for(;h.expanded&&h.childrenAfterSort&&h.childrenAfterSort.length>0;)h=h.childrenAfterSort[0];return h.rowIndex},{footerSvc:a}=this.beans;return a?a.getTopDisplayIndex(n,e,i,r):r(e)}getRowBounds(e){const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=Fu(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=Fu(this.gos),s=e.columns.length===0||e.columns.some(i=>i.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:s,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=Fu(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){const t=new K_(!1,this.rootNode);return e||(t.active=!1),t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;const{changedRowNodes:t,newData:n,rowDataUpdated:s}=e;return!(!t||n||!s||t.removals.size||t.adds.size)}refreshModel(e){var s,i;if(!this.rootNode)return;const t=e.changedPath??(e.changedPath=this.createChangePath(!e.newData&&!!e.rowDataUpdated));if((i=(s=this.nodeManager).refreshModel)==null||i.call(s,e,this.started),this.eventSvc.dispatchEvent({type:"beforeRefreshModel",params:e}),!this.started||(e.rowDataUpdated&&this.eventSvc.dispatchEvent({type:"rowDataUpdated"}),this.isRefreshingModel||this.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e)))return;switch(this.isRefreshingModel=!0,e.step){case"group":this.doRowGrouping(e.changedRowNodes,t,!!e.rowNodesOrderChanged,!!e.afterColumnsChanged);case"filter":this.doFilter(t);case"pivot":this.doPivot(t);case"aggregate":this.doAggregate(t);case"filter_aggregates":this.doFilterAggregates(t);case"sort":this.doSort(e.changedRowNodes,t);case"map":this.doRowsToDisplay()}const n=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(t,n),this.isRefreshingModel=!1,this.eventSvc.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){var e,t,n;return!((t=(e=this.rootNode)==null?void 0:e.allLeafChildren)!=null&&t.length)||!((n=this.colModel)!=null&&n.ready)}isRowsToRender(){return this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let n=!1,s=!1;const i=[],r=DO(this.gos);return this.forEachNodeAfterFilterAndSort(a=>{if(s)return;if(n&&(a===t||a===e)&&(s=!0,a.group&&r)){i.push(...a.allLeafChildren);return}if(!n){if(a!==t&&a!==e)return;n=!0}if(!a.group||!r){i.push(a);return}}),i}getTopLevelNodes(){var e;return((e=this.rootNode)==null?void 0:e.childrenAfterGroup)??null}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){const t=this.rowsToDisplay;if(this.isEmpty()||t.length===0)return-1;let n=0,s=t.length-1;if(e<=0)return 0;if(at(t).rowTop<=e)return t.length-1;let r=-1,a=-1;for(;;){const u=Math.floor((n+s)/2),h=t[u];if(this.isRowInPixel(h,e)||(h.rowTop<e?n=u+1:h.rowTop>e&&(s=u-1),r===n&&a===s))return u;r=n,a=s}}isRowInPixel(e,t){const n=e.rowTop,s=e.rowTop+e.rowHeight;return n<=t&&s>t}forEachLeafNode(e){var t,n;(n=(t=this.rootNode)==null?void 0:t.allLeafChildren)==null||n.forEach((s,i)=>e(s,i))}forEachNode(e,t=!1){this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){this.rowsToDisplay.forEach(e)}forEachNodeAfterFilter(e,t=!1){this.depthFirstSearchRowNodes(e,t,n=>n.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(e,t=!1){this.depthFirstSearchRowNodes(e,t,n=>n.childrenAfterSort)}forEachPivotNode(e,t=!1,n=!1){const s=n?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(e,t,i=>i.leafGroup?null:i[s])}depthFirstSearchRowNodes(e,t=!1,n=r=>r.childrenAfterGroup,s=this.rootNode,i=0){let r=i;if(!s)return r;const a=s===this.rootNode;a||e(s,r++);const{footerSvc:u}=this.beans;if(s.hasChildren()&&!s.footer){const h=n(s);if(h){r=(u==null?void 0:u.addTotalRows(r,s,e,t,a,"top"))??r;for(const d of h)r=this.depthFirstSearchRowNodes(e,t,n,d,r);return(u==null?void 0:u.addTotalRows(r,s,e,t,a,"bottom"))??r}}return r}doAggregate(e){var n;const t=this.rootNode;t&&((n=this.aggStage)==null||n.execute({rowNode:t,changedPath:e}))}doFilterAggregates(e){const t=this.rootNode;this.filterAggStage?this.filterAggStage.execute({rowNode:t,changedPath:e}):t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){const{groupHideOpenParentsSvc:n}=this.beans;this.sortStage?this.sortStage.execute({rowNode:this.rootNode,changedRowNodes:e,changedPath:t}):t.forEachChangedNodeDepthFirst(s=>{n==null||n.pullDownGroupDataForHideOpenParents(s.childrenAfterAggFilter,!0),s.childrenAfterSort=s.childrenAfterAggFilter.slice(0),uI(s)}),n==null||n.updateGroupDataForHideOpenParents(t)}doRowGrouping(e,t,n,s){const i=this.nodeManager.treeData,r=this.rootNode;if(!i){const a=this.groupStage;if(a)a.execute({rowNode:r,changedPath:t,changedRowNodes:e,rowNodesOrderChanged:n,afterColumnsChanged:s});else{const u=r.sibling;r.childrenAfterGroup=r.allLeafChildren,u&&(u.childrenAfterGroup=r.childrenAfterGroup),r.updateHasChildren()}}this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage?this.filterStage.execute({rowNode:this.rootNode,changedPath:e}):e.forEachChangedNodeDepthFirst(t=>{t.childrenAfterFilter=t.childrenAfterGroup,nI(t)},!0)}doPivot(e){var t;(t=this.pivotStage)==null||t.execute({rowNode:this.rootNode,changedPath:e})}getRowNode(e){if(typeof e=="string"&&e.indexOf($y)==0){let n;return this.forEachNode(s=>{s.id===e&&(n=s)}),n}return this.nodeManager.getRowNode(e)}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const n=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},n)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){var i,r;(i=this.valueCache)==null||i.onDataChanged();const e=[],t=[],n=new fy;let s=!1;(r=this.rowDataTransactionBatch)==null||r.forEach(a=>{this.rowNodesCountReady=!0;const{rowNodeTransaction:u,rowsInserted:h}=this.nodeManager.updateRowData(a.rowDataTransaction,n);h&&(s=!0),t.push(u),a.callback&&e.push(a.callback.bind(null,u))}),this.commitTransactions(s,n),e.length>0&&window.setTimeout(()=>{e.forEach(a=>a())},0),t.length>0&&this.eventSvc.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){var i;(i=this.valueCache)==null||i.onDataChanged(),this.rowNodesCountReady=!0;const t=new fy,{rowNodeTransaction:n,rowsInserted:s}=this.nodeManager.updateRowData(e,t);return this.commitTransactions(s,t),n}commitTransactions(e,t){this.refreshModel({step:"group",rowDataUpdated:!0,rowNodesOrderChanged:e,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedRowNodes:t,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){const{flattenStage:e,rootNode:t}=this;let n;if(e)n=e.execute({rowNode:t});else{n=(t==null?void 0:t.childrenAfterSort)??[];for(const s of n)s.setUiLevel(0)}this.rowsToDisplay=n}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){const e=this.rootNode;if(!e)return;const t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const n=t.detailNode;n&&n.setRowHeight(n.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){var t;if(e.rowHeightChanged){if((t=this.beans.rowAutoHeight)!=null&&t.active)return;this.resetRowHeights()}}onGridReady(){this.started||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.clearHighlightedRow(),this.started=!1,this.rootNode=null,this.nodeManager=null,this.rowDataTransactionBatch=null,this.lastHighlightedRow=null,this.orderedStages=Uy,this.rowsToDisplay=Uy}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}},Xz={moduleName:"ClientSideRowModel",version:Je,rowModels:["clientSide"],beans:[jz,Qz,$z],dependsOn:[$_]},Zz=class extends he{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e,t={}){const{allColumns:n,columnKeys:s,skipRowGroups:i,exportRowNumbers:r}=t,a=this.getColumnsToExport({allColumns:n,skipRowGroups:i,columnKeys:s,exportRowNumbers:r});return[this.prepareSession(a),this.prependContent(t),this.exportColumnGroups(t,a),this.exportHeaders(t,a),this.processPinnedTopRows(t,a),this.processRows(t,a),this.processPinnedBottomRows(t,a),this.appendContent(t)].reduce((u,h)=>h(u),e).parse()}processRow(e,t,n,s){var S;const i=t.shouldRowBeSkipped||(()=>!1),a=t.rowPositions!=null||!!t.onlySelected,u=this.gos.get("groupHideOpenParents")&&!a,h=this.colModel.isPivotMode()?s.leafGroup:!s.group,d=!!s.footer,g=s.allChildrenCount===1&&((S=s.childrenAfterGroup)==null?void 0:S.length)===1&&EO(this.gos,s);if(!h&&!d&&(t.skipRowGroups||g||u)||t.onlySelected&&!s.isSelected()||t.skipPinnedTop&&s.rowPinned==="top"||t.skipPinnedBottom&&s.rowPinned==="bottom"||s.level===-1&&!h&&!d||i(ke(this.gos,{node:s})))return;const w=e.onNewBodyRow(s);if(n.forEach((T,A)=>{w.onColumn(T,A,s)}),t.getCustomContentBelowRow){const T=t.getCustomContentBelowRow(ke(this.gos,{node:s}));T&&e.addCustomContent(T)}}appendContent(e){return t=>{const n=e.appendContent;return n&&t.addCustomContent(n),t}}prependContent(e){return t=>{const n=e.prependContent;return n&&t.addCustomContent(n),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return n=>{if(!e.skipColumnGroupHeaders){const s=new HD,{colGroupSvc:i}=this.beans,r=i?i.createColumnGroups({columns:t,idCreator:s,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(r,n,e.processGroupHeaderCallback)}return n}}exportHeaders(e,t){return n=>{if(!e.skipColumnHeaders){const s=n.onNewHeaderRow();t.forEach((i,r)=>{s.onColumn(i,r,void 0)})}return n}}processPinnedTopRows(e,t){return n=>{var i;const s=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(r=>r.rowPinned==="top").sort((r,a)=>r.rowIndex-a.rowIndex).map(r=>{var a;return(a=this.pinnedRowModel)==null?void 0:a.getPinnedTopRow(r.rowIndex)}).forEach(s):(i=this.pinnedRowModel)==null||i.forEachPinnedRow("top",s),n}}processRows(e,t){return n=>{var d;const s=this.rowModel,i=gc(this.gos),r=Md(this.gos),a=!i&&e.onlySelected,u=this.processRow.bind(this,n,e,t),{exportedRows:h="filteredAndSorted"}=e;if(e.rowPositions)return e.rowPositions.filter(g=>g.rowPinned==null).sort((g,m)=>g.rowIndex-m.rowIndex).map(g=>s.getRow(g.rowIndex)).forEach(u),n;if(this.colModel.isPivotMode())return i?s.forEachPivotNode(u,!0,h==="filteredAndSorted"):r?s.forEachNodeAfterFilterAndSort(u,!0):s.forEachNode(u),n;if(e.onlySelectedAllPages||a){const g=((d=this.beans.selectionSvc)==null?void 0:d.getSelectedNodes())??[];this.replicateSortedOrder(g),g.forEach(u)}else h==="all"?s.forEachNode(u):i||r?s.forEachNodeAfterFilterAndSort(u,!0):s.forEachNode(u);return n}}replicateSortedOrder(e){const{sortSvc:t,rowNodeSorter:n}=this.beans;if(!t||!n)return;const s=t.getSortOptions(),i=(r,a)=>{var u,h;return r.rowIndex!=null&&a.rowIndex!=null?r.rowIndex-a.rowIndex:r.level===a.level?((u=r.parent)==null?void 0:u.id)===((h=a.parent)==null?void 0:h.id)?n.compareRowNodes(s,{rowNode:r,currentPos:r.rowIndex??-1},{rowNode:a,currentPos:a.rowIndex??-1}):i(r.parent,a.parent):r.level>a.level?i(r.parent,a):i(r,a.parent)};e.sort(i)}processPinnedBottomRows(e,t){return n=>{var i;const s=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(r=>r.rowPinned==="bottom").sort((r,a)=>r.rowIndex-a.rowIndex).map(r=>{var a;return(a=this.pinnedRowModel)==null?void 0:a.getPinnedBottomRow(r.rowIndex)}).forEach(s):(i=this.pinnedRowModel)==null||i.forEachPinnedRow("bottom",s),n}}getColumnsToExport(e){const{allColumns:t=!1,skipRowGroups:n=!1,exportRowNumbers:s=!1,columnKeys:i}=e,{colModel:r,gos:a,visibleCols:u}=this,h=r.isPivotMode(),d=v=>Ww(v)?!1:!im(v)||s;if(i&&i.length)return r.getColsForKeys(i).filter(d);const g=a.get("treeData");let m=[];return t&&!h?m=r.getCols():m=u.allCols,m=m.filter(v=>d(v)&&(n&&!g?!FD(v):!0)),m}recursivelyAddHeaderGroups(e,t,n){const s=[];e.forEach(i=>{const r=i;r.getChildren&&r.getChildren().forEach(a=>s.push(a))}),e.length>0&&Vt(e[0])&&this.doAddHeaderHeader(t,e,n),s&&s.length>0&&this.recursivelyAddHeaderGroups(s,t,n)}doAddHeaderHeader(e,t,n){const s=e.onNewHeaderGroupingRow();let i=0;t.forEach(r=>{const a=r;let u;n?u=n(ke(this.gos,{columnGroup:a})):u=this.beans.colNames.getDisplayNameForColumnGroup(a,"header");const h=a.getLeafColumns().reduce((d,g,m,v)=>{let w=at(d);return g.getColumnGroupShow()==="open"?(!w||w[1]!=null)&&(w=[m],d.push(w)):w&&w[1]==null&&(w[1]=m-1),m===v.length-1&&w&&w[1]==null&&(w[1]=m),d},[]);s.onColumn(a,u||"",i++,a.getLeafColumns().length-1,h)})}},Jz={moduleName:"SharedExport",version:Je,beans:[Zz]},e4=class extends he{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const{column:e,cellComp:t}=this,n=e.colDef,s=n.cellClassRules,i=this.getCellClassParams(e,n);a_(this.beans.expressionSvc,s===this.cellClassRules?void 0:this.cellClassRules,s,i,r=>t.addOrRemoveCssClass(r,!0),r=>t.addOrRemoveCssClass(r,!1)),this.cellClassRules=s}applyUserStyles(){const e=this.column,t=e.colDef,n=t.cellStyle;if(!n)return;let s;if(typeof n=="function"){const i=this.getCellClassParams(e,t);s=n(i)}else s=n;s&&this.cellComp.setUserStyles(s)}applyClassesFromColDef(){const{column:e,cellComp:t}=this,n=e.colDef,s=this.getCellClassParams(e,n);this.staticClasses.forEach(r=>t.addOrRemoveCssClass(r,!1));const i=this.beans.cellStyles.getStaticCellClasses(n,s);this.staticClasses=i,i.forEach(r=>t.addOrRemoveCssClass(r,!0))}getCellClassParams(e,t){const{value:n,rowNode:s}=this.cellCtrl;return ke(this.beans.gos,{value:n,data:s.data,node:s,colDef:t,column:e,rowIndex:s.rowIndex})}},t4=class extends he{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,n,s){a_(this.beans.expressionSvc,void 0,e.cellClassRules,t,n,s),this.processStaticCellClasses(e,t,n)}getStaticCellClasses(e,t){const{cellClass:n}=e;if(!n)return[];let s;return typeof n=="function"?s=n(t):s=n,typeof s=="string"&&(s=[s]),s||[]}createCellCustomStyleFeature(e,t){return new e4(e,t)}processStaticCellClasses(e,t,n){this.getStaticCellClasses(e,t).forEach(i=>{n(i)})}},n4={moduleName:"CellStyle",version:Je,beans:[t4]},cb=jx();const s4=Wx(cb);var qn=me.createContext({}),kd=(e,t,n,s)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const r=e.newAgStackInstance();let a,u,h=!1;return r.then(d=>{if(h){t.destroyBean(d);return}a=d,u=a.getGui(),n.appendChild(u),kT(s,a)}),()=>{var d;h=!0,a&&((d=u==null?void 0:u.parentElement)==null||d.removeChild(u),t.destroyBean(a),s&&kT(s,void 0))}},kT=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const n=e;n.current=t}},zs=(...e)=>e.filter(n=>n!=null&&n!=="").join(" "),Us=class cI{constructor(...t){this.classesMap={},t.forEach(n=>{this.classesMap[n]=!0})}setClass(t,n){if(!!this.classesMap[t]==n)return this;const i=new cI;return i.classesMap={...this.classesMap},i.classesMap[t]=n,i}toString(){return Object.keys(this.classesMap).filter(n=>this.classesMap[n]).join(" ")}},vc=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,n=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===n()},Ux,tw=(Ux=me.version)==null?void 0:Ux.split(".")[0],i4=tw==="16"||tw==="17";function r4(){return tw==="19"}var qg=!1;function o4(e){return qg||setTimeout(()=>qg=!1,0),qg=!0,e()}var Ep=(e,t)=>{!i4&&e&&!qg?s4.flushSync(t):t()};function Rp(e,t,n){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(n||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const s=[],i=[],r=new Map,a=new Map;for(let u=0;u<t.length;u++){const h=t[u];a.set(h.instanceId,h)}for(let u=0;u<e.length;u++){const h=e[u];r.set(h.instanceId,h),a.has(h.instanceId)&&s.push(h)}for(let u=0;u<t.length;u++){const h=t[u],d=h.instanceId;r.has(d)||i.push(h)}return s.length===e.length&&i.length===0?e:s.length===0&&i.length===t.length?t:s.length===0?i:i.length===0?s:[...s,...i]}var hI=_.forwardRef((e,t)=>{var Ce;const{registry:n,context:s}=_.useContext(qn),i=_.useRef(null),r=_.useRef(null),a=_.useRef(null),u=_.useRef(null),h=_.useRef(null),d=_.useRef(),[g,m]=_.useState(),[v,w]=_.useState(),[S,T]=_.useState(),[A,O]=_.useState(()=>new Us),[V,H]=_.useState(()=>new Us("ag-hidden")),[z,U]=_.useState(()=>new Us("ag-hidden")),[K,k]=_.useState(()=>new Us("ag-invisible"));_.useImperativeHandle(t,()=>({refresh(){return!1}})),_.useLayoutEffect(()=>kd(g,s,r.current),[g]);const D=_.useCallback(re=>{if(i.current=re,!re){d.current=s.destroyBean(d.current);return}const Re={setInnerRenderer:(W,ee)=>{m(W),T(ee)},setChildCount:W=>w(W),addOrRemoveCssClass:(W,ee)=>O(oe=>oe.setClass(W,ee)),setContractedDisplayed:W=>U(ee=>ee.setClass("ag-hidden",!W)),setExpandedDisplayed:W=>H(ee=>ee.setClass("ag-hidden",!W)),setCheckboxVisible:W=>k(ee=>ee.setClass("ag-invisible",!W))},N=n.createDynamicBean("groupCellRendererCtrl",!0);N&&(d.current=s.createBean(N),d.current.init(Re,re,a.current,u.current,h.current,hI,e))},[]),x=_.useMemo(()=>`ag-cell-wrapper ${A.toString()}`,[A]),L=_.useMemo(()=>`ag-group-expanded ${V.toString()}`,[V]),M=_.useMemo(()=>`ag-group-contracted ${z.toString()}`,[z]),B=_.useMemo(()=>`ag-group-checkbox ${K.toString()}`,[K]),F=g&&g.componentFromFramework,ye=F?g.componentClass:void 0,ve=g==null&&S!=null,ie=On(S,!0);return me.createElement("span",{className:x,ref:D,...e.colDef?{}:{role:(Ce=d.current)==null?void 0:Ce.getCellAriaRole()}},me.createElement("span",{className:L,ref:u}),me.createElement("span",{className:M,ref:h}),me.createElement("span",{className:B,ref:a}),me.createElement("span",{className:"ag-group-value",ref:r},ve&&me.createElement(me.Fragment,null,ie),F&&me.createElement(ye,{...g.params})),me.createElement("span",{className:"ag-group-child-count"},v))}),NT=hI,hb=_.createContext({setMethods:()=>{}}),a4=e=>{const{initialProps:t,addUpdateCallback:n,CustomComponentClass:s,setMethods:i}=e,[{key:r,...a},u]=_.useState(t);return _.useEffect(()=>{n(h=>u(h))},[]),me.createElement(hb.Provider,{value:{setMethods:i}},me.createElement(s,{key:r,...a}))},l4=_.memo(a4),u4=0;function VT(){return`agPortalKey_${++u4}`}var dI=class{constructor(e,t,n,s){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=n,this.suppressFallbackMethods=!!s,this.statelessComponent=this.isStateless(this.reactComponent),this.key=VT(),this.portalKey=VT(),this.instanceCreated=this.isStatelessComponent()?ht.resolve(!1):new ht(i=>{this.resolveInstanceCreated=i})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),n=document.createElement(t||"div");return n.classList.add("ag-react-container"),e.reactContainer=n,n}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const n=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!n){setTimeout(()=>this.callMethod(e,t));return}const s=n[e];if(s)return s.apply(n,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new ht(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{var n;this.componentInstance=t,(n=this.resolveInstanceCreated)==null||n.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=cb.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return _.createElement(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const n=this[`${e}Component`];if(!this.suppressFallbackMethods&&n)return n.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function db(e,t,n){e.forEach(s=>{const i=t[s];i&&(n[s]=i)})}var oi=class extends dI{constructor(){super(...arguments),this.awaitUpdateCallback=new ht(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=l4}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:n=>this.setMethods(n),addUpdateCallback:n=>{this.updateCallback=()=>(n(this.getProps()),new ht(s=>{setTimeout(()=>{s()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,db(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new ht(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},c4=class extends oi{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},h4=class extends oi{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},d4=class extends oi{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:n,shake:s}=this;return e.label=t,e.icon=n,e.shake=s,e}},f4=class extends oi{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new ht(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){var n;const t=this.providedMethods;t?(n=t.afterGuiAttached)==null||n.call(t,e):this.awaitSetMethodsCallback.then(()=>{var s,i;return(i=(s=this.providedMethods)==null?void 0:s.afterGuiAttached)==null?void 0:i.call(s,e)})}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var t;this.expectingNewMethods===!1&&this.hasBeenActive&&((t=this.providedMethods)==null?void 0:t.doesFilterPass)!==(e==null?void 0:e.doesFilterPass)&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback()}updateModel(e){this.setModel(e).then(()=>this.sourceParams.filterChangedCallback())}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,e}};function fI(e,t){e.parentFilterInstance(n=>{(n.setModel(t)||ht.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var g4=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=n=>this.updateModel(n)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){db(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),fI(this.floatingFilterParams,e)}},p4=class extends oi{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),fI(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},m4=class extends oi{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},C4=class extends oi{refresh(e){this.sourceParams=e,this.refreshProps()}},v4=class extends oi{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},y4=class extends oi{refresh(e){this.sourceParams=e,this.refreshProps()}},w4=class extends oi{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},b4=class extends oi{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function fb(){be(231)}var S4=1e3,E4=class{constructor(e,t,n){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=n||S4}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,n){this.portals=[...this.portals,e],this.waitForInstance(t,n),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,n=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-n>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return;window.setTimeout(()=>{this.waitForInstance(e,t,n)})}}},R4=({ctrl:e})=>{const t=e.isAlive(),{context:n}=_.useContext(qn),s=t?e.column.getColId():void 0,[i,r]=_.useState(),[a,u]=_.useState(),h=_.useRef(),d=_.useRef(null),g=_.useRef(null),m=_.useRef(null),v=_.useRef(),w=_.useRef();t&&!w.current&&(w.current=new Ld(()=>d.current));const S=_.useCallback(V=>{var U;if(d.current=V,h.current=V?n.createBean(new mc):n.destroyBean(h.current),!V||!t)return;const H={setWidth:K=>{d.current&&(d.current.style.width=K)},addOrRemoveCssClass:(K,k)=>w.current.addOrRemoveCssClass(K,k),setUserStyles:K=>u(K),setAriaSort:K=>{d.current&&(K?YL(d.current,K):QL(d.current))},setUserCompDetails:K=>r(K),getUserCompInstance:()=>v.current||void 0};e.setComp(H,V,g.current,m.current,h.current);const z=e.getSelectAllGui();z&&((U=g.current)==null||U.insertAdjacentElement("afterend",z),h.current.addDestroyFunc(()=>z.remove()))},[]);_.useLayoutEffect(()=>kd(i,n,m.current,v),[i]),_.useEffect(()=>{e.setDragSource(d.current)},[i]);const T=_.useMemo(()=>!!((i==null?void 0:i.componentFromFramework)&&vc(i.componentClass)),[i]),A=i&&i.componentFromFramework,O=i&&i.componentClass;return me.createElement("div",{ref:S,style:a,className:"ag-header-cell","col-id":s,role:"columnheader"},me.createElement("div",{ref:g,className:"ag-header-cell-resize",role:"presentation"}),me.createElement("div",{ref:m,className:"ag-header-cell-comp-wrapper",role:"presentation"},A&&T&&me.createElement(O,{...i.params}),A&&!T&&me.createElement(O,{...i.params,ref:v})))},T4=_.memo(R4),A4=({ctrl:e})=>{const{context:t,gos:n}=_.useContext(qn),[s,i]=_.useState(),[r,a]=_.useState(()=>new Us("ag-header-cell","ag-floating-filter")),[u,h]=_.useState(()=>new Us),[d,g]=_.useState(()=>new Us("ag-floating-filter-button","ag-hidden")),[m,v]=_.useState("false"),[w,S]=_.useState(),[,T]=_.useState(1),A=_.useRef(),O=_.useRef(null),V=_.useRef(null),H=_.useRef(null),z=_.useRef(null),U=_.useRef(),K=_.useRef(),k=re=>{re!=null&&U.current&&U.current(re)},D=_.useCallback(re=>{if(O.current=re,A.current=re?t.createBean(new mc):t.destroyBean(A.current),!re)return;K.current=new ht(N=>{U.current=N});const Re={addOrRemoveCssClass:(N,W)=>a(ee=>ee.setClass(N,W)),setUserStyles:N=>i(N),addOrRemoveBodyCssClass:(N,W)=>h(ee=>ee.setClass(N,W)),setButtonWrapperDisplayed:N=>{g(W=>W.setClass("ag-hidden",!N)),v(N?"false":"true")},setWidth:N=>{O.current&&(O.current.style.width=N)},setCompDetails:N=>S(N),getFloatingFilterComp:()=>K.current?K.current:null,setMenuIcon:N=>{var W;return(W=z.current)==null?void 0:W.appendChild(N)}};e.setComp(Re,re,z.current,V.current,A.current)},[]);_.useLayoutEffect(()=>kd(w,t,V.current,k),[w]);const x=_.useMemo(()=>r.toString(),[r]),L=_.useMemo(()=>u.toString(),[u]),M=_.useMemo(()=>d.toString(),[d]),B=_.useMemo(()=>!!(w&&w.componentFromFramework&&vc(w.componentClass)),[w]),F=_.useMemo(()=>n.get("reactiveCustomComponents"),[]),ye=_.useMemo(()=>{if(w)if(F){const re=new g4(w.params,()=>T(Re=>Re+1));return k(re),re}else w.componentFromFramework&&fb()},[w]),ve=ye==null?void 0:ye.getProps(),ie=w&&w.componentFromFramework,Ce=w&&w.componentClass;return me.createElement("div",{ref:D,style:s,className:x,role:"gridcell"},me.createElement("div",{ref:V,className:L,role:"presentation"},ie&&!F&&me.createElement(Ce,{...w.params,ref:B?()=>{}:k}),ie&&F&&me.createElement(hb.Provider,{value:{setMethods:re=>ye.setMethods(re)}},me.createElement(Ce,{...ve}))),me.createElement("div",{ref:H,"aria-hidden":m,className:M,role:"presentation"},me.createElement("button",{ref:z,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},x4=_.memo(A4),D4=({ctrl:e})=>{const{context:t}=_.useContext(qn),[n,s]=_.useState(),[i,r]=_.useState(()=>new Us),[a,u]=_.useState(()=>new Us),[h,d]=_.useState("false"),[g,m]=_.useState(),[v,w]=_.useState(),S=_.useMemo(()=>e.column.getUniqueId(),[]),T=_.useRef(),A=_.useRef(null),O=_.useRef(null),V=_.useRef(null),H=_.useRef(),z=_.useCallback(L=>{if(A.current=L,T.current=L?t.createBean(new mc):t.destroyBean(T.current),!L)return;const M={setWidth:B=>{A.current&&(A.current.style.width=B)},addOrRemoveCssClass:(B,F)=>r(ye=>ye.setClass(B,F)),setUserStyles:B=>s(B),setHeaderWrapperHidden:B=>{const F=V.current;F&&(B?F.style.setProperty("display","none"):F.style.removeProperty("display"))},setHeaderWrapperMaxHeight:B=>{const F=V.current;F&&(B!=null?F.style.setProperty("max-height",`${B}px`):F.style.removeProperty("max-height"),F.classList.toggle("ag-header-cell-comp-wrapper-limited-height",B!=null))},setUserCompDetails:B=>w(B),setResizableDisplayed:B=>{u(F=>F.setClass("ag-hidden",!B)),d(B?"false":"true")},setAriaExpanded:B=>m(B),getUserCompInstance:()=>H.current||void 0};e.setComp(M,L,O.current,V.current,T.current)},[]);_.useLayoutEffect(()=>kd(v,t,V.current),[v]),_.useEffect(()=>{A.current&&e.setDragSource(A.current)},[v]);const U=_.useMemo(()=>!!((v==null?void 0:v.componentFromFramework)&&vc(v.componentClass)),[v]),K=_.useMemo(()=>"ag-header-group-cell "+i.toString(),[i]),k=_.useMemo(()=>"ag-header-cell-resize "+a.toString(),[a]),D=v&&v.componentFromFramework,x=v&&v.componentClass;return me.createElement("div",{ref:z,style:n,className:K,"col-id":S,role:"columnheader","aria-expanded":g},me.createElement("div",{ref:V,className:"ag-header-cell-comp-wrapper",role:"presentation"},D&&U&&me.createElement(x,{...v.params}),D&&!U&&me.createElement(x,{...v.params,ref:H})),me.createElement("div",{ref:O,"aria-hidden":h,className:k}))},_4=_.memo(D4),I4=({ctrl:e})=>{const{context:t}=_.useContext(qn),{topOffset:n,rowHeight:s}=_.useMemo(()=>e.getTopAndHeight(),[]),i=e.getAriaRowIndex(),r=e.headerRowClass,[a,u]=_.useState(()=>s+"px"),[h,d]=_.useState(()=>n+"px"),g=_.useRef(null),m=_.useRef(null),[v,w]=_.useState(()=>e.getHeaderCtrls()),S=_.useRef(),T=_.useRef(null),A=_.useCallback(H=>{if(T.current=H,S.current=H?t.createBean(new mc):t.destroyBean(S.current),!H)return;const z={setHeight:U=>u(U),setTop:U=>d(U),setHeaderCtrls:(U,K,k)=>{m.current=g.current,g.current=U;const D=Rp(m.current,U,K);D!==m.current&&Ep(k,()=>w(D))},setWidth:U=>{T.current&&(T.current.style.width=U)}};e.setComp(z,S.current,!1)},[]),O=_.useMemo(()=>({height:a,top:h}),[a,h]),V=_.useCallback(H=>{switch(e.type){case"group":return me.createElement(_4,{ctrl:H,key:H.instanceId});case"filter":return me.createElement(x4,{ctrl:H,key:H.instanceId});default:return me.createElement(T4,{ctrl:H,key:H.instanceId})}},[]);return me.createElement("div",{ref:A,className:r,role:"row",style:O,"aria-rowindex":i},v.map(V))},M4=_.memo(I4),F4=({pinned:e})=>{const[t,n]=_.useState(!0),[s,i]=_.useState([]),{context:r}=_.useContext(qn),a=_.useRef(null),u=_.useRef(null),h=_.useRef(),d=e==="left",g=e==="right",m=!d&&!g,v=_.useCallback(T=>{if(a.current=T,h.current=T?r.createBean(new bV(e)):r.destroyBean(h.current),!T)return;const A={setDisplayed:n,setCtrls:O=>i(O),setCenterWidth:O=>{u.current&&(u.current.style.width=O)},setViewportScrollLeft:O=>{a.current&&(a.current.scrollLeft=O)},setPinnedContainerWidth:O=>{a.current&&(a.current.style.width=O,a.current.style.minWidth=O,a.current.style.maxWidth=O)}};h.current.setComp(A,a.current)},[]),w=t?"":"ag-hidden",S=()=>s.map(T=>me.createElement(M4,{ctrl:T,key:T.instanceId}));return me.createElement(me.Fragment,null,d&&me.createElement("div",{ref:v,className:"ag-pinned-left-header "+w,"aria-hidden":!t,role:"rowgroup"},S()),g&&me.createElement("div",{ref:v,className:"ag-pinned-right-header "+w,"aria-hidden":!t,role:"rowgroup"},S()),m&&me.createElement("div",{ref:v,className:"ag-header-viewport "+w,role:"presentation"},me.createElement("div",{ref:u,className:"ag-header-container",role:"rowgroup"},S())))},gy=_.memo(F4),P4=()=>{const[e,t]=_.useState(()=>new Us),[n,s]=_.useState(),{context:i}=_.useContext(qn),r=_.useRef(null),a=_.useRef(),u=_.useCallback(g=>{if(r.current=g,a.current=g?i.createBean(new CV):i.destroyBean(a.current),!g)return;const m={addOrRemoveCssClass:(v,w)=>t(S=>S.setClass(v,w)),setHeightAndMinHeight:v=>s(v)};a.current.setComp(m,g,g)},[]),h=_.useMemo(()=>"ag-header "+e.toString(),[e]),d=_.useMemo(()=>({height:n,minHeight:n}),[n]);return me.createElement("div",{ref:u,className:h,style:d,role:"presentation"},me.createElement(gy,{pinned:"left"}),me.createElement(gy,{pinned:null}),me.createElement(gy,{pinned:"right"}))},L4=_.memo(P4),O4=(e,t)=>{_.useEffect(()=>{const n=t.current;if(n){const s=n.parentElement;if(s){const i=document.createComment(e);return s.insertBefore(i,n),()=>{s.removeChild(i)}}}},[e])},Ga=O4,k4=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new ht(n=>{this.resolveInstanceCreated=n}),this.onValueChange=n=>this.updateValue(n),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){db(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){var t;this.componentInstance=e,(t=this.resolveInstanceCreated)==null||t.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},N4=e=>{const t=_.useRef(e),n=_.useRef(),s=_.useRef(!1),i=_.useRef(!1),[,r]=_.useState(0);s.current&&(i.current=!0),_.useEffect(()=>(s.current||(n.current=t.current(),s.current=!0),r(a=>a+1),()=>{var a;i.current&&((a=n.current)==null||a.call(n))}),[])},V4=e=>{const[t,n]=_.useState(),{context:s,popupSvc:i,localeSvc:r,gos:a,editSvc:u}=_.useContext(qn);return N4(()=>{var K,k;const{editDetails:h,cellCtrl:d,eParentCell:g}=e,{compDetails:m}=h,v=a.get("stopEditingWhenCellsLoseFocus"),w=s.createBean(u.createPopupEditorWrapper(m.params)),S=w.getGui();if(e.jsChildComp){const D=e.jsChildComp.getGui();D&&S.appendChild(D)}const{column:T,rowNode:A}=d,O={column:T,rowNode:A,type:"popupCellEditor",eventSource:g,ePopup:S,position:h.popupPosition,keepWithinBounds:!0},V=i==null?void 0:i.positionPopupByComponent.bind(i,O),H=qx(r),z=i==null?void 0:i.addPopup({modal:v,eChild:S,closeOnEsc:!0,closedCallback:()=>{d.onPopupEditorClosed()},anchorToElement:g,positionCallback:V,ariaLabel:H("ariaLabelCellEditor","Cell Editor")}),U=z?z.hideFunc:void 0;return n(w),(k=(K=e.jsChildComp)==null?void 0:K.afterGuiAttached)==null||k.call(K),()=>{U==null||U(),s.destroyBean(w)}}),me.createElement(me.Fragment,null,t&&e.wrappedContent&&cb.createPortal(e.wrappedContent,t.getGui()))},BT=_.memo(V4),B4=(e,t,n,s,i,r)=>{const{context:a}=_.useContext(qn),u=_.useCallback(()=>{const h=i.current;if(!h)return;const d=h.getGui();d&&d.parentElement&&d.parentElement.removeChild(d),a.destroyBean(h),i.current=void 0},[]);_.useEffect(()=>{const h=e!=null,d=(e==null?void 0:e.compDetails)&&!e.compDetails.componentFromFramework,g=t&&n==null;if(!(h&&d&&!g)){u();return}const v=e.compDetails;if(i.current){const S=i.current,A=S.refresh!=null&&e.force==!1?S.refresh(v.params):!1;if(A===!0||A===void 0)return;u()}v.newAgStackInstance().then(S=>{if(!S)return;const T=S.getGui();if(!T)return;(t?n:r.current).appendChild(T),i.current=S})},[e,t,s]),_.useEffect(()=>u,[])},G4=B4,H4=(e,t,n)=>{const{compProxy:s}=e;n(s);const i=s.getProps(),r=vc(t);return me.createElement(hb.Provider,{value:{setMethods:a=>s.setMethods(a)}},r?me.createElement(t,{...i}):me.createElement(t,{...i,ref:a=>s.setRef(a)}))},GT=(e,t,n)=>{const s=e.compProxy;return me.createElement(me.Fragment,null,s?H4(e,t,n):me.createElement(t,{...e.compDetails.params,ref:n}))},z4=(e,t,n,s,i)=>{const r=e.compDetails,a=r.componentClass,u=r.componentFromFramework&&!e.popup,h=r.componentFromFramework&&e.popup,d=!r.componentFromFramework&&e.popup;return me.createElement(me.Fragment,null,u&&GT(e,a,t),h&&me.createElement(BT,{editDetails:e,cellCtrl:s,eParentCell:n,wrappedContent:GT(e,a,t)}),d&&i&&me.createElement(BT,{editDetails:e,cellCtrl:s,eParentCell:n,jsChildComp:i}))},U4=(e,t,n,s,i,r,a)=>{const{compDetails:u,value:h}=e,d=!u,g=u&&u.componentFromFramework,m=u&&u.componentClass,v=h!=null&&h.toString?h.toString():h,w=()=>me.createElement(me.Fragment,null,d&&me.createElement(me.Fragment,null,v),g&&!r&&me.createElement(m,{...u.params,key:t,ref:s}),g&&r&&me.createElement(m,{...u.params,key:t}));return me.createElement(me.Fragment,null,i?me.createElement("span",{role:"presentation",id:`cell-${n}`,className:"ag-cell-value",ref:a},w()):w())},W4=({cellCtrl:e,printLayout:t,editingRow:n})=>{const{context:s}=_.useContext(qn),{colIdSanitised:i,instanceId:r}=e,a=_.useRef(),[u,h]=_.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[d,g]=_.useState(),[m,v]=_.useState(1),[w,S]=_.useState(),[T,A]=_.useState(!1),[O,V]=_.useState(!1),[H,z]=_.useState(!1),[U,K]=_.useState(),k=_.useMemo(()=>e.isForceWrapper(),[e]),D=_.useMemo(()=>e.getCellAriaRole(),[e]),x=_.useRef(null),L=_.useRef(null),M=_.useRef(null),B=_.useRef(),F=_.useRef(),ye=_.useRef(),ve=_.useRef([]),ie=_.useRef(),[Ce,re]=_.useState(0),Re=_.useCallback(qe=>{ie.current=qe,re(ft=>ft+1)},[]),N=u!=null&&(T||H||O),W=k||N,ee=_.useCallback(qe=>{if(F.current=qe,qe){const ft=qe.isCancelBeforeStart&&qe.isCancelBeforeStart();setTimeout(()=>{ft?(e.stopEditing(!0),e.focusCell(!0)):e.cellEditorAttached()})}},[e]),oe=_.useRef();oe.current||(oe.current=new Ld(()=>x.current)),G4(u,W,ie.current,Ce,B,x);const ue=_.useRef();_.useLayoutEffect(()=>{var Et;const qe=ue.current,ft=u;if(ue.current=u,qe==null||qe.compDetails==null||ft==null||ft.compDetails==null)return;const Dt=qe.compDetails,Ht=ft.compDetails;if(Dt.componentClass!=Ht.componentClass||((Et=M.current)==null?void 0:Et.refresh)==null)return;M.current.refresh(Ht.params)!=!0&&v(zt=>zt+1)},[u]),_.useLayoutEffect(()=>{if(!(d&&!d.compDetails.componentFromFramework))return;const ft=d.compDetails,Dt=d.popup===!0,Ht=ft.newAgStackInstance();return Ht.then(Ke=>{if(!Ke)return;const Et=Ke.getGui();if(ee(Ke),!Dt){const zt=(k?ye:x).current;zt==null||zt.appendChild(Et),Ke.afterGuiAttached&&Ke.afterGuiAttached()}K(Ke)}),()=>{Ht.then(Ke=>{var zt;const Et=Ke.getGui();s.destroyBean(Ke),ee(void 0),K(void 0),(zt=Et==null?void 0:Et.parentElement)==null||zt.removeChild(Et)})}},[d]);const xe=_.useCallback(qe=>{if(ye.current=qe,!qe){ve.current.forEach(Dt=>Dt()),ve.current=[];return}const ft=Dt=>{if(Dt){const Ht=Dt.getGui();qe.insertAdjacentElement("afterbegin",Ht),ve.current.push(()=>{s.destroyBean(Dt),rl(Ht)})}return Dt};if(T){const Dt=e.createSelectionCheckbox();ft(Dt)}H&&ft(e.createDndSource()),O&&ft(e.createRowDragComp())},[e,s,H,O,T]),Ae=_.useCallback(()=>{const qe=!e.isCellSpanning()||L.current,ft=x.current;if(a.current=ft?s.createBean(new mc):s.destroyBean(a.current),!ft||!qe||!e)return;const Dt={addOrRemoveCssClass:(Ke,Et)=>oe.current.addOrRemoveCssClass(Ke,Et),setUserStyles:Ke=>S(Ke),getFocusableElement:()=>x.current,setIncludeSelection:Ke=>A(Ke),setIncludeRowDrag:Ke=>V(Ke),setIncludeDndSource:Ke=>z(Ke),getCellEditor:()=>F.current||null,getCellRenderer:()=>M.current??B.current,getParentOfValue:()=>ie.current??ye.current??x.current,setRenderDetails:(Ke,Et,zt)=>{h(Rt=>(Rt==null?void 0:Rt.compDetails)!==Ke||(Rt==null?void 0:Rt.value)!==Et||(Rt==null?void 0:Rt.force)!==zt?{value:Et,compDetails:Ke,force:zt}:Rt)},setEditDetails:(Ke,Et,zt,Rt)=>{if(Ke){let _t;Rt?_t=new k4(Ke.params,()=>v(ai=>ai+1)):Ke.componentFromFramework&&fb(),g({compDetails:Ke,popup:Et,popupPosition:zt,compProxy:_t}),Et||h(void 0)}else g(_t=>{_t!=null&&_t.compProxy&&(F.current=void 0)})}},Ht=ye.current||void 0;e.setComp(Dt,ft,L.current??void 0,Ht,t,n,a.current)},[]),gt=_.useCallback(qe=>{x.current=qe,Ae()},[]),Ue=_.useCallback(qe=>{L.current=qe,Ae()},[]),St=_.useMemo(()=>{var ft;return!!(((ft=u==null?void 0:u.compDetails)==null?void 0:ft.componentFromFramework)&&vc(u.compDetails.componentClass))},[u]);_.useLayoutEffect(()=>{x.current&&(oe.current.addOrRemoveCssClass("ag-cell-value",!W),oe.current.addOrRemoveCssClass("ag-cell-inline-editing",!!d&&!d.popup),oe.current.addOrRemoveCssClass("ag-cell-popup-editing",!!d&&!!d.popup),oe.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!d||!!d.popup),e.setInlineEditingCss(),e.shouldRestoreFocus()&&!e.editing&&x.current.focus({preventScroll:!0}))});const et=()=>me.createElement(me.Fragment,null,u!=null&&U4(u,m,r,M,W,St,Re),d!=null&&z4(d,ee,x.current,e,U)),hn=_.useCallback(()=>e.onFocusOut(),[]),os=()=>me.createElement("div",{ref:gt,style:w,role:D,"col-id":i,onBlur:hn},W?me.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:xe},et()):et());return e.isCellSpanning()?me.createElement("div",{ref:Ue,className:"ag-spanned-cell-wrapper",role:"presentation"},os()):os()},j4=_.memo(W4),q4=({rowCtrl:e,containerType:t})=>{const{context:n,gos:s}=_.useContext(qn),i=_.useRef(),r=_.useRef(e.getDomOrder()),a=e.isFullWidth(),u=e.rowNode.displayed,[h,d]=_.useState(()=>u?e.rowNode.getRowIndexString():null),[g,m]=_.useState(()=>e.rowId),[v,w]=_.useState(()=>e.businessKey),[S,T]=_.useState(()=>e.rowStyles),A=_.useRef(null),O=_.useRef(null),[V,H]=_.useState(()=>null),[z,U]=_.useState(),[K,k]=_.useState(()=>u?e.getInitialRowTop(t):void 0),[D,x]=_.useState(()=>u?e.getInitialTransform(t):void 0),L=_.useRef(null),M=_.useRef(),B=_.useRef(!1),[F,ye]=_.useState(0);_.useEffect(()=>{var xe;if(B.current||!z||F>10)return;const ue=(xe=L.current)==null?void 0:xe.firstChild;ue?(e.setupDetailRowAutoHeight(ue),B.current=!0):ye(Ae=>Ae+1)},[z,F]);const ve=_.useRef();ve.current||(ve.current=new Ld(()=>L.current));const ie=_.useCallback(ue=>{if(L.current=ue,i.current=ue?n.createBean(new mc):n.destroyBean(i.current),!ue){e.unsetComp(t);return}if(!e.isAlive())return;const xe={setTop:k,setTransform:x,addOrRemoveCssClass:(Ae,gt)=>ve.current.addOrRemoveCssClass(Ae,gt),setDomOrder:Ae=>r.current=Ae,setRowIndex:d,setRowId:m,setRowBusinessKey:w,setUserStyles:T,setCellCtrls:(Ae,gt)=>{O.current=A.current,A.current=Ae;const Ue=Rp(O.current,Ae,r.current);Ue!==O.current&&Ep(gt,()=>H(Ue))},showFullWidth:Ae=>U(Ae),getFullWidthCellRenderer:()=>M.current,refreshFullWidth:Ae=>W.current?(U(gt=>({...gt,params:Ae()})),!0):!M.current||!M.current.refresh?!1:M.current.refresh(Ae())};e.setComp(xe,ue,t,i.current)},[]);_.useLayoutEffect(()=>kd(z,n,L.current,M),[z]);const Ce=_.useMemo(()=>{const ue={top:K,transform:D};return Object.assign(ue,S),ue},[K,D,S]),re=a&&(z==null?void 0:z.componentFromFramework),Re=!a&&V!=null,N=_.useMemo(()=>!!((z==null?void 0:z.componentFromFramework)&&vc(z.componentClass)),[z]),W=_.useRef(!1);_.useEffect(()=>{W.current=N&&!!z&&!!s.get("reactiveCustomComponents")},[N,z]);const ee=()=>V==null?void 0:V.map(ue=>me.createElement(j4,{cellCtrl:ue,editingRow:e.editing,printLayout:e.printLayout,key:ue.instanceId})),oe=()=>{const ue=z.componentClass;return me.createElement(me.Fragment,null,N?me.createElement(ue,{...z.params}):me.createElement(ue,{...z.params,ref:M}))};return me.createElement("div",{ref:ie,role:"row",style:Ce,"row-index":h,"row-id":g,"row-business-key":v},Re&&ee(),re&&oe())},HT=_.memo(q4),$4=({name:e})=>{const{context:t,gos:n}=_.useContext(qn),s=_.useMemo(()=>Od(e),[e]),i=_.useRef(null),r=_.useRef(null),a=_.useRef(null),u=_.useRef([]),h=_.useRef([]),[d,g]=_.useState(()=>[]),m=!!n.get("enableCellSpan")&&!!s.getSpannedRowCtrls,v=_.useRef([]),w=_.useRef([]),[S,T]=_.useState(()=>[]),A=_.useRef(!1),O=_.useRef(),V=_.useMemo(()=>zs("ag-viewport",c_(e)),[e]),H=_.useMemo(()=>zs(jg(e)),[e]),z=_.useMemo(()=>zs("ag-spanning-container",XN(e)),[e]),U=s.type==="center"||m,K=U?i:r;Ga(" AG Row Container "+e+" ",K);const k=_.useCallback(()=>{const ve=!U||i.current!=null,ie=r.current!=null,Ce=!m||a.current!=null;return ve&&ie&&Ce},[]),D=_.useCallback(()=>i.current==null&&r.current==null&&a.current==null,[]),x=_.useCallback(()=>{if(D()&&(O.current=t.destroyBean(O.current)),k()){const ve=re=>{const Re=Rp(h.current,u.current,A.current);Re!==h.current&&(h.current=Re,Ep(re,()=>g(Re)))},ie=re=>{const Re=Rp(w.current,v.current,A.current);Re!==w.current&&(w.current=Re,Ep(re,()=>T(Re)))},Ce={setHorizontalScroll:re=>{i.current&&(i.current.scrollLeft=re)},setViewportHeight:re=>{i.current&&(i.current.style.height=re)},setRowCtrls:({rowCtrls:re,useFlushSync:Re})=>{const N=!!Re&&u.current.length>0&&re.length>0;u.current=re,ve(N)},setSpannedRowCtrls:(re,Re)=>{const N=!!Re&&v.current.length>0&&re.length>0;v.current=re,ie(N)},setDomOrder:re=>{A.current!=re&&(A.current=re,ve(!1))},setContainerWidth:re=>{r.current&&(r.current.style.width=re)},setOffsetTop:re=>{r.current&&(r.current.style.transform=`translateY(${re})`)}};O.current=t.createBean(new aV(e)),O.current.setComp(Ce,r.current,a.current??void 0,i.current)}},[k,D]),L=_.useCallback(ve=>{r.current=ve,x()},[x]),M=_.useCallback(ve=>{a.current=ve,x()},[x]),B=_.useCallback(ve=>{i.current=ve,x()},[x]),F=()=>me.createElement("div",{className:H,ref:L,role:"rowgroup"},d.map(ve=>me.createElement(HT,{rowCtrl:ve,containerType:s.type,key:ve.instanceId})));if(!U)return F();const ye=()=>m&&me.createElement("div",{className:z,ref:M,role:"rowgroup"},S.map(ve=>me.createElement(HT,{rowCtrl:ve,containerType:s.type,key:ve.instanceId})));return me.createElement("div",{className:V,ref:B,role:"presentation"},F(),ye())},K4=_.memo($4),Y4=()=>{const e=_.useContext(qn),{context:t,overlays:n}=e,[s,i]=_.useState(""),[r,a]=_.useState(0),[u,h]=_.useState(0),[d,g]=_.useState("0px"),[m,v]=_.useState("0px"),[w,S]=_.useState("100%"),[T,A]=_.useState("0px"),[O,V]=_.useState("0px"),[H,z]=_.useState("100%"),[U,K]=_.useState(""),[k,D]=_.useState(""),[x,L]=_.useState(null),[M,B]=_.useState(""),[F,ye]=_.useState(null),[ve,ie]=_.useState("ag-layout-normal"),Ce=_.useRef();Ce.current||(Ce.current=new Ld(()=>re.current));const re=_.useRef(null),Re=_.useRef(null),N=_.useRef(null),W=_.useRef(null),ee=_.useRef(null),oe=_.useRef(null),ue=_.useRef(null),xe=_.useRef([]),Ae=_.useRef([]);Ga(" AG Grid Body ",re),Ga(" AG Pinned Top ",Re),Ga(" AG Sticky Top ",N),Ga(" AG Middle ",oe),Ga(" AG Pinned Bottom ",ue);const gt=_.useCallback(_t=>{if(re.current=_t,!_t){xe.current=t.destroyBeans(xe.current),Ae.current.forEach(rt=>rt()),Ae.current=[];return}if(!t)return;const ai=(rt,yn)=>{rt.appendChild(yn),Ae.current.push(()=>rt.removeChild(yn))},zi=rt=>{const yn=t.createBean(new rt);return xe.current.push(yn),yn},sn=(rt,yn,ta)=>{ai(rt,document.createComment(ta)),ai(rt,zi(yn).getGui())};sn(_t,dV," AG Fake Horizontal Scroll ");const ea=n==null?void 0:n.getOverlayWrapperCompClass();ea&&sn(_t,ea," AG Overlay Wrapper "),ee.current&&sn(ee.current,fV," AG Fake Vertical Scroll ");const Yt={setRowAnimationCssOnBodyViewport:i,setColumnCount:rt=>{re.current&&$L(re.current,rt)},setRowCount:rt=>{re.current&&jL(re.current,rt)},setTopHeight:a,setBottomHeight:h,setStickyTopHeight:g,setStickyTopTop:v,setStickyTopWidth:S,setTopDisplay:K,setBottomDisplay:D,setColumnMovingCss:(rt,yn)=>Ce.current.addOrRemoveCssClass(rt,yn),updateLayoutClasses:ie,setAlwaysVerticalScrollClass:L,setPinnedTopBottomOverflowY:B,setCellSelectableCss:(rt,yn)=>ye(yn?rt:null),setBodyViewportWidth:rt=>{oe.current&&(oe.current.style.width=rt)},registerBodyViewportResizeListener:rt=>{if(oe.current){const yn=Dr(e,oe.current,rt);Ae.current.push(()=>yn())}},setStickyBottomHeight:A,setStickyBottomBottom:V,setStickyBottomWidth:z,setGridRootRole:rt=>_t.setAttribute("role",rt)},Qt=t.createBean(new hV);xe.current.push(Qt),Qt.setComp(Yt,_t,oe.current,Re.current,ue.current,N.current,W.current)},[]),Ue=_.useMemo(()=>zs("ag-root","ag-unselectable",ve),[ve]),St=_.useMemo(()=>zs("ag-body-viewport",s,ve,x,F),[s,ve,x,F]),et=_.useMemo(()=>zs("ag-body",ve),[ve]),hn=_.useMemo(()=>zs("ag-floating-top",F),[F]),os=_.useMemo(()=>zs("ag-sticky-top",F),[F]),qe=_.useMemo(()=>zs("ag-sticky-bottom",T==="0px"?"ag-hidden":null,F),[F,T]),ft=_.useMemo(()=>zs("ag-floating-bottom",F),[F]),Dt=_.useMemo(()=>({height:r,minHeight:r,display:U,overflowY:M}),[r,U,M]),Ht=_.useMemo(()=>({height:d,top:m,width:w}),[d,m,w]),Ke=_.useMemo(()=>({height:T,bottom:O,width:H}),[T,O,H]),Et=_.useMemo(()=>({height:u,minHeight:u,display:k,overflowY:M}),[u,k,M]),zt=_t=>me.createElement(K4,{name:_t,key:`${_t}-container`}),Rt=({section:_t,children:ai,className:zi,style:sn})=>me.createElement("div",{ref:_t,className:zi,role:"presentation",style:sn},ai.map(zt));return me.createElement("div",{ref:gt,className:Ue},me.createElement(L4,null),Rt({section:Re,className:hn,style:Dt,children:["topLeft","topCenter","topRight","topFullWidth"]}),me.createElement("div",{className:et,ref:ee,role:"presentation"},Rt({section:oe,className:St,children:["left","center","right","fullWidth"]})),Rt({section:N,className:os,style:Ht,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),Rt({section:W,className:qe,style:Ke,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),Rt({section:ue,className:ft,style:Et,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},Q4=_.memo(Y4),X4=(e,t)=>{const{children:n,eFocusableElement:s,onTabKeyDown:i,gridCtrl:r,forceFocusOutWhenTabGuardsAreEmpty:a,isEmpty:u}=e,{context:h}=_.useContext(qn),d=_.useRef(null),g=_.useRef(null),m=_.useRef(),v=O=>{const V=O==null?void 0:parseInt(O,10).toString();[d,g].forEach(H=>{var z,U;V===void 0?(z=H.current)==null||z.removeAttribute("tabindex"):(U=H.current)==null||U.setAttribute("tabindex",V)})};_.useImperativeHandle(t,()=>({forceFocusOutOfContainer(O){var V;(V=m.current)==null||V.forceFocusOutOfContainer(O)}}));const w=_.useCallback(()=>{const O=d.current,V=g.current;if(!O&&!V){m.current=h.destroyBean(m.current);return}if(O&&V){const H={setTabIndex:v};m.current=h.createBean(new E_({comp:H,eTopGuard:O,eBottomGuard:V,eFocusableElement:s,onTabKeyDown:i,forceFocusOutWhenTabGuardsAreEmpty:a,focusInnerElement:z=>r.focusInnerElement(z),isEmpty:u}))}},[]),S=_.useCallback(O=>{d.current=O,w()},[w]),T=_.useCallback(O=>{g.current=O,w()},[w]),A=O=>{const V=O==="top"?nl.TAB_GUARD_TOP:nl.TAB_GUARD_BOTTOM;return me.createElement("div",{className:`${nl.TAB_GUARD} ${V}`,role:"presentation",ref:O==="top"?S:T})};return me.createElement(me.Fragment,null,A("top"),n,A("bottom"))},Z4=_.forwardRef(X4),J4=_.memo(Z4),e3=({context:e})=>{const[t,n]=_.useState(""),[s,i]=_.useState(""),[r,a]=_.useState(null),[u,h]=_.useState(null),[d,g]=_.useState(!1),[m,v]=_.useState(),w=_.useRef(),S=_.useRef(null),T=_.useRef(),[A,O]=_.useState(null),V=_.useRef(()=>{}),H=_.useRef(),z=_.useRef([]),U=_.useCallback(()=>{},[]),K=_.useMemo(()=>e.isDestroyed()?null:e.getBeans(),[e]);Ga(" AG Grid ",S);const k=_.useCallback(F=>{if(S.current=F,w.current=F?e.createBean(new jV):e.destroyBean(w.current),!F||e.isDestroyed())return;const ye=w.current;V.current=ye.focusInnerElement.bind(ye);const ve={destroyGridUi:()=>{},setRtlClass:n,forceFocusOutOfContainer:ie=>{var Ce,re;if(!ie&&((Ce=H.current)!=null&&Ce.isDisplayed())){H.current.forceFocusOutOfContainer(ie);return}(re=T.current)==null||re.forceFocusOutOfContainer(ie)},updateLayoutClasses:i,getFocusableContainers:()=>{var re;const ie=[],Ce=(re=S.current)==null?void 0:re.querySelector(".ag-root");return Ce&&ie.push({getGui:()=>Ce}),z.current.forEach(Re=>{Re.isDisplayed()&&ie.push(Re)}),ie},setCursor:a,setUserSelect:h};ye.setComp(ve,F,F),g(!0)},[]);_.useEffect(()=>{const F=w.current,ye=S.current;if(!m||!K||!F||!A||!ye)return;const ve=[],{watermarkSelector:ie,paginationSelector:Ce,sideBarSelector:re,statusBarSelector:Re,gridHeaderDropZonesSelector:N}=F.getOptionalSelectors(),W=[];if(N){const oe=e.createBean(new N.component),ue=oe.getGui();ye.insertAdjacentElement("afterbegin",ue),W.push(ue),ve.push(oe)}if(re){const oe=e.createBean(new re.component),ue=oe.getGui(),xe=A.querySelector(".ag-tab-guard-bottom");xe&&(xe.insertAdjacentElement("beforebegin",ue),W.push(ue)),ve.push(oe),z.current.push(oe)}const ee=oe=>{const ue=e.createBean(new oe),xe=ue.getGui();return ye.insertAdjacentElement("beforeend",xe),W.push(xe),ve.push(ue),ue};if(Re&&ee(Re.component),Ce){const oe=ee(Ce.component);H.current=oe,z.current.push(oe)}return ie&&ee(ie.component),()=>{e.destroyBeans(ve),W.forEach(oe=>{var ue;(ue=oe.parentElement)==null||ue.removeChild(oe)})}},[m,A,K]);const D=_.useMemo(()=>zs("ag-root-wrapper",t,s),[t,s]),x=_.useMemo(()=>zs("ag-root-wrapper-body","ag-focus-managed",s),[s]),L=_.useMemo(()=>({userSelect:u??"",WebkitUserSelect:u??"",cursor:r??""}),[u,r]),M=_.useCallback(F=>{T.current=F,v(F!==null)},[]),B=_.useCallback(()=>{var F;return!((F=w.current)!=null&&F.isFocusable())},[]);return me.createElement("div",{ref:k,className:D,style:L,role:"presentation"},me.createElement("div",{className:x,ref:O,role:"presentation"},d&&A&&K&&me.createElement(qn.Provider,{value:K},me.createElement(J4,{ref:M,eFocusableElement:A,onTabKeyDown:U,gridCtrl:w.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:B},me.createElement(Q4,null)))))},t3=_.memo(e3),n3=class extends he{wireBeans(e){this.ctrlsSvc=e.ctrlsSvc}areHeaderCellsRendered(){return this.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(t=>t.areCellsRendered()))}},s3={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,setGridApi:void 0,componentWrappingElement:void 0,maxComponentCreationTimeMs:void 0,children:void 0},gI=new Set(Object.keys(s3)),pI=e=>{var A;const t=_.useRef(),n=_.useRef(null),s=_.useRef(null),i=_.useRef([]),r=_.useRef([]),a=_.useRef(e),u=_.useRef(),h=_.useRef(),d=_.useRef(!1),[g,m]=_.useState(void 0),[,v]=_.useState(0),w=_.useCallback(O=>{if(n.current=O,!O){i.current.forEach(M=>M()),i.current.length=0;return}const V=e.modules||[];s.current||(s.current=new E4(()=>v(M=>M+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),i.current.push(()=>{var M;(M=s.current)==null||M.destroy(),s.current=null}));const H=_O(e.gridOptions,e,Object.keys(e).filter(M=>!gI.has(M))),z=()=>{if(d.current){const M=()=>{var F;return(F=u.current)!=null&&F.shouldQueueUpdates()?void 0:r.current.shift()};let B=M();for(;B;)B(),B=M()}},U=new a3(z);u.current=U;const K=new n3,k={providedBeanInstances:{frameworkCompWrapper:new r3(s.current,H.reactiveCustomComponents??pH("reactiveCustomComponents")??!0),renderStatus:K},modules:V,frameworkOverrides:U,setThemeOnGridDiv:!0},D=M=>{m(M),M.createBean(K),i.current.push(()=>{M.destroy()}),M.getBean("ctrlsSvc").whenReady({addDestroyFunc:B=>{i.current.push(B)}},()=>{var F;if(M.isDestroyed())return;const B=t.current;B&&((F=e.setGridApi)==null||F.call(e,B))})},x=M=>{M.getBean("ctrlsSvc").whenReady({addDestroyFunc:B=>{i.current.push(B)}},()=>{r.current.forEach(B=>B()),r.current.length=0,d.current=!0})},L=new CH;H.gridId??(H.gridId=h.current),t.current=L.create(O,H,D,x,k),i.current.push(()=>{t.current=void 0}),t.current&&(h.current=t.current.getGridId())},[]),S=_.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),T=_.useCallback(O=>{var V;d.current&&!((V=u.current)!=null&&V.shouldQueueUpdates())?O():r.current.push(O)},[]);return _.useEffect(()=>{const O=i3(a.current,e);a.current=e,T(()=>{t.current&&IO(O,t.current)})},[e]),me.createElement("div",{style:S,className:e.className,ref:w},g&&!g.isDestroyed()?me.createElement(t3,{context:g}):null,((A=s.current)==null?void 0:A.getPortals())??null)};function i3(e,t){const n={};return Object.keys(t).forEach(s=>{if(gI.has(s))return;const i=t[s];e[s]!==i&&(n[s]=i)}),n}var r3=class extends DH{constructor(e,t){super(),this.parent=e,this.reactiveCustomComponents=t}createWrapper(e,t){if(this.reactiveCustomComponents){const i=(r=>{switch(r){case"filter":return f4;case"floatingFilterComponent":return p4;case"dateComponent":return h4;case"dragAndDropImageComponent":return d4;case"loadingOverlayComponent":return C4;case"noRowsOverlayComponent":return y4;case"statusPanel":return w4;case"toolPanel":return b4;case"menuItem":return v4;case"cellRenderer":return c4;case"innerHeaderComponent":return m4}})(t.name);if(i)return new i(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":fb();break}const n=!t.cellRenderer&&t.name!=="toolPanel";return new dI(e,this.parent,t,n)}},o3=_.forwardRef((e,t)=>{const n=_.useContext(qn),{registry:s,context:i,gos:r,rowModel:a}=n,[u,h]=_.useState(()=>new Us),[d,g]=_.useState(()=>new Us),[m,v]=_.useState(),[w,S]=_.useState(),T=_.useRef(),A=_.useRef(null),O=_.useRef(),V=_.useMemo(()=>Jk(e.api.getGridId(),(m==null?void 0:m.rowModelType)??"clientSide"),[e]),H=_.useMemo(()=>u.toString()+" ag-details-row",[u]),z=_.useMemo(()=>d.toString()+" ag-details-grid",[d]);t&&_.useImperativeHandle(t,()=>({refresh(){var k;return((k=T.current)==null?void 0:k.refresh())??!1}})),e.template&&be(230);const U=_.useCallback(k=>{var L;if(A.current=k,!k){T.current=i.destroyBean(T.current),(L=O.current)==null||L.call(O);return}const D={addOrRemoveCssClass:(M,B)=>h(F=>F.setClass(M,B)),addOrRemoveDetailGridCssClass:(M,B)=>g(F=>F.setClass(M,B)),setDetailGrid:M=>v(M),setRowData:M=>S(M),getGui:()=>A.current},x=s.createDynamicBean("detailCellRendererCtrl",!0);if(x&&(i.createBean(x),x.init(D,e),T.current=x,r.get("detailRowAutoHeight"))){const M=()=>{if(A.current==null)return;const B=A.current.clientHeight;B!=null&&B>0&&setTimeout(()=>{e.node.setRowHeight(B),(gc(r)||Md(r))&&a.onRowHeightChanged()},0)};O.current=Dr(n,k,M),M()}},[]),K=_.useCallback(k=>{var D;(D=T.current)==null||D.registerDetailWithMaster(k)},[]);return me.createElement("div",{className:H,ref:U},m&&me.createElement(pI,{className:z,...m,modules:V,rowData:w,setGridApi:K}))}),a3=class extends T_{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.frameworkComponents={agGroupCellRenderer:NT,agGroupRowRenderer:NT,agDetailCellRenderer:o3},this.wrapIncoming=(t,n)=>n==="ensureVisible"?o4(t):t(),this.renderingEngine="react"}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return r4()}},l3=class extends _.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach(t=>t(e))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return me.createElement(pI,{...this.props,setGridApi:this.setGridApi})}},u3=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility=this.md5("hello")!="5d41402abc4b2a76b9719d911017c592"}md5cycle(e,t){let n=e[0],s=e[1],i=e[2],r=e[3];n=this.ff(n,s,i,r,t[0],7,-680876936),r=this.ff(r,n,s,i,t[1],12,-389564586),i=this.ff(i,r,n,s,t[2],17,606105819),s=this.ff(s,i,r,n,t[3],22,-1044525330),n=this.ff(n,s,i,r,t[4],7,-176418897),r=this.ff(r,n,s,i,t[5],12,1200080426),i=this.ff(i,r,n,s,t[6],17,-1473231341),s=this.ff(s,i,r,n,t[7],22,-45705983),n=this.ff(n,s,i,r,t[8],7,1770035416),r=this.ff(r,n,s,i,t[9],12,-1958414417),i=this.ff(i,r,n,s,t[10],17,-42063),s=this.ff(s,i,r,n,t[11],22,-1990404162),n=this.ff(n,s,i,r,t[12],7,1804603682),r=this.ff(r,n,s,i,t[13],12,-40341101),i=this.ff(i,r,n,s,t[14],17,-1502002290),s=this.ff(s,i,r,n,t[15],22,1236535329),n=this.gg(n,s,i,r,t[1],5,-165796510),r=this.gg(r,n,s,i,t[6],9,-1069501632),i=this.gg(i,r,n,s,t[11],14,643717713),s=this.gg(s,i,r,n,t[0],20,-373897302),n=this.gg(n,s,i,r,t[5],5,-701558691),r=this.gg(r,n,s,i,t[10],9,38016083),i=this.gg(i,r,n,s,t[15],14,-660478335),s=this.gg(s,i,r,n,t[4],20,-405537848),n=this.gg(n,s,i,r,t[9],5,568446438),r=this.gg(r,n,s,i,t[14],9,-1019803690),i=this.gg(i,r,n,s,t[3],14,-187363961),s=this.gg(s,i,r,n,t[8],20,1163531501),n=this.gg(n,s,i,r,t[13],5,-1444681467),r=this.gg(r,n,s,i,t[2],9,-51403784),i=this.gg(i,r,n,s,t[7],14,1735328473),s=this.gg(s,i,r,n,t[12],20,-1926607734),n=this.hh(n,s,i,r,t[5],4,-378558),r=this.hh(r,n,s,i,t[8],11,-2022574463),i=this.hh(i,r,n,s,t[11],16,1839030562),s=this.hh(s,i,r,n,t[14],23,-35309556),n=this.hh(n,s,i,r,t[1],4,-1530992060),r=this.hh(r,n,s,i,t[4],11,1272893353),i=this.hh(i,r,n,s,t[7],16,-155497632),s=this.hh(s,i,r,n,t[10],23,-1094730640),n=this.hh(n,s,i,r,t[13],4,681279174),r=this.hh(r,n,s,i,t[0],11,-358537222),i=this.hh(i,r,n,s,t[3],16,-722521979),s=this.hh(s,i,r,n,t[6],23,76029189),n=this.hh(n,s,i,r,t[9],4,-640364487),r=this.hh(r,n,s,i,t[12],11,-421815835),i=this.hh(i,r,n,s,t[15],16,530742520),s=this.hh(s,i,r,n,t[2],23,-995338651),n=this.ii(n,s,i,r,t[0],6,-198630844),r=this.ii(r,n,s,i,t[7],10,1126891415),i=this.ii(i,r,n,s,t[14],15,-1416354905),s=this.ii(s,i,r,n,t[5],21,-57434055),n=this.ii(n,s,i,r,t[12],6,1700485571),r=this.ii(r,n,s,i,t[3],10,-1894986606),i=this.ii(i,r,n,s,t[10],15,-1051523),s=this.ii(s,i,r,n,t[1],21,-2054922799),n=this.ii(n,s,i,r,t[8],6,1873313359),r=this.ii(r,n,s,i,t[15],10,-30611744),i=this.ii(i,r,n,s,t[6],15,-1560198380),s=this.ii(s,i,r,n,t[13],21,1309151649),n=this.ii(n,s,i,r,t[4],6,-145523070),r=this.ii(r,n,s,i,t[11],10,-1120210379),i=this.ii(i,r,n,s,t[2],15,718787259),s=this.ii(s,i,r,n,t[9],21,-343485551),e[0]=this.add32(n,e[0]),e[1]=this.add32(s,e[1]),e[2]=this.add32(i,e[2]),e[3]=this.add32(r,e[3])}cmn(e,t,n,s,i,r){return t=this.add32(this.add32(t,e),this.add32(s,r)),this.add32(t<<i|t>>>32-i,n)}ff(e,t,n,s,i,r,a){return this.cmn(t&n|~t&s,e,t,i,r,a)}gg(e,t,n,s,i,r,a){return this.cmn(t&s|n&~s,e,t,i,r,a)}hh(e,t,n,s,i,r,a){return this.cmn(t^n^s,e,t,i,r,a)}ii(e,t,n,s,i,r,a){return this.cmn(n^(t|~s),e,t,i,r,a)}md51(e){const t=e.length,n=[1732584193,-271733879,-1732584194,271733878];let s;for(s=64;s<=e.length;s+=64)this.md5cycle(n,this.md5blk(e.substring(s-64,s)));e=e.substring(s-64);const i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<e.length;s++)i[s>>2]|=e.charCodeAt(s)<<(s%4<<3);if(i[s>>2]|=128<<(s%4<<3),s>55)for(this.md5cycle(n,i),s=0;s<16;s++)i[s]=0;return i[14]=t*8,this.md5cycle(n,i),n}md5blk(e){const t=[];for(let n=0;n<64;n+=4)t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return t}rhex(e){const t="0123456789abcdef".split("");let n="",s=0;for(;s<4;s++)n+=t[e>>s*8+4&15]+t[e>>s*8&15];return n}hex(e){for(let t=0;t<e.length;t++)e[t]=this.rhex(e[t]);return e.join("")}md5(e){return this.hex(this.md51(e))}add32(e,t){return this.ieCompatibility?this.add32Compat(e,t):this.add32Std(e,t)}add32Std(e,t){return e+t&4294967295}add32Compat(e,t){const n=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(n>>16)<<16|n&65535}},xg={"01":"GRID","02":"CHARTS","0102":"BOTH"},zT="https://www.ag-grid.com/licensing/",mI=class cs{constructor(t){this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=t,this.md5=new u3,this.md5.init()}validateLicense(){const t=this.getLicenseDetails(cs.licenseKey),n=`AG Grid ${t.currentLicenseType==="BOTH"?"and AG Charts ":""}Enterprise`,s=t.suppliedLicenseType===void 0?"":`AG ${t.suppliedLicenseType==="BOTH"?"Grid and AG Charts":t.suppliedLicenseType==="GRID"?"Grid":"Charts"} Enterprise`;if(t.missing)(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey(n);else if(t.expired){const i=cs.getGridReleaseDate(),r=cs.formatDate(i);this.outputExpiredKey(t.expiry,r,n,s)}else t.valid?t.isTrial&&t.trialExpired&&this.outputExpiredTrialKey(t.expiry,n,s):this.outputInvalidLicenseKey(!!t.incorrectLicenseType,n,s)}static extractExpiry(t){const n=t.substring(t.lastIndexOf("_")+1,t.length);return new Date(parseInt(cs.decode(n),10))}static extractLicenseComponents(t){let n=t.replace(/[\u200B-\u200D\uFEFF]/g,"");if(n=n.replace(/\r?\n|\r/g,""),t.length<=32)return{md5:null,license:t,version:null,isTrial:null};const s=n.length-32,i=n.substring(s),r=n.substring(0,s),[a,u,h]=cs.extractBracketedInformation(n);return{md5:i,license:r,version:a,isTrial:u,type:h}}getLicenseDetails(t){const n=cs.chartsLicenseManager?"BOTH":"GRID";if(!(t!=null&&t.length))return{licenseKey:t,valid:!1,missing:!0,currentLicenseType:n};const s=cs.getGridReleaseDate(),{md5:i,license:r,version:a,isTrial:u,type:h}=cs.extractLicenseComponents(t);let d=i===this.md5.md5(r)&&t.indexOf("For_Trialing_ag-Grid_Only")===-1,g,m,v=null,w=!1,S;function T(){g=v<new Date,m=void 0}if(d&&(v=cs.extractExpiry(r),d=!isNaN(v.getTime()),d))switch(m=s>v,a){case"legacy":case"2":{u&&T();break}case"3":h!=null&&h.length?(S=h,h!==xg["01"]&&h!==xg["0102"]||n==="BOTH"&&S!=="BOTH"?(d=!1,w=!0):u&&T()):d=!1}return d?{licenseKey:t,valid:d,expiry:cs.formatDate(v),expired:m,version:a,isTrial:u,trialExpired:g,incorrectLicenseType:w,currentLicenseType:n,suppliedLicenseType:S}:{licenseKey:t,valid:d,incorrectLicenseType:w,currentLicenseType:n,suppliedLicenseType:S}}isDisplayWatermark(){var t;return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!!((t=this.watermarkMessage)!=null&&t.length)}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){const n=(this.document.defaultView||window).location,{hostname:s=""}=n;return s}isForceWatermark(){const n=(this.document.defaultView||window).location,{pathname:s}=n;return s?s.indexOf("forceWatermark")!==-1:!1}isWebsiteUrl(){return this.getHostname().match(/^((?:[\w-]+\.)?ag-grid\.com)$/)!==null}isLocalhost(){return this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)!==null}static formatDate(t){const n=["January","February","March","April","May","June","July","August","September","October","November","December"],s=t.getDate(),i=t.getMonth(),r=t.getFullYear();return s+" "+n[i]+" "+r}static getGridReleaseDate(){return new Date(parseInt(cs.decode(cs.RELEASE_INFORMATION),10))}static decode(t){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",i,r,a,u,h,d,g,m=0;const v=t.replace(/[^A-Za-z0-9+/=]/g,"");for(;m<v.length;)u=n.indexOf(v.charAt(m++)),h=n.indexOf(v.charAt(m++)),d=n.indexOf(v.charAt(m++)),g=n.indexOf(v.charAt(m++)),i=u<<2|h>>4,r=(h&15)<<4|d>>2,a=(d&3)<<6|g,s=s+String.fromCharCode(i),d!=64&&(s=s+String.fromCharCode(r)),g!=64&&(s=s+String.fromCharCode(a));return s=cs.utf8_decode(s),s}static utf8_decode(t){t=t.replace(/rn/g,"n");let n="";for(let s=0;s<t.length;s++){const i=t.charCodeAt(s);i<128?n+=String.fromCharCode(i):i>127&&i<2048?(n+=String.fromCharCode(i>>6|192),n+=String.fromCharCode(i&63|128)):(n+=String.fromCharCode(i>>12|224),n+=String.fromCharCode(i>>6&63|128),n+=String.fromCharCode(i&63|128))}return n}static setChartsLicenseManager(t){this.chartsLicenseManager=t}static setLicenseKey(t){var n;this.licenseKey=t,(n=this.chartsLicenseManager)==null||n.setLicenseKey(t,!0)}static extractBracketedInformation(t){if(!t.includes("["))return["legacy",!1,void 0];const n=t.match(/\[(.*?)\]/g).map(u=>u.replace("[","").replace("]",""));if(!n||n.length===0)return["legacy",!1,void 0];const s=n.filter(u=>u==="TRIAL").length===1,i=n.filter(u=>u.indexOf("v")===0)[0],r=i?i.replace("v",""):"legacy",a=xg[n.filter(u=>xg[u])[0]];return[r,s,a]}centerPadAndOutput(t){const n=this.totalMessageLength-t.length;console.error(t.padStart(n/2+t.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(t,n="*",s=""){console.error(t.padEnd(this.totalMessageLength-s.length,n)+s)}outputInvalidLicenseKey(t,n,s){t?(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${n} License `),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput(`* Your license key is for ${s} only and does not cover you for ${n}.`," ","*"),this.padAndOutput(`* To troubleshoot your license key visit ${zT}.`," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${n} License `),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid."," ","*"),this.padAndOutput(`* To troubleshoot your license key visit ${zT}.`," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(t,n,s){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${n} License `),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput(`* Your trial only license for ${s} expired on ${t}.`," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(t){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${t} License `),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput(`* All ${t} features are unlocked for trial.`," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(t,n,s,i){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${s} License `),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput(`* Your license key works with versions of ${i} released before ${t}.`," ","*"),this.padAndOutput(`* The version you are trying to use was released on ${n}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="License Expired"}};mI.RELEASE_INFORMATION="MTczOTgwMzI0NzgzNQ==";var Dg=mI,c3='.ag-watermark{bottom:20px;color:#9b9b9b;opacity:.7;position:absolute;transition:opacity 1s ease-out 3s;&:before{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDkiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyMDkgMzYiPjxwYXRoIGZpbGw9IiM5QjlCOUIiIGQ9Ik0xOTIuOTkzIDIzLjY1OHYtNy45NDZoLTEzLjU0MWwtNy45NDcgNy45NDZ6TTIwOC4yNSAzLjk1aC0xNi45NzRsLTguMDEgNy45NDdoMjQuOTg0ek0xNjMuNjIyIDMxLjYwNWw0LjA2OS00LjA2OWgxMy43MzJ2Ny45NDdoLTE3LjgwMXoiLz48cGF0aCBmaWxsPSIjOUI5QjlCIiBkPSJNMTY2LjYxIDE5Ljc4aDguNzczbDguMDEtNy45NDZIMTY2LjYxek0xNTcuMDExIDMxLjYwNWg2LjYxMWw3Ljg4My03Ljk0N2gtMTQuNDk0ek0xOTEuMjc2IDMuOTVsLTQuMDY4IDQuMDdIMTYxLjI3Vi4wNzJoMzAuMDA2ek0yMC44NCAzMC4yMDZIOC4zNzhsLTIuMTYyIDUuMzRILjc1TDEyLjI1NyA4LjU5Mmg0Ljc2OEwyOC41MyAzNS41NDZoLTUuNTN6bS0xLjcxNy00LjI2TDE0LjYwOSAxNC45NWwtNC41MTQgMTAuOTk4ek0xMDQuNDM3IDE4LjUwOWMxLjU4OS0yLjM1MiA1LjU5NC0yLjYwNyA3LjI0Ny0yLjYwN3Y0LjU3OGMtMi4wMzQgMC00LjA2OS4wNjMtNS4yNzcuOTUzLTEuMjA3Ljg5LTEuODQzIDIuMDk4LTEuODQzIDMuNTZ2MTAuNTUzaC00Ljk1OVYxNS45MDJoNC43Njh6TTExOS4zNzYgMTUuOTAyaC00Ljk1OHYxOS42NDRoNC45NTh6TTExOS4zNzYgNy4xM2gtNC45NTh2NS44NDhoNC45NTh6TTE0My45NzkgNy4xM3YyOC40MTZoLTQuNzY4bC0uMTI3LTIuOTg4YTguMyA4LjMgMCAwIDEtMi42NyAyLjQ4Yy0xLjA4MS41NzItMi40MTYuODktMy45NDIuODktMS4zMzUgMC0yLjYwNi0uMjU1LTMuNjg3LS43LTEuMTQ0LS41MDgtMi4xNjItMS4xNDQtMi45ODgtMi4wMzRhOS42IDkuNiAwIDAgMS0xLjk3MS0zLjE3OWMtLjUwOC0xLjIwNy0uNjk5LTIuNjA2LS42OTktNC4xMzJzLjI1NC0yLjkyNC42OTktNC4xOTZjLjUwOS0xLjI3MSAxLjE0NS0yLjM1MiAxLjk3MS0zLjI0MnMxLjg0NC0xLjU4OSAyLjk4OC0yLjA5OCAyLjM1Mi0uNzYzIDMuNjg3LS43NjNjMS41MjYgMCAyLjc5Ny4yNTUgMy44NzguODI3czEuOTcxIDEuMzM1IDIuNjcgMi40MTZWNy4xOTNoNC45NTl6bS0xMC40MjYgMjQuNTM4YzEuNjUzIDAgMi45MjQtLjU3MiAzLjk0MS0xLjY1M3MxLjUyNi0yLjU0MyAxLjUyNi00LjMyMy0uNTA5LTMuMTc4LTEuNTI2LTQuMzIyYy0xLjAxNy0xLjA4MS0yLjI4OC0xLjY1My0zLjk0MS0xLjY1My0xLjU5IDAtMi45MjUuNTcyLTMuODc4IDEuNjUzLTEuMDE3IDEuMDgtMS41MjYgMi41NDMtMS41MjYgNC4zMjIgMCAxLjc4LjUwOSAzLjE4IDEuNTI2IDQuMjYgMS4wMTcgMS4xNDQgMi4yODggMS43MTYgMy44NzggMS43MTZNNTcuMjAyIDIwLjM1M0g0NC45MzN2NC4yNTloNi45OTNjLS4xOSAyLjE2MS0xLjAxNyAzLjgxNC0yLjQxNiA1LjE1LTEuMzk4IDEuMjctMy4xNzggMS45MDYtNS40NjcgMS45MDYtMS4yNzEgMC0yLjQ4LS4yNTQtMy40OTYtLjY5OWE3IDcgMCAwIDEtMi43MzQtMS45N2MtLjc2My0uODI3LTEuMzM1LTEuODQ0LTEuNzgtMy4wNTJzLS42MzYtMi40OC0uNjM2LTMuOTQyLjE5LTIuNzMzLjYzNi0zLjk0MWMuMzgxLTEuMjA4IDEuMDE3LTIuMTYyIDEuNzgtMy4wNTIuNzYzLS44MjYgMS42NTMtMS40NjIgMi43MzMtMS45N2E5LjEgOS4xIDAgMCAxIDMuNTYtLjdxNC4wMDUgMCA2LjEwMyAxLjkwN2wzLjMwNi0zLjMwNWMtMi40OC0xLjkwNy01LjY1OC0yLjkyNS05LjQwOS0yLjkyNS0yLjA5NyAwLTQuMDA0LjMxOC01LjcyMSAxLjAxOC0xLjcxNi42OTktMy4xNzkgMS41ODktNC4zODYgMi43OTdBMTIuMSAxMi4xIDAgMCAwIDMxLjIgMTYuMjJjLS42MzUgMS43MTctLjk1MyAzLjYyNC0uOTUzIDUuNjU4cy4zMTggMy45NDIgMS4wMTcgNS42NThjLjcgMS43MTcgMS41OSAzLjE3OSAyLjc5NyA0LjM4N2ExMi4xIDEyLjEgMCAwIDAgNC4zODcgMi43OTdjMS43MTYuNyAzLjYyMyAxLjAxNyA1LjY1NyAxLjAxNyAyLjAzNSAwIDMuODc4LS4zMTggNS41MzEtMS4wMTcgMS42NTMtLjcgMy4wNTItMS41OSA0LjE5Ni0yLjc5N3ExLjcxNi0xLjgxMiAyLjY3LTQuMzg3Yy42MzYtMS43MTYuOTU0LTMuNjIzLjk1NC01LjY1OHYtLjgyNmMtLjE5MS0uMTI3LS4yNTUtLjQ0NS0uMjU1LS43TTk1Ljk4MiAyMC4zNTNoLTEyLjI3djQuMjU5aDYuOTkzYy0uMTkgMi4xNjEtMS4wMTcgMy44MTQtMi40MTYgNS4xNS0xLjM5OCAxLjI3LTMuMTc4IDEuOTA2LTUuNDY3IDEuOTA2LTEuMjcxIDAtMi40OC0uMjU0LTMuNDk2LS42OTlhNyA3IDAgMCAxLTIuNzM0LTEuOTdjLS43NjMtLjgyNy0xLjMzNS0xLjg0NC0xLjc4LTMuMDUycy0uNjM2LTIuNDgtLjYzNi0zLjk0Mi4xOS0yLjczMy42MzYtMy45NDFjLjM4MS0xLjIwOCAxLjAxNy0yLjE2MiAxLjc4LTMuMDUyLjc2My0uODI2IDEuNjUzLTEuNDYyIDIuNzM0LTEuOTdhOS4xIDkuMSAwIDAgMSAzLjU2LS43cTQuMDA1IDAgNi4xMDMgMS45MDdsMy4zMDUtMy4zMDVjLTIuNDc5LTEuOTA3LTUuNjU4LTIuOTI1LTkuNDA4LTIuOTI1LTIuMDk4IDAtNC4wMDUuMzE4LTUuNzIyIDEuMDE4LTEuNzE2LjY5OS0zLjE3OCAxLjU4OS00LjM4NiAyLjc5N2ExMi4xIDEyLjEgMCAwIDAtMi43OTcgNC4zODZjLS42MzYgMS43MTctLjk1NCAzLjYyNC0uOTU0IDUuNjU4cy4zMTggMy45NDIgMS4wMTcgNS42NThjLjcgMS43MTcgMS41OSAzLjE3OSAyLjc5NyA0LjM4N2ExMi4xIDEyLjEgMCAwIDAgNC4zODcgMi43OTdjMS43MTYuNyAzLjYyMyAxLjAxNyA1LjY1OCAxLjAxNyAyLjAzNCAwIDMuODc4LS4zMTggNS41My0xLjAxNyAxLjY1My0uNyAzLjA1Mi0xLjU5IDQuMTk2LTIuNzk3cTEuNzE4LTEuODEyIDIuNjctNC4zODdjLjYzNi0xLjcxNi45NTQtMy42MjMuOTU0LTUuNjU4di0uODI2Yy0uMTktLjEyNy0uMjU1LS40NDUtLjI1NS0uNyIvPjwvc3ZnPg==");background-repeat:no-repeat;background-size:170px 40px;content:"";display:block;height:40px;width:170px}}:where(.ag-ltr) .ag-watermark{right:25px}:where(.ag-rtl) .ag-watermark{left:25px}.ag-watermark-text{font-family:Impact,sans-serif;font-size:19px;font-weight:700;opacity:.5}:where(.ag-ltr) .ag-watermark-text{padding-left:.7rem}:where(.ag-rtl) .ag-watermark-text{padding-right:.7rem}',h3=class extends vt{constructor(){super(`<div class="ag-watermark">
                <div data-ref="eLicenseTextRef" class="ag-watermark-text"></div>
            </div>`),this.eLicenseTextRef=Me,this.registerCSS(c3)}wireBeans(e){this.licenseManager=e.licenseManager}postConstruct(){const e=this.shouldDisplayWatermark();this.setDisplayed(e),e&&(this.eLicenseTextRef.textContent=this.licenseManager.getWatermarkMessage(),window.setTimeout(()=>this.addCssClass("ag-opacity-zero"),0),window.setTimeout(()=>this.setDisplayed(!1),5e3))}shouldDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}},d3={selector:"AG-WATERMARK",component:h3},f3=class extends he{constructor(){super(...arguments),this.beanName="licenseManager"}postConstruct(){this.validateLicense()}validateLicense(){this.licenseManager=new Dg(Jt(this.beans)),this.licenseManager.validateLicense()}static getLicenseDetails(e){return new Dg(null).getLicenseDetails(e)}getWatermarkSelector(){return d3}isDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}getWatermarkMessage(){return this.licenseManager.getWatermarkMessage()}static setLicenseKey(e){Dg.setLicenseKey(e)}static setChartsLicenseManager(e){Dg.setChartsLicenseManager(e)}},g3=9525,UT={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49},_g=`\r
`;function WT(e,t,n){return!t&&t!==""&&t!==0?"":` ${e}="${t}"`}function p3(e={}){const t="<?",n="?>",s=["version"];e.version||(e.version="1.0"),e.encoding&&s.push("encoding"),e.standalone&&s.push("standalone");const i=s.map(r=>`${r}="${e[r]}"`).join(" ");return`${t}xml ${i} ${n}`}function CI(e,t){let n="";e.properties&&(e.properties.prefixedAttributes&&e.properties.prefixedAttributes.forEach(i=>{Object.keys(i.map).forEach(r=>{n+=WT(i.prefix+r,i.map[r])})}),e.properties.rawMap&&Object.keys(e.properties.rawMap).forEach(i=>{n+=WT(i,e.properties.rawMap[i])}));let s="<"+e.name+n;return!e.children&&e.textNode==null?s+"/>"+_g:e.textNode!=null?s+">"+e.textNode+"</"+e.name+">"+_g:(s+=">"+_g,e.children&&e.children.forEach(i=>{s+=CI(i)}),s+"</"+e.name+">"+_g)}var m3=e=>Math.round(e*96/72),gu=e=>Math.ceil(e*g3),C3=e=>{if(e===void 0)return;const n=["Automatic","Roman","Swiss","Modern","Script","Decorative"].indexOf(e||"Automatic");return Math.max(n,0)},$g=(e,t)=>{if(!t)return;let n;return typeof t=="number"?n=t:n=t({rowIndex:e}),n},v3=(e,t)=>{const{colSpan:n,column:s}=e.position;if(e.width)if(n){const i=t.slice(s-1,s+n-1);let r=0;for(let a=0;a<i.length;a++){const u=i[a].getActualWidth();if(e.width<r+u){e.position.colSpan=a+1,e.totalWidth=e.width,e.width=e.totalWidth-r;break}r+=u}}else e.totalWidth=e.width},y3=(e,t)=>{const{rowSpan:n,row:s}=e.position;if(e.height)if(n){let i=0,r=0;for(let a=s;a<s+n;a++){const u=m3($g(a,t)||20);if(e.height<i+u){e.position.rowSpan=r+1,e.totalHeight=e.height,e.height=e.totalHeight-i;break}i+=u,r++}}else e.totalHeight=e.height},rs=(e,t)=>{const n=p3({encoding:"UTF-8",standalone:"yes"}),s=CI(e);return t?s:`${n}${s}`},al=e=>{const s=String.fromCharCode,i=Math.floor(e/26),r=e%26;return!i||e===26?s(65+e-1):r?i<26?s(65+i-1)+s(65+r-1):al(i)+s(65+r-1):al(i-1)+"Z"},nw=e=>{if(e==null)return null;let t="";for(let n=0;n<e.length;n++){const s=e.charCodeAt(n);if(s>=0&&s<=31&&s!==10){const a=`_x${s.toString(16).toUpperCase().padStart(4,"0")}_`;t+=a}else t+=e[n]}return t},w3=e=>{const t=[];for(const n of e.keys()){const s=n.toString(),i={name:"t",textNode:On(nw(s),!1)};s.trim().length!==s.length&&(i.properties={rawMap:{"xml:space":"preserve"}}),t.push({name:"si",children:[i]})}return t},b3={getTemplate(e){const{name:t,ContentType:n,Extension:s,PartName:i}=e;return{name:t,properties:{rawMap:{Extension:s,PartName:i,ContentType:n}}}}},S3=b3,cm=e=>e==="jpg"?"jpeg":e,E3={getTemplate(e){const t=new Array(e).fill(void 0).map((d,g)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:`/xl/worksheets/sheet${g+1}.xml`})),n=ul.size,s=No.size,i={};zu.forEach(d=>{i[cm(d.type)]=!0});const r=new Array(n).fill(void 0).map((d,g)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:`/xl/drawings/drawing${g+1}.xml`})),a=[];Er.forEach(({name:d})=>{a.push({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml",PartName:`/xl/tables/${d}.xml`})});const u=Object.keys(i).map(d=>({name:"Default",ContentType:`image/${d}`,Extension:d}));s&&u.push({name:"Default",Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"});const h=[...u,{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"},...t,{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"},...r,...a,{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}].map(d=>S3.getTemplate(d));return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:h}}},R3=E3,T3={getTemplate(e){const n=new Date().toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:e},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:n},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:n}]}}},A3=T3,jT=(e,t)=>({name:`xdr:${e}`,children:[{name:"xdr:col",textNode:t.col.toString()},{name:"xdr:colOff",textNode:t.offsetX.toString()},{name:"xdr:row",textNode:t.row.toString()},{name:"xdr:rowOff",textNode:t.offsetY.toString()}]}),x3=e=>{const t=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}];switch(e.recolor&&e.recolor.toLowerCase()){case"grayscale":case"sepia":case"washout":t.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children:t}},D3=(e,t)=>({name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:t,name:e.id,descr:e.altText!=null?e.altText:void 0}},children:[x3(e)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}),qT=e=>{if(!e.saturation&&!e.tint)return;const t=[];return e.saturation&&t.push({name:"a:satMod",properties:{rawMap:{val:e.saturation*1e3}}}),e.tint&&t.push({name:"a:tint",properties:{rawMap:{val:e.tint*1e3}}}),t},_3=(e,t)=>({name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:e.color}},children:qT(e)},{name:"a:srgbClr",properties:{rawMap:{val:t.color}},children:qT(t)}]}),I3=(e,t)=>{let n;if(e.transparency){const s=Math.min(Math.max(e.transparency,0),100);n=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(s*1e3)}}}]}if(e.recolor)switch(n||(n=[]),e.recolor.toLocaleLowerCase()){case"grayscale":n.push({name:"a:grayscl"});break;case"sepia":n.push(_3({color:"black"},{color:"D9C3A5",tint:50,saturation:180}));break;case"washout":n.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}});break}return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":`rId${t}`,"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:n},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}},M3=(e,t)=>{const n={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:t.width,cy:t.height}}}]};if(e.rotation){const r=e.rotation;n.properties={rawMap:{rot:Math.min(Math.max(r,0),360)*6e4}}}return{name:"xdr:spPr",children:[n,{name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]}]}},F3=e=>{e.fitCell=!!e.fitCell||!e.width||!e.height;const{position:t={},fitCell:n,width:s=0,height:i=0,totalHeight:r,totalWidth:a}=e,{offsetX:u=0,offsetY:h=0,row:d=1,rowSpan:g=1,column:m=1,colSpan:v=1}=t;return{from:{row:d-1,col:m-1,offsetX:gu(u),offsetY:gu(h)},to:{row:d-1+(n?1:g-1),col:m-1+(n?1:v-1),offsetX:gu(s+u),offsetY:gu(i+h)},height:gu(r||i),width:gu(a||s)}},P3=(e,t,n,s)=>({name:"xdr:pic",children:[D3(e,t+1),I3(e,n+1),M3(e,s)]}),L3={getTemplate(e){const{sheetIndex:t}=e,n=ul.get(t),s=hd.get(t),i=n.map((r,a)=>{const u=F3(r);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[jT("from",u.from),jT("to",u.to),P3(r,a,s.get(r.id).index,u),{name:"xdr:clientData"}]}});return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children:i}}},O3=L3,k3={getTemplate(e){const{Id:t,Type:n,Target:s}=e;return{name:"Relationship",properties:{rawMap:{Id:t,Type:n,Target:s}}}}},N3=k3,V3={getTemplate(e){const t=e.map(n=>N3.getTemplate(n));return{name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:t}}},Nd=V3,B3={getTemplate(e){return{name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:e.size,uniqueCount:e.size}},children:w3(e)}}},G3=B3,H3=e=>{switch(e){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}},z3={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot",Continuous:"Continuous"},U3=["Dashed","DashDot","DashDotDot"],W3={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"},j3={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"},q3={Automatic:void 0,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"},$3=e=>e?W3[e]||e:"none",Do=e=>e==null?e:(e.charAt(0)==="#"&&(e=e.substring(1)),e.length===6?"FF"+e:e),Ig=(e,t)=>{if(!e)return"thin";const n=H3(t);if(e==="Continuous")return n;const s=z3[e];return n==="medium"&&U3.some(i=>i===s)?`medium${s}`:`${s.charAt(0).toLowerCase()}${s.substring(1)}`},K3=e=>j3[e]||"general",Y3=e=>q3[e]||void 0,Ph=e=>({name:"color",properties:{rawMap:{rgb:Do(e||"#000000")}}}),Q3={getTemplate(e){const{left:t,right:n,top:s,bottom:i,diagonal:r}=e,a=t?[Ph(t.color)]:void 0,u=n?[Ph(n.color)]:void 0,h=s?[Ph(s.color)]:void 0,d=i?[Ph(i.color)]:void 0,g=r?[Ph(r.color)]:void 0;return{name:"border",children:[{name:"left",properties:{rawMap:{style:t&&t.style}},children:a},{name:"right",properties:{rawMap:{style:n&&n.style}},children:u},{name:"top",properties:{rawMap:{style:s&&s.style}},children:h},{name:"bottom",properties:{rawMap:{style:i&&i.style}},children:d},{name:"diagonal",properties:{rawMap:{style:r&&r.style}},children:g}]}}},X3=Q3,Z3={getTemplate(e){return{name:"borders",properties:{rawMap:{count:e.length}},children:e.map(t=>X3.getTemplate(t))}}},J3=Z3,e5=e=>{const n=["Context","LeftToRight","RightToLeft"].indexOf(e);return Math.max(n,0)},t5={getTemplate(e){const{horizontal:t,indent:n,readingOrder:s,rotate:i,shrinkToFit:r,vertical:a,wrapText:u}=e;return{name:"alignment",properties:{rawMap:{horizontal:t&&K3(t),indent:n,readingOrder:s&&e5(s),textRotation:i,shrinkToFit:r,vertical:a&&Y3(a),wrapText:u}}}}},n5=t5,s5={getTemplate(e){const t=e.protected===!1?0:1;return{name:"protection",properties:{rawMap:{hidden:e.hideFormula===!0?1:0,locked:t}}}}},i5=s5,r5={getTemplate(e){const{alignment:t,borderId:n,fillId:s,fontId:i,numFmtId:r,protection:a,quotePrefix:u,xfId:h}=e,d=[];return t&&d.push(n5.getTemplate(t)),a&&d.push(i5.getTemplate(a)),{name:"xf",properties:{rawMap:{applyAlignment:t?1:void 0,applyProtection:a?1:void 0,applyBorder:n?1:void 0,applyFill:s?1:void 0,borderId:n,fillId:s,applyFont:i?1:void 0,fontId:i,applyNumberFormat:r?1:void 0,numFmtId:r,quotePrefix:u?1:void 0,xfId:h}},children:d.length?d:void 0}}},vI=r5,o5={getTemplate(e){return{name:"cellStyleXfs",properties:{rawMap:{count:e.length}},children:e.map(t=>vI.getTemplate(t))}}},a5=o5,l5={getTemplate(e){const{builtinId:t,name:n,xfId:s}=e;return{name:"cellStyle",properties:{rawMap:{builtinId:t,name:n,xfId:s}}}}},u5=l5,c5={getTemplate(e){return{name:"cellStyles",properties:{rawMap:{count:e.length}},children:e.map(t=>u5.getTemplate(t))}}},h5=c5,d5={getTemplate(e){return{name:"cellXfs",properties:{rawMap:{count:e.length}},children:e.map(t=>vI.getTemplate(t))}}},f5=d5,g5={getTemplate(e){const{patternType:t,fgTheme:n,fgTint:s,fgRgb:i,bgRgb:r,bgIndexed:a}=e,u={name:"patternFill",properties:{rawMap:{patternType:t}}};return(n||s||i)&&(u.children=[{name:"fgColor",properties:{rawMap:{theme:n,tint:s,rgb:i}}}]),(a||r)&&(u.children||(u.children=[]),u.children.push({name:"bgColor",properties:{rawMap:{indexed:a,rgb:r}}})),{name:"fill",children:[u]}}},p5=g5,m5={getTemplate(e){return{name:"fills",properties:{rawMap:{count:e.length}},children:e.map(t=>p5.getTemplate(t))}}},C5=m5,v5={getTemplate(e){const{size:t,colorTheme:n,color:s="FF000000",fontName:i="Calibri",family:r,scheme:a,italic:u,bold:h,strikeThrough:d,outline:g,shadow:m,underline:v,verticalAlign:w}=e,S=[{name:"sz",properties:{rawMap:{val:t}}},{name:"color",properties:{rawMap:{theme:n,rgb:s}}},{name:"name",properties:{rawMap:{val:i}}}];return r&&S.push({name:"family",properties:{rawMap:{val:r}}}),a&&S.push({name:"scheme",properties:{rawMap:{val:a}}}),u&&S.push({name:"i"}),h&&S.push({name:"b"}),d&&S.push({name:"strike"}),g&&S.push({name:"outline"}),m&&S.push({name:"shadow"}),v&&S.push({name:"u",properties:{rawMap:{val:v}}}),w&&S.push({name:"vertAlign",properties:{rawMap:{val:w}}}),{name:"font",children:S}}},y5=v5,w5={getTemplate(e){return{name:"fonts",properties:{rawMap:{count:e.length}},children:e.map(t=>y5.getTemplate(t))}}},b5=w5;function S5(e){const t=e.split(/(\[[^\]]*\])/);for(let n=0;n<t.length;n++){let s=t[n];s.length&&(s.startsWith("[")||(s=s.replace(/\$/g,'"$"')),t[n]=On(s))}return t.join("")}var E5={getTemplate(e){let{formatCode:t,numFmtId:n}=e;return t.length&&(t=S5(t)),{name:"numFmt",properties:{rawMap:{formatCode:t,numFmtId:n}}}}},R5=E5,T5={getTemplate(e){return{name:"numFmts",properties:{rawMap:{count:e.length}},children:e.map(t=>R5.getTemplate(t))}}},A5=T5,Tp,_u,Kh,Yh,Qh,yI,Ap,wI,sw,bI=(e,t)=>(e.indexOf("mixedStyle")!==-1&&t>1&&(e+=`_${t}`),e),SI=()=>{Tp={base:0},_u=[],Kh=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}],Yh=[{patternType:"none"},{patternType:"gray125"}],Qh=[{left:void 0,right:void 0,top:void 0,bottom:void 0,diagonal:void 0}],yI=[{borderId:0,fillId:0,fontId:0,numFmtId:0}],Ap=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}],wI=[{builtinId:0,name:"Normal",xfId:0}]},x5=e=>{const t=$3(e.pattern),n=Do(e.color),s=Do(e.patternColor);let i=Yh.findIndex(r=>{const{patternType:a,fgRgb:u,bgRgb:h}=r;return!(a!=t||u!=n||h!=s)});return i===-1&&(i=Yh.length,Yh.push({patternType:t,fgRgb:n,bgRgb:s})),i},D5=e=>{if(UT[e])return UT[e];let t=_u.findIndex(n=>n.formatCode===e);return t===-1?(t=_u.length+164,_u.push({formatCode:e,numFmtId:t})):t=_u[t].numFmtId,t},_5=e=>{const{borderBottom:t,borderTop:n,borderLeft:s,borderRight:i}=e;let r,a,u,h,d,g,m,v;s&&(u=Ig(s.lineStyle,s.weight),m=Do(s.color)),i&&(h=Ig(i.lineStyle,i.weight),v=Do(i.color)),t&&(r=Ig(t.lineStyle,t.weight),d=Do(t.color)),n&&(a=Ig(n.lineStyle,n.weight),g=Do(n.color));let w=Qh.findIndex(S=>{const{left:T,right:A,top:O,bottom:V}=S;if(!T&&(u||m)||!A&&(h||v)||!O&&(a||g)||!V&&(r||d))return!1;const{style:H,color:z}=T||{},{style:U,color:K}=A||{},{style:k,color:D}=O||{},{style:x,color:L}=V||{};return!(H!=u||z!=m||U!=h||K!=v||k!=a||D!=g||x!=r||L!=d)});return w===-1&&(w=Qh.length,Qh.push({left:{style:u,color:m},right:{style:h,color:v},top:{style:a,color:g},bottom:{style:r,color:d},diagonal:{style:void 0,color:void 0}})),w},I5=e=>{const{fontName:t="Calibri",color:n,size:s,bold:i,italic:r,outline:a,shadow:u,strikeThrough:h,underline:d,family:g,verticalAlign:m}=e,v=Do(n),w=C3(g),S=d?d.toLocaleLowerCase():void 0,T=m?m.toLocaleLowerCase():void 0;let A=Kh.findIndex(O=>!(O.fontName!=t||O.color!=v||O.size!=s||O.bold!=i||O.italic!=r||O.outline!=a||O.shadow!=u||O.strikeThrough!=h||O.underline!=S||O.verticalAlign!=T||O.family!=w));return A===-1&&(A=Kh.length,Kh.push({fontName:t,color:v,size:s,bold:i,italic:r,outline:a,shadow:u,strikeThrough:h,underline:S,verticalAlign:T,family:w!=null?w.toString():void 0})),A},M5=e=>{const{alignment:t,borders:n,font:s,interior:i,numberFormat:r,protection:a,quotePrefix:u}=e;let{id:h}=e,d=0,g=0,m=0,v=0;h&&(h=bI(h,sw),Tp[h]==null&&(i&&(d=x5(i)),n&&(g=_5(n)),s&&(m=I5(s)),r&&(v=D5(r.format)),Tp[h]=Ap.length,Ap.push({alignment:t,borderId:g||0,fillId:d||0,fontId:m||0,numFmtId:v||0,protection:a,quotePrefix:u,xfId:0})))},F5={getTemplate(e){const t=A5.getTemplate(_u),n=b5.getTemplate(Kh.map(h=>({...h,size:h.size!=null?h.size:e}))),s=C5.getTemplate(Yh),i=J3.getTemplate(Qh),r=a5.getTemplate(yI),a=f5.getTemplate(Ap),u=h5.getTemplate(wI);return SI(),{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[t,n,s,i,r,a,u,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}}},P5=(e,t)=>Tp[bI(e,t)]||0,L5=(e,t)=>{sw=t,sw===1&&SI(),e.forEach(M5)},O5=F5,k5={getTemplate(e,t){const{name:n,columns:s,rowRange:i,displayName:r,showRowStripes:a,showColumnStripes:u,showFilterButtons:h,highlightFirstColumn:d,highlightLastColumn:g}=e||{},m=!i||i[0]-i[1]===0;if(!e||!n||!Array.isArray(s)||!s.length||m)return{name:"table"};const v=s.map((V,H)=>({name:"filterColumn",properties:{rawMap:{colId:H.toString(),hiddenButton:h[H]?0:1}}})),w=`A${i[0]}`,S=`${al(s.length)}${i[1]}`,T=`${w}:${S}`,A=`${t+1}`,O=t?`${r}_${A}`:r;return{name:"table",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3",name:n,displayName:O,ref:T,totalsRowShown:0,id:A}},children:[{name:"autoFilter",properties:{rawMap:{ref:T}},children:v},{name:"tableColumns",properties:{rawMap:{count:s.length}},children:s.map((V,H)=>({name:"tableColumn",properties:{rawMap:{id:(H+1).toString(),name:V,dataCellStyle:"Normal"}}}))},{name:"tableStyleInfo",properties:{rawMap:{name:"TableStyleLight1",showFirstColumn:d?1:0,showLastColumn:g?1:0,showRowStripes:a?1:0,showColumnStripes:u?1:0}}}]}}},N5=k5,Gs=e=>{const[t,n,s,i]=e;return{name:`a:${t}`,children:[{name:`a:${n}`,properties:{rawMap:{val:s,lastClr:i}}}]}},V5={getTemplate(){return{name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[Gs(["dk1","sysClr","windowText","000000"]),Gs(["lt1","sysClr","window","FFFFFF"]),Gs(["dk2","srgbClr","44546A"]),Gs(["lt2","srgbClr","E7E6E6"]),Gs(["accent1","srgbClr","4472C4"]),Gs(["accent2","srgbClr","ED7D31"]),Gs(["accent3","srgbClr","A5A5A5"]),Gs(["accent4","srgbClr","FFC000"]),Gs(["accent5","srgbClr","5B9BD5"]),Gs(["accent6","srgbClr","70AD47"]),Gs(["hlink","srgbClr","0563C1"]),Gs(["folHlink","srgbClr","954F72"])]}}},B5=V5,pe=e=>{const[t,n,s,i]=e;return{name:`a:${t}`,properties:{rawMap:{script:s,typeface:n,panose:i}}}},G5={getTemplate(){return{name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[pe(["latin","Calibri Light",void 0,"020F0302020204030204"]),pe(["ea",""]),pe(["cs",""]),pe(["font"," Light","Jpan"]),pe(["font"," ","Hang"]),pe(["font"," Light","Hans"]),pe(["font","","Hant"]),pe(["font","Times New Roman","Arab"]),pe(["font","Times New Roman","Hebr"]),pe(["font","Tahoma","Thai"]),pe(["font","Nyala","Ethi"]),pe(["font","Vrinda","Beng"]),pe(["font","Shruti","Gujr"]),pe(["font","MoolBoran","Khmr"]),pe(["font","Tunga","Knda"]),pe(["font","Raavi","Guru"]),pe(["font","Euphemia","Cans"]),pe(["font","Plantagenet Cherokee","Cher"]),pe(["font","Microsoft Yi Baiti","Yiii"]),pe(["font","Microsoft Himalaya","Tibt"]),pe(["font","MV Boli","Thaa"]),pe(["font","Mangal","Deva"]),pe(["font","Gautami","Telu"]),pe(["font","Latha","Taml"]),pe(["font","Estrangelo Edessa","Syrc"]),pe(["font","Kalinga","Orya"]),pe(["font","Kartika","Mlym"]),pe(["font","DokChampa","Laoo"]),pe(["font","Iskoola Pota","Sinh"]),pe(["font","Mongolian Baiti","Mong"]),pe(["font","Times New Roman","Viet"]),pe(["font","Microsoft Uighur","Uigh"]),pe(["font","Sylfaen","Geor"]),pe(["font","Arial","Armn"]),pe(["font","Leelawadee UI","Bugi"]),pe(["font","Microsoft JhengHei","Bopo"]),pe(["font","Javanese Text","Java"]),pe(["font","Segoe UI","Lisu"]),pe(["font","Myanmar Text","Mymr"]),pe(["font","Ebrima","Nkoo"]),pe(["font","Nirmala UI","Olck"]),pe(["font","Ebrima","Osma"]),pe(["font","Phagspa","Phag"]),pe(["font","Estrangelo Edessa","Syrn"]),pe(["font","Estrangelo Edessa","Syrj"]),pe(["font","Estrangelo Edessa","Syre"]),pe(["font","Nirmala UI","Sora"]),pe(["font","Microsoft Tai Le","Tale"]),pe(["font","Microsoft New Tai Lue","Talu"]),pe(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[pe(["latin","Calibri",void 0,"020F0502020204030204"]),pe(["ea",""]),pe(["cs",""]),pe(["font","","Jpan"]),pe(["font"," ","Hang"]),pe(["font","","Hans"]),pe(["font","","Hant"]),pe(["font","Arial","Arab"]),pe(["font","Arial","Hebr"]),pe(["font","Tahoma","Thai"]),pe(["font","Nyala","Ethi"]),pe(["font","Vrinda","Beng"]),pe(["font","Shruti","Gujr"]),pe(["font","DaunPenh","Khmr"]),pe(["font","Tunga","Knda"]),pe(["font","Raavi","Guru"]),pe(["font","Euphemia","Cans"]),pe(["font","Plantagenet Cherokee","Cher"]),pe(["font","Microsoft Yi Baiti","Yiii"]),pe(["font","Microsoft Himalaya","Tibt"]),pe(["font","MV Boli","Thaa"]),pe(["font","Mangal","Deva"]),pe(["font","Gautami","Telu"]),pe(["font","Latha","Taml"]),pe(["font","Estrangelo Edessa","Syrc"]),pe(["font","Kalinga","Orya"]),pe(["font","Kartika","Mlym"]),pe(["font","DokChampa","Laoo"]),pe(["font","Iskoola Pota","Sinh"]),pe(["font","Mongolian Baiti","Mong"]),pe(["font","Arial","Viet"]),pe(["font","Microsoft Uighur","Uigh"]),pe(["font","Sylfaen","Geor"]),pe(["font","Arial","Armn"]),pe(["font","Leelawadee UI","Bugi"]),pe(["font","Microsoft JhengHei","Bopo"]),pe(["font","Javanese Text","Java"]),pe(["font","Segoe UI","Lisu"]),pe(["font","Myanmar Text","Mymr"]),pe(["font","Ebrima","Nkoo"]),pe(["font","Nirmala UI","Olck"]),pe(["font","Ebrima","Osma"]),pe(["font","Phagspa","Phag"]),pe(["font","Estrangelo Edessa","Syrn"]),pe(["font","Estrangelo Edessa","Syrj"]),pe(["font","Estrangelo Edessa","Syre"]),pe(["font","Nirmala UI","Sora"]),pe(["font","Microsoft Tai Le","Tale"]),pe(["font","Microsoft New Tai Lue","Talu"]),pe(["font","Ebrima","Tfng"])]}]}}},H5=G5,_i=(e,t,n)=>({name:`a:${e}`,properties:{rawMap:{val:t}},children:n}),py=e=>{const[t,n,s,i,r,a]=e,u=[];return u.push(_i("satMod",s)),i&&u.push(_i("lumMod",i)),r&&u.push(_i("tint",r)),a&&u.push(_i("shade",a)),{name:"a:gs",properties:{rawMap:{pos:t}},children:[{name:"a:schemeClr",properties:{rawMap:{val:n}},children:u}]}},xp=(e,t)=>({name:"a:solidFill",children:[_i("schemeClr",e,t)]}),iw=e=>{const[t,n,s,i,r]=e,[a,u]=r;return{name:"a:gradFill",properties:{rawMap:{rotWithShape:t}},children:[{name:"a:gsLst",children:[py(n),py(s),py(i)]},{name:"a:lin",properties:{rawMap:{ang:a,scaled:u}}}]}},my=e=>{const[t,n,s,i]=e;return{name:"a:ln",properties:{rawMap:{w:t,cap:n,cmpd:s,algn:i}},children:[xp("phClr"),_i("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}},Cy=e=>{const t=[];if(e){const[n,s,i,r,a]=e;t.push({name:"a:outerShdw",properties:{rawMap:{blurRad:n,dist:s,dir:i,algn:r,rotWithShape:a}},children:[_i("srgbClr","000000",[_i("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},t.length?{children:t}:{})]}},z5=()=>({name:"a:fillStyleLst",children:[xp("phClr"),iw(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),iw(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",void 0,"100000"],["100000","phClr","120000","99000",void 0,"78000"],["5400000","0"]])]}),U5=()=>({name:"a:lnStyleLst",children:[my(["6350","flat","sng","ctr"]),my(["12700","flat","sng","ctr"]),my(["19050","flat","sng","ctr"])]}),W5=()=>({name:"a:effectStyleLst",children:[Cy(),Cy(),Cy(["57150","19050","5400000","ctr","0"])]}),j5=()=>({name:"a:bgFillStyleLst",children:[xp("phClr"),xp("phClr",[_i("tint","95000"),_i("satMod","170000")]),iw(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",void 0,void 0,"63000"],["5400000","0"]])]}),q5={getTemplate(){return{name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[z5(),U5(),W5(),j5()]}}},$5=q5,K5={getTemplate(){return{name:"a:themeElements",children:[B5.getTemplate(),H5.getTemplate(),$5.getTemplate()]}}},Y5=K5,Q5={getTemplate(){return{name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[Y5.getTemplate(),{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]}}},X5=Q5,Z5=()=>({name:"o:shapelayout",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}]},children:[{name:"o:idmap",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}],rawMap:{data:"1"}}}]}),J5=()=>({name:"v:stroke",properties:{rawMap:{joinstyle:"miter"}}}),eU=e=>({name:"v:formulas",children:e.map(t=>({name:"v:f",properties:{rawMap:{eqn:t}}}))}),tU=()=>({name:"v:path",properties:{prefixedAttributes:[{prefix:"o:",map:{connecttype:"rect",extrusionok:"f"}}],rawMap:{gradientshapeok:"t"}}}),EI=e=>{const{aspectratio:t,rotation:n}=e||{},s={};return t&&(s.aspectratio="t"),n&&(s.rotation="t"),{name:"o:lock",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}],rawMap:s}}};function nU(e,t,n,s,i){return(e-t)/(n-t)*(i-s)+s}var sU=(e,t)=>{let n;const{recolor:s,brightness:i,contrast:r,id:a}=e;if(s&&(n={},(s==="Washout"||s==="Grayscale")&&(n.gain="19661f",n.blacklevel="22938f"),(s==="Black & White"||s==="Grayscale")&&(n.grayscale="t",s==="Black & White"&&(n.bilevel="t"))),!s||s==="Grayscale"){if(n||(n={}),r!=null&&r!==50){let u="1";r>=0&&(r<50?u=String(r/50):r<100?u=String(50/(100-r)):r===100&&(u="2147483647f")),n.gain=u}i!=null&&i!==50&&(n.blacklevel=nU(i,0,100,-.5,.5).toString())}return{name:"v:imagedata",properties:{prefixedAttributes:[{prefix:"o:",map:{relid:`rId${t}`,title:a}}],rawMap:n}}},iU=()=>{const e=["if lineDrawn pixelLineWidth 0","sum @0 1 0","sum 0 0 @1","prod @2 1 2","prod @3 21600 pixelWidth","prod @3 21600 pixelHeight","sum @0 0 1","prod @6 1 2","prod @7 21600 pixelWidth","sum @8 21600 0","prod @7 21600 pixelHeight","sum @10 21600 0"];return{name:"v:shapetype",properties:{prefixedAttributes:[{prefix:"o:",map:{spt:"75",preferrelative:"t"}}],rawMap:{coordsize:"21600,21600",filled:"f",id:"_x0000_t75",path:"m@4@5l@4@11@9@11@9@5xe",stroked:"f"}},children:[J5(),eU(e),tU(),EI({aspectratio:!0})]}},$T=e=>Math.floor((e??0)*.74999943307122),rU=(e,t)=>{const{width:n=0,height:s=0,altText:i}=e,r=$T(n),a=$T(s);return{name:"v:shape",properties:{rawMap:{id:e.headerFooterPosition,"o:spid":"_x0000_s1025",style:`position: absolute; margin-left: 0; margin-top: 10in; margin-bottom: 0; margin-right: 0; width: ${r}pt; height: ${a}pt; z-index: ${t+1}`,type:"#_x0000_t75",alt:i}},children:[sU(e,t+1),EI({rotation:!0})]}},oU={getTemplate(e){const t=No.get(e.sheetIndex)||[],n=[Z5(),iU(),...t.map((s,i)=>rU(s,i))];return{name:"xml",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{v:"urn:schemas-microsoft-com:vml",o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel"}}]},children:n}}},aU=oU,lU={getTemplate(e,t){const n=(t+1).toString();return{name:"sheet",properties:{rawMap:{name:e,sheetId:n,"r:id":`rId${n}`}}}}},uU=lU,cU={getTemplate(e){return{name:"sheets",children:e.map((t,n)=>uU.getTemplate(t,n))}}},hU=cU,dU={getTemplate(e,t){return{name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[{name:"bookViews",children:[{name:"workbookView",properties:{rawMap:{activeTab:t}}}]},hU.getTemplate(e)]}}},fU=dU,gU=e=>Math.ceil((e-12)/7+1),pU={getTemplate(e){const{min:t,max:n,outlineLevel:s,s:i,width:r,hidden:a,bestFit:u}=e;let h=1,d="0";return r>1&&(h=gU(r),d="1"),{name:"col",properties:{rawMap:{min:t,max:n,outlineLevel:s??void 0,width:h,style:i,hidden:a?"1":"0",bestFit:u?"1":"0",customWidth:d}}}}},mU=pU,CU={getTemplate(e){return{name:"mergeCell",properties:{rawMap:{ref:e}}}}},vU=CU,yU=e=>{const t=e.charAt(0).toLowerCase();return t==="s"?"inlineStr":t},wU={getTemplate(e,t,n){const{ref:s,data:i,styleId:r}=e,{type:a,value:u}=i||{type:"empty",value:null};let h=a;a==="f"?h="str":a.charAt(0)===a.charAt(0).toUpperCase()&&(h=yU(a));const d={name:"c",properties:{rawMap:{r:s,t:h==="empty"?void 0:h,s:r?P5(r,n):void 0}}};if(h==="empty")return d;let g;return h==="str"&&a==="f"?g=[{name:"f",textNode:On(nw(u),!1)}]:h==="inlineStr"?g=[{name:"is",children:[{name:"t",textNode:On(nw(u),!1)}]}]:g=[{name:"v",textNode:u}],Object.assign({},d,{children:g})}},bU=wU,SU=(e,t)=>{const n=[];let s=0;for(let i=0;i<e.length;i++){const r=e[i];r.mergeAcross&&(n.push({pos:i,excelPos:s}),s+=r.mergeAcross),s++}if(n.length)for(let i=n.length-1;i>=0;i--){const r=[],a=e[n[i].pos];for(let u=1;u<=a.mergeAcross;u++)r.push({ref:`${al(n[i].excelPos+1+u)}${t+1}`,styleId:a.styleId,data:{type:"empty",value:null}});r.length&&e.splice(n[i].pos+1,0,...r)}},EU=e=>{var t;return((t=e.data)==null?void 0:t.value)!==""||e.styleId!==void 0},RU={getTemplate(e,t,n){const{collapsed:s,hidden:i,height:r,outlineLevel:a,cells:u=[]}=e;SU(u,t);const h=u.filter(EU).map((d,g)=>bU.getTemplate(d,g,n));return{name:"row",properties:{rawMap:{r:t+1,collapsed:s?"1":"0",hidden:i?"1":"0",ht:r,customHeight:r!=null?"1":"0",spans:"1:1",outlineLevel:a||void 0}},children:h}}},TU=RU,AU=(e,t,n)=>{const s=[],i=[];e.forEach((u,h)=>{const d=u.cells;let g=0,m;d.forEach((v,w)=>{const S=w+g+1,T=al(S),A=h+1;if(v.mergeAcross){g+=v.mergeAcross;const V=al(w+g+1);s.push(`${T}${A}:${V}${A}`)}t[S-1]||(t[S-1]={});const{collapsibleRanges:O}=v;O&&O.forEach(V=>{i.push([S+V[0],S+V[1]])}),m=t[S-1],m.min=S,m.max=S,v.ref=`${T}${A}`})}),i.sort((u,h)=>u[0]!==h[0]?u[0]-h[0]:h[1]-u[1]);const r=new Map,a=new Map;return i.filter(u=>{const h=u.toString();return r.get(h)?!1:(r.set(h,!0),!0)}).forEach(u=>{const h=t.find(g=>g.min==u[0]&&g.max==u[1]),d=a.get(u[0]);t.push({min:u[0],max:u[1],outlineLevel:n?void 0:d||1,width:(h||{width:100}).width}),a.set(u[0],(d||0)+1)}),s},xU=e=>!e||e!=="Portrait"&&e!=="Landscape"?"portrait":e.toLocaleLowerCase(),DU=e=>{if(e==null)return 1;const n=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"].indexOf(e);return n===-1?1:n+1},_U=e=>{const t={"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F","&[Picture]":"&G"};for(const n of Object.keys(t))e=e.replace(n,t[n]);return e},IU=e=>e==="Center"?"C":e==="Right"?"R":"L",MU=(e,t)=>(t&&(e+="&amp;&quot;",e+=t.fontName||"Calibri",t.bold!==t.italic?e+=t.bold?",Bold":",Italic":t.bold?e+=",Bold Italic":e+=",Regular",e+="&quot;",t.size&&(e+=`&amp;${t.size}`),t.strikeThrough&&(e+="&amp;S"),t.underline&&(e+=`&amp;${t.underline==="Double"?"E":"U"}`),t.color&&(e+=`&amp;K${t.color.replace("#","").toUpperCase()}`)),e),FU=(e,t,n)=>e.reduce((s,i,r)=>{const a=IU(i.position),u=MU(`${s}&amp;${a}`,i.font),h=["Left","Center","Right"];i.position||(i.position=h[r]);const{image:d}=i;if(i.value==="&[Picture]"&&d){const g=`${a}${t}${n}`;nW(d,g)}return`${u}${On(_U(i.value))}`},""),PU=e=>{const t=["all","first","even"],n=[];return t.forEach(s=>{const i=e[s],r=s==="all"?"odd":s;if(i)for(const a of Object.keys(i)){const u=i[a],h=`${a.charAt(0).toUpperCase()}${a.slice(1)}`,d=a[0].toUpperCase();if(u){const g=s==="all"?"":s.toUpperCase();n.push({name:`${r}${h}`,properties:{rawMap:{"xml:space":"preserve"}},textNode:FU(u,d,g)})}}}),n},LU=e=>t=>(e.length&&t.children.push({name:"cols",children:e.map(n=>mU.getTemplate(n))}),t),OU=(e,t)=>n=>(e.length&&n.children.push({name:"sheetData",children:e.map((s,i)=>TU.getTemplate(s,i,t))}),n),kU=e=>t=>(e.length&&t.children.push({name:"mergeCells",properties:{rawMap:{count:e.length}},children:e.map(n=>vU.getTemplate(n))}),t),NU=e=>t=>{const{top:n=.75,right:s=.7,bottom:i=.75,left:r=.7,header:a=.3,footer:u=.3}=e;return t.children.push({name:"pageMargins",properties:{rawMap:{bottom:i,footer:u,header:a,left:r,right:s,top:n}}}),t},VU=e=>t=>(e&&t.children.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:xU(e.orientation),paperSize:DU(e.pageSize)}}}),t),BU=e=>t=>{if(!e)return t;const n=e.first!=null?1:0,s=e.even!=null?1:0;return t.children.push({name:"headerFooter",properties:{rawMap:{differentFirst:n,differentOddEven:s}},children:PU(e)}),t},GU=e=>t=>(e&&t.children.push({name:"tableParts",properties:{rawMap:{count:"1"}},children:[{name:"tablePart",properties:{rawMap:{"r:id":`rId${++t.rIdCounter}`}}}]}),t),HU=e=>t=>{const n=ul.get(e);return n!=null&&n.length&&t.children.push({name:"drawing",properties:{rawMap:{"r:id":`rId${++t.rIdCounter}`}}}),t},zU=e=>t=>(No.get(e)&&t.children.push({name:"legacyDrawingHF",properties:{rawMap:{"r:id":`rId${++t.rIdCounter}`}}}),t),UU=(e=0,t=0)=>{const n=e>0||t>0;return n?[{name:"pane",properties:{rawMap:{state:n?"frozen":void 0,topLeftCell:n?`${al(e+1)}${t+1}`:void 0,xSplit:e===0?void 0:e,ySplit:t===0?void 0:t}}}]:void 0},WU=(e=!1,t,n)=>s=>(s.children.push({name:"sheetViews",children:[{name:"sheetView",properties:{rawMap:{rightToLeft:e===!0?"1":"0",workbookViewId:"0"}},children:UU(t,n)}]}),s),jU=()=>e=>(e.children.push({name:"sheetPr",children:[{name:"outlinePr",properties:{rawMap:{summaryBelow:0}}}]}),e),qU=e=>t=>{const n=e.reduce((s,i)=>i.outlineLevel&&i.outlineLevel>s?i.outlineLevel:s,0);return t.children.push({name:"sheetFormatPr",properties:{rawMap:{baseColWidth:10,defaultRowHeight:16,outlineLevelRow:n||void 0}}}),t},$U={getTemplate(e){const{worksheet:t,currentSheet:n,config:s}=e,{margins:i={},pageSetup:r,headerFooterConfig:a,suppressColumnOutline:u,rightToLeft:h,frozenRowCount:d,frozenColumnCount:g}=s,{table:m}=t,{rows:v,columns:w}=m,S=w&&w.length?AU(v,w,!!u):[],T=Er.get(n),{children:A}=[jU(),WU(h,g,d),qU(v),LU(w),OU(v,n+1),kU(S),NU(i),VU(r),BU(a),HU(n),zU(n),GU(T)].reduce((O,V)=>V(O),{children:[],rIdCounter:0});return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:A}}},KU=$U,Ha=new Map,Sr=[],ll=new Map,ul=new Map,No=new Map,zu=new Map,hd=new Map,Er=new Map,YU="AG-GRID-TABLE",gb="SINGLE_SHEET";function QU(){return gb}function XU(e){gb=e}function ZU(e,t,n){iW(t),L5(e,Sr.length);const s=Object.assign({},n);return n.exportAsExcelTable&&(n.colModel.isPivotActive()&&(KT("pivot mode"),s.exportAsExcelTable=!1),n.gos.get("masterDetail")&&(KT("master/detail"),s.exportAsExcelTable=!1)),tW(t,s),yW(t,s)}function KT(e){be(163,{featureName:e})}function JU(e){return e.replace(/^[^a-zA-Z_]+/,"_").replace(/\s/g,"_").replace(/[^a-zA-Z0-9_]/g,"_")}function eW(e,t){if(Er.has(e)){be(164);return}Er.set(e,t)}function tW(e,t){const{exportAsExcelTable:n,prependContent:s,appendContent:i,colModel:r}=t;if(!n)return;const a=typeof n=="boolean"?{}:n,{name:u,showColumnStripes:h,showRowStripes:d,showFilterButton:g,highlightFirstColumn:m,highlightLastColumn:v}=a,w=JU(u||YU),S=Sr.length-1,{table:T}=e,{rows:A,columns:O}=T,V=g_(r),H=s?s.length:0,z=i?i.length:0,U=A.length,K=O.length,k=[],D=[];for(let x=0;x<K;x++){const L=O[x];k.push(L.displayName||""),D.push(g==="match"||g===void 0?L.filterAllowed??!1:g)}if(!k||!k.length||!U||!w){be(165);return}eW(S,{name:`table${Er.size+1}`,displayName:w,columns:k,showFilterButtons:D,rowRange:[V+H,V+(U-V)-z],showRowStripes:d??!0,showColumnStripes:h??!1,highlightFirstColumn:m??!1,highlightLastColumn:v??!1})}function nW(e,t){const n=Sr.length-1,s=e;s.headerFooterPosition=t,RI({imageToAdd:s,idx:n});let i=No.get(n);i||(i=[],No.set(n,i)),i.find(r=>r.id===e.id)||i.push(e)}function sW(e,t,n,s,i){const r=Sr.length,{row:a,column:u}=e.position||{},h=e;s&&(t!=null&&n!=null&&(!a||!u)&&(e.position||(e.position={}),e.position=Object.assign({},e.position,{row:t,column:s.indexOf(n)+1})),v3(h,s),y3(h,i)),RI({imageToAdd:h,idx:r});let d=hd.get(r);d||(d=new Map,hd.set(r,d));const g=ul.get(r);g?g.push(h):ul.set(r,[h]),d.get(e.id)||d.set(e.id,{index:d.size,type:e.imageType})}function RI(e){const{imageToAdd:t,idx:n}=e,s=ll.get(t.id);if(s){const i=s.find(r=>r.sheetId===n);i?i.image.push(t):s.push({sheetId:n,image:[t]})}else ll.set(t.id,[{sheetId:n,image:[t]}]),zu.set(t.id,{type:t.imageType,index:zu.size})}function iW(e){const t=On(e.name)||"";let n="";for(;Sr.indexOf(`${t}${n}`)!==-1;)n===""?n="_1":n=`_${parseInt(n.slice(1),10)+1}`;e.name=`${t}${n}`,Sr.push(e.name)}function YT(e){return Ha.has(e)?Ha.get(e):(Ha.set(e,Ha.size),Ha.size-1)}function QT(){Ha.clear(),ll.clear(),ul.clear(),No.clear(),zu.clear(),hd.clear(),Er.clear(),Sr=[],gb="SINGLE_SHEET"}function rW(e){return rs(fU.getTemplate(Sr,e))}function oW(e){return rs(O5.getTemplate(e))}function aW(){return rs(G3.getTemplate(Ha))}function lW(e){return rs(A3.getTemplate(e))}function uW(e){return rs(R3.getTemplate(e))}function cW(){const e=Nd.getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return rs(e)}function hW(){return rs(X5.getTemplate())}function dW(e,t){return rs(N5.getTemplate(e,t))}function fW(e){const t=new Array(e).fill(void 0).map((s,i)=>({Id:`rId${i+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:`worksheets/sheet${i+1}.xml`})),n=Nd.getTemplate([...t,{Id:`rId${e+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:`rId${e+2}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:`rId${e+3}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}]);return rs(n)}function gW(e){return rs(O3.getTemplate({sheetIndex:e}))}function pW(e){const t=hd.get(e)||[],n=[];for(const[s,i]of t){const{index:r,type:a}=i;n.push({Id:`rId${r+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/image${zu.get(s).index+1}.${cm(a)}`})}return rs(Nd.getTemplate(n))}function mW(e){return rs(aU.getTemplate({sheetIndex:e}),!0)}function CW(e){const t=No.get(e)||[],n=[];for(let s=0;s<t.length;s++){const i=t[s],r=zu.get(i.id);if(!r)continue;const{index:a,type:u}=r;n.push({Id:`rId${s+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/image${a+1}.${cm(u)}`})}return rs(Nd.getTemplate(n))}function vW({drawingIndex:e,vmlDrawingIndex:t,tableName:n}={}){if(e===void 0&&t===void 0&&n===void 0)return"";const s=[];e!=null&&s.push({Id:`rId${s.length+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/drawing${e+1}.xml`}),t!=null&&s.push({Id:`rId${s.length+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Target:`../drawings/vmlDrawing${t+1}.vml`}),n!=null&&s.push({Id:`rId${s.length+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table",Target:`../tables/${n}.xml`});const i=Nd.getTemplate(s);return rs(i)}function yW(e,t){return rs(KU.getTemplate({worksheet:e,currentSheet:Sr.length-1,config:t}))}var wW=class extends FH{constructor(e){super(e),this.mixedStyles={},this.mixedStyleCounter=0,this.rows=[],this.frozenRowCount=0,this.skipFrozenRows=!1,this.frozenColumnCount=0,this.skipFrozenColumns=!1,this.config=Object.assign({},e),this.stylesByIds={},this.config.baseExcelStyles.forEach(t=>{this.stylesByIds[t.id]=t}),this.excelStyles=[...this.config.baseExcelStyles,{id:"_quotePrefix",quotePrefix:1}]}addCustomContent(e){e.forEach(t=>{const n=this.rows.length+1;let s;!this.config.suppressRowOutline&&t.outlineLevel!=null&&(s=t.outlineLevel);const i={height:$g(n,t.height||this.config.rowHeight),cells:(t.cells||[]).map((r,a)=>{var v,w;const u=this.addImage(n,this.columnsToExport[a],(v=r.data)==null?void 0:v.value);let h=null;r.styleId&&(h=typeof r.styleId=="string"?[r.styleId]:r.styleId);const d=this.getStyleId(h);if(u)return this.createCell(d,this.getDataTypeForValue(u.value),u.value==null?"":u.value);const g=((w=r.data)==null?void 0:w.value)??"",m=this.getDataTypeForValue(g);return r.mergeAcross?this.createMergedCell(d,m,g,r.mergeAcross):this.createCell(d,m,g)}),outlineLevel:s};t.collapsed!=null&&(i.collapsed=t.collapsed),t.hidden!=null&&(i.hidden=t.hidden),this.rows.push(i)})}onNewHeaderGroupingRow(){const e=[],{freezeRows:t,headerRowHeight:n}=this.config;return this.rows.push({cells:e,height:$g(this.rows.length+1,n)}),t&&this.frozenRowCount++,{onColumn:(s,i,r,a,u)=>{const h=this.config.styleLinker({rowType:"HEADER_GROUPING",rowIndex:1,value:`grouping-${i}`,columnGroup:s});e.push({...this.createMergedCell(this.getStyleId(h),this.getDataTypeForValue("string"),i,a),collapsibleRanges:u})}}}onNewHeaderRow(){const{freezeRows:e,headerRowHeight:t}=this.config;return e&&this.frozenRowCount++,this.onNewRow(this.onNewHeaderColumn,t)}onNewBodyRow(e){const{freezeRows:t,rowHeight:n}=this.config;this.skipFrozenRows||(t==="headersAndPinnedRows"&&(e==null?void 0:e.rowPinned)==="top"?this.frozenRowCount++:typeof t=="function"?t(ke(this.gos,{node:e}))?this.frozenRowCount++:this.skipFrozenRows=!0:this.skipFrozenRows=!0);const s=this.onNewRow(this.onNewBodyColumn,n);return e&&this.addRowOutlineIfNecessary(e),s}prepare(e){super.prepare(e),this.columnsToExport=[...e],this.cols=e.map((t,n)=>this.convertColumnToExcel(t,n))}parse(){const e=this.rows.reduce((i,r)=>Math.max(i,r.cells.length),0);for(;this.cols.length<e;)this.cols.push(this.convertColumnToExcel(null,this.cols.length+1));const{config:t}=this;let n;if(t.sheetName!=null){const{sheetName:i}=t,r=typeof i=="function"?i(ke(this.gos,{})):i;n=String(r).substring(0,31)}else n="ag-grid";const s={name:n,table:{columns:this.cols,rows:this.rows}};return this.createExcel(s)}addRowOutlineIfNecessary(e){const{gos:t,suppressRowOutline:n,rowGroupExpandState:s="expanded"}=this.config;if(t.get("groupHideOpenParents")||n||e.level==null)return;const r=e.footer?1:0,a=at(this.rows),u=Math.min(e.level+r,7);if(a.outlineLevel=u,s==="expanded")return;const h=s==="collapsed";if(e.isExpandable()){const d=!h&&e.expanded;a.collapsed=!d}a.hidden=!!e.parent&&e.parent.level!==-1&&(h||this.isAnyParentCollapsed(e.parent))}isAnyParentCollapsed(e){for(;e&&e.level!==-1;){if(!e.expanded)return!0;e=e.parent}return!1}convertColumnToExcel(e,t){const n=this.config.columnWidth,i=(e?this.extractHeaderValue(e):void 0)??"",r=e?e.isFilterAllowed():!1;return n?typeof n=="number"?{width:n,displayName:i,filterAllowed:r}:{width:n({column:e,index:t}),displayName:i,filterAllowed:r}:e?{width:Math.max(e.getActualWidth(),75),displayName:i,filterAllowed:r}:{displayName:i,filterAllowed:r}}onNewHeaderColumn(e,t){return n=>{const s=this.extractHeaderValue(n),i=this.config.styleLinker({rowType:"HEADER",rowIndex:e,value:s,column:n});t.push(this.createCell(this.getStyleId(i),this.getDataTypeForValue("string"),s))}}onNewBodyColumn(e,t){let n=0;const{freezeColumns:s,rightToLeft:i}=this.config;return(r,a,u)=>{if(n>0){n-=1;return}if(!this.skipFrozenColumns){const S=r.getPinned();s==="pinned"&&S&&(S===!0||S==="left")!==i?this.frozenColumnCount++:typeof s=="function"&&s(ke(this.gos,{column:r}))?this.frozenColumnCount++:this.skipFrozenColumns=!0}const{value:h,valueFormatted:d}=this.extractRowCellValue(r,a,e,"excel",u),g=this.config.styleLinker({rowType:"BODY",rowIndex:e,value:h,column:r,node:u}),m=this.getStyleId(g),v=r.getColSpan(u),w=this.addImage(e,r,h);w?t.push(this.createCell(m,this.getDataTypeForValue(w.value),w.value==null?"":w.value)):v>1?(n=v-1,t.push(this.createMergedCell(m,this.getDataTypeForValue(h),h,v-1))):t.push(this.createCell(m,this.getDataTypeForValue(h),h,d))}}onNewRow(e,t){const n=[];return this.rows.push({cells:n,height:$g(this.rows.length+1,t)}),{onColumn:e.bind(this,this.rows.length,n)()}}createExcel(e){const{excelStyles:t,config:n}=this;return this.frozenColumnCount&&(n.frozenColumnCount=this.frozenColumnCount),this.frozenRowCount&&(n.frozenRowCount=this.frozenRowCount),ZU(t,e,n)}getDataTypeForValue(e){return e===void 0?"empty":this.isNumerical(e)?"n":"s"}getTypeFromStyle(e,t){if(this.isFormula(t))return"f";if(e&&e.dataType)switch(e.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:be(162,{id:e.id,dataType:e.dataType})}return null}addImage(e,t,n){if(!this.config.addImageToCell)return;const s=this.config.addImageToCell(e,t,n);if(s)return sW(s.image,e,t,this.columnsToExport,this.config.rowHeight),s}createCell(e,t,n,s){const i=this.getStyleById(e);!(i!=null&&i.dataType)&&t==="s"&&s&&(n=s);const r=this.getTypeFromStyle(i,n)||t,{value:a,escaped:u}=this.getCellValue(r,n),h=[];return i&&h.push(e),u&&h.push("_quotePrefix"),e=this.getStyleId(h)||void 0,{styleId:e,data:{type:r,value:a}}}createMergedCell(e,t,n,s){const i=n??"";return{styleId:this.getStyleById(e)?e:void 0,data:{type:t,value:t==="s"?YT(i).toString():n},mergeAcross:s}}getCellValue(e,t){let n=!1;if(t==null||e==="s"&&t==="")return{value:"",escaped:!1};if(e==="s")t&&t[0]==="'"&&(n=!0,t=t.slice(1)),t=YT(t).toString();else if(e==="f")t=t.slice(1);else if(e==="n"){const s=Number(t);isNaN(s)?t="":t!==""&&(t=s.toString())}return{value:t,escaped:n}}getStyleId(e){if(!e||!e.length)return null;if(e.length===1)return e[0];const t=e.join("-");return this.mixedStyles[t]||this.addNewMixedStyle(e),this.mixedStyles[t].excelID}deepCloneObject(e){return JSON.parse(JSON.stringify(e))}addNewMixedStyle(e){this.mixedStyleCounter+=1;const t=`mixedStyle${this.mixedStyleCounter}`,n={};for(const i of e)for(const r of this.excelStyles)r.id===i&&ns(n,this.deepCloneObject(r));n.id=t;const s=e.join("-");this.mixedStyles[s]={excelID:t,key:s,result:n},this.excelStyles.push(n),this.stylesByIds[t]=n}isFormula(e){return e==null?!1:this.config.autoConvertFormulas&&e.toString().startsWith("=")}isNumerical(e){return typeof e=="bigint"?!0:isFinite(e)&&e!==""&&!isNaN(parseFloat(e))}getStyleById(e){return e==null?null:this.stylesByIds[e]||null}},bW=async e=>{let t=0;const n=[],s=new WritableStream({write:a=>{n.push(a),t+=a.length}}),i=new ReadableStream({start:a=>{const u=new FileReader;u.onload=h=>{var d;(d=h.target)!=null&&d.result&&a.enqueue(h.target.result),a.close()},u.readAsArrayBuffer(e)}}),r=new window.CompressionStream("deflate-raw");return await i.pipeThrough(r).pipeTo(s),{size:t,content:new Blob(n)}},SW=async e=>{const t=new Blob([e]),{size:n,content:s}=await bW(t),i=new Uint8Array(await s.arrayBuffer());return{size:n,content:i}},EW=e=>{let t=e.getHours();return t<<=6,t=t|e.getMinutes(),t<<=5,t=t|e.getSeconds()/2,t},RW=e=>{let t=e.getFullYear()-1980;return t<<=4,t=t|e.getMonth()+1,t<<=5,t=t|e.getDate(),t};function Hn(e,t){let n="";for(let s=0;s<t;s++)n+=String.fromCharCode(e&255),e>>>=8;return n}var XT=e=>{if(!e.length)return 0;let t=-1,n=0,s=0,i=0;for(let r=0;r<e.length;r++)n=e[r],s=(t^n)&255,i=TW[s],t=t>>>8^i;return t^-1},ZT=e=>e.length?XT(typeof e=="string"?new TextEncoder().encode(e):e):0,TW=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function AW(e){const t=String.fromCharCode;function n(m){const v=[];if(!m)return[];const w=m.length;let S=0,T,A;for(;S<w;)T=m.charCodeAt(S++),T>=55296&&T<=56319&&S<w?(A=m.charCodeAt(S++),(A&64512)==56320?v.push(((T&1023)<<10)+(A&1023)+65536):(v.push(T),S--)):v.push(T);return v}function s(m){if(m>=55296&&m<=57343)throw Error(mr(255,{point:m}))}function i(m,v){return t(m>>v&63|128)}function r(m){if((m&4294967168)==0)return t(m);let v="";return(m&4294965248)==0?v=t(m>>6&31|192):(m&4294901760)==0?(s(m),v=t(m>>12&15|224),v+=i(m,6)):(m&4292870144)==0&&(v=t(m>>18&7|240),v+=i(m,12),v+=i(m,6)),v+=t(m&63|128),v}const a=n(e),u=a.length;let h=-1,d,g="";for(;++h<u;)d=a[h],g+=r(d);return g}var TI=(e,t,n,s,i,r)=>{const{content:a,path:u,created:h}=e,d=EW(h),g=RW(h),m=ZT(i),v=r!==void 0?r:s,w=AW(u),S=w!==u;let T="";if(S){const H=Hn(1,1)+Hn(ZT(w),4)+w;T="up"+Hn(H.length,2)+H}const A="\0"+(S?"\0\b":"\0\0")+Hn(t?8:0,2)+Hn(d,2)+Hn(g,2)+Hn(v?m:0,4)+Hn(r??s,4)+Hn(s,4)+Hn(w.length,2)+Hn(T.length,2),O="PK"+A+w+T,V="PK\0"+A+"\0\0\0\0\0\0"+(a?"\0\0\0\0":"\0\0\0")+Hn(n,4)+w+T;return{localFileHeader:Uint8Array.from(O,H=>H.charCodeAt(0)),centralDirectoryHeader:Uint8Array.from(V,H=>H.charCodeAt(0))}},AI=e=>{let t;if(typeof e=="string"){const n=atob(e.split(";base64,")[1]);t=Uint8Array.from(n,s=>s.charCodeAt(0))}else t=e;return{size:t.length,content:t}},xW=async(e,t)=>{const{content:n}=e,{size:s,content:i}=n?AI(n):{size:0,content:Uint8Array.from([])};let r,a,u=!1;if(e.type==="file"&&i&&s>0){const g=await SW(i);r=g.content,a=g.size,u=!0}return{...TI(e,u,t,s,i,a),content:r||i,isCompressed:u}},DW=(e,t)=>{const{content:n}=e,{content:s}=n?AI(n):{content:Uint8Array.from([])};return{...TI(e,!1,t,s.length,s,void 0),content:s,isCompressed:!1}},_W=(e,t,n)=>{const s="PK\0\0\0\0"+Hn(e,2)+Hn(e,2)+Hn(t,4)+Hn(n,4)+"\0\0";return Uint8Array.from(s,i=>i.charCodeAt(0))},xI=class{constructor(){this.folders=[],this.files=[]}addFolders(e){e.forEach(this.addFolder.bind(this))}addFolder(e){this.folders.push({path:e,created:new Date,isBase64:!1,type:"folder"})}addFile(e,t,n=!1){this.files.push({path:e,created:new Date,content:n?t:new TextEncoder().encode(t),isBase64:n,type:"file"})}async getZipFile(e="application/zip"){const t=await this.buildCompressedFileStream();return this.clearStream(),new Blob([t],{type:e})}getUncompressedZipFile(e="application/zip"){const t=this.buildFileStream();return this.clearStream(),new Blob([t],{type:e})}clearStream(){this.folders=[],this.files=[]}packageFiles(e){let t=0,n=0;for(const d of e){const{localFileHeader:g,centralDirectoryHeader:m,content:v}=d;t+=g.length+v.length,n+=m.length}const s=new Uint8Array(t),i=new Uint8Array(n);let r=0,a=0;for(const d of e){const{localFileHeader:g,centralDirectoryHeader:m,content:v}=d;s.set(g,r),r+=g.length,s.set(v,r),r+=v.length,i.set(m,a),a+=m.length}const u=_W(e.length,n,t),h=new Uint8Array(s.length+i.length+u.length);return h.set(s),h.set(i,s.length),h.set(u,s.length+i.length),h}async buildCompressedFileStream(){const e=[...this.folders,...this.files],t=[];let n=0;for(const s of e){const i=await xW(s,n),{localFileHeader:r,content:a}=i;t.push(i),n+=r.length+a.length}return this.packageFiles(t)}buildFileStream(){const e=[...this.folders,...this.files],t=[];let n=0;for(const s of e){const i=DW(s,n),{localFileHeader:r,content:a}=i;t.push(i),n+=r.length+a.length}return this.packageFiles(t)}},IW=e=>{if(e.addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]),!ll.size)return;e.addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);let t=0;ll.forEach(n=>{const s=n[0].image[0],{base64:i,imageType:r}=s;e.addFile(`xl/media/image${++t}.${cm(r)}`,i,!0)})},MW=(e,t)=>{let n=0,s=0;for(let i=0;i<t.length;i++){const r=t[i];e.addFile(`xl/worksheets/sheet${i+1}.xml`,r,!1);const a=ll.size>0&&ul.has(i),u=Er.size>0&&Er.get(i),h=ll.size&&No.has(i);if(!a&&!u&&!h)continue;let d,g,m;a&&(FW(e,i,n),g=n,n++),h&&(PW(e,i,s),m=s,s++),u&&(d=u.name);const v=`xl/worksheets/_rels/sheet${i+1}.xml.rels`;e.addFile(v,vW({tableName:d,drawingIndex:g,vmlDrawingIndex:m}))}},FW=(e,t,n)=>{const s="xl/drawings",i=`${s}/drawing${n+1}.xml`,r=`${s}/_rels/drawing${n+1}.xml.rels`;e.addFile(r,pW(t)),e.addFile(i,gW(t))},PW=(e,t,n)=>{const s="xl/drawings",i=`${s}/vmlDrawing${n+1}.vml`,r=`${s}/_rels/vmlDrawing${n+1}.vml.rels`;e.addFile(i,mW(t)),e.addFile(r,CW(t))},LW=e=>{const t=Er,n=Array.from(t.keys());for(let s=0;s<n.length;s++){const i=n[s],r=t.get(i);r&&e.addFile(`xl/tables/${r.name}.xml`,dW(r,s))}},OW=(e,t,n,s,i)=>{e.addFile("xl/workbook.xml",rW(i)),e.addFile("xl/styles.xml",oW(t)),e.addFile("xl/sharedStrings.xml",aW()),e.addFile("xl/theme/theme1.xml",hW()),e.addFile("xl/_rels/workbook.xml.rels",fW(s)),e.addFile("docProps/core.xml",lW(n)),e.addFile("[Content_Types].xml",uW(s)),e.addFile("_rels/.rels",cW())},DI=(e,t,n={})=>{if(!t||t.length===0)return be(159),QT(),!1;const{fontSize:s=11,author:i="AG Grid",activeTab:r=0}=n,a=t.length,u=Math.max(Math.min(r,a-1),0);return IW(e),LW(e),MW(e,t),OW(e,s,i,a,u),QT(),!0},_I=e=>{const{data:t,fontSize:n,author:s,activeSheetIndex:i}=e,r=e.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",a=new xI;return DI(a,t,{author:s,fontSize:n,activeTab:i})?a.getZipFile(r):Promise.resolve(void 0)},JT=e=>{const{data:t,fontSize:n,author:s,activeSheetIndex:i}=e,r=e.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",a=new xI;if(DI(a,t,{author:s,fontSize:n,activeTab:i}))return a.getUncompressedZipFile(r)},kW=e=>{const{fileName:t="export.xlsx"}=e;_I(e).then(n=>{if(n){const s=typeof t=="function"?t():t;J_(s,n)}})},NW=class extends MH{constructor(){super(...arguments),this.beanName="excelCreator"}getMergedParams(e){const t=this.gos.get("defaultExcelExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){be(160);return}const t=this.getMergedParams(e),s={data:[this.getData(t)],fontSize:t.fontSize,author:t.author,mimeType:t.mimeType};this.packageCompressedFile(s).then(i=>{if(i){const{fileName:r}=t,a=typeof r=="function"?r(ke(this.gos,{})):r;J_(this.getFileName(a),i)}})}exportDataAsExcel(e){this.export(e)}getDataAsExcel(e){const t=this.getMergedParams(e),s={data:[this.getData(t)],fontSize:t.fontSize,author:t.author,mimeType:t.mimeType};return this.packageFile(s)}setFactoryMode(e){XU(e)}getFactoryMode(){return QU()}getSheetDataForExcel(e){const t=this.getMergedParams(e);return this.getData(t)}getMultipleSheetsAsExcel(e){return JT(e)}exportMultipleSheetsAsExcel(e){kW(e)}getDefaultFileExtension(){return"xlsx"}createSerializingSession(e){const{colModel:t,colNames:n,rowGroupColsSvc:s,valueSvc:i,gos:r}=this.beans,a={...e,colModel:t,colNames:n,rowGroupColsSvc:s,valueSvc:i,gos:r,suppressRowOutline:e.suppressRowOutline||e.skipRowGroups,headerRowHeight:e.headerRowHeight||e.rowHeight,baseExcelStyles:r.get("excelStyles")||[],rightToLeft:e.rightToLeft??r.get("enableRtl"),styleLinker:this.styleLinker.bind(this)};return new wW(a)}styleLinker(e){const{rowType:t,rowIndex:n,value:s,column:i,columnGroup:r,node:a}=e,u=t==="HEADER",h=t==="HEADER_GROUPING",d=u?i:r;let g=[];const{gos:m,cellStyles:v}=this.beans;if(u||h)return g.push("header"),h&&g.push("headerGroup"),d&&(g=g.concat($w(d.getDefinition(),m,i||null,r||null))),g;const w=m.get("excelStyles"),S=["cell"];if(!w||!w.length)return S;const T=w.map(O=>O.id),A=i.getDefinition();return v==null||v.processAllCellClasses(A,ke(m,{value:s,data:a.data,node:a,colDef:A,column:i,rowIndex:n}),O=>{T.indexOf(O)>-1&&S.push(O)}),S.sort((O,V)=>T.indexOf(O)<T.indexOf(V)?-1:1)}isExportSuppressed(){return this.gos.get("suppressExcelExport")}packageCompressedFile(e){return _I(e)}packageFile(e){return JT(e)}},yc="33.1.1",II={moduleName:"EnterpriseCore",version:yc,beans:[f3],icons:{accordionOpen:"tree-open",accordionClosed:"tree-closed",accordionIndeterminate:"tree-indeterminate",close:"cross",cancel:"cancel",maximize:"maximize",minimize:"minimize",columnDrag:"grip"},dependsOn:[]},VW=".ag-panel{background-color:var(--ag-panel-background-color);display:flex;flex-direction:column;overflow:hidden;position:relative}.ag-dialog{border:var(--ag-dialog-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dialog-shadow);position:absolute}.ag-panel-title-bar{align-items:center;background-color:var(--ag-panel-title-bar-background-color);border-bottom:var(--ag-panel-title-bar-border);color:var(--ag-panel-title-bar-text-color);cursor:default;display:flex;flex:none;font-weight:var(--ag-panel-title-bar-font-weight);height:var(--ag-header-height);padding:var(--ag-spacing) var(--ag-cell-horizontal-padding)}.ag-panel-title-bar-button{color:var(--ag-panel-title-bar-icon-color);cursor:pointer}:where(.ag-ltr) .ag-panel-title-bar-button{margin-left:calc(var(--ag-spacing)*2);margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-panel-title-bar-button{margin-left:var(--ag-spacing);margin-right:calc(var(--ag-spacing)*2)}.ag-panel-title-bar-title{flex:1 1 auto}.ag-panel-title-bar-buttons{display:flex}.ag-panel-content-wrapper{display:flex;flex:1 1 auto;overflow:hidden;position:relative}:where(.ag-dragging-fill-handle) .ag-dialog,:where(.ag-dragging-range-handle) .ag-dialog{opacity:.7;pointer-events:none}";function BW(e){const t=e.cssIdentifier||"default";return`<div class="ag-panel ag-${t}-panel" tabindex="-1">
        <div data-ref="eTitleBar" class="ag-panel-title-bar ag-${t}-panel-title-bar ag-unselectable">
            <span data-ref="eTitle" class="ag-panel-title-bar-title ag-${t}-panel-title-bar-title"></span>
            <div data-ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-${t}-panel-title-bar-buttons"></div>
        </div>
        <div data-ref="eContentWrapper" class="ag-panel-content-wrapper ag-${t}-panel-content-wrapper"></div>
    </div>`}var GW='<div class="ag-button"></div>',HW=class extends vt{constructor(e){super(BW(e)),this.config=e,this.closable=!0,this.eContentWrapper=Me,this.eTitleBar=Me,this.eTitleBarButtons=Me,this.eTitle=Me,this.registerCSS(VW)}postConstruct(){const{component:e,closable:t,hideTitleBar:n,title:s,minWidth:i=250,width:r,minHeight:a=250,height:u,centered:h,popup:d,x:g,y:m}=this.config;this.positionableFeature=new Zw(this.getGui(),{minWidth:i,width:r,minHeight:a,height:u,centered:h,x:g,y:m,popup:d,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}),this.createManagedBean(this.positionableFeature);const v=this.getGui();e&&this.setBodyComponent(e),n?ot(this.eTitleBar,!1):(s&&this.setTitle(s),this.setClosable(t??this.closable)),this.addManagedElementListeners(this.eTitleBar,{mousedown:w=>{if(v.contains(w.relatedTarget)||v.contains(un(this.beans))||this.eTitleBarButtons.contains(w.target)){w.preventDefault();return}const S=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");S&&S.focus()}}),!(d&&this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")}renderComponent(){const e=this.getGui();e.focus(),this.close=()=>{e.parentElement.removeChild(e),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(e){this.positionableFeature.setHeight(e)}getWidth(){return this.positionableFeature.getWidth()}setWidth(e){this.positionableFeature.setWidth(e)}setClosable(e){if(e!==this.closable&&(this.closable=e),e){const t=this.closeButtonComp=new vt(GW);this.createBean(t);const n=t.getGui(),s=Ge("close",this.beans);s.classList.add("ag-panel-title-bar-button-icon"),n.appendChild(s),this.addTitleBarButton(t),t.addManagedElementListeners(n,{click:this.onBtClose.bind(this)})}else if(this.closeButtonComp){const t=this.closeButtonComp.getGui();t.parentElement.removeChild(t),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}}setBodyComponent(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())}addTitleBarButton(e,t){const n=this.eTitleBarButtons,s=n.children,i=s.length;t==null&&(t=i),t=Math.max(0,Math.min(t,i)),e.addCssClass("ag-panel-title-bar-button");const r=e.getGui();t===0?n.insertAdjacentElement("afterbegin",r):t===i?n.insertAdjacentElement("beforeend",r):s[t-1].insertAdjacentElement("afterend",r),e.setParentComponent(this)}getBodyHeight(){return Jp(this.eContentWrapper)}getBodyWidth(){return rd(this.eContentWrapper)}setTitle(e){this.eTitle.innerText=e}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));const e=this.getGui();e&&Ss(e)&&this.close(),super.destroy()}},zW=class extends HW{constructor(e){super({...e,popup:!0}),this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){var a;const e=this.getGui(),{movable:t,resizable:n,maximizable:s,modal:i,postProcessPopupParams:r}=this.config;if(this.addCssClass("ag-dialog"),super.postConstruct(),r){const{type:u,eventSource:h,column:d,mouseEvent:g,rowNode:m}=r;(a=this.popupSvc)==null||a.callPostProcessPopup(u,e,h,g,d,m)}if(this.tabGuardFeature=this.createManagedBean(new R_(this)),this.tabGuardFeature.initialiseTabGuard({isFocusableContainer:!0,onFocusIn:()=>{var u;(u=this.popupSvc)==null||u.bringPopupToFront(e)},onTabKeyDown:u=>{if(i)return;const h=u.shiftKey,d=_r(this.beans,e,!1,h);(!d||this.tabGuardFeature.getTabGuardCtrl().isTabGuard(d))&&Gu(this.beans,h)&&u.preventDefault()}}),t&&this.setMovable(t),s&&this.setMaximizable(s),n&&this.setResizable(n),!this.config.modal){const u=this.beans.ctrlsSvc.get("gridCtrl");u.addFocusableContainer(this),this.addDestroyFunc(()=>u.removeFocusableContainer(this))}}setAllowFocus(e){this.tabGuardFeature.getTabGuardCtrl().setAllowFocus(e)}renderComponent(){var u;const e=this.getGui(),{alwaysOnTop:t,modal:n,title:s,afterGuiAttached:i}=this.config,r=this.getLocaleTextFunc(),a=(u=this.popupSvc)==null?void 0:u.addPopup({modal:n,eChild:e,closeOnEsc:!0,closedCallback:this.onClosed.bind(this),alwaysOnTop:t,ariaLabel:s||r("ariaLabelDialog","Dialog"),afterGuiAttached:i});a&&(this.close=a.hideFunc)}onClosed(e){var t,n;this.destroy(),(n=(t=this.config).closedCallback)==null||n.call(t,e)}toggleMaximize(){const e=this.positionableFeature.getPosition();if(this.isMaximized){const{x:t,y:n,width:s,height:i}=this.lastPosition;this.setWidth(s),this.setHeight(i),this.positionableFeature.offsetElement(t,n)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){ot(this.maximizeIcon,!this.isMaximized),ot(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(e=>e()),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(e){this.positionableFeature.setResizable(e)}setMovable(e){this.positionableFeature.setMovable(e,this.eTitleBar)}setMaximizable(e){if(!e){this.clearMaximizebleListeners(),this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0);return}const t=this.eTitleBar;if(!t||e===this.isMaximizable)return;const n=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),n.addManagedElementListeners(n.getGui(),{click:this.toggleMaximize.bind(this)}),this.addTitleBarButton(n,0),this.maximizeListeners.push(...this.addManagedElementListeners(t,{dblclick:this.toggleMaximize.bind(this)})),[this.resizeListenerDestroy]=this.addManagedListeners(this.positionableFeature,{resize:()=>{this.isMaximized=!1,this.refreshMaximizeIcon()}})}buildMaximizeAndMinimizeElements(){const e=this.maximizeButtonComp=this.createBean(new vt('<div class="ag-dialog-button"></span>')),t=e.getGui();return this.maximizeIcon=Ge("maximize",this.beans),t.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=Ge("minimize",this.beans),t.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),e}};function UW(e){return`<div class="ag-virtual-list-viewport ag-${e}-virtual-list-viewport" role="presentation">
            <div class="ag-virtual-list-container ag-${e}-virtual-list-container" data-ref="eContainer"></div>
        </div>`}var WW=class extends lm{constructor(e){super(UW((e==null?void 0:e.cssIdentifier)||"default")),this.renderedRows=new Map,this.rowHeight=20,this.pageSize=-1,this.isScrolling=!1,this.isHeightFromTheme=!0,this.eContainer=Me,this.awaitStableCallbacks=[];const{cssIdentifier:t="default",ariaRole:n="listbox",listName:s}=e||{};this.cssIdentifier=t,this.ariaRole=n,this.listName=s}wireBeans(e){this.environment=e.environment}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e),focusInnerElement:e=>this.focusInnerElement(e),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)}),this.setAriaProperties(),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanged.bind(this)})}onGridStylesChanged(e){e.listItemHeightChanged&&(this.rowHeight=this.getItemHeight(),this.refresh())}setAriaProperties(){const t=this.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),n=this.eContainer;Un(n,this.ariaRole),Oi(n,t)}addResizeObserver(){const e=()=>ii(this.beans,()=>this.drawVirtualRows()),t=Dr(this.beans,this.getGui(),e);this.addDestroyFunc(t)}focusInnerElement(e){return this.focusRow(e?this.model.getRowCount()-1:0),!0}onFocusIn(e){const t=e.target;t.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=BL(t)-1)}onFocusOut(e){this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null)}handleKeyDown(e){switch(e.key){case J.UP:case J.DOWN:e.preventDefault(),this.navigate(e.key===J.UP);break;case J.PAGE_HOME:case J.PAGE_END:case J.PAGE_UP:case J.PAGE_DOWN:this.navigateToPage(e.key)!==null&&e.preventDefault();break}}onTabKeyDown(e){Bu(e),this.forceFocusOutOfContainer(e.shiftKey)}navigate(e){if(this.lastFocusedRowIndex==null)return;const t=this.lastFocusedRowIndex+(e?-1:1);t<0||t>=this.model.getRowCount()||this.focusRow(t)}navigateToPage(e,t="focused"){let n=!1;t==="focused"&&(t=this.getLastFocusedRow(),n=!0);const s=this.model.getRowCount()-1;let i=-1;return e===J.PAGE_HOME?i=0:e===J.PAGE_END?i=s:e===J.PAGE_DOWN?i=Math.min(t+this.pageSize,s):e===J.PAGE_UP&&(i=Math.max(t-this.pageSize,0)),i===-1?null:(n?this.focusRow(i):this.ensureIndexVisible(i),i)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(e){this.isScrolling||(this.isScrolling=!0,this.ensureIndexVisible(e),ii(this.beans,()=>{if(this.isScrolling=!1,!this.isAlive())return;const t=this.renderedRows.get(e);t&&t.eDiv.focus()}))}getComponentAt(e){const t=this.renderedRows.get(e);return t&&t.rowComponent}forEachRenderedRow(e){this.renderedRows.forEach((t,n)=>e(t.rowComponent,n))}getItemHeight(){return this.isHeightFromTheme?this.environment.getDefaultListItemHeight():this.rowHeight}ensureIndexVisible(e,t=!0){const n=this.model.getRowCount();if(typeof e!="number"||e<0||e>=n)return be(229,{index:e}),!1;const s=e*this.rowHeight,i=s+this.rowHeight,r=this.getGui(),a=r.scrollTop,u=r.offsetHeight,h=a+u,d=t?0:this.rowHeight,g=a>s+d,m=h<i-d;if(g)return r.scrollTop=s,!0;if(m){const v=i-u;return r.scrollTop=v,!0}return!1}setComponentCreator(e){this.componentCreator=e}setComponentUpdater(e){this.componentUpdater=e}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(e){this.isHeightFromTheme=!1,this.rowHeight=e,this.refresh()}refresh(e){if(this.model==null||!this.isAlive())return;const t=this.model.getRowCount();this.eContainer.style.height=`${t*this.rowHeight}px`,this.awaitStable(()=>{this.isAlive()&&(this.canSoftRefresh(e)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))})}awaitStable(e){if(this.awaitStableCallbacks.push(e),this.awaitStableCallbacks.length>1)return;const t=this.model.getRowCount();fD(()=>this.eContainer.clientHeight>=t*this.rowHeight,()=>{if(!this.isAlive())return;const n=this.awaitStableCallbacks;this.awaitStableCallbacks=[],n.forEach(s=>s())})}canSoftRefresh(e){return!!(e&&this.renderedRows.size&&typeof this.model.areRowsEqual=="function"&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach((e,t)=>this.removeRow(t))}drawVirtualRows(e){if(!this.isAlive()||!this.model)return;const t=this.getGui(),n=t.scrollTop,s=n+t.offsetHeight,i=Math.floor(n/this.rowHeight),r=Math.floor(s/this.rowHeight);this.pageSize=Math.floor((s-n)/this.rowHeight),this.ensureRowsRendered(i,r,e)}ensureRowsRendered(e,t,n){this.renderedRows.forEach((s,i)=>{(i<e||i>t)&&i!==this.lastFocusedRowIndex&&this.removeRow(i)}),n&&this.refreshRows();for(let s=e;s<=t;s++)this.renderedRows.has(s)||s<this.model.getRowCount()&&this.insertRow(s)}insertRow(e){const t=this.model.getRow(e),n=document.createElement("div");n.classList.add("ag-virtual-list-item",`ag-${this.cssIdentifier}-virtual-list-item`),Un(n,this.ariaRole==="tree"?"treeitem":"option"),Zx(n,this.model.getRowCount()),Jx(n,e+1),n.setAttribute("tabindex","-1"),n.style.height=`${this.rowHeight}px`,n.style.top=`${this.rowHeight*e}px`;const s=this.componentCreator(t,n);s.addGuiEventListener("focusin",()=>this.lastFocusedRowIndex=e),n.appendChild(s.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",n):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",n):this.eContainer.appendChild(n),this.renderedRows.set(e,{rowComponent:s,eDiv:n,value:t})}removeRow(e){const t=this.renderedRows.get(e);this.eContainer.removeChild(t.eDiv),this.destroyBean(t.rowComponent),this.renderedRows.delete(e)}refreshRows(){const e=this.model.getRowCount();this.renderedRows.forEach((t,n)=>{var s,i;if(n>=e)this.removeRow(n);else{const r=this.model.getRow(n);(i=(s=this.model).areRowsEqual)!=null&&i.call(s,t.value,r)?this.componentUpdater(r,t.rowComponent):this.removeRow(n)}})}addScrollListener(){this.addGuiEventListener("scroll",()=>this.drawVirtualRows(),{passive:!0})}setModel(e){this.model=e}getAriaElement(){return this.eContainer}destroy(){this.isAlive()&&(this.clearVirtualRows(),this.awaitStableCallbacks.length=0,super.destroy())}},vy="ag-list-item-hovered",jW=class extends he{constructor(e,t,n){super(),this.comp=e,this.virtualList=t,this.params=n,this.currentDragValue=null,this.lastHoveredListItem=null}wireBeans(e){this.dragAndDrop=e.dragAndDrop}postConstruct(){this.addManagedListeners(this.params.eventSource,{[this.params.listItemDragStartEvent]:this.listItemDragStart.bind(this),[this.params.listItemDragEndEvent]:this.listItemDragEnd.bind(this)}),this.createDropTarget(),this.createAutoScrollService()}listItemDragStart(e){this.currentDragValue=this.params.getCurrentDragValue(e),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)}listItemDragEnd(){window.setTimeout(()=>{this.currentDragValue=null,this.moveBlocked=!1},10)}createDropTarget(){var t;const e={isInterestedIn:n=>n===this.params.dragSourceType,getIconName:()=>this.moveBlocked?"pinned":"move",getContainer:()=>this.comp.getGui(),onDragging:n=>this.onDragging(n),onDragStop:()=>this.onDragStop(),onDragLeave:()=>this.onDragLeave(),onDragCancel:()=>this.onDragCancel()};(t=this.dragAndDrop)==null||t.addDropTarget(e)}createAutoScrollService(){const e=this.virtualList.getGui();this.autoScrollService=new xN({scrollContainer:e,scrollAxis:"y",getVerticalPosition:()=>e.scrollTop,setVerticalPosition:t=>e.scrollTop=t})}onDragging(e){if(!this.currentDragValue||this.moveBlocked)return;const t=this.getListDragItem(e),n=this.virtualList.getComponentAt(t.rowIndex);if(!n)return;const s=n.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===t.rowIndex&&this.lastHoveredListItem.position===t.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredListItem=t,$R(s,vy),$R(s,`ag-item-highlight-${t.position}`))}getListDragItem(e){const t=this.virtualList.getGui(),n=parseFloat(window.getComputedStyle(t).paddingTop),s=this.virtualList.getRowHeight(),i=this.virtualList.getScrollTop(),r=Math.max(0,(e.y-n+i)/s),a=this.params.getNumRows(this.comp)-1,u=Math.min(a,r)|0;return{rowIndex:u,position:Math.round(r)>r||r>a?"bottom":"top",component:this.virtualList.getComponentAt(u)}}onDragStop(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearDragProperties())}onDragCancel(){this.clearDragProperties()}onDragLeave(){this.clearDragProperties()}clearDragProperties(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()}clearHoveredItems(){this.virtualList.getGui().querySelectorAll(`.${vy}`).forEach(t=>{[vy,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(n=>{t.classList.remove(n)})}),this.lastHoveredListItem=null}};function eA(e,t){if(!t)return null;const n=el(e),s=n.indexOf(t);if(s===-1)return null;let i=-1;for(let r=s-1;r>=0;r--)if(n[r].classList.contains(nl.TAB_GUARD_TOP)){i=r;break}return i<=0?null:n[i-1]}function qW(e,t){if(!t)return!1;const n=e.querySelectorAll(`.${i_}`);if(!n.length)return!1;for(let s=0;s<n.length;s++)if(n[s].contains(t))return!0;return!1}var $W=class extends vt{constructor(){super(),this.setTemplate("<div></div>")}init(e){this.params=e,this.cssClassPrefix=this.params.cssClassPrefix??"ag-menu-option",this.addAriaAttributes(),this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()}configureDefaults(){return!0}addAriaAttributes(){const{checked:e,subMenu:t}=this.params,n=this.getGui();e&&XL(n,e),t&&Nu(n,!1)}addIcon(){if(this.params.isCompact)return;const e=ni(`<span data-ref="eIcon" class="${this.getClassName("part")} ${this.getClassName("icon")}" role="presentation"></span>`),{checked:t,icon:n}=this.params;t?e.appendChild(Ge("check",this.beans)):n&&(em(n)?e.appendChild(n):typeof n=="string"?e.innerHTML=n:be(227)),this.getGui().appendChild(e)}addName(){const e=ni(`<span data-ref="eName" class="${this.getClassName("part")} ${this.getClassName("text")}">${this.params.name||""}</span>`);this.getGui().appendChild(e)}addShortcut(){if(this.params.isCompact)return;const e=ni(`<span data-ref="eShortcut" class="${this.getClassName("part")} ${this.getClassName("shortcut")}">${this.params.shortcut||""}</span>`);this.getGui().appendChild(e)}addSubMenu(){const e=ni(`<span data-ref="ePopupPointer" class="${this.getClassName("part")} ${this.getClassName("popup-pointer")}"></span>`),t=this.getGui();if(this.params.subMenu){const n=this.gos.get("enableRtl")?"subMenuOpenRtl":"subMenuOpen";e.appendChild(Ge(n,this.beans))}t.appendChild(e)}getClassName(e){return`${this.cssClassPrefix}-${e}`}},KW='.ag-menu-list{cursor:default;display:table;padding:var(--ag-spacing) 0;width:100%}.ag-menu-option,.ag-menu-separator{display:table-row}.ag-menu-option-part,.ag-menu-separator-part{display:table-cell;vertical-align:middle}.ag-menu-option{cursor:pointer;font-weight:500}:where(.ag-ltr) :where(.ag-menu-option-popup-pointer) .ag-icon{text-align:right}:where(.ag-rtl) :where(.ag-menu-option-popup-pointer) .ag-icon{text-align:left}.ag-menu-option-text{white-space:nowrap}.ag-menu-option-custom{display:contents}.ag-compact-menu-option{display:flex;flex-wrap:nowrap;width:100%}.ag-compact-menu-option-text{flex:1 1 auto;white-space:nowrap}.ag-menu-separator{height:calc(var(--ag-spacing)*2 + 1px)}.ag-menu-separator-part:after{border-top:1px solid var(--ag-menu-separator-color);content:"";display:block}.ag-compact-menu-option-active,.ag-menu-option-active{background-color:var(--ag-row-hover-color)}.ag-compact-menu-option-part,.ag-menu-option-part{line-height:var(--ag-icon-size);padding:calc(var(--ag-spacing) + 2px) 0}.ag-compact-menu-option-disabled,.ag-menu-option-disabled{cursor:not-allowed;opacity:.5}.ag-compact-menu-option-icon,.ag-menu-option-icon{width:var(--ag-icon-size)}:where(.ag-ltr) .ag-compact-menu-option-icon,:where(.ag-ltr) .ag-menu-option-icon{padding-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-compact-menu-option-icon,:where(.ag-rtl) .ag-menu-option-icon{padding-right:calc(var(--ag-spacing)*2)}.ag-compact-menu-option-text,.ag-menu-option-text{padding-left:calc(var(--ag-spacing)*2);padding-right:calc(var(--ag-spacing)*2)}:where(.ag-ltr) .ag-compact-menu-option-shortcut,:where(.ag-ltr) .ag-menu-option-shortcut{padding-right:var(--ag-spacing)}:where(.ag-rtl) .ag-compact-menu-option-shortcut,:where(.ag-rtl) .ag-menu-option-shortcut{padding-left:var(--ag-spacing)}:where(.ag-ltr) .ag-compact-menu-option-popup-pointer,:where(.ag-ltr) .ag-menu-option-popup-pointer{padding-right:var(--ag-spacing)}:where(.ag-rtl) .ag-compact-menu-option-popup-pointer,:where(.ag-rtl) .ag-menu-option-popup-pointer{padding-left:var(--ag-spacing)}.ag-menu-column-select-wrapper{height:265px;overflow:auto;:where(.ag-column-select){height:100%}}.ag-menu:where(.ag-tabs){min-width:290px}.ag-context-menu-loading-icon{pointer-events:none;position:absolute}',YW={moduleName:"MenuItem",version:yc,userComponents:{agMenuItem:$W},icons:{check:"tick",subMenuOpen:"small-right",subMenuOpenRtl:"small-left"},css:[KW]},QW=".ag-column-select{display:flex;flex:3 1 0px;flex-direction:column;overflow:hidden;position:relative}.ag-column-select-header{align-items:center;display:flex;flex:none;gap:var(--ag-widget-horizontal-spacing);height:var(--ag-header-height);padding-left:var(--ag-widget-container-horizontal-padding);padding-right:var(--ag-widget-container-horizontal-padding);position:relative}.ag-column-select-column,.ag-column-select-column-group{align-items:center;display:flex;gap:var(--ag-widget-horizontal-spacing);height:100%;position:relative;&:where(:not(:last-child)){margin-bottom:var(--ag-widget-vertical-spacing)}}:where(.ag-ltr) .ag-column-select-column,:where(.ag-ltr) .ag-column-select-column-group{padding-left:calc(var(--ag-indentation-level)*var(--ag-column-select-indent-size))}:where(.ag-rtl) .ag-column-select-column,:where(.ag-rtl) .ag-column-select-column-group{padding-right:calc(var(--ag-indentation-level)*var(--ag-column-select-indent-size))}.ag-column-select-header-icon{border-radius:var(--ag-border-radius);cursor:pointer;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);&:focus-visible{box-shadow:var(--ag-focus-shadow)}}.ag-column-select-header-filter-wrapper{flex:1 1 auto}.ag-column-select-header-filter{width:100%}.ag-column-select-list{flex:1 1 0px;overflow:hidden}:where(.ag-ltr) .ag-column-select-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-spacing)*1.5)}:where(.ag-rtl) .ag-column-select-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-spacing)*1.5)}.ag-column-select-column-group-readonly,.ag-column-select-column-readonly{opacity:.5;pointer-events:none}.ag-column-select-virtual-list-viewport{padding:calc(var(--ag-widget-container-vertical-padding)*.5) 0}.ag-column-select-virtual-list-item{padding:0 var(--ag-widget-container-horizontal-padding)}.ag-column-select-column-label{flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-column-select-checkbox{display:flex}",XW=300,ZW=class extends vt{constructor(){super(`<div class="ag-column-select-header" role="presentation">
            <div data-ref="eExpand" class="ag-column-select-header-icon"></div>
            <ag-checkbox data-ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>
            <ag-input-text-field class="ag-column-select-header-filter-wrapper" data-ref="eFilterTextField"></ag-input-text-field>
        </div>`,[am,LV]),this.eExpand=Me,this.eSelect=Me,this.eFilterTextField=Me}postConstruct(){this.createExpandIcons(),this.addManagedListeners(this.eExpand,{click:this.onExpandClicked.bind(this),keydown:t=>{t.key===J.SPACE&&(t.preventDefault(),this.onExpandClicked())}}),this.addManagedElementListeners(this.eSelect.getInputElement(),{click:this.onSelectClicked.bind(this)}),this.addManagedPropertyListener("functionsReadOnly",()=>this.onFunctionsReadOnlyPropChanged()),this.eFilterTextField.setAutoComplete(!1).onValueChange(()=>this.onFilterTextChanged()),this.addManagedEventListeners({newColumnsLoaded:this.showOrHideOptions.bind(this)});const e=this.getLocaleTextFunc();this.eSelect.setInputAriaLabel(e("ariaColumnSelectAll","Toggle All Columns Visibility")),this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")),this.activateTabIndex([this.eExpand])}onFunctionsReadOnlyPropChanged(){const e=this.gos.get("functionsReadOnly");this.eSelect.setReadOnly(e),this.eSelect.addOrRemoveCssClass("ag-column-select-column-readonly",e)}init(e){this.params=e;const t=this.gos.get("functionsReadOnly");this.eSelect.setReadOnly(t),this.eSelect.addOrRemoveCssClass("ag-column-select-column-readonly",t),this.beans.colModel.ready&&this.showOrHideOptions()}createExpandIcons(){const e=this.beans;this.eExpand.appendChild(this.eExpandChecked=Ge("columnSelectOpen",e)),this.eExpand.appendChild(this.eExpandUnchecked=Ge("columnSelectClosed",e)),this.eExpand.appendChild(this.eExpandIndeterminate=Ge("columnSelectIndeterminate",e)),this.setExpandState(0)}showOrHideOptions(){var a;const e=this.params,t=!e.suppressColumnFilter,n=!e.suppressColumnSelectAll,s=!e.suppressColumnExpandAll,i=!!((a=this.beans.colModel.colDefCols)!=null&&a.treeDepth),r=this.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(r("searchOoo","Search...")),ot(this.eFilterTextField.getGui(),t),ot(this.eSelect.getGui(),n),ot(this.eExpand,s&&i)}onFilterTextChanged(){this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=fr(this,()=>{const e=this.eFilterTextField.getValue();this.dispatchLocalEvent({type:"filterChanged",filterText:e})},XW)),this.onFilterTextChangedDebounced()}onSelectClicked(){this.dispatchLocalEvent({type:this.selectState?"unselectAll":"selectAll"})}onExpandClicked(){this.dispatchLocalEvent({type:this.expandState===0?"collapseAll":"expandAll"})}setExpandState(e){this.expandState=e,ot(this.eExpandChecked,e===0),ot(this.eExpandUnchecked,e===1),ot(this.eExpandIndeterminate,e===2)}setSelectionState(e){this.selectState=e,this.eSelect.setValue(this.selectState)}},JW={selector:"AG-PRIMARY-COLS-HEADER",component:ZW};function Lu(e){return!!e&&typeof e.children<"u"}function Eo(e){return Lu(e)?e.groupId:e.colId}function MI(e,t,n){const s=(a,u)=>{const d=a.children.map(Eo).includes(Eo(u)),g=at(a.children),m=g&&Eo(g)!==Eo(u);return d&&m};if(!Lu(e))return!0;const i=e,r=n;if(s(i,r)||i.groupId===t&&!i.children.map(Eo).includes(Eo(r)))return i.children.push(r),!0;for(let a=i.children.length-1;a>=0&&!MI(i.children[a],t,n);a--);return!1}function e6(e){const t=(i,r)=>Lu(i)&&Lu(r)&&Eo(i)===Eo(r),n=(i,r)=>{if(!Lu(r))return i;const a=i,u=r;return u.children&&u.groupId&&MI(a,u.groupId,u.children[0])||u.children.forEach(h=>n(a,h)),a},s=[];for(let i=1;i<=e.length;i++){const r=e[i-1],a=e[i];t(r,a)?e[i]=n(r,a):s.push(r)}return s}function t6(e,t){const n=[],s=(r,a)=>{if(Lu(r)){const u=r,h=typeof u.groupId<"u"?u.groupId:u.headerName,d=new qh(u,h,!1,a),g=[];return u.children.forEach(m=>{const v=s(m,a+1);v&&g.push(v)}),d.setChildren(g),d}else{const u=r,h=u.colId?u.colId:u.field,d=e.getColDefCol(h);return d||n.push(u),d}},i=[];return t.forEach(r=>{const a=s(r,0);a&&i.push(a)}),n.length>0&&be(217,{invalidColIds:n}),i}function n6(e,t){const n=s6(e),s=e6(n);t(s)}function s6(e){const t=(i,r)=>{let a;if(Cn(i))if(i.isPadding())a=r;else{const h=Object.assign({},i.getColGroupDef());h.groupId=i.getGroupId(),h.children=[r],a=h}else{const h=Object.assign({},i.getColDef());h.colId=i.getColId(),a=h}const u=i.getOriginalParent();return u?t(u,a):a};return e.getCols().filter(i=>{const r=i.getColDef();return i.isPrimary()&&!r.showRowGroup}).map(i=>t(i,i.getColDef()))}var tA=class{constructor(e,t,n,s=!1,i){this.displayName=e,this.depth=n,this.group=s,this.localEventService=new ko,s?(this.columnGroup=t,this._expanded=i,this.children=[]):this.column=t}get expanded(){return!!this._expanded}set expanded(e){e!==this._expanded&&(this._expanded=e,this.localEventService.dispatchEvent({type:"expandedChanged"}))}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}};function FI(e,t,n,s){const i=i6(t);PI(e,i,n,s)}function PI(e,t,n,s){e.colModel.isPivotMode()?o6(e,t,n,s):r6(e,t,n,s)}function i6(e){const t=[],n=s=>{s.forEach(i=>{i.passesFilter&&(i.group?n(i.children):t.push(i.column))})};return n(e),t}function r6(e,t,n,s){var r;const i=[];t.forEach(a=>{a.getColDef().lockVisible||a.isVisible()!=n&&i.push({colId:a.getId(),hide:!n})}),i.length>0&&pc(e,{state:i},s),(r=e.selectionColSvc)==null||r.refreshVisibility(s)}function o6(e,t,n,s){a6(e,t,n,s)}function a6(e,t,n,s){const i=[],u=n?h=>{var d;if(!h.isAnyFunctionActive())if(h.isAllowValue()){const g=typeof h.getAggFunc()=="string"?h.getAggFunc():(d=e.aggFuncSvc)==null?void 0:d.getDefaultAggFunc(h);i.push({colId:h.getId(),aggFunc:g})}else h.isAllowRowGroup()?i.push({colId:h.getId(),rowGroup:!0}):h.isAllowPivot()&&i.push({colId:h.getId(),pivot:!0})}:h=>{(h.isPivotActive()||h.isRowGroupActive()||h.isValueActive())&&i.push({colId:h.getId(),pivot:!1,rowGroup:!1,aggFunc:null})};t.forEach(u),i.length>0&&pc(e,{state:i},s)}function LI(e,t){const{columns:n,visibleState:s,pivotState:i,eventType:r}=t,a=n.map(u=>{const h=u.getColId();if(e.colModel.isPivotMode()){const d=i==null?void 0:i[h];return{colId:h,pivot:d==null?void 0:d.pivot,rowGroup:d==null?void 0:d.rowGroup,aggFunc:d==null?void 0:d.aggFunc}}else return{colId:h,hide:!(s!=null&&s[h])}});pc(e,{state:a},r)}function OI(e){return{pivot:e.isPivotActive(),rowGroup:e.isRowGroupActive(),aggFunc:e.isValueActive()?e.getAggFunc():void 0}}function Dp(e,t){const{gos:n,rowGroupColsSvc:s}=t;if(!s||!e)return!1;const i=n.get("groupLockGroupColumns");if(!e.isRowGroupActive()||i===0)return!1;if(i===-1)return!0;const r=s.columns.findIndex(a=>a.getColId()===e.getColId());return i>r}var l6=class extends lm{constructor(e){super(),this.setTemplateFromElement(e.getGui(),void 0,void 0,!0)}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)})}handleKeyDown(e){e.key===J.ESCAPE&&this.closePanel()}onTabKeyDown(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())}closePanel(){const e=this.parentComponent;e.closeSubMenu(),setTimeout(()=>e.getGui().focus(),0)}};function u6(e,t,n){return e.getCompDetails(t,c6,"agMenuItem",n,!0)}var c6={name:"menuItem",optionalMethods:["setActive","select","setExpanded","configureDefaults"]},nA=class extends he{constructor(){super(...arguments),this.ACTIVATION_DELAY=80,this.isActive=!1,this.subMenuIsOpen=!1,this.subMenuIsOpening=!1,this.suppressRootStyles=!0,this.suppressAria=!0,this.suppressFocus=!0}wireBeans(e){this.popupSvc=e.popupSvc,this.userCompFactory=e.userCompFactory,this.registry=e.registry}init(e){var u;const{menuItemDef:t,isAnotherSubMenuOpen:n,level:s,childComponent:i,contextParams:r}=e;this.params=e.menuItemDef,this.level=s,this.isAnotherSubMenuOpen=n,this.childComponent=i,this.contextParams=r,this.cssClassPrefix=((u=this.params.menuItemParams)==null?void 0:u.cssClassPrefix)??"ag-menu-option";const a=u6(this.userCompFactory,this.params,ke(this.gos,{...t,level:s,isAnotherSubMenuOpen:n,openSubMenu:h=>this.openSubMenu(h),closeSubMenu:()=>this.closeSubMenu(),closeMenu:h=>this.closeMenu(h),updateTooltip:(h,d)=>this.refreshTooltip(h,d),onItemActivated:()=>this.onItemActivated()}));return(a==null?void 0:a.newAgStackInstance().then(h=>{var g;this.menuItemComp=h;const d=(g=h.configureDefaults)==null?void 0:g.call(h);d&&this.configureDefaults(d===!0?void 0:d)}))??ht.resolve()}addListeners(e,t){t!=null&&t.suppressClick||this.addManagedElementListeners(e,{click:n=>this.onItemSelected(n)}),t!=null&&t.suppressKeyboardSelect||this.addManagedElementListeners(e,{keydown:n=>{(n.key===J.ENTER||n.key===J.SPACE)&&(n.preventDefault(),this.onItemSelected(n))}}),t!=null&&t.suppressMouseDown||this.addManagedElementListeners(e,{mousedown:n=>{n.stopPropagation(),n.preventDefault()}}),t!=null&&t.suppressMouseOver||this.addManagedElementListeners(e,{mouseenter:()=>this.onMouseEnter(),mouseleave:()=>this.onMouseLeave()})}isDisabled(){return!!this.params.disabled}openSubMenu(e=!1,t){var d,g;if(this.closeSubMenu(),!this.params.subMenu)return;this.subMenuIsOpening=!0;const n=ni('<div class="ag-menu" role="presentation"></div>');this.eSubMenuGui=n;let s,i=()=>{this.subMenuIsOpening=!1};if(this.childComponent){const m=this.createBean(new l6(this.childComponent));m.setParentComponent(this);const v=m.getGui(),w="mouseenter",S=()=>this.cancelDeactivate();v.addEventListener(w,S),s=()=>{v.removeEventListener(w,S),this.destroyBean(m)},n.appendChild(v),this.childComponent.afterGuiAttached&&(i=()=>{this.childComponent.afterGuiAttached(),this.subMenuIsOpening=!1})}else if(this.params.subMenu){const m=this.createBean(new hm(this.level+1,this.contextParams));m.setParentComponent(this),m.addMenuItems(this.params.subMenu),n.appendChild(m.getGui()),this.addManagedListeners(m,{closeMenu:v=>this.dispatchLocalEvent(v)}),m.addGuiEventListener("mouseenter",()=>this.cancelDeactivate()),s=()=>this.destroyBean(m),e&&(i=()=>{m.activateFirstItem(),this.subMenuIsOpening=!1})}const{popupSvc:r}=this,a=()=>{const m=this.eGui,{column:v,node:w}=this.contextParams;r==null||r.positionPopupForMenu({eventSource:m,ePopup:n,event:t instanceof MouseEvent?t:void 0,column:v,node:w})},u=this.getLocaleTextFunc(),h=r==null?void 0:r.addPopup({modal:!0,eChild:n,positionCallback:a,anchorToElement:this.eGui,ariaLabel:u("ariaLabelSubMenu","SubMenu"),afterGuiAttached:i});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=()=>{var m,v;h&&h.hideFunc(),this.subMenuIsOpen=!1,this.setAriaExpanded(!1),s(),(v=(m=this.menuItemComp).setExpanded)==null||v.call(m,!1),this.eSubMenuGui=void 0},(g=(d=this.menuItemComp).setExpanded)==null||g.call(d,!0)}setAriaExpanded(e){this.suppressAria||Nu(this.eGui,e)}closeSubMenu(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))}isSubMenuOpen(){return this.subMenuIsOpen}isSubMenuOpening(){return this.subMenuIsOpening}activate(e,t){var n,s;this.cancelActivate(),!(this.params.disabled&&!t)&&(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add(`${this.cssClassPrefix}-active`),(s=(n=this.menuItemComp).setActive)==null||s.call(n,!0),this.suppressFocus||tm(this.beans,()=>this.eGui.focus({preventScroll:!t})),e&&this.params.subMenu&&window.setTimeout(()=>{this.isAlive()&&this.isActive&&this.openSubMenu()},300),this.onItemActivated())}deactivate(){var e,t;this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove(`${this.cssClassPrefix}-active`),(t=(e=this.menuItemComp).setActive)==null||t.call(e,!1),this.isActive=!1,this.subMenuIsOpen&&this.closeSubMenu()}getGui(){return this.menuItemComp.getGui()}getParentComponent(){return this.parentComponent}setParentComponent(e){this.parentComponent=e}getSubMenuGui(){return this.eSubMenuGui}onItemSelected(e){var t,n;(n=(t=this.menuItemComp).select)==null||n.call(t),this.params.action?this.beans.frameworkOverrides.wrapOutgoing(()=>this.params.action(ke(this.gos,{...this.contextParams}))):this.openSubMenu(e&&e.type==="keydown",e),!(this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect)&&this.closeMenu(e)}closeMenu(e){const t={type:"closeMenu"};e&&(e instanceof MouseEvent?t.mouseEvent=e:t.keyboardEvent=e),this.dispatchLocalEvent(t)}onItemActivated(){const e={type:"menuItemActivated",menuItem:this};this.dispatchLocalEvent(e)}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(()=>this.activate(!0),this.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(()=>this.deactivate(),this.ACTIVATION_DELAY):this.deactivate()}configureDefaults(e){var h,d,g;if(!this.menuItemComp){setTimeout(()=>this.configureDefaults(e));return}let t=this.menuItemComp.getGui();const{suppressRootStyles:n,suppressTooltip:s,suppressAria:i,suppressTabIndex:r,suppressFocus:a}=e||{},u=(d=(h=this.menuItemComp).getRootElement)==null?void 0:d.call(h);u&&(n||t.classList.add("ag-menu-option-custom"),t=u),this.eGui=t,this.suppressRootStyles=!!n,this.suppressRootStyles||(t.classList.add(this.cssClassPrefix),(g=this.params.cssClasses)==null||g.forEach(m=>t.classList.add(m)),this.params.disabled&&t.classList.add(`${this.cssClassPrefix}-disabled`)),s||this.refreshTooltip(this.params.tooltip),this.suppressAria=!!i,this.suppressAria||(Un(t,"menuitem"),this.params.subMenu&&JL(t,this.params.subMenuRole??"menu"),this.params.disabled&&WL(t,!0)),r||t.setAttribute("tabindex","-1"),this.params.disabled||this.addListeners(t,e),this.suppressFocus=!!a}refreshTooltip(e,t){if(this.tooltip=e,this.tooltipFeature=this.destroyBean(this.tooltipFeature),!e||!this.menuItemComp)return;const n=this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getTooltipValue:()=>this.tooltip,getLocation:()=>"menu",shouldDisplayTooltip:t});n&&(this.tooltipFeature=this.createBean(n))}destroy(){var e,t;this.tooltipFeature=this.destroyBean(this.tooltipFeature),(t=(e=this.menuItemComp)==null?void 0:e.destroy)==null||t.call(e),super.destroy()}},hm=class extends lm{constructor(e=0,t){super('<div class="ag-menu-list" role="menu"></div>'),this.level=e,this.menuItems=[],this.params=t??{column:null,node:null,value:null}}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>tm(this.beans,()=>this.handleKeyDown(e)),onFocusIn:e=>this.handleFocusIn(e),onFocusOut:e=>this.handleFocusOut(e)})}onTabKeyDown(e){var s;const t=this.getParentComponent();((s=t==null?void 0:t.getGui())==null?void 0:s.classList.contains("ag-focus-managed"))||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)}handleKeyDown(e){switch(e.key){case J.UP:case J.RIGHT:case J.DOWN:case J.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case J.ESCAPE:this.closeIfIsChild()&&Bu(e);break}}handleFocusIn(e){var n,s;const t=e.relatedTarget;!this.tabGuardFeature.getTabGuardCtrl().isTabGuard(t)&&(this.getGui().contains(t)||(s=(n=this.activeMenuItem)==null?void 0:n.getSubMenuGui())!=null&&s.contains(t))||(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())}handleFocusOut(e){var n;const t=e.relatedTarget;!this.activeMenuItem||this.getGui().contains(t)||(n=this.activeMenuItem.getSubMenuGui())!=null&&n.contains(t)||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(e){e!=null&&ht.all(e.map(t=>t==="separator"?ht.resolve({eGui:this.createSeparator()}):typeof t=="string"?(be(228,{menuItemOrString:t}),ht.resolve({eGui:null})):this.addItem(t))).then(t=>{(t??[]).forEach(n=>{n!=null&&n.eGui&&(this.appendChild(n.eGui),n.comp&&this.menuItems.push(n.comp))})})}addItem(e){const t=this.createManagedBean(new nA);return t.init({menuItemDef:e,isAnotherSubMenuOpen:()=>this.menuItems.some(n=>n.isSubMenuOpen()),level:this.level,contextParams:this.params}).then(()=>(t.setParentComponent(this),this.addManagedListeners(t,{closeMenu:n=>{this.dispatchLocalEvent(n)},menuItemActivated:n=>{this.activeMenuItem&&this.activeMenuItem!==n.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=n.menuItem}}),{comp:t,eGui:t.getGui()}))}activateFirstItem(){const e=this.menuItems.filter(t=>!t.isDisabled())[0];e&&e.activate()}createSeparator(){return ni(`
            <div class="ag-menu-separator" aria-hidden="true">
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
            </div>`)}handleNavKey(e){switch(e){case J.UP:case J.DOWN:{const n=this.findNextItem(e===J.UP);n&&n!==this.activeMenuItem&&n.activate(!1,!0);return}}const t=this.gos.get("enableRtl")?J.RIGHT:J.LEFT;e===t?this.closeIfIsChild():this.openChild()}closeIfIsChild(e){const t=this.getParentComponent();return t&&t instanceof nA?(e&&e.preventDefault(),t.closeSubMenu(),t.getGui().focus(),!0):!1}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(e){const t=[...this.menuItems];if(!t.length)return;if(!this.activeMenuItem)return e?at(t):t[0];e&&t.reverse();let n,s=!1;for(const i of t){if(!s){i===this.activeMenuItem&&(s=!0);continue}n=i;break}return s&&!n?t[0]:n||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}},kI=class extends vt{constructor(e,t,n){super('<div class="ag-menu"></div>'),this.column=e,this.mouseEvent=t,this.parentEl=n,this.displayName=null}postConstruct(){const{column:e,beans:{colNames:t}}=this;this.initializeProperties(e);let n;if(ki(e)?n=t.getDisplayNameForColumn(e,"columnToolPanel"):n=t.getDisplayNameForProvidedColumnGroup(null,e,"columnToolPanel"),this.displayName=n,this.buildMenuItemMap(),this.isActive()){this.mouseEvent.preventDefault();const s=this.getMappedMenuItems();if(s.length===0)return;this.displayContextMenu(s)}}initializeProperties(e){let t;Cn(e)?t=e.getLeafColumns():t=[e],this.columns=t,this.allowGrouping=t.some(n=>n.isPrimary()&&n.isAllowRowGroup()),this.allowValues=t.some(n=>n.isPrimary()&&n.isAllowValue()),this.allowPivoting=this.beans.colModel.isPivotMode()&&t.some(n=>n.isPrimary()&&n.isAllowPivot())}buildMenuItemMap(){const e=this.getLocaleTextFunc(),{beans:t,displayName:n}=this,{rowGroupColsSvc:s,valueColsSvc:i,pivotColsSvc:r,colModel:a}=t,u=new Map;this.menuItemMap=u,u.set("rowGroup",{allowedFunction:h=>h.isPrimary()&&h.isAllowRowGroup()&&!Dp(h,t),activeFunction:h=>h.isRowGroupActive(),activateLabel:()=>`${e("groupBy","Group by")} ${n}`,deactivateLabel:()=>`${e("ungroupBy","Un-Group by")} ${n}`,activateFunction:()=>s==null?void 0:s.setColumns(this.addColumnsToList(s.columns),"toolPanelUi"),deActivateFunction:()=>s==null?void 0:s.setColumns(this.removeColumnsFromList(s.columns),"toolPanelUi"),addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"}),u.set("value",{allowedFunction:h=>h.isPrimary()&&h.isAllowValue(),activeFunction:h=>h.isValueActive(),activateLabel:()=>e("addToValues",`Add ${n} to values`,[n]),deactivateLabel:()=>e("removeFromValues",`Remove ${n} from values`,[n]),activateFunction:()=>i==null?void 0:i.setColumns(this.addColumnsToList(i.columns),"toolPanelUi"),deActivateFunction:()=>i==null?void 0:i.setColumns(this.removeColumnsFromList(i.columns),"toolPanelUi"),addIcon:"valuePanel",removeIcon:"valuePanel"}),u.set("pivot",{allowedFunction:h=>a.isPivotMode()&&h.isPrimary()&&h.isAllowPivot(),activeFunction:h=>h.isPivotActive(),activateLabel:()=>e("addToLabels",`Add ${n} to labels`,[n]),deactivateLabel:()=>e("removeFromLabels",`Remove ${n} from labels`,[n]),activateFunction:()=>r==null?void 0:r.setColumns(this.addColumnsToList(r.columns),"toolPanelUi"),deActivateFunction:()=>r==null?void 0:r.setColumns(this.removeColumnsFromList(r.columns),"toolPanelUi"),addIcon:"pivotPanel",removeIcon:"pivotPanel"})}addColumnsToList(e){return[...e].concat(this.columns.filter(t=>e.indexOf(t)===-1))}removeColumnsFromList(e){return e.filter(t=>this.columns.indexOf(t)===-1)}displayContextMenu(e){const t=this.getGui(),n=this.createBean(new hm),s=this.getLocaleTextFunc();let i=()=>{};t.appendChild(n.getGui()),n.addMenuItems(e),n.addManagedListeners(n,{closeMenu:()=>{this.parentEl.focus(),i()}});const r=this.beans.popupSvc,a=r.addPopup({modal:!0,eChild:t,closeOnEsc:!0,afterGuiAttached:()=>qs(n.getGui()),ariaLabel:s("ariaLabelContextMenu","Context Menu"),closedCallback:u=>{u instanceof KeyboardEvent&&this.parentEl.focus(),this.destroyBean(n)}});a&&(i=a.hideFunc),r.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:t})}isActive(){return this.allowGrouping||this.allowValues||this.allowPivoting}getMappedMenuItems(){const e=[],{menuItemMap:t,columns:n,displayName:s,beans:i}=this;for(const r of t.values()){const a=n.some(h=>r.allowedFunction(h)&&!r.activeFunction(h)),u=n.some(h=>r.allowedFunction(h)&&r.activeFunction(h));a&&e.push({name:r.activateLabel(s),icon:Ge(r.addIcon,i,null),action:()=>r.activateFunction()}),u&&e.push({name:r.deactivateLabel(s),icon:Ge(r.removeIcon,i,null),action:()=>r.deActivateFunction()})}return e}},NI=class extends vt{constructor(e,t,n,s){super(),this.modelItem=e,this.allowDragging=t,this.eventType=n,this.focusWrapper=s,this.cbSelect=Me,this.eLabel=Me,this.eGroupOpenedIcon=Me,this.eGroupClosedIcon=Me,this.eColumnGroupIcons=Me,this.processingColumnStateChange=!1;const{columnGroup:i,depth:r,displayName:a}=e;this.columnGroup=i,this.columnDepth=r,this.displayName=a}postConstruct(){this.setTemplate(`<div class="ag-column-select-column-group">
                <span class="ag-column-group-icons" data-ref="eColumnGroupIcons" >
                    <span class="ag-column-group-closed-icon" data-ref="eGroupClosedIcon"></span>
                    <span class="ag-column-group-opened-icon" data-ref="eGroupOpenedIcon"></span>
                </span>
                <ag-checkbox data-ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>
                <span class="ag-column-select-column-label" data-ref="eLabel"></span>
            </div>`,[am]);const{beans:e,cbSelect:t,eLabel:n,displayName:s,columnDepth:i,modelItem:r,focusWrapper:a,columnGroup:u}=this,{registry:h,gos:d}=e,g=Ge("columnDrag",e);this.eDragHandle=g,g.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");const m=t.getGui(),v=t.getInputElement();m.insertAdjacentElement("afterend",g),v.setAttribute("tabindex","-1"),n.innerHTML=s??"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+i),this.getGui().style.setProperty("--ag-indentation-level",String(i)),this.tooltipFeature=this.createOptionalManagedBean(h.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getLocation:()=>"columnToolPanelColumnGroup",shouldDisplayTooltip:b_(d,()=>n)})),this.addManagedEventListeners({columnPivotModeChanged:this.onColumnStateChanged.bind(this)}),this.addManagedElementListeners(n,{click:this.onLabelClicked.bind(this)}),this.addManagedListeners(t,{fieldValueChanged:this.onCheckboxChanged.bind(this)}),this.addManagedListeners(r,{expandedChanged:this.onExpandChanged.bind(this)}),this.addManagedListeners(a,{keydown:this.handleKeyDown.bind(this),contextmenu:this.onContextMenu.bind(this)}),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip(),qD(u.getColGroupDef(),d,null,u).forEach(S=>this.addOrRemoveCssClass(S,!0))}getColumns(){return this.columnGroup.getLeafColumns()}setupTooltip(){const e=this.columnGroup.getColGroupDef();if(!e)return;const t=()=>{var n;return(n=this.tooltipFeature)==null?void 0:n.setTooltipAndRefresh(e.headerTooltip)};t(),this.addManagedEventListeners({newColumnsLoaded:t})}handleKeyDown(e){switch(e.key){case J.LEFT:e.preventDefault(),this.modelItem.expanded=!1;break;case J.RIGHT:e.preventDefault(),this.modelItem.expanded=!0;break;case J.SPACE:e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected());break}}onContextMenu(e){const{columnGroup:t,gos:n}=this;if(n.get("functionsReadOnly"))return;const s=this.createBean(new kI(t,e,this.focusWrapper));this.addDestroyFunc(()=>{s.isAlive()&&this.destroyBean(s)})}addVisibilityListenersToAllChildren(){const e=this.onColumnStateChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{this.addManagedListeners(t,{visibleChanged:e,columnValueChanged:e,columnPivotChanged:e,columnRowGroupChanged:e})})}setupDragging(){if(!this.allowDragging){ot(this.eDragHandle,!1);return}const e=this.beans,{gos:t,eventSvc:n,dragAndDrop:s}=e;let i=!t.get("suppressDragLeaveHidesColumns");const r={type:rm.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:()=>i?"hide":"notAllowed",getDragItem:()=>this.createDragItem(),onDragStarted:()=>{i=!t.get("suppressDragLeaveHidesColumns"),n.dispatchEvent({type:"columnPanelItemDragStart",column:this.columnGroup})},onDragStopped:()=>{n.dispatchEvent({type:"columnPanelItemDragEnd"})},onGridEnter:a=>{i&&LI(e,{columns:this.columnGroup.getLeafColumns(),visibleState:a==null?void 0:a.visibleState,pivotState:a==null?void 0:a.pivotState,eventType:this.eventType})},onGridExit:()=>{i&&this.onChangeCommon(!1)}};s.addDragSource(r,!0),this.addDestroyFunc(()=>s.removeDragSource(r))}createDragItem(){const e=this.columnGroup.getLeafColumns(),t={},n={};return e.forEach(s=>{const i=s.getId();t[i]=s.isVisible(),n[i]=OI(s)}),{columns:e,visibleState:t,pivotState:n}}setupExpandContract(){const{beans:e,eGroupClosedIcon:t,eGroupOpenedIcon:n,eColumnGroupIcons:s}=this;t.appendChild(Yy("columnSelectClosed",e,null)),n.appendChild(Yy("columnSelectOpen",e,null));const i=this.onExpandOrContractClicked.bind(this);this.addManagedElementListeners(t,{click:i}),this.addManagedElementListeners(n,{click:i});const r=new bu(s,!0);this.addManagedListeners(r,{tap:i}),this.addDestroyFunc(r.destroy.bind(r))}onLabelClicked(){const e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}getVisibleLeafColumns(){const e=[],t=n=>{n.forEach(s=>{s.passesFilter&&(s.group?t(s.children):e.push(s.column))})};return t(this.modelItem.children),e}onChangeCommon(e){this.refreshAriaLabel(),!this.processingColumnStateChange&&FI(this.beans,this.modelItem.children,e,this.eventType)}refreshAriaLabel(){const{cbSelect:e,focusWrapper:t,displayName:n}=this,s=this.getLocaleTextFunc(),i=s("ariaColumnGroup","Column Group"),r=e.getValue(),a=r===void 0?s("ariaIndeterminate","indeterminate"):r?s("ariaVisible","visible"):s("ariaHidden","hidden"),u=s("ariaToggleVisibility","Press SPACE to toggle visibility");Oi(t,`${n} ${i}`),e.setInputAriaLabel(`${u} (${a})`),Yx(t,e.getInputElement().id)}onColumnStateChanged(){const e=this.workOutSelectedValue(),t=this.workOutReadOnlyValue();this.processingColumnStateChange=!0;const n=this.cbSelect;n.setValue(e),n.setReadOnly(t),this.addOrRemoveCssClass("ag-column-select-column-group-readonly",t),this.processingColumnStateChange=!1}workOutSelectedValue(){const e=this.beans.colModel.isPivotMode(),t=this.getVisibleLeafColumns();let n=0,s=0;if(t.forEach(i=>{!e&&i.getColDef().lockVisible||(this.isColumnChecked(i,e)?n++:s++)}),!(n>0&&s>0))return n>0}workOutReadOnlyValue(){const e=this.beans.colModel.isPivotMode();let t=0;return this.columnGroup.getLeafColumns().forEach(n=>{e?n.isAnyFunctionAllowed()&&t++:n.getColDef().lockVisible||t++}),t===0}isColumnChecked(e,t){if(t){const n=e.isPivotActive(),s=e.isRowGroupActive(),i=e.isValueActive();return n||s||i}return e.isVisible()}onExpandOrContractClicked(){const e=this.modelItem,t=e.expanded;e.expanded=!t}onExpandChanged(){this.setOpenClosedIcons(),this.refreshAriaExpanded()}setOpenClosedIcons(){const e=this.modelItem.expanded;ot(this.eGroupClosedIcon,!e),ot(this.eGroupOpenedIcon,e)}refreshAriaExpanded(){Nu(this.focusWrapper,this.modelItem.expanded)}getDisplayName(){return this.displayName}onSelectAllChanged(e){const t=this.cbSelect,n=t.getValue();!t.isReadOnly()&&(e&&!n||!e&&n)&&t.toggle()}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}setSelected(e){this.cbSelect.setValue(e,!0)}},h6=class extends he{constructor(e,t){super(),this.comp=e,this.virtualList=t}postConstruct(){this.createManagedBean(new jW(this.comp,this.virtualList,{dragSourceType:rm.ToolPanel,listItemDragStartEvent:"columnPanelItemDragStart",listItemDragEndEvent:"columnPanelItemDragEnd",eventSource:this.eventSvc,getCurrentDragValue:e=>this.getCurrentDragValue(e),isMoveBlocked:e=>this.isMoveBlocked(e),getNumRows:e=>e.getDisplayedColsList().length,moveItem:(e,t)=>this.moveItem(this.getCurrentColumnsBeingMoved(e),t)}))}getCurrentDragValue(e){return e.column}getCurrentColumnsBeingMoved(e){return Cn(e)?e.getLeafColumns():e?[e]:[]}isMoveBlocked(e){return this.gos.get("suppressMovableColumns")?!0:!!this.getCurrentColumnsBeingMoved(e).find(i=>{const r=i.getColDef();return!!r.suppressMovable||!!r.lockPosition})}moveItem(e,t){var a;if(!t)return;const{component:n}=t;let s=null,i=t.position==="top";if(n instanceof NI?(s=n.getColumns()[0],i=!0):n&&(s=n.column),!s)return;const r=this.getMoveTargetIndex({currentColumns:e,lastHoveredColumn:s,isBefore:i});r!=null&&((a=this.beans.colMoves)==null||a.moveColumns(e,r,"toolPanelUi"))}getMoveTargetIndex(e){const{currentColumns:t,lastHoveredColumn:n,isBefore:s}=e;if(!n||!t)return null;const i=this.beans.colModel.getCols(),r=i.indexOf(n),a=s?r:r+1,u=this.getMoveDiff(i,t,a);return a-u}getMoveDiff(e,t,n){if(!t)return 0;const s=t[0],i=t.length;return e.indexOf(s)<n?i:0}},d6=class extends vt{constructor(e,t,n,s){super(),this.allowDragging=t,this.groupsExist=n,this.focusWrapper=s,this.eLabel=Me,this.cbSelect=Me,this.processingColumnStateChange=!1;const{column:i,depth:r,displayName:a}=e;this.column=i,this.columnDept=r,this.displayName=a}postConstruct(){this.setTemplate(`<div class="ag-column-select-column">
                <ag-checkbox data-ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>
                <span class="ag-column-select-column-label" data-ref="eLabel"></span>
            </div>`,[am]);const{beans:e,cbSelect:t,displayName:n,eLabel:s,columnDept:i,groupsExist:r,column:a,gos:u,focusWrapper:h}=this,d=Ge("columnDrag",e);this.eDragHandle=d,d.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");const g=t.getGui(),m=t.getInputElement();g.insertAdjacentElement("afterend",d),m.setAttribute("tabindex","-1");const v=On(n);s.innerHTML=v,r&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass(`ag-column-select-indent-${i}`),this.getGui().style.setProperty("--ag-indentation-level",String(i)),this.tooltipFeature=this.createOptionalManagedBean(e.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getLocation:()=>"columnToolPanelColumn",getColDef:()=>a.getColDef(),shouldDisplayTooltip:b_(u,()=>s)})),this.setupDragging();const w=this.onColumnStateChanged.bind(this);this.addManagedEventListeners({columnPivotModeChanged:w}),this.addManagedListeners(a,{columnValueChanged:w,columnPivotChanged:w,columnRowGroupChanged:w,visibleChanged:w}),this.addManagedListeners(h,{keydown:this.handleKeyDown.bind(this),contextmenu:this.onContextMenu.bind(this)}),this.addManagedPropertyListener("functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListeners(t,{fieldValueChanged:this.onCheckboxChanged.bind(this)}),this.addManagedElementListeners(s,{click:this.onLabelClicked.bind(this)}),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip(),qD(a.getColDef(),u,a,null).forEach(T=>this.addOrRemoveCssClass(T,!0))}getColumn(){return this.column}setupTooltip(){const e=()=>{var t;return(t=this.tooltipFeature)==null?void 0:t.setTooltipAndRefresh(this.column.getColDef().headerTooltip)};e(),this.addManagedEventListeners({newColumnsLoaded:e})}onContextMenu(e){const{column:t,gos:n}=this;if(n.get("functionsReadOnly"))return;const s=this.createBean(new kI(t,e,this.focusWrapper));this.addDestroyFunc(()=>{s.isAlive()&&this.destroyBean(s)})}handleKeyDown(e){e.key===J.SPACE&&(e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))}onLabelClicked(){if(this.gos.get("functionsReadOnly"))return;const e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}onChangeCommon(e){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),!this.processingColumnStateChange&&PI(this.beans,[this.column],e,"toolPanelUi"))}refreshAriaLabel(){const{cbSelect:e,focusWrapper:t,displayName:n}=this,s=this.getLocaleTextFunc(),i=s("ariaColumn","Column"),r=e.getValue()?s("ariaVisible","visible"):s("ariaHidden","hidden"),a=s("ariaToggleVisibility","Press SPACE to toggle visibility");Oi(t,`${n} ${i}`),this.cbSelect.setInputAriaLabel(`${a} (${r})`),Yx(t,e.getInputElement().id)}setupDragging(){const e=this.eDragHandle;if(!this.allowDragging){ot(e,!1);return}const t=this.beans,{gos:n,eventSvc:s,dragAndDrop:i}=t;let r=!n.get("suppressDragLeaveHidesColumns");const a={type:rm.ToolPanel,eElement:e,dragItemName:this.displayName,getDefaultIconName:()=>r?"hide":"notAllowed",getDragItem:()=>this.createDragItem(),onDragStarted:()=>{r=!n.get("suppressDragLeaveHidesColumns"),s.dispatchEvent({type:"columnPanelItemDragStart",column:this.column})},onDragStopped:()=>{s.dispatchEvent({type:"columnPanelItemDragEnd"})},onGridEnter:u=>{r&&LI(t,{columns:[this.column],visibleState:u==null?void 0:u.visibleState,pivotState:u==null?void 0:u.pivotState,eventType:"toolPanelUi"})},onGridExit:()=>{r&&this.onChangeCommon(!1)}};i.addDragSource(a,!0),this.addDestroyFunc(()=>i.removeDragSource(a))}createDragItem(){const e=this.column.getColId(),t={[e]:this.column.isVisible()},n={[e]:OI(this.column)};return{columns:[this.column],visibleState:t,pivotState:n}}onColumnStateChanged(){this.processingColumnStateChange=!0;const e=this.beans.colModel.isPivotMode();if(e){const s=this.column.isAnyFunctionActive();this.cbSelect.setValue(s)}else this.cbSelect.setValue(this.column.isVisible());let t=!0,n=!0;if(e){const s=this.gos.get("functionsReadOnly"),i=!this.column.isAnyFunctionAllowed();t=!s&&!i,n=t}else{const{enableRowGroup:s,enableValue:i,lockPosition:r,suppressMovable:a,lockVisible:u}=this.column.getColDef(),h=!!s||!!i,d=!!r||!!a;t=!u,n=h||!d}this.cbSelect.setReadOnly(!t),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!n),this.addOrRemoveCssClass("ag-column-select-column-readonly",!n&&!t),this.cbSelect.setPassive(!1),this.processingColumnStateChange=!1}getDisplayName(){return this.displayName}onSelectAllChanged(e){const t=this.cbSelect;e!==t.getValue()&&(t.isReadOnly()||t.toggle())}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}isExpandable(){return!1}setExpanded(e){be(158)}},f6=class{constructor(e){this.items=e}getRowCount(){return this.items.length}getRow(e){return this.items[e]}},g6="ag-column-select-list",p6=class extends vt{constructor(){super(`<div class="${g6}" role="presentation"></div>`),this.destroyColumnItemFuncs=[],this.hasLoadedInitialState=!1,this.isInitialState=!1}wireBeans(e){this.colModel=e.colModel}destroy(){this.destroyColumnTree(),super.destroy()}destroyColumnTree(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach(e=>e()),this.destroyColumnItemFuncs=[]}init(e,t,n){this.params=e,this.allowDragging=t,this.eventType=n,e.suppressSyncLayoutWithGrid||this.addManagedEventListeners({columnMoved:this.onColumnsChanged.bind(this)}),this.addManagedEventListeners({newColumnsLoaded:this.onColumnsChanged.bind(this)});const s=this.fireSelectionChangedEvent.bind(this);this.addManagedEventListeners({columnPivotChanged:s,columnPivotModeChanged:s,columnRowGroupChanged:s,columnValueChanged:s,columnVisible:s,newColumnsLoaded:s}),this.expandGroupsByDefault=!e.contractColumnSelection;const i=this.createManagedBean(new WW({cssIdentifier:"column-select",ariaRole:"tree"}));this.virtualList=i,this.appendChild(i.getGui()),i.setComponentCreator((r,a)=>(UL(a,r.depth+1),this.createComponentFromItem(r,a))),this.colModel.ready&&this.onColumnsChanged(),!e.suppressColumnMove&&this.createManagedBean(new h6(this,i))}createComponentFromItem(e,t){const n=this.allowDragging;if(e.group){const i=new NI(e,n,this.eventType,t);return this.createBean(i),i}const s=new d6(e,n,this.groupsExist,t);return this.createBean(s),s}onColumnsChanged(){const e=this.params;this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!e.initialState);const t=this.getExpandedStates(),n=this.colModel.isPivotMode();!e.suppressSyncLayoutWithGrid&&!n?this.buildTreeFromWhatGridIsDisplaying():this.buildTreeFromProvidedColumnDefs(),this.setExpandedStates(t),this.markFilteredColumns(),this.flattenAndFilterModel(),this.isInitialState=!1}getDisplayedColsList(){return this.displayedColsList}getExpandedStates(){const e={};if(this.isInitialState){const{expandedGroupIds:t}=this.params.initialState;return t.forEach(n=>{e[n]=!0}),e}return this.allColsTree?(this.forEachItem(t=>{if(!t.group)return;const n=t.columnGroup;n&&(e[n.getId()]=t.expanded)}),e):{}}setExpandedStates(e){if(!this.allColsTree)return;const{isInitialState:t}=this;this.forEachItem(n=>{if(!n.group)return;const s=n.columnGroup;if(s){const i=e[s.getId()];(i!=null||t)&&(n.expanded=!!i)}})}buildTreeFromWhatGridIsDisplaying(){n6(this.colModel,this.setColumnLayout.bind(this))}setColumnLayout(e){const t=t6(this.colModel,e);this.buildListModel(t),this.groupsExist=e.some(n=>n&&typeof n.children<"u"),this.markFilteredColumns(),this.flattenAndFilterModel()}buildTreeFromProvidedColumnDefs(){var t;const e=this.colModel;this.buildListModel(e.getColDefColTree()),this.groupsExist=!!((t=e.colDefCols)!=null&&t.treeDepth)}buildListModel(e){const t=this.onColumnExpanded.bind(this),n=u=>{u.addEventListener("expandedChanged",t);const h=u.removeEventListener.bind(u,"expandedChanged",t);this.destroyColumnItemFuncs.push(h)},s=this.beans.colNames,i=(u,h,d)=>{u.forEach(g=>{Cn(g)?r(g,h,d):a(g,h,d)})},r=(u,h,d)=>{const g=u.getColGroupDef();if(g&&g.suppressColumnsToolPanel)return;if(u.isPadding()){i(u.getChildren(),h,d);return}const v=s.getDisplayNameForProvidedColumnGroup(null,u,"columnToolPanel"),w=new tA(v,u,h,!0,this.expandGroupsByDefault);d.push(w),n(w),i(u.getChildren(),h+1,w.children)},a=(u,h,d)=>{if(u.getColDef()&&u.getColDef().suppressColumnsToolPanel)return;const m=s.getDisplayNameForColumn(u,"columnToolPanel");d.push(new tA(m,u,h))};this.destroyColumnTree(),i(e,0,this.allColsTree)}onColumnExpanded(){this.flattenAndFilterModel()}flattenAndFilterModel(){this.displayedColsList=[];const e=s=>{s.passesFilter&&(this.displayedColsList.push(s),s.group&&s.expanded&&s.children.forEach(e))},t=this.virtualList;this.allColsTree.forEach(e),t.setModel(new f6(this.displayedColsList));const n=t.getLastFocusedRow();t.refresh(),n!=null&&this.focusRowIfAlive(n),this.notifyListeners(),this.refreshAriaLabel()}refreshAriaLabel(){const e=this.getLocaleTextFunc(),t=e("ariaColumnPanelList","Column List"),n=e("columns","Columns"),s=this.displayedColsList.length;Oi(this.virtualList.getAriaElement(),`${t} ${s} ${n}`)}focusRowIfAlive(e){window.setTimeout(()=>{this.isAlive()&&this.virtualList.focusRow(e)},0)}forEachItem(e){const t=s=>{s.forEach(i=>{e(i),i.group&&t(i.children)})},n=this.allColsTree;n&&t(n)}doSetExpandedAll(e){this.forEachItem(t=>{t.group&&(t.expanded=e)})}setGroupsExpanded(e,t){if(!t){this.doSetExpandedAll(e);return}const n=[];this.forEachItem(i=>{if(!i.group)return;const r=i.columnGroup.getId();t.indexOf(r)>=0&&(i.expanded=e,n.push(r))});const s=t.filter(i=>!n.includes(i));s.length>0&&be(157,{unrecognisedGroupIds:s})}getExpandState(){let e=0,t=0;return this.forEachItem(n=>{n.group&&(n.expanded?e++:t++)}),e>0&&t>0?2:t>0?1:0}doSetSelectedAll(e){FI(this.beans,this.allColsTree,e,this.eventType)}getSelectionState(){let e=0,t=0;const n=this.colModel.isPivotMode();if(this.forEachItem(s=>{if(s.group||!s.passesFilter)return;const i=s.column,r=i.getColDef();let a;if(n){if(!i.isAllowPivot()&&!i.isAllowRowGroup()&&!i.isAllowValue())return;a=i.isValueActive()||i.isPivotActive()||i.isRowGroupActive()}else{if(r.lockVisible)return;a=i.isVisible()}a?e++:t++}),!(e>0&&t>0))return!(e===0||t>0)}setFilterText(e){this.filterText=Le(e)?e.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()}markFilteredColumns(){const e=n=>{if(!Le(this.filterText))return!0;const s=n.displayName;return s==null||s.toLowerCase().indexOf(this.filterText)!==-1},t=(n,s)=>{let i=!1;if(n.group){const a=e(n);n.children.forEach(u=>{const h=t(u,a||s);h&&(i=h)})}const r=s||i?!0:e(n);return n.passesFilter=r,r};this.allColsTree.forEach(n=>t(n,!1))}notifyListeners(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()}fireGroupExpandedEvent(){const e=this.getExpandState();this.dispatchLocalEvent({type:"groupExpanded",state:e})}fireSelectionChangedEvent(){if(!this.allColsTree)return;const e=this.getSelectionState();this.dispatchLocalEvent({type:"selectionChanged",state:e})}getExpandedGroups(){const e=[];return this.allColsTree&&this.forEachItem(t=>{t.group&&t.expanded&&e.push(t.columnGroup.getId())}),e}},m6={selector:"AG-PRIMARY-COLS-LIST",component:p6},C6=class extends vt{constructor(){super(`<div class="ag-column-select">
            <ag-primary-cols-header data-ref="primaryColsHeaderPanel"></ag-primary-cols-header>
            <ag-primary-cols-list data-ref="primaryColsListPanel"></ag-primary-cols-list>
        </div>`,[JW,m6]),this.primaryColsHeaderPanel=Me,this.primaryColsListPanel=Me,this.registerCSS(QW)}init(e,t,n){const{primaryColsHeaderPanel:s,primaryColsListPanel:i}=this;s.init(t);const r=t.suppressColumnFilter,a=t.suppressColumnSelectAll;t.suppressColumnExpandAll&&r&&a&&s.setDisplayed(!1),this.addManagedListeners(i,{groupExpanded:h=>{s.setExpandState(h.state),t.onStateUpdated()},selectionChanged:h=>s.setSelectionState(h.state)}),i.init(t,e,n),this.addManagedListeners(s,{expandAll:i.doSetExpandedAll.bind(i,!0),collapseAll:i.doSetExpandedAll.bind(i,!1),selectAll:i.doSetSelectedAll.bind(i,!0),unselectAll:i.doSetSelectedAll.bind(i,!1),filterChanged:h=>i.setFilterText(h.filterText)}),this.positionableFeature=this.createManagedBean(new Zw(this.getGui(),{minHeight:100}))}toggleResizable(e){this.positionableFeature.setResizable(e?{bottom:!0}:!1)}expandGroups(e){this.primaryColsListPanel.setGroupsExpanded(!0,e)}collapseGroups(e){this.primaryColsListPanel.setGroupsExpanded(!1,e)}setColumnLayout(e){this.primaryColsListPanel.setColumnLayout(e)}syncLayoutWithGrid(){this.primaryColsListPanel.onColumnsChanged()}getExpandedGroups(){return this.primaryColsListPanel.getExpandedGroups()}},v6=class extends he{constructor(){super(...arguments),this.beanName="chartMenuItemMapper"}getChartItems(e){var d,g;const t=this.beans,n=t.chartSvc,s=e==="pivotChart";if(!n)return null;const i=this.getLocaleTextFunc.bind(this),r=s?new y6(t,n,i):new w6(t,n,i),a=n.isEnterprise();let u=r.getMenuItem();if(u&&u.subMenu&&!a){const m=v=>{var w;return{...v,subMenu:(w=v.subMenu)==null?void 0:w.filter(S=>!S._enterprise).map(S=>m(S))}};u=m(u)}const h=(g=(d=this.gos.get("chartToolPanelsDef"))==null?void 0:d.settingsPanel)==null?void 0:g.chartGroupsDef;return h&&(u=this.filterAndOrderChartMenu(u,h,r.getConfigLookup())),this.cleanInternals(u)}cleanInternals(e){if(!e)return e;const t=n=>{var s;return n==null||delete n._key,n==null||delete n._enterprise,(s=n==null?void 0:n.subMenu)==null||s.forEach(i=>t(i)),n};return t(e)}buildLookup(e){const t={},n=s=>{t[s._key]=s,s.subMenu&&s.subMenu.forEach(i=>n(i))};return n(e),t}filterAndOrderChartMenu(e,t,n){var r,a,u;const s=this.buildLookup(e),i={...e,subMenu:[]};for(const h of Object.keys(t)){const d=t[h],g=n[h];if(g===null)continue;if(g==null){be(173,{group:h});continue}const m=s[g._key];if(m)if(m.subMenu){const v=d.map(w=>{const S=g[w];if(S==null){be(174,{group:h,chartType:w});return}return s[S]}).filter(w=>w!==void 0);v.length>0&&(m.subMenu=v,(r=i.subMenu)==null||r.push(m))}else(a=i.subMenu)==null||a.push(m)}return((u=i.subMenu)==null?void 0:u.length)==0?null:i}},y6=class{constructor(e,t,n){this.beans=e,this.chartSvc=t,this.getLocaleTextFunc=n}getMenuItem(){const e=this.getLocaleTextFunc(),t=(n,s,i,r,a=!1)=>({name:e(n,s),action:()=>this.chartSvc.createPivotChart({chartType:i}),_key:r,_enterprise:a});return{name:e("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:e("columnChart","Column"),subMenu:[t("groupedColumn","Grouped&lrm;","groupedColumn","pivotGroupedColumn"),t("stackedColumn","Stacked&lrm;","stackedColumn","pivotStackedColumn"),t("normalizedColumn","100% Stacked&lrm;","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:e("barChart","Bar"),subMenu:[t("groupedBar","Grouped&lrm;","groupedBar","pivotGroupedBar"),t("stackedBar","Stacked&lrm;","stackedBar","pivotStackedBar"),t("normalizedBar","100% Stacked&lrm;","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:e("pieChart","Pie"),subMenu:[t("pie","Pie&lrm;","pie","pivotPie"),t("donut","Donut&lrm;","donut","pivotDonut")]},{_key:"pivotLineChart",name:e("lineChart","Line"),subMenu:[t("lineChart","Line&lrm;","line","pivotLineChart"),t("stackedLine","Stacked&lrm;","stackedLine","pivotStackedLine"),t("normalizedLine","100% Stacked&lrm;","normalizedLine","pivotNormalizedLine")]},{_key:"pivotAreaChart",name:e("areaChart","Area"),subMenu:[t("areaChart","Area&lrm;","area","pivotArea"),t("stackedArea","Stacked&lrm;","stackedArea","pivotStackedArea"),t("normalizedArea","100% Stacked&lrm;","normalizedArea","pivotNormalizedArea")]},{_key:"pivotXYChart",name:e("xyChart","X Y (Scatter)"),subMenu:[t("scatter","Scatter&lrm;","scatter","pivotScatter"),t("bubble","Bubble&lrm;","bubble","pivotBubble")]},{_key:"pivotStatisticalChart",_enterprise:!1,name:e("statisticalChart","Statistical"),subMenu:[t("histogramChart","Histogram&lrm;","histogram","pivotHistogram",!1)]},{_key:"pivotHierarchicalChart",_enterprise:!0,name:e("hierarchicalChart","Hierarchical"),subMenu:[t("treemapChart","Treemap&lrm;","treemap","pivotTreemap",!0),t("sunburstChart","Sunburst&lrm;","sunburst","pivotSunburst",!0)]},{_key:"pivotFunnel",name:e("funnel","Funnel"),subMenu:[t("funnel","Funnel&lrm;","funnel","pivotFunnel"),t("coneFunnel","Cone Funnel&lrm;","coneFunnel","pivotConeFunnel"),t("pyramid","Pyramid&lrm;","pyramid","pivotPyramid")]},{_key:"pivotCombinationChart",name:e("combinationChart","Combination"),subMenu:[t("columnLineCombo","Column & Line&lrm;","columnLineCombo","pivotColumnLineCombo"),t("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","pivotAreaColumnCombo")]}],icon:Ge("chart",this.beans,void 0)}}getConfigLookup(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",donut:"pivotDonut",doughnut:"pivotDonut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart",stackedLine:"pivotStackedLine",normalizedLine:"pivotNormalizedLine"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:null},hierarchicalGroup:{_key:"pivotHierarchicalChart",treemap:"pivotTreemap",sunburst:"pivotSunburst"},statisticalGroup:{_key:"pivotStatisticalChart",histogram:"pivotHistogram",rangeBar:null,rangeArea:null,boxPlot:null},funnelGroup:{_key:"pivotFunnel",funnel:"pivotFunnel",coneFunnel:"pivotConeFunnel",pyramid:"pivotPyramid"},polarGroup:null,specializedGroup:null}}},w6=class{constructor(e,t,n){this.beans=e,this.chartSvc=t,this.getLocaleTextFunc=n}getMenuItem(){const e=this.getLocaleTextFunc(),t=(n,s,i,r,a=!1)=>({name:e(n,s),action:()=>this.chartSvc.createChartFromCurrentRange(i),_key:r,_enterprise:a});return{name:e("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:e("columnChart","Column"),subMenu:[t("groupedColumn","Grouped&lrm;","groupedColumn","rangeGroupedColumn"),t("stackedColumn","Stacked&lrm;","stackedColumn","rangeStackedColumn"),t("normalizedColumn","100% Stacked&lrm;","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:e("barChart","Bar"),subMenu:[t("groupedBar","Grouped&lrm;","groupedBar","rangeGroupedBar"),t("stackedBar","Stacked&lrm;","stackedBar","rangeStackedBar"),t("normalizedBar","100% Stacked&lrm;","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:e("pieChart","Pie"),subMenu:[t("pie","Pie&lrm;","pie","rangePie"),t("donut","Donut&lrm;","donut","rangeDonut")],_key:"rangePieChart"},{name:e("lineChart","Line"),subMenu:[t("lineChart","Line&lrm;","line","rangeLineChart"),t("stackedLine","Stacked&lrm;","stackedLine","rangeStackedLine"),t("normalizedLine","100% Stacked&lrm;","normalizedLine","rangeNormalizedLine")],_key:"rangeLineChart"},{name:e("areaChart","Area"),subMenu:[t("areaChart","Area&lrm;","area","rangeArea"),t("stackedArea","Stacked&lrm;","stackedArea","rangeStackedArea"),t("normalizedArea","100% Stacked&lrm;","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},{name:e("xyChart","X Y (Scatter)"),subMenu:[t("scatter","Scatter&lrm;","scatter","rangeScatter"),t("bubble","Bubble&lrm;","bubble","rangeBubble")],_key:"rangeXYChart"},{name:e("polarChart","Polar"),subMenu:[t("radarLine","Radar Line&lrm;","radarLine","rangeRadarLine"),t("radarArea","Radar Area&lrm;","radarArea","rangeRadarArea"),t("nightingale","Nightingale&lrm;","nightingale","rangeNightingale"),t("radialColumn","Radial Column&lrm;","radialColumn","rangeRadialColumn"),t("radialBar","Radial Bar&lrm;","radialBar","rangeRadialBar")],_key:"rangePolarChart",_enterprise:!0},{name:e("statisticalChart","Statistical"),subMenu:[t("boxPlot","Box Plot&lrm;","boxPlot","rangeBoxPlot",!0),t("histogramChart","Histogram&lrm;","histogram","rangeHistogram",!1),t("rangeBar","Range Bar&lrm;","rangeBar","rangeRangeBar",!0),t("rangeArea","Range Area&lrm;","rangeArea","rangeRangeArea",!0)],_key:"rangeStatisticalChart",_enterprise:!1},{name:e("hierarchicalChart","Hierarchical"),subMenu:[t("treemap","Treemap&lrm;","treemap","rangeTreemap"),t("sunburst","Sunburst&lrm;","sunburst","rangeSunburst")],_key:"rangeHierarchicalChart",_enterprise:!0},{name:e("specializedChart","Specialized"),subMenu:[t("heatmap","Heatmap&lrm;","heatmap","rangeHeatmap"),t("waterfall","Waterfall&lrm;","waterfall","rangeWaterfall")],_key:"rangeSpecializedChart",_enterprise:!0},{name:e("funnel","Funnel"),subMenu:[t("funnel","Funnel&lrm;","funnel","rangeFunnel"),t("coneFunnel","Cone Funnel&lrm;","coneFunnel","rangeConeFunnel"),t("pyramid","Pyramid&lrm;","pyramid","rangePyramid")],_key:"rangeFunnel",_enterprise:!0},{name:e("combinationChart","Combination"),subMenu:[t("columnLineCombo","Column & Line&lrm;","columnLineCombo","rangeColumnLineCombo"),t("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:Ge("chart",this.beans,void 0)}}getConfigLookup(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",donut:"rangeDonut",doughnut:"rangeDonut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart",stackedLine:"rangeStackedLine",normalizedLine:"rangeNormalizedLine"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},polarGroup:{_key:"rangePolarChart",radarLine:"rangeRadarLine",radarArea:"rangeRadarArea",nightingale:"rangeNightingale",radialColumn:"rangeRadialColumn",radialBar:"rangeRadialBar"},statisticalGroup:{_key:"rangeStatisticalChart",boxPlot:"rangeBoxPlot",histogram:"rangeHistogram",rangeBar:"rangeRangeBar",rangeArea:"rangeRangeArea"},hierarchicalGroup:{_key:"rangeHierarchicalChart",treemap:"rangeTreemap",sunburst:"rangeSunburst"},specializedGroup:{_key:"rangeSpecializedChart",heatmap:"rangeHeatmap",waterfall:"rangeWaterfall"},funnelGroup:{_key:"rangeFunnel",funnel:"rangeFunnel",coneFunnel:"rangeConeFunnel",pyramid:"rangePyramid"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:null}}}},b6=class extends he{constructor(){super(...arguments),this.beanName="colChooserFactory"}createColumnSelectPanel(e,t,n,s){const i=e.createManagedBean(new C6),r=s??(t==null?void 0:t.getColDef().columnChooserParams)??{},{contractColumnSelection:a,suppressColumnExpandAll:u,suppressColumnFilter:h,suppressColumnSelectAll:d,suppressSyncLayoutWithGrid:g,columnLayout:m}=r;return i.init(!!n,ke(this.gos,{suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!a,suppressColumnExpandAll:!!u,suppressColumnFilter:!!h,suppressColumnSelectAll:!!d,suppressSyncLayoutWithGrid:!!m||!!g,onStateUpdated:()=>{}}),"columnMenu"),m&&i.setColumnLayout(m),i}showColumnChooser({column:e,chooserParams:t,eventSource:n,headerPosition:s}){this.hideActiveColumnChooser();const i=this.createColumnSelectPanel(this,e,!0,t),r=this.getLocaleTextFunc(),a=this.beans,{visibleCols:u,focusSvc:h,menuUtils:d}=a,g=u.allCols.indexOf(e),m=e?h.focusedHeader??s??null:null;this.activeColumnChooserDialog=this.createBean(new zW({title:r("chooseColumns","Choose Columns"),component:i,width:300,height:300,resizable:!0,movable:!0,centered:!0,closable:!0,afterGuiAttached:()=>{var v;(v=_r(a,i.getGui()))==null||v.focus({preventScroll:!0}),this.dispatchVisibleChangedEvent(!0,e)},closedCallback:v=>{const w=this.activeColumnChooser.getGui();this.destroyBean(this.activeColumnChooser),this.activeColumnChooser=void 0,this.activeColumnChooserDialog=void 0,this.dispatchVisibleChangedEvent(!1,e),e&&d.restoreFocusOnClose({column:e,headerPosition:m,columnIndex:g,eventSource:n},w,v,!0)},postProcessPopupParams:{type:"columnChooser",column:e,eventSource:n}})),this.activeColumnChooser=i}hideActiveColumnChooser(){this.destroyBean(this.activeColumnChooserDialog)}dispatchVisibleChangedEvent(e,t){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:"columnChooser",column:t??null})}},Oa="separator";function VI(e,t){if(e)for(let n=e.length-2;n>=0;n--){const s=e[n]===t,i=e[n+1]===t;s&&i&&e.splice(n+1,1)}}var S6=class extends he{constructor(){super(...arguments),this.beanName="menuItemMapper"}mapWithStockItems(e,t,n,s){if(!e)return[];const i=[],r=this.getLocaleTextFunc(),{beans:a,gos:u}=this,{validation:h,pinnedCols:d,colAutosize:g,aggFuncSvc:m,rowGroupColsSvc:v,colNames:w,colModel:S,clipboardSvc:T,expansionSvc:A,focusSvc:O,csvCreator:V,excelCreator:H,menuSvc:z,colChooserFactory:U,sortSvc:K,chartMenuItemMapper:k,valueColsSvc:D}=a,x=(L,M,B,F)=>{switch(h==null||h.validateMenuItem(L),L){case"pinSubMenu":return d&&M?{name:r("pinColumn","Pin Column"),icon:Ge("menuPin",a,null),subMenu:["clearPinned","pinLeft","pinRight"]}:null;case"pinLeft":return d&&M?{name:r("pinLeft","Pin Left"),action:()=>d.setColsPinned([M],"left",F),checked:!!M&&M.isPinnedLeft()}:null;case"pinRight":return d&&M?{name:r("pinRight","Pin Right"),action:()=>d.setColsPinned([M],"right",F),checked:!!M&&M.isPinnedRight()}:null;case"clearPinned":return d&&M?{name:r("noPin","No Pin"),action:()=>d.setColsPinned([M],null,F),checked:!!M&&!M.isPinned()}:null;case"valueAggSubMenu":return m&&D&&(M!=null&&M.isPrimary()||M!=null&&M.getColDef().pivotValueColumn)?{name:r("valueAggregation","Value Aggregation"),icon:Ge("menuValue",a,null),subMenu:E6(M,m,D,r),disabled:u.get("functionsReadOnly")}:null;case"autoSizeThis":return g?{name:r("autosizeThisColumn","Autosize This Column"),action:()=>g.autoSizeColumn(M,F,u.get("skipHeaderOnAutoSize"))}:null;case"autoSizeAll":return g?{name:r("autosizeAllColumns","Autosize All Columns"),action:()=>g.autoSizeAllColumns(F,u.get("skipHeaderOnAutoSize"))}:null;case"rowGroup":return v?{name:r("groupBy","Group by")+" "+On(w.getDisplayNameForColumn(M,"header")),disabled:u.get("functionsReadOnly")||(M==null?void 0:M.isRowGroupActive())||!(M!=null&&M.getColDef().enableRowGroup),action:()=>v.addColumns([M],F),icon:Ge("menuAddRowGroup",a,null)}:null;case"rowUnGroup":if(v&&u.isModuleRegistered("SharedRowGrouping")){const ye=M==null?void 0:M.getColDef().showRowGroup,ve=u.get("groupLockGroupColumns");let ie,Ce,re;if(ye===!0)ie=r("ungroupAll","Un-Group All"),Ce=u.get("functionsReadOnly")||ve===-1||ve>=(v.columns.length??0),re=()=>v.setColumns(v.columns.slice(0,ve),F);else if(typeof ye=="string"){const Re=S.getColDefCol(ye),N=Re!=null?On(w.getDisplayNameForColumn(Re,"header")):ye;ie=r("ungroupBy","Un-Group by")+" "+N,Ce=u.get("functionsReadOnly")||Dp(Re,a),re=()=>{v.removeColumns([ye],F)}}else ie=r("ungroupBy","Un-Group by")+" "+On(w.getDisplayNameForColumn(M,"header")),Ce=u.get("functionsReadOnly")||!(M!=null&&M.isRowGroupActive())||!(M!=null&&M.getColDef().enableRowGroup)||Dp(M,a),re=()=>v.removeColumns([M],F);return{name:ie,disabled:Ce,action:re,icon:Ge("menuRemoveRowGroup",a,null)}}else return null;case"resetColumns":return{name:r("resetColumns","Reset Columns"),action:()=>ak(a,F)};case"expandAll":return A?{name:r("expandAll","Expand All Row Groups"),action:()=>A.expandAll(!0)}:null;case"contractAll":return A?{name:r("collapseAll","Collapse All Row Groups"),action:()=>A.expandAll(!1)}:null;case"copy":return T?{name:r("copy","Copy"),shortcut:r("ctrlC","Ctrl+C"),icon:Ge("clipboardCopy",a,null),action:()=>T.copyToClipboard()}:null;case"copyWithHeaders":return T?{name:r("copyWithHeaders","Copy with Headers"),icon:Ge("clipboardCopy",a,null),action:()=>T.copyToClipboard({includeHeaders:!0})}:null;case"copyWithGroupHeaders":return T?{name:r("copyWithGroupHeaders","Copy with Group Headers"),icon:Ge("clipboardCopy",a,null),action:()=>T.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}:null;case"cut":if(T){const ye=O.getFocusedCell(),ve=ye?Xw(a,ye):null,ie=ve?ye==null?void 0:ye.column.isCellEditable(ve):!1;return{name:r("cut","Cut"),shortcut:r("ctrlX","Ctrl+X"),icon:Ge("clipboardCut",a,null),disabled:!ie||u.get("suppressCutToClipboard"),action:()=>T.cutToClipboard(void 0,"contextMenu")}}else return null;case"paste":return T?{name:r("paste","Paste"),shortcut:r("ctrlV","Ctrl+V"),disabled:!0,icon:Ge("clipboardPaste",a,null),action:()=>T.pasteFromClipboard()}:null;case"export":{const ye=[];return!u.get("suppressCsvExport")&&V&&ye.push("csvExport"),!u.get("suppressExcelExport")&&H&&ye.push("excelExport"),ye.length?{name:r("export","Export"),subMenu:ye,icon:Ge("save",a,null)}:null}case"csvExport":return V?{name:r("csvExport","CSV Export"),icon:Ge("csvExport",a,null),action:()=>V.exportDataAsCsv()}:null;case"excelExport":return H?{name:r("excelExport","Excel Export"),icon:Ge("excelExport",a,null),action:()=>H.exportDataAsExcel()}:null;case"separator":return"separator";case"pivotChart":case"chartRange":return k.getChartItems(L);case"columnFilter":return z&&M?{name:r("columnFilter","Column Filter"),icon:Ge("filter",a,null),action:()=>z.showFilterMenu({column:M,buttonElement:B(),containerType:"columnFilter",positionBy:"button"})}:null;case"columnChooser":{const ye=O.focusedHeader;return U?{name:r("columnChooser","Choose Columns"),icon:Ge("columns",a,null),action:()=>U.showColumnChooser({column:M,eventSource:B(),headerPosition:ye})}:null}case"sortAscending":return K?{name:r("sortAscending","Sort Ascending"),icon:Ge("sortAscending",a,null),action:()=>K.setSortForColumn(M,"asc",!1,F)}:null;case"sortDescending":return K?{name:r("sortDescending","Sort Descending"),icon:Ge("sortDescending",a,null),action:()=>K.setSortForColumn(M,"desc",!1,F)}:null;case"sortUnSort":return K?{name:r("sortUnSort","Clear Sort"),icon:Ge("sortUnSort",a,null),action:()=>K.setSortForColumn(M,null,!1,F)}:null;default:return be(176,{key:L}),null}};return e.forEach(L=>{let M;if(typeof L=="string"?M=x(L,t,n,s):M={...L},!M)return;const B=M,{subMenu:F}=B;F&&F instanceof Array&&(B.subMenu=this.mapWithStockItems(F,t,n,s)),M!=null&&i.push(M)}),VI(i,Oa),i}};function E6(e,t,n,s){let i;if(e.isPrimary())i=e;else{const a=e.getColDef().pivotValueColumn;i=Le(a)?a:void 0}const r=[];if(i){const a=i.isValueActive(),u=t.getFuncNames(i);r.push({name:s("noAggregation","None"),action:()=>{n.removeColumns([i],"contextMenu"),n.setColumnAggFunc(i,void 0,"contextMenu")},checked:!a}),u.forEach(h=>{r.push({name:s(h,t.getDefaultFuncLabel(h)),action:()=>{n.setColumnAggFunc(i,h,"contextMenu"),n.addColumns([i],"contextMenu")},checked:a&&i.getAggFunc()===h})})}return r}var R6=class extends he{constructor(){super(...arguments),this.beanName="colMenuFactory"}createMenu(e,t,n,s){const i=e.createManagedBean(new hm(0,{column:n??null,node:null,value:null})),r=this.beans.menuItemMapper.mapWithStockItems(t,n??null,s,"columnMenu");return i.addMenuItems(r),i}getMenuItems(e=null,t=null){var r;const n=this.getDefaultMenuOptions(e);let s;const i=(r=(e==null?void 0:e.getColDef())??(t==null?void 0:t.getColGroupDef()))==null?void 0:r.mainMenuItems;if(Array.isArray(i))s=i;else if(typeof i=="function")s=i(ke(this.gos,{column:e,columnGroup:t,defaultItems:n}));else{const a=this.gos.getCallback("getMainMenuItems");a?s=a({column:e,columnGroup:t,defaultItems:n}):s=n}return VI(s,Oa),s}getDefaultMenuOptions(e){const t=[],{beans:n,gos:s}=this,{colChooserFactory:i,rowGroupColsSvc:r,colModel:a,expansionSvc:u,sortSvc:h,menuSvc:d,pinnedCols:g,aggFuncSvc:m,colAutosize:v}=n,w=Dn(s),S=()=>{!w&&i&&t.push("columnChooser"),t.push("resetColumns")};if(!e)return S(),t;const{colDef:T}=e,A=g&&!T.lockPinned,O=(r==null?void 0:r.columns.length)??0,V=O>0,H=e.isPrimary(),z=m&&H&&V&&e.isAllowValue()||!H;if(h&&!w&&e.isSortable()){const U=e.getSort();U!=="asc"&&t.push("sortAscending"),U!=="desc"&&t.push("sortDescending"),U&&t.push("sortUnSort"),t.push(Oa)}if(d!=null&&d.isFilterMenuItemEnabled(e)&&(t.push("columnFilter"),t.push(Oa)),A&&t.push("pinSubMenu"),z&&t.push("valueAggSubMenu"),(A||z)&&t.push(Oa),v&&(t.push("autoSizeThis"),t.push("autoSizeAll"),t.push(Oa)),r&&s.isModuleRegistered("SharedRowGrouping")){const U=t.length;T.showRowGroup?t.push("rowUnGroup"):e.isAllowRowGroup()&&H&&(e.isRowGroupActive()?Dp(e,n)||t.push("rowUnGroup"):t.push("rowGroup")),t.length>U&&t.push(Oa)}return S(),u&&gc(s)&&(s.get("treeData")||O>(a.isPivotMode()?1:0))&&(t.push("expandAll"),t.push("contractAll")),t}},T6="ag-menu",sA="ag-context-menu-open",A6="ag-context-menu-loading-icon",x6=class extends he{constructor(){super(...arguments),this.beanName="contextMenuSvc",this.destroyLoadingSpinner=null,this.lastPromise=0}hideActiveMenu(){this.destroyBean(this.activeMenu)}getMenuItems(e,t,n,s){const i=[],{clipboardSvc:r,chartSvc:a,csvCreator:u,excelCreator:h,colModel:d,rangeSvc:g,gos:m}=this.beans;if(Le(e)&&r&&t&&(m.get("suppressCutToClipboard")||i.push("cut"),i.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),m.get("enableCharts")&&a&&(d.isPivotMode()&&i.push("pivotChart"),g&&!g.isEmpty()&&i.push("chartRange")),Le(e)){const T=m.get("suppressExcelExport")||!h,A=m.get("suppressCsvExport")||!u;!Qa()&&(!T||!A)&&i.push("export")}const v=i.length?i:void 0,w=t==null?void 0:t.getColDef().contextMenuItems;if(Array.isArray(w))return w;if(typeof w=="function")return w(ke(m,{column:t,node:e,value:n,defaultItems:v,event:s}));const S=m.getCallback("getContextMenuItems");return(S==null?void 0:S({column:t,node:e,value:n,defaultItems:v,event:s}))??i}getContextMenuPosition(e,t){const n=this.getRowCtrl(e),s=this.getCellGui(n,t);if(!s)return{x:0,y:(n==null?void 0:n.getRowYPosition())??0};const i=s.getBoundingClientRect();return{x:i.x+i.width/2,y:i.y+i.height/2}}showContextMenu(e){const t=e.rowNode??null,n=e.column??null;let{anchorToElement:s,value:i,source:r}=e;t&&n&&i==null&&(i=this.beans.valueSvc.getValueForDisplay(n,t)),s==null&&(s=this.getContextMenuAnchorElement(t,n)),this.beans.menuUtils.onContextMenu({mouseEvent:e.mouseEvent??null,touchEvent:e.touchEvent??null,showMenuCallback:a=>this.showMenu(t,n,i,a,s),source:r})}handleContextMenuMouseEvent(e,t,n,s){var m;const i=(s==null?void 0:s.rowNode)??(n==null?void 0:n.rowNode)??null,r=(s==null?void 0:s.column)??((m=n==null?void 0:n.findFullWidthInfoForEvent(e||t))==null?void 0:m.column)??null,{valueSvc:a,ctrlsSvc:u}=this.beans,h=r?a.getValue(r,i):null,d=u.getGridBodyCtrl(),g=s?s.eGui:d.eGridBody;this.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:i,column:r,value:h,anchorToElement:g,source:"ui"})}showMenu(e,t,n,s,i){const r=this.getMenuItems(e,t,n,s);if(fk(r)){const a=this.lastPromise+1;return this.lastPromise=a,this.destroyLoadingSpinner||this.createLoadingIcon(s),r.then(u=>{var d,g;if(this.lastPromise!==a)return;u&&u.length&&Ss(s.target)&&!((d=this.beans.overlays)!=null&&d.isExclusive())&&this.createContextMenu({menuItems:u,node:e,column:t,value:n,mouseEvent:s,anchorToElement:i}),(g=this.destroyLoadingSpinner)==null||g.call(this)}),!0}return r===void 0||!(r!=null&&r.length)?!1:(this.createContextMenu({menuItems:r,node:e,column:t,value:n,mouseEvent:s,anchorToElement:i}),!0)}createLoadingIcon(e){var h;const{beans:t}=this,n=this.getLocaleTextFunc(),s=Ge("loadingMenuItems",t),i=document.createElement("div");i.classList.add(A6),i.appendChild(s);const r=ol(t),a=nm(t);if(!a){be(54);return}a.appendChild(i),(h=t.ariaAnnounce)==null||h.announceValue(n("ariaLabelLoadingContextMenu","Loading Context Menu"),"contextmenu"),t.environment.applyThemeClasses(i),Gy(i,e,t);const u=d=>{Gy(i,d,t)};r.addEventListener("mousemove",u),this.destroyLoadingSpinner=()=>{r.removeEventListener("mousemove",u),a.removeChild(i),this.destroyLoadingSpinner=null}}createContextMenu(e){const{menuItems:t,node:n,column:s,value:i,mouseEvent:r,anchorToElement:a}=e,{ctrlsSvc:u,focusSvc:h,popupSvc:d}=this.beans,g=u.getGridBodyCtrl().eGridBody,m=new D6(t,s,n,i);this.createBean(m);const v=m.getGui();s||h.clearFocusedCell();const w={column:s,rowNode:n,type:"contextMenu",mouseEvent:r,ePopup:v,nudgeY:1},S=this.getLocaleTextFunc(),T=d==null?void 0:d.addPopup({modal:!0,eChild:v,closeOnEsc:!0,closedCallback:O=>{tm(this.beans,()=>{g.classList.remove(sA),this.destroyBean(m),this.dispatchVisibleChangedEvent(!1,O===void 0?"api":"ui")})},click:r,positionCallback:()=>{const O=this.gos.get("enableRtl");d==null||d.positionPopupUnderMouseEvent({...w,nudgeX:O?(v.offsetWidth+1)*-1:1})},anchorToElement:a,ariaLabel:S("ariaLabelContextMenu","Context Menu")});T&&(g.classList.add(sA),m.afterGuiAttached({container:"contextMenu",hidePopup:T.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=m,m.addEventListener("destroyed",()=>{this.activeMenu===m&&(this.activeMenu=null)}),T&&m.addEventListener("closeMenu",O=>T.hideFunc({mouseEvent:O.mouseEvent??void 0,keyboardEvent:O.keyboardEvent??void 0,forceHide:!0}));const A=r&&r instanceof MouseEvent&&r.type==="mousedown";this.dispatchVisibleChangedEvent(!0,A?"api":"ui")}dispatchVisibleChangedEvent(e,t="ui"){this.eventSvc.dispatchEvent({type:"contextMenuVisibleChanged",visible:e,source:t})}getRowCtrl(e){const{rowIndex:t,rowPinned:n}=e||{};if(t!=null)return this.beans.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n})||void 0}getCellGui(e,t){if(!e||!t)return;const n=e.getCellCtrl(t);return(n==null?void 0:n.eGui)||void 0}getContextMenuAnchorElement(e,t){const n=this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody,s=this.getRowCtrl(e);if(!s)return n;const i=this.getCellGui(s,t);return i||(s.isFullWidth()?s.getFullWidthElement():n)}destroy(){var e;(e=this.destroyLoadingSpinner)==null||e.call(this),super.destroy()}},D6=class extends vt{constructor(e,t,n,s){super(`<div class="${T6}" role="presentation"></div>`),this.menuItems=e,this.column=t,this.node=n,this.value=s,this.menuList=null,this.focusedCell=null}postConstruct(){const e=this.createManagedBean(new hm(0,{column:this.column,node:this.node,value:this.value})),t=this.beans.menuItemMapper.mapWithStockItems(this.menuItems,null,()=>this.getGui(),"contextMenu");e.addMenuItems(t),this.appendChild(e),this.menuList=e,e.addEventListener("closeMenu",n=>this.dispatchLocalEvent(n))}afterGuiAttached({hidePopup:e}){e&&this.addDestroyFunc(e),this.focusedCell=this.beans.focusSvc.getFocusedCell();const t=this.menuList;t&&tm(this.beans,()=>qs(t.getGui()))}restoreFocusedCell(){const{beans:e,focusedCell:t}=this,n=e.focusSvc,s=n.getFocusedCell();if(s&&t&&qy(s,t)){const{rowIndex:i,rowPinned:r,column:a}=t;od(e)&&n.setFocusedCell({rowIndex:i,column:a,rowPinned:r,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!Kw()})}}destroy(){super.destroy(),this.restoreFocusedCell()}};function _6(e){return`<div class="ag-tabs ${e}">
        <div data-ref="eHeader"></div>
        <div data-ref="eBody" role="presentation" class="ag-tabs-body ${e?`${e}-body`:""}"></div>
    </div>`}var I6=class extends lm{constructor(e){super(_6(e.cssClass)),this.eHeader=Me,this.eBody=Me,this.items=[],this.tabbedItemScrollMap=new Map,this.params=e}postConstruct(){this.setupHeader(),this.params.items&&this.params.items.forEach(e=>this.addItem(e)),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),focusInnerElement:this.focusInnerElement.bind(this),focusTrapActive:!0}),this.addDestroyFunc(()=>{var e,t,n;return(n=(t=(e=this.activeItem)==null?void 0:e.tabbedItem)==null?void 0:t.afterDetachedCallback)==null?void 0:n.call(t)})}setupHeader(){const{enableCloseButton:e,cssClass:t}=this.params,n=(s,i)=>{s.classList.add(`ag-tabs-${i}`),t&&s.classList.add(`${t}-${i}`)};e?(this.setupCloseButton(n),this.eTabHeader=Jt(this.beans).createElement("div"),n(this.eHeader,"header-wrapper"),Un(this.eHeader,"presentation"),this.eHeader.appendChild(this.eTabHeader)):this.eTabHeader=this.eHeader,Un(this.eTabHeader,"tablist"),n(this.eTabHeader,"header")}setupCloseButton(e){const t=Jt(this.beans),n=t.createElement("button");e(n,"close-button");const s=Ge("close",this.beans);Oi(n,this.params.closeButtonAriaLabel),n.appendChild(s),this.addManagedElementListeners(n,{click:()=>{var r,a;return(a=(r=this.params).onCloseClicked)==null?void 0:a.call(r)}});const i=t.createElement("div");e(i,"close-button-wrapper"),Un(i,"presentation"),i.appendChild(n),this.eHeader.appendChild(i),this.eCloseButton=n}handleKeyDown(e){switch(e.key){case J.RIGHT:case J.LEFT:{if(!this.eTabHeader.contains(un(this.beans)))return;const t=e.key===J.RIGHT,n=this.gos.get("enableRtl"),s=this.items.indexOf(this.activeItem),i=t!==n?Math.min(s+1,this.items.length-1):Math.max(s-1,0);if(s===i)return;e.preventDefault();const r=this.items[i];this.showItemWrapper(r),r.eHeaderButton.focus();break}case J.UP:case J.DOWN:e.stopPropagation();break}}onTabKeyDown(e){var v,w,S,T;if(e.defaultPrevented)return;const{beans:t,eHeader:n,eBody:s,activeItem:i,params:r}=this,{suppressTrapFocus:a,enableCloseButton:u}=r,h=un(t),d=e.target,g=e.shiftKey;if(n.contains(h)){e.preventDefault(),u&&g&&!((v=this.eCloseButton)!=null&&v.contains(h))?(w=this.eCloseButton)==null||w.focus():a&&g?(S=eA(Jt(t).body,d))==null||S.focus():this.focusBody(e.shiftKey);return}let m=null;if(qW(s,d)&&(g&&(m=eA(s,d)),!m&&!a&&(m=i.eHeaderButton)),!m&&s.contains(h)&&(m=_r(t,s,!1,g),!m)){a&&!g?this.forceFocusOutOfContainer(g):u&&!g?(e.preventDefault(),(T=this.eCloseButton)==null||T.focus()):(e.preventDefault(),this.focusHeader());return}m&&(e.preventDefault(),m.focus())}focusInnerElement(e){return e?this.focusBody(!0):(this.focusHeader(),!0)}focusHeader(e){this.activeItem.eHeaderButton.focus({preventScroll:e})}focusBody(e){return qs(this.eBody,e)}setAfterAttachedParams(e){this.afterAttachedParams=e}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(e){const t=document.createElement("span");Un(t,"tab"),t.setAttribute("tabindex","-1"),t.appendChild(e.title),t.classList.add("ag-tab"),this.eTabHeader.appendChild(t),Oi(t,e.titleLabel);const n={tabbedItem:e,eHeaderButton:t};this.items.push(n),t.addEventListener("click",this.showItemWrapper.bind(this,n))}showItem(e){const t=this.items.find(n=>n.tabbedItem===e);t&&this.showItemWrapper(t)}showItemWrapper(e){var s,i,r,a,u,h;const{tabbedItem:t,eHeaderButton:n}=e;if((i=(s=this.params).onItemClicked)==null||i.call(s,{item:t}),this.activeItem===e){(a=(r=this.params).onActiveItemClicked)==null||a.call(r);return}this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),Hi(this.eBody),t.bodyPromise.then(d=>{this.eBody.appendChild(d);const g=!Kw();if(this.params.suppressFocusBodyOnOpen||qs(this.eBody,!1,g),t.afterAttachedCallback&&t.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){const m=t.getScrollableContainer&&t.getScrollableContainer()||d;[this.lastScrollListener]=this.addManagedElementListeners(m,{scroll:()=>{this.tabbedItemScrollMap.set(t.name,m.scrollTop)}});const v=this.tabbedItemScrollMap.get(t.name);v!==void 0&&setTimeout(()=>{m.scrollTop=v},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),(h=(u=this.activeItem.tabbedItem).afterDetachedCallback)==null||h.call(u)),n.classList.add("ag-tab-selected"),this.activeItem=e}},Ro="filterMenuTab",To="generalMenuTab",ka="columnsMenuTab",Kg=[To,Ro,ka],M6=class extends he{constructor(){super(...arguments),this.beanName="enterpriseMenuFactory"}hideActiveMenu(){this.destroyBean(this.activeMenu)}showMenuAfterMouseEvent(e,t,n,s,i){const{column:r,columnGroup:a}=this.splitColumnOrGroup(e),u=i?"filterMenuTab":void 0;this.showMenu(r,a,h=>{var g;const d=h.getGui();this.beans.popupSvc.positionPopupUnderMouseEvent({type:n,column:r,mouseEvent:t,ePopup:d}),u&&((g=h.showTab)==null||g.call(h,u)),this.dispatchVisibleChangedEvent(!0,!1,r,a,u)},n,u,void 0,t.target,s)}splitColumnOrGroup(e){const t=e&&ki(e);return{column:t?e:void 0,columnGroup:t?void 0:e}}showMenuAfterButtonClick(e,t,n,s,i){let r=-1,a="left";this.gos.get("enableRtl")&&(r=1,a="right");const u=i?"filterMenuTab":void 0,h=u?[u]:void 0,d=Dn(this.gos),g=(d?9:4)*r,m=d?-23:4,{column:v,columnGroup:w}=this.splitColumnOrGroup(e);this.showMenu(v,w,S=>{var A;const T=S.getGui();this.beans.popupSvc.positionPopupByComponent({type:n,column:v,eventSource:t,ePopup:T,alignSide:a,nudgeX:g,nudgeY:m,position:"under",keepWithinBounds:!0}),u&&((A=S.showTab)==null||A.call(S,u)),this.dispatchVisibleChangedEvent(!0,!1,v,w,u)},n,u,h,t,s)}showMenu(e,t,n,s,i,r,a,u){var O;const h=this.getMenuParams(e,t,r,a);if(!h)return;const{menu:d,eMenuGui:g,anchorToElement:m,restoreFocusParams:v}=h,w=[],{menuUtils:S,popupSvc:T}=this.beans;w.push(V=>{const H=d.getGui();this.destroyBean(d),e&&(bp(e,!1,"contextMenu"),S.restoreFocusOnClose(v,H,V)),u==null||u()});const A=this.getLocaleTextFunc();if(T.addPopup({modal:!0,eChild:g,closeOnEsc:!0,closedCallback:V=>{w.forEach(H=>H(V)),this.dispatchVisibleChangedEvent(!1,!1,e,t,i)},afterGuiAttached:V=>d.afterGuiAttached(Object.assign({},{container:s},V)),positionCallback:i?()=>n(d):void 0,ariaLabel:A("ariaLabelColumnMenu","Column Menu")}),i||((O=d.showTabBasedOnPreviousSelection)==null||O.call(d),n(d)),ED(this.gos)){const V=T.setPopupPositionRelatedToElement(g,m);V&&e&&this.addStopAnchoring(V,e,w)}d.addEventListener("tabSelected",V=>{this.dispatchVisibleChangedEvent(!1,!0,e),this.lastSelectedTab=V.key,this.dispatchVisibleChangedEvent(!0,!0,e)}),e&&bp(e,!0,"contextMenu"),this.activeMenu=d,d.addEventListener("destroyed",()=>{this.activeMenu===d&&(this.activeMenu=null)})}addStopAnchoring(e,t,n){e.then(s=>{t.__addEventListener("leftChanged",s),t.__addEventListener("visibleChanged",s),n.push(()=>{t.__removeEventListener("leftChanged",s),t.__removeEventListener("visibleChanged",s)})})}getMenuParams(e,t,n,s){const{focusSvc:i,visibleCols:r,ctrlsSvc:a}=this.beans,u={column:e,headerPosition:i.focusedHeader,columnIndex:r.allCols.indexOf(e),eventSource:s},h=this.createMenu(e,t,u,n,s);return h?{menu:h,eMenuGui:h.getGui(),anchorToElement:s||a.getGridBodyCtrl().eGridBody,restoreFocusParams:u}:void 0}createMenu(e,t,n,s,i){if(Dn(this.gos))return this.createBean(new F6(e,n,this.lastSelectedTab,s,i));{const r=this.beans.colMenuFactory.getMenuItems(e,t);return r.length?this.createBean(new P6(r,e,n,i)):void 0}}dispatchVisibleChangedEvent(e,t,n,s,i){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:t,key:this.lastSelectedTab??i??(Dn(this.gos)?To:"columnMenu"),column:n??null,columnGroup:s??null})}isMenuEnabled(e){var i;if(!Dn(this.gos))return!0;const t=!((i=this.beans.filterManager)!=null&&i.isFilterAllowed(e)),n=e.getColDef().menuTabs??Kg;return(t&&n.includes(Ro)?n.length-1:n.length)>0}showMenuAfterContextMenuEvent(e,t,n){this.beans.menuUtils.onContextMenu({mouseEvent:t,touchEvent:n,source:"ui",showMenuCallback:s=>(this.showMenuAfterMouseEvent(e,s,"columnMenu"),!0)})}},F6=class extends he{constructor(e,t,n,s,i){super(),this.column=e,this.restoreFocusParams=t,this.initialSelection=n,this.restrictTo=s,this.sourceElement=i,this.tabFactories={},this.includeChecks={};const{tabFactories:r,includeChecks:a}=this;r[To]=this.createMainPanel.bind(this),r[Ro]=this.createFilterPanel.bind(this),r[ka]=this.createColumnsPanel.bind(this),a[To]=()=>!0,a[Ro]=()=>{var u;return e?!!((u=this.beans.filterManager)!=null&&u.isFilterAllowed(e)):!1},a[ka]=()=>!0}postConstruct(){var n;const e=this.getTabsToCreate().map(s=>this.createTab(s)),t=new I6({items:e,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)});this.tabbedLayout=this.createBean(t),(n=this.mainMenuList)==null||n.setParentComponent(t),this.addDestroyFunc(()=>this.destroyBean(t))}getTabsToCreate(){var e;return this.restrictTo?this.restrictTo:(((e=this.column)==null?void 0:e.getColDef().menuTabs)??Kg).filter(t=>this.isValidMenuTabItem(t)&&this.isNotSuppressed(t))}isValidMenuTabItem(e){let t=!0,n=Kg;return this.restrictTo!=null&&(t=this.restrictTo.indexOf(e)>-1,n=this.restrictTo),t=t&&Kg.indexOf(e)>-1,t||be(175,{menuTabName:e,itemsToConsider:n}),t}isNotSuppressed(e){return this.includeChecks[e]()}createTab(e){return this.tabFactories[e]()}showTabBasedOnPreviousSelection(){this.showTab(this.initialSelection)}showTab(e){const{tabItemColumns:t,tabbedLayout:n,tabItemFilter:s,tabItemGeneral:i}=this;t&&e===ka?n.showItem(t):s&&e===Ro?n.showItem(s):i&&e===To?n.showItem(i):n.showFirstItem()}onTabItemClicked(e){let t=null;switch(e.item){case this.tabItemColumns:t=ka;break;case this.tabItemFilter:t=Ro;break;case this.tabItemGeneral:t=To;break}t&&this.activateTab(t)}activateTab(e){const t={type:"tabSelected",key:e};this.dispatchLocalEvent(t)}createMainPanel(){const{beans:e,column:t}=this,n=e.colMenuFactory,s=n.createMenu(this,n.getMenuItems(t),this.column,()=>this.sourceElement??this.getGui());this.mainMenuList=s,s.addEventListener("closeMenu",this.onHidePopup.bind(this));const i={title:Ge("legacyMenu",e,t),titleLabel:To.replace("MenuTab",""),bodyPromise:ht.resolve(s.getGui()),name:To};return this.tabItemGeneral=i,i}onHidePopup(e){this.beans.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)}createFilterPanel(){const e=this.column?this.createBean(new n_(this.column,"COLUMN_MENU")):null;this.filterComp=e,e!=null&&e.hasFilter()||Bt(119);const t=s=>e==null?void 0:e.afterGuiAttached(s),n=()=>e==null?void 0:e.afterGuiDetached();return this.tabItemFilter={title:Ge("filterTab",this.beans,this.column),titleLabel:Ro.replace("MenuTab",""),bodyPromise:ht.resolve(e==null?void 0:e.getGui()),afterAttachedCallback:t,afterDetachedCallback:n,name:Ro},this.tabItemFilter}createColumnsPanel(){const e=document.createElement("div");e.classList.add("ag-menu-column-select-wrapper");const{beans:t,column:n}=this,i=t.colChooserFactory.createColumnSelectPanel(this,n).getGui();i.classList.add("ag-menu-column-select"),e.appendChild(i);const r={title:Ge("columns",t,n),titleLabel:ka.replace("MenuTab",""),bodyPromise:ht.resolve(e),name:ka};return this.tabItemColumns=r,r}afterGuiAttached(e){const{container:t,hidePopup:n}=e;this.tabbedLayout.setAfterAttachedParams({container:t,hidePopup:n}),n&&(this.hidePopupFunc=n,this.addDestroyFunc(n))}getGui(){return this.tabbedLayout.getGui()}destroy(){super.destroy(),this.destroyBean(this.filterComp)}},P6=class extends vt{constructor(e,t,n,s){super(`
            <div data-ref="eColumnMenu" role="presentation" class="ag-menu ag-column-menu"></div>
        `),this.menuItems=e,this.column=t,this.restoreFocusParams=n,this.sourceElement=s,this.eColumnMenu=Me}postConstruct(){const e=this.beans.colMenuFactory.createMenu(this,this.menuItems,this.column,()=>this.sourceElement??this.getGui());this.mainMenuList=e,e.addEventListener("closeMenu",this.onHidePopup.bind(this)),this.eColumnMenu.appendChild(e.getGui())}onHidePopup(e){this.beans.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)}afterGuiAttached({hidePopup:e}){e&&(this.hidePopupFunc=e,this.addDestroyFunc(e)),qs(this.mainMenuList.getGui())}};function L6(e,t){const{contextMenuSvc:n}=e;if(!n)return;const{rowNode:s,column:i,value:r,x:a,y:u}=t||{};let{x:h,y:d}=n.getContextMenuPosition(s,i);a!=null&&(h=a),u!=null&&(d=u),n.showContextMenu({mouseEvent:new MouseEvent("mousedown",{clientX:h,clientY:d}),rowNode:s,column:i,value:r,source:"api"})}function O6(e,t){var n;(n=e.colChooserFactory)==null||n.showColumnChooser({chooserParams:t})}function k6(e){var t;(t=e.colChooserFactory)==null||t.hideActiveColumnChooser()}var N6=class extends he{constructor(){super(...arguments),this.beanName="menuUtils"}restoreFocusOnClose(e,t,n,s){const{eventSource:i}=e,r=n instanceof KeyboardEvent;if(!s&&!r||!i)return;const a=un(this.beans);!t.contains(a)&&!od(this.beans)||this.focusHeaderCell(e)}closePopupAndRestoreFocusOnSelect(e,t,n){let s;n&&n.keyboardEvent&&(s=n.keyboardEvent),e(s&&{keyboardEvent:s});const i=this.beans,r=i.focusSvc,a=r.getFocusedCell();if(od(i))if(a){const{rowIndex:u,rowPinned:h,column:d}=a;r.setFocusedCell({rowIndex:u,column:d,rowPinned:h,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}else this.focusHeaderCell(t)}onContextMenu(e){const{mouseEvent:t,touchEvent:n,showMenuCallback:s,source:i}=e;if(!this.gos.get("allowContextMenuWithControlKey")&&t&&(t.ctrlKey||t.metaKey)||(t&&this.blockMiddleClickScrollsIfNeeded(t),i==="ui"&&this.gos.get("suppressContextMenu")))return;const r=t??n.touches[0];if(s(r)){const a=t??n;a&&a.cancelable&&a.preventDefault()}}async focusHeaderCell(e){const{column:t,columnIndex:n,headerPosition:s,eventSource:i}=e,{visibleCols:r,headerNavigation:a,focusSvc:u}=this.beans,h=await r.allCols.some(d=>d===t);if(this.isAlive()){if(t!=null&&t.isAlive()&&h&&i&&Ss(i)){const d=Yw(i);d&&(a==null||a.scrollToColumn(t),d.focus())}else if(s&&n!==-1){const d=r.allCols,g=d[n]||at(d);g&&u.focusHeaderPosition({headerPosition:{headerRowIndex:s.headerRowIndex,column:g}})}}}blockMiddleClickScrollsIfNeeded(e){this.gos.get("suppressMiddleClickScrolls")&&e.which===2&&e.preventDefault()}},BI={moduleName:"MenuCore",version:yc,beans:[S6,v6,N6],icons:{chart:"chart",columns:"columns",loadingMenuItems:"loading",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",save:"save",csvExport:"csv",excelExport:"excel",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"},dependsOn:[II,iI,sI,YW]},V6={moduleName:"ColumnMenu",version:yc,beans:[M6,R6,b6],icons:{legacyMenu:"menu",filterTab:"filter",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate"},apiFunctions:{showColumnChooser:O6,hideColumnChooser:k6},dependsOn:[BI,__,F_]},B6={moduleName:"ContextMenu",version:yc,beans:[x6],apiFunctions:{showContextMenu:L6},dependsOn:[BI]};function GI(e){var t;return((t=e.excelCreator)==null?void 0:t.getFactoryMode())==="MULTI_SHEET"?(be(161),!1):!0}function G6(e,t){var n;if(GI(e))return(n=e.excelCreator)==null?void 0:n.getDataAsExcel(t)}function H6(e,t){var n;GI(e)&&((n=e.excelCreator)==null||n.exportDataAsExcel(t))}function z6(e,t){var n,s;return(n=e.excelCreator)==null||n.setFactoryMode("MULTI_SHEET"),(s=e.excelCreator)==null?void 0:s.getSheetDataForExcel(t)}function U6(e,t){var n;return(n=e.excelCreator)==null?void 0:n.getMultipleSheetsAsExcel(t)}function W6(e,t){var n;(n=e.excelCreator)==null||n.exportMultipleSheetsAsExcel(t)}var j6={moduleName:"ExcelExport",version:yc,beans:[NW],apiFunctions:{getDataAsExcel:G6,exportDataAsExcel:H6,getSheetDataForExcel:z6,getMultipleSheetsAsExcel:U6,exportMultipleSheetsAsExcel:W6},dependsOn:[Jz,II]};Uy.values();var q6=["number","category","grouped-category","log","time"];q6.reduce((e,t)=>({...e,[t]:{title:{_enabledFromTheme:!0}}}),{});function HI(e){return e.map((t,n,s)=>t.map((i,r)=>s.slice(0,n+1).reduce((a,u)=>a+u[r],0)))}function zI(e){const t=e.map((n,s)=>e.reduce((i,r)=>Math.max(i,r[s]),0));return e.map(n=>n.map((s,i)=>s/t[i]*19))}var UI=[[1,3,5],[2,6,4],[5,3,1]],$6=HI(UI);zI($6);var K6=UI,Y6=HI(K6);zI(Y6);tN.registerModules([Wz,n4,Xz,j6,V6,B6,oz]);function Q6({setError:e,setMsg:t,setFinder:n,items:s,setBtnDisplayState:i}){const r=new Intl.DateTimeFormat("es-MX",{dateStyle:"long"}),a=(H=0)=>r.format(new Date(H)).toUpperCase(),u=()=>{if(e(!1),s.length===0){t(null),e("No hay Socios Escritos");return}else t(`${s.length}, Todos los Socios`);n(null),i(!0)},h=()=>{e(!1),s.some(z=>z.toggle===!0)?t(`${s.filter(z=>z.toggle===!0).length} Socios Activos`):(t(null),e("No hay Socios Activos")),n(s.filter(z=>z.toggle===!0)),i(!1)},d=()=>{e(!1),s.some(z=>z.toggle===!1)?t(`${s.filter(z=>z.toggle===!1).length} Socios Inactivos`):(t(null),e("No hay Socios Inactivos")),n(s.filter(z=>z.toggle===!1)),i(!1)},g=()=>{if(e(!1),s.length===0){t(null),e("No hay Socios Escritos para Ordenar");return}else t("Socios de Mayor a Menor por Fecha");let H=[...s];n(H.sort((z,U)=>z.id-U.id))},m=()=>{if(e(!1),s.length===0){t(null),e("No hay Socios Escritos para Ordenar");return}else t("Socios de Menor a Mayor por Fecha");let H=[...s];n(H.sort((z,U)=>U.id-z.id))},v=_.useRef(),[w,S]=_.useState(),[T,A]=_.useState([{field:"numeroDeRegistroDelClub",width:10,headerName:"No. DE REGISTRO",headerClass:"gold-header"},{field:"nombreDelSocio",minWidth:300,headerName:"NOMBRE SOCIO",headerClass:"gold-header",cellClass:["greenBackground"]},{field:"numeroDelSocio",width:50,headerName:"No. DE SOCIO",headerClass:"gold-header",border:!0},{field:"armasCortas",width:50,headerName:"ARMAS CORTAS",headerClass:"gold-header"},{field:"armasLargas",width:50,headerName:"ARMAS LARGAS",headerClass:"gold-header"},{field:"fechaDeInscripcion",minWidth:150,headerName:"FECHA ALTA",headerClass:"gold-header"}]),O=_.useMemo(()=>[{id:"gold-header",alignment:{vertical:"Center",horizontal:"Center",wrapText:!0},font:{bold:!0},borders:{borderBottom:{lineStyle:"Continuous",weight:2},borderTop:{lineStyle:"Continuous",weight:2},borderLeft:{lineStyle:"Continuous",weight:2},borderRight:{lineStyle:"Continuous",weight:2}}},{id:"cell",alignment:{vertical:"Center",horizontal:"Center"},borders:{borderBottom:{lineStyle:"Continuous",weight:1},borderTop:{lineStyle:"Continuous",weight:1},borderLeft:{lineStyle:"Continuous",weight:1},borderRight:{lineStyle:"Continuous",weight:1}}},{id:"greenBackground",alignment:{vertical:"Center",horizontal:"Left"},font:{bold:!0}},{id:"redFont",font:{fontName:"Calibri Light",underline:"Single",italic:!0,color:"#BB0000",bold:!0}},{id:"darkGreyBackground",interior:{color:"#888888",pattern:"Solid"},font:{fontName:"Calibri Light",color:"#ffffff"}}],[]),V=H=>{let z=[];H.forEach((U,K)=>{let k={},D=Number(U.armasArr.filter(L=>L.armasCortas==1).length)+Number(U.armasCortas),x=Number(U.armasArr.filter(L=>L.armasLargas==1).length)+Number(U.armasLargas);k.nombreDelSocio=U.nombreDelSocio+" "+U.apellidoPaterno+" "+U.apellidoMaterno,k.numeroDelSocio=K+1,k.armasCortas=D,k.armasLargas=x,k.fechaDeInscripcion=a(U.fechaDeInscripcion),k.numeroDeRegistroDelClub="624",z.push(k)}),setTimeout(()=>{S(z)},511),setTimeout(()=>{v.current.api.exportDataAsExcel()},1111)};return Z.jsxs("div",{className:"menuButtons",children:[Z.jsx("button",{onClick:u,children:"TODOS"}),Z.jsx("button",{onClick:h,children:"Activos"}),Z.jsx("button",{onClick:d,children:"Inactivos"}),Z.jsx("button",{onClick:g,children:"Fecha Min to Max"}),Z.jsx("button",{onClick:m,children:"Fecha Max to Min"}),Z.jsx("button",{className:"",onClick:()=>V(s),children:"Excel Anexo"}),Z.jsx(l3,{ref:v,rowData:w,columnDefs:T,excelStyles:O}),Z.jsx("br",{}),Z.jsx("br",{})]})}function X6(){const[e,t]=_.useState({nameLogin:"",passwordLogin:""}),{nameLogin:n,passwordLogin:s}=e,i=h=>{const{name:d,value:g}=h.target;t({...e,[d]:g.replace(/(^\w{1})|(\s+\w{1})/g,m=>m.toUpperCase())})},[r,a]=_.useState(!0),u=()=>{n==="Susana"&&s==="Susy123"?(localStorage.userSocio=n,a(!1),setTimeout(()=>{location.reload()},555)):alert("Nombre o Contrasea incorrecto")};return _.useEffect(()=>{localStorage.userSocio!==void 0&&a(!1)},[]),Z.jsxs("div",{className:r?" inModalLogin modalLogin":" outModalLogin modalLogin",children:[Z.jsx("h2",{children:"ENTRAR"}),Z.jsx("h2",{children:"Socios Data Base"}),Z.jsxs("div",{className:"loginContainer",children:[Z.jsx("input",{className:"Login",autoComplete:"off",placeholder:"Nombre",onChange:h=>i(h),type:"text",name:"nameLogin",value:n}),Z.jsx("input",{className:"Login",autoComplete:"off",placeholder:"Contrasea",onChange:h=>i(h),type:"password",name:"passwordLogin",value:s}),Z.jsx("button",{className:"LoginButton",onClick:u,children:"Entrar"})]})]})}const Z6=()=>{const[e,t]=_.useState(null),[n,s]=_.useState("");return[e,t,(r,a)=>{s(r.target.value.toUpperCase()),console.log(r.target.value),n.length>2&&t(a.filter(u=>u.apellidoPaterno.indexOf(n)>-1))},n,s]},J6=()=>{const[e,t]=_.useState(null),[n,s]=_.useState(null),[i,r]=_.useState("BASE DE DATOS SOCIOS");return[i,r,t,e,n,s]},e9=()=>{};var iA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},t9=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const i=e[n++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=e[n++];t[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=e[n++],a=e[n++],u=e[n++],h=((i&7)<<18|(r&63)<<12|(a&63)<<6|u&63)-65536;t[s++]=String.fromCharCode(55296+(h>>10)),t[s++]=String.fromCharCode(56320+(h&1023))}else{const r=e[n++],a=e[n++];t[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|a&63)}}return t.join("")},jI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<e.length;i+=3){const r=e[i],a=i+1<e.length,u=a?e[i+1]:0,h=i+2<e.length,d=h?e[i+2]:0,g=r>>2,m=(r&3)<<4|u>>4;let v=(u&15)<<2|d>>6,w=d&63;h||(w=64,a||(v=64)),s.push(n[g],n[m],n[v],n[w])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(WI(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):t9(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<e.length;){const r=n[e.charAt(i++)],u=i<e.length?n[e.charAt(i)]:0;++i;const d=i<e.length?n[e.charAt(i)]:64;++i;const m=i<e.length?n[e.charAt(i)]:64;if(++i,r==null||u==null||d==null||m==null)throw new n9;const v=r<<2|u>>4;if(s.push(v),d!==64){const w=u<<4&240|d>>2;if(s.push(w),m!==64){const S=d<<6&192|m;s.push(S)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class n9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s9=function(e){const t=WI(e);return jI.encodeByteArray(t,!0)},_p=function(e){return s9(e).replace(/\./g,"")},qI=function(e){try{return jI.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ip(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!i9(n)||(e[n]=Ip(e[n],t[n]));return e}function i9(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9=()=>$I().__FIREBASE_DEFAULTS__,o9=()=>{if(typeof process>"u"||typeof iA>"u")return;const e=iA.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},a9=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&qI(e[1]);return t&&JSON.parse(t)},pb=()=>{try{return e9()||r9()||o9()||a9()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},l9=e=>{var t,n;return(n=(t=pb())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},u9=e=>{const t=l9(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},KI=()=>{var e;return(e=pb())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[_p(JSON.stringify(n)),_p(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function d9(){var e;const t=(e=pb())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function f9(){return typeof window<"u"||YI()}function YI(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function QI(){return!d9()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XI(){try{return typeof indexedDB=="object"}catch{return!1}}function g9(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;t(((r=i.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9="FirebaseError";class wl extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=p9,Object.setPrototypeOf(this,wl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dm.prototype.create)}}class dm{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},i=`${this.service}/${t}`,r=this.errors[t],a=r?m9(r,s):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new wl(i,u,s)}}function m9(e,t){return e.replace(C9,(n,s)=>{const i=t[s];return i!=null?String(i):`<${s}?>`})}const C9=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Uu(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const i of n){if(!s.includes(i))return!1;const r=e[i],a=t[i];if(oA(r)&&oA(a)){if(!Uu(r,a))return!1}else if(r!==a)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function oA(e){return e!==null&&typeof e=="object"}function v9(e,t){const n=new y9(e,t);return n.subscribe.bind(n)}class y9{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let i;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");w9(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:s},i.next===void 0&&(i.next=yy),i.error===void 0&&(i.error=yy),i.complete===void 0&&(i.complete=yy);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function w9(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function yy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(e){return e&&e._delegate?e._delegate:e}class cl{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new c9;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(E9(t))try{this.getOrInitializeService({instanceIdentifier:Na})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(t=Na){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Na){return this.instances.has(t)}getOptions(t=Na){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(r);s===u&&a.resolve(i)}return i}onInit(t,n){var s;const i=this.normalizeInstanceIdentifier(n),r=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;r.add(t),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&t(a,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:S9(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Na){return this.component?this.component.multipleInstances?t:Na:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function S9(e){return e===Na?void 0:e}function E9(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new b9(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=[];var Ze;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Ze||(Ze={}));const JI={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},R9=Ze.INFO,T9={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},A9=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),i=T9[t];if(i)console[i](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Cb{constructor(t){this.name=t,this._logLevel=R9,this._logHandler=A9,this._userLogHandler=null,mb.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ze))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?JI[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...t),this._logHandler(this,Ze.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...t),this._logHandler(this,Ze.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...t),this._logHandler(this,Ze.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...t),this._logHandler(this,Ze.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...t),this._logHandler(this,Ze.ERROR,...t)}}function x9(e){mb.forEach(t=>{t.setLogLevel(e)})}function D9(e,t){for(const n of mb){let s=null;t&&t.level&&(s=JI[t.level]),e===null?n.userLogHandler=null:n.userLogHandler=(i,r,...a)=>{const u=a.map(h=>{if(h==null)return null;if(typeof h=="string")return h;if(typeof h=="number"||typeof h=="boolean")return h.toString();if(h instanceof Error)return h.message;try{return JSON.stringify(h)}catch{return null}}).filter(h=>h).join(" ");r>=(s??i.logLevel)&&e({level:Ze[r].toLowerCase(),message:u,args:a,type:i.name})}}}const _9=(e,t)=>t.some(n=>e instanceof n);let aA,lA;function I9(){return aA||(aA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function M9(){return lA||(lA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eM=new WeakMap,rw=new WeakMap,tM=new WeakMap,wy=new WeakMap,vb=new WeakMap;function F9(e){const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",a)},r=()=>{n(Fo(e.result)),i()},a=()=>{s(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&eM.set(n,e)}).catch(()=>{}),vb.set(t,e),t}function P9(e){if(rw.has(e))return;const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",a),e.removeEventListener("abort",a)},r=()=>{n(),i()},a=()=>{s(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",a),e.addEventListener("abort",a)});rw.set(e,t)}let ow={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return rw.get(e);if(t==="objectStoreNames")return e.objectStoreNames||tM.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fo(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function L9(e){ow=e(ow)}function O9(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(by(this),t,...n);return tM.set(s,t.sort?t.sort():[t]),Fo(s)}:M9().includes(e)?function(...t){return e.apply(by(this),t),Fo(eM.get(this))}:function(...t){return Fo(e.apply(by(this),t))}}function k9(e){return typeof e=="function"?O9(e):(e instanceof IDBTransaction&&P9(e),_9(e,I9())?new Proxy(e,ow):e)}function Fo(e){if(e instanceof IDBRequest)return F9(e);if(wy.has(e))return wy.get(e);const t=k9(e);return t!==e&&(wy.set(e,t),vb.set(t,e)),t}const by=e=>vb.get(e);function N9(e,t,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const a=indexedDB.open(e,t),u=Fo(a);return s&&a.addEventListener("upgradeneeded",h=>{s(Fo(a.result),h.oldVersion,h.newVersion,Fo(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{r&&h.addEventListener("close",()=>r()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const V9=["get","getKey","getAll","getAllKeys","count"],B9=["put","add","delete","clear"],Sy=new Map;function uA(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Sy.get(t))return Sy.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,i=B9.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||V9.includes(n)))return;const r=async function(a,...u){const h=this.transaction(a,i?"readwrite":"readonly");let d=h.store;return s&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),i&&h.done]))[0]};return Sy.set(t,r),r}L9(e=>({...e,get:(t,n,s)=>uA(t,n)||e.get(t,n,s),has:(t,n)=>!!uA(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(H9(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function H9(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Fp="@firebase/app",aw="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new Cb("@firebase/app"),z9="@firebase/app-compat",U9="@firebase/analytics-compat",W9="@firebase/analytics",j9="@firebase/app-check-compat",q9="@firebase/app-check",$9="@firebase/auth",K9="@firebase/auth-compat",Y9="@firebase/database",Q9="@firebase/data-connect",X9="@firebase/database-compat",Z9="@firebase/functions",J9="@firebase/functions-compat",ej="@firebase/installations",tj="@firebase/installations-compat",nj="@firebase/messaging",sj="@firebase/messaging-compat",ij="@firebase/performance",rj="@firebase/performance-compat",oj="@firebase/remote-config",aj="@firebase/remote-config-compat",lj="@firebase/storage",uj="@firebase/storage-compat",cj="@firebase/firestore",hj="@firebase/vertexai",dj="@firebase/firestore-compat",fj="firebase",gj="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo="[DEFAULT]",pj={[Fp]:"fire-core",[z9]:"fire-core-compat",[W9]:"fire-analytics",[U9]:"fire-analytics-compat",[q9]:"fire-app-check",[j9]:"fire-app-check-compat",[$9]:"fire-auth",[K9]:"fire-auth-compat",[Y9]:"fire-rtdb",[Q9]:"fire-data-connect",[X9]:"fire-rtdb-compat",[Z9]:"fire-fn",[J9]:"fire-fn-compat",[ej]:"fire-iid",[tj]:"fire-iid-compat",[nj]:"fire-fcm",[sj]:"fire-fcm-compat",[ij]:"fire-perf",[rj]:"fire-perf-compat",[oj]:"fire-rc",[aj]:"fire-rc-compat",[lj]:"fire-gcs",[uj]:"fire-gcs-compat",[cj]:"fire-fst",[dj]:"fire-fst-compat",[hj]:"fire-vertex","fire-js":"fire-js",[fj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=new Map,Wu=new Map,ju=new Map;function dd(e,t){try{e.container.addComponent(t)}catch(n){Rr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function nM(e,t){e.container.addOrOverwriteComponent(t)}function qu(e){const t=e.name;if(ju.has(t))return Rr.debug(`There were multiple attempts to register component ${t}.`),!1;ju.set(t,e);for(const n of Bo.values())dd(n,e);for(const n of Wu.values())dd(n,e);return!0}function yb(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function mj(e,t,n=Vo){yb(e,t).clearInstance(n)}function sM(e){return e.options!==void 0}function iM(e){return e==null?!1:e.settings!==void 0}function Cj(){ju.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},js=new dm("app","Firebase",vj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rM=class{constructor(t,n,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new cl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw js.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(e,t){const n=qI(e.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`);return}const i=JSON.parse(n).exp*1e3,r=new Date().getTime();i-r<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`)}class yj extends rM{constructor(t,n,s,i){const r=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,a={name:s,automaticDataCollectionEnabled:r};if(t.apiKey!==void 0)super(t,a,i);else{const u=t;super(u.options,a,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:r},n),this._serverConfig.authIdToken&&cA(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&cA(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,yr(Fp,aw,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(t){this.isDeleted||(this._refCount++,t!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(t,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Sb(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw js.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=gj;function bb(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s=Object.assign({name:Vo,automaticDataCollectionEnabled:!1},t),i=s.name;if(typeof i!="string"||!i)throw js.create("bad-app-name",{appName:String(i)});if(n||(n=KI()),!n)throw js.create("no-options");const r=Bo.get(i);if(r){if(Uu(n,r.options)&&Uu(s,r.config))return r;throw js.create("duplicate-app",{appName:i})}const a=new ZI(i);for(const h of ju.values())a.addComponent(h);const u=new rM(n,s,a);return Bo.set(i,u),u}function wj(e,t){if(f9()&&!YI())throw js.create("invalid-server-app-environment");t.automaticDataCollectionEnabled===void 0&&(t.automaticDataCollectionEnabled=!1);let n;sM(e)?n=e.options:n=e;const s=Object.assign(Object.assign({},t),n);s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const i=d=>[...d].reduce((g,m)=>Math.imul(31,g)+m.charCodeAt(0)|0,0);if(t.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw js.create("finalization-registry-not-supported",{});const r=""+i(JSON.stringify(s)),a=Wu.get(r);if(a)return a.incRefCount(t.releaseOnDeref),a;const u=new ZI(r);for(const d of ju.values())u.addComponent(d);const h=new yj(n,t,r,u);return Wu.set(r,h),h}function oM(e=Vo){const t=Bo.get(e);if(!t&&e===Vo&&KI())return bb();if(!t)throw js.create("no-app",{appName:e});return t}function bj(){return Array.from(Bo.values())}async function Sb(e){let t=!1;const n=e.name;Bo.has(n)?(t=!0,Bo.delete(n)):Wu.has(n)&&e.decRefCount()<=0&&(Wu.delete(n),t=!0),t&&(await Promise.all(e.container.getProviders().map(s=>s.delete())),e.isDeleted=!0)}function yr(e,t,n){var s;let i=(s=pj[e])!==null&&s!==void 0?s:e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),a=t.match(/\s|\//);if(r||a){const u=[`Unable to register library "${i}" with version "${t}":`];r&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&u.push("and"),a&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Rr.warn(u.join(" "));return}qu(new cl(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}function aM(e,t){if(e!==null&&typeof e!="function")throw js.create("invalid-log-argument");D9(e,t)}function lM(e){x9(e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj="firebase-heartbeat-database",Ej=1,fd="firebase-heartbeat-store";let Ey=null;function uM(){return Ey||(Ey=N9(Sj,Ej,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(fd)}catch(n){console.warn(n)}}}}).catch(e=>{throw js.create("idb-open",{originalErrorMessage:e.message})})),Ey}async function Rj(e){try{const n=(await uM()).transaction(fd),s=await n.objectStore(fd).get(cM(e));return await n.done,s}catch(t){if(t instanceof wl)Rr.warn(t.message);else{const n=js.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Rr.warn(n.message)}}}async function hA(e,t){try{const s=(await uM()).transaction(fd,"readwrite");await s.objectStore(fd).put(t,cM(e)),await s.done}catch(n){if(n instanceof wl)Rr.warn(n.message);else{const s=js.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Rr.warn(s.message)}}}function cM(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=1024,Aj=30;class xj{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _j(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=dA();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>Aj){const a=Ij(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Rr.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=dA(),{heartbeatsToSend:s,unsentEntries:i}=Dj(this._heartbeatsCache.heartbeats),r=_p(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return Rr.warn(n),""}}}function dA(){return new Date().toISOString().substring(0,10)}function Dj(e,t=Tj){const n=[];let s=e.slice();for(const i of e){const r=n.find(a=>a.agent===i.agent);if(r){if(r.dates.push(i.date),fA(n)>t){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),fA(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class _j{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XI()?g9().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Rj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return hA(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return hA(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function fA(e){return _p(JSON.stringify({version:2,heartbeats:e})).length}function Ij(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(e){qu(new cl("platform-logger",t=>new G9(t),"PRIVATE")),qu(new cl("heartbeat",t=>new xj(t),"PRIVATE")),yr(Fp,aw,e),yr(Fp,aw,"esm2017"),yr("fire-js","")}Mj("");const Fj=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:wl,SDK_VERSION:wb,_DEFAULT_ENTRY_NAME:Vo,_addComponent:dd,_addOrOverwriteComponent:nM,_apps:Bo,_clearComponents:Cj,_components:ju,_getProvider:yb,_isFirebaseApp:sM,_isFirebaseServerApp:iM,_registerComponent:qu,_removeServiceInstance:mj,_serverApps:Wu,deleteApp:Sb,getApp:oM,getApps:bj,initializeApp:bb,initializeServerApp:wj,onLog:aM,registerVersion:yr,setLogLevel:lM},Symbol.toStringTag,{value:"Module"}));var gA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Po,hM;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(k,D){function x(){}x.prototype=D.prototype,k.D=D.prototype,k.prototype=new x,k.prototype.constructor=k,k.C=function(L,M,B){for(var F=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)F[ye-2]=arguments[ye];return D.prototype[M].apply(L,F)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,D,x){x||(x=0);var L=Array(16);if(typeof D=="string")for(var M=0;16>M;++M)L[M]=D.charCodeAt(x++)|D.charCodeAt(x++)<<8|D.charCodeAt(x++)<<16|D.charCodeAt(x++)<<24;else for(M=0;16>M;++M)L[M]=D[x++]|D[x++]<<8|D[x++]<<16|D[x++]<<24;D=k.g[0],x=k.g[1],M=k.g[2];var B=k.g[3],F=D+(B^x&(M^B))+L[0]+3614090360&4294967295;D=x+(F<<7&4294967295|F>>>25),F=B+(M^D&(x^M))+L[1]+3905402710&4294967295,B=D+(F<<12&4294967295|F>>>20),F=M+(x^B&(D^x))+L[2]+606105819&4294967295,M=B+(F<<17&4294967295|F>>>15),F=x+(D^M&(B^D))+L[3]+3250441966&4294967295,x=M+(F<<22&4294967295|F>>>10),F=D+(B^x&(M^B))+L[4]+4118548399&4294967295,D=x+(F<<7&4294967295|F>>>25),F=B+(M^D&(x^M))+L[5]+1200080426&4294967295,B=D+(F<<12&4294967295|F>>>20),F=M+(x^B&(D^x))+L[6]+2821735955&4294967295,M=B+(F<<17&4294967295|F>>>15),F=x+(D^M&(B^D))+L[7]+4249261313&4294967295,x=M+(F<<22&4294967295|F>>>10),F=D+(B^x&(M^B))+L[8]+1770035416&4294967295,D=x+(F<<7&4294967295|F>>>25),F=B+(M^D&(x^M))+L[9]+2336552879&4294967295,B=D+(F<<12&4294967295|F>>>20),F=M+(x^B&(D^x))+L[10]+4294925233&4294967295,M=B+(F<<17&4294967295|F>>>15),F=x+(D^M&(B^D))+L[11]+2304563134&4294967295,x=M+(F<<22&4294967295|F>>>10),F=D+(B^x&(M^B))+L[12]+1804603682&4294967295,D=x+(F<<7&4294967295|F>>>25),F=B+(M^D&(x^M))+L[13]+4254626195&4294967295,B=D+(F<<12&4294967295|F>>>20),F=M+(x^B&(D^x))+L[14]+2792965006&4294967295,M=B+(F<<17&4294967295|F>>>15),F=x+(D^M&(B^D))+L[15]+1236535329&4294967295,x=M+(F<<22&4294967295|F>>>10),F=D+(M^B&(x^M))+L[1]+4129170786&4294967295,D=x+(F<<5&4294967295|F>>>27),F=B+(x^M&(D^x))+L[6]+3225465664&4294967295,B=D+(F<<9&4294967295|F>>>23),F=M+(D^x&(B^D))+L[11]+643717713&4294967295,M=B+(F<<14&4294967295|F>>>18),F=x+(B^D&(M^B))+L[0]+3921069994&4294967295,x=M+(F<<20&4294967295|F>>>12),F=D+(M^B&(x^M))+L[5]+3593408605&4294967295,D=x+(F<<5&4294967295|F>>>27),F=B+(x^M&(D^x))+L[10]+38016083&4294967295,B=D+(F<<9&4294967295|F>>>23),F=M+(D^x&(B^D))+L[15]+3634488961&4294967295,M=B+(F<<14&4294967295|F>>>18),F=x+(B^D&(M^B))+L[4]+3889429448&4294967295,x=M+(F<<20&4294967295|F>>>12),F=D+(M^B&(x^M))+L[9]+568446438&4294967295,D=x+(F<<5&4294967295|F>>>27),F=B+(x^M&(D^x))+L[14]+3275163606&4294967295,B=D+(F<<9&4294967295|F>>>23),F=M+(D^x&(B^D))+L[3]+4107603335&4294967295,M=B+(F<<14&4294967295|F>>>18),F=x+(B^D&(M^B))+L[8]+1163531501&4294967295,x=M+(F<<20&4294967295|F>>>12),F=D+(M^B&(x^M))+L[13]+2850285829&4294967295,D=x+(F<<5&4294967295|F>>>27),F=B+(x^M&(D^x))+L[2]+4243563512&4294967295,B=D+(F<<9&4294967295|F>>>23),F=M+(D^x&(B^D))+L[7]+1735328473&4294967295,M=B+(F<<14&4294967295|F>>>18),F=x+(B^D&(M^B))+L[12]+2368359562&4294967295,x=M+(F<<20&4294967295|F>>>12),F=D+(x^M^B)+L[5]+4294588738&4294967295,D=x+(F<<4&4294967295|F>>>28),F=B+(D^x^M)+L[8]+2272392833&4294967295,B=D+(F<<11&4294967295|F>>>21),F=M+(B^D^x)+L[11]+1839030562&4294967295,M=B+(F<<16&4294967295|F>>>16),F=x+(M^B^D)+L[14]+4259657740&4294967295,x=M+(F<<23&4294967295|F>>>9),F=D+(x^M^B)+L[1]+2763975236&4294967295,D=x+(F<<4&4294967295|F>>>28),F=B+(D^x^M)+L[4]+1272893353&4294967295,B=D+(F<<11&4294967295|F>>>21),F=M+(B^D^x)+L[7]+4139469664&4294967295,M=B+(F<<16&4294967295|F>>>16),F=x+(M^B^D)+L[10]+3200236656&4294967295,x=M+(F<<23&4294967295|F>>>9),F=D+(x^M^B)+L[13]+681279174&4294967295,D=x+(F<<4&4294967295|F>>>28),F=B+(D^x^M)+L[0]+3936430074&4294967295,B=D+(F<<11&4294967295|F>>>21),F=M+(B^D^x)+L[3]+3572445317&4294967295,M=B+(F<<16&4294967295|F>>>16),F=x+(M^B^D)+L[6]+76029189&4294967295,x=M+(F<<23&4294967295|F>>>9),F=D+(x^M^B)+L[9]+3654602809&4294967295,D=x+(F<<4&4294967295|F>>>28),F=B+(D^x^M)+L[12]+3873151461&4294967295,B=D+(F<<11&4294967295|F>>>21),F=M+(B^D^x)+L[15]+530742520&4294967295,M=B+(F<<16&4294967295|F>>>16),F=x+(M^B^D)+L[2]+3299628645&4294967295,x=M+(F<<23&4294967295|F>>>9),F=D+(M^(x|~B))+L[0]+4096336452&4294967295,D=x+(F<<6&4294967295|F>>>26),F=B+(x^(D|~M))+L[7]+1126891415&4294967295,B=D+(F<<10&4294967295|F>>>22),F=M+(D^(B|~x))+L[14]+2878612391&4294967295,M=B+(F<<15&4294967295|F>>>17),F=x+(B^(M|~D))+L[5]+4237533241&4294967295,x=M+(F<<21&4294967295|F>>>11),F=D+(M^(x|~B))+L[12]+1700485571&4294967295,D=x+(F<<6&4294967295|F>>>26),F=B+(x^(D|~M))+L[3]+2399980690&4294967295,B=D+(F<<10&4294967295|F>>>22),F=M+(D^(B|~x))+L[10]+4293915773&4294967295,M=B+(F<<15&4294967295|F>>>17),F=x+(B^(M|~D))+L[1]+2240044497&4294967295,x=M+(F<<21&4294967295|F>>>11),F=D+(M^(x|~B))+L[8]+1873313359&4294967295,D=x+(F<<6&4294967295|F>>>26),F=B+(x^(D|~M))+L[15]+4264355552&4294967295,B=D+(F<<10&4294967295|F>>>22),F=M+(D^(B|~x))+L[6]+2734768916&4294967295,M=B+(F<<15&4294967295|F>>>17),F=x+(B^(M|~D))+L[13]+1309151649&4294967295,x=M+(F<<21&4294967295|F>>>11),F=D+(M^(x|~B))+L[4]+4149444226&4294967295,D=x+(F<<6&4294967295|F>>>26),F=B+(x^(D|~M))+L[11]+3174756917&4294967295,B=D+(F<<10&4294967295|F>>>22),F=M+(D^(B|~x))+L[2]+718787259&4294967295,M=B+(F<<15&4294967295|F>>>17),F=x+(B^(M|~D))+L[9]+3951481745&4294967295,k.g[0]=k.g[0]+D&4294967295,k.g[1]=k.g[1]+(M+(F<<21&4294967295|F>>>11))&4294967295,k.g[2]=k.g[2]+M&4294967295,k.g[3]=k.g[3]+B&4294967295}s.prototype.u=function(k,D){D===void 0&&(D=k.length);for(var x=D-this.blockSize,L=this.B,M=this.h,B=0;B<D;){if(M==0)for(;B<=x;)i(this,k,B),B+=this.blockSize;if(typeof k=="string"){for(;B<D;)if(L[M++]=k.charCodeAt(B++),M==this.blockSize){i(this,L),M=0;break}}else for(;B<D;)if(L[M++]=k[B++],M==this.blockSize){i(this,L),M=0;break}}this.h=M,this.o+=D},s.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var D=1;D<k.length-8;++D)k[D]=0;var x=8*this.o;for(D=k.length-8;D<k.length;++D)k[D]=x&255,x/=256;for(this.u(k),k=Array(16),D=x=0;4>D;++D)for(var L=0;32>L;L+=8)k[x++]=this.g[D]>>>L&255;return k};function r(k,D){var x=u;return Object.prototype.hasOwnProperty.call(x,k)?x[k]:x[k]=D(k)}function a(k,D){this.h=D;for(var x=[],L=!0,M=k.length-1;0<=M;M--){var B=k[M]|0;L&&B==D||(x[M]=B,L=!1)}this.g=x}var u={};function h(k){return-128<=k&&128>k?r(k,function(D){return new a([D|0],0>D?-1:0)}):new a([k|0],0>k?-1:0)}function d(k){if(isNaN(k)||!isFinite(k))return m;if(0>k)return A(d(-k));for(var D=[],x=1,L=0;k>=x;L++)D[L]=k/x|0,x*=4294967296;return new a(D,0)}function g(k,D){if(k.length==0)throw Error("number format error: empty string");if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(k.charAt(0)=="-")return A(g(k.substring(1),D));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=d(Math.pow(D,8)),L=m,M=0;M<k.length;M+=8){var B=Math.min(8,k.length-M),F=parseInt(k.substring(M,M+B),D);8>B?(B=d(Math.pow(D,B)),L=L.j(B).add(d(F))):(L=L.j(x),L=L.add(d(F)))}return L}var m=h(0),v=h(1),w=h(16777216);e=a.prototype,e.m=function(){if(T(this))return-A(this).m();for(var k=0,D=1,x=0;x<this.g.length;x++){var L=this.i(x);k+=(0<=L?L:4294967296+L)*D,D*=4294967296}return k},e.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(S(this))return"0";if(T(this))return"-"+A(this).toString(k);for(var D=d(Math.pow(k,6)),x=this,L="";;){var M=z(x,D).g;x=O(x,M.j(D));var B=((0<x.g.length?x.g[0]:x.h)>>>0).toString(k);if(x=M,S(x))return B+L;for(;6>B.length;)B="0"+B;L=B+L}},e.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function S(k){if(k.h!=0)return!1;for(var D=0;D<k.g.length;D++)if(k.g[D]!=0)return!1;return!0}function T(k){return k.h==-1}e.l=function(k){return k=O(this,k),T(k)?-1:S(k)?0:1};function A(k){for(var D=k.g.length,x=[],L=0;L<D;L++)x[L]=~k.g[L];return new a(x,~k.h).add(v)}e.abs=function(){return T(this)?A(this):this},e.add=function(k){for(var D=Math.max(this.g.length,k.g.length),x=[],L=0,M=0;M<=D;M++){var B=L+(this.i(M)&65535)+(k.i(M)&65535),F=(B>>>16)+(this.i(M)>>>16)+(k.i(M)>>>16);L=F>>>16,B&=65535,F&=65535,x[M]=F<<16|B}return new a(x,x[x.length-1]&-2147483648?-1:0)};function O(k,D){return k.add(A(D))}e.j=function(k){if(S(this)||S(k))return m;if(T(this))return T(k)?A(this).j(A(k)):A(A(this).j(k));if(T(k))return A(this.j(A(k)));if(0>this.l(w)&&0>k.l(w))return d(this.m()*k.m());for(var D=this.g.length+k.g.length,x=[],L=0;L<2*D;L++)x[L]=0;for(L=0;L<this.g.length;L++)for(var M=0;M<k.g.length;M++){var B=this.i(L)>>>16,F=this.i(L)&65535,ye=k.i(M)>>>16,ve=k.i(M)&65535;x[2*L+2*M]+=F*ve,V(x,2*L+2*M),x[2*L+2*M+1]+=B*ve,V(x,2*L+2*M+1),x[2*L+2*M+1]+=F*ye,V(x,2*L+2*M+1),x[2*L+2*M+2]+=B*ye,V(x,2*L+2*M+2)}for(L=0;L<D;L++)x[L]=x[2*L+1]<<16|x[2*L];for(L=D;L<2*D;L++)x[L]=0;return new a(x,0)};function V(k,D){for(;(k[D]&65535)!=k[D];)k[D+1]+=k[D]>>>16,k[D]&=65535,D++}function H(k,D){this.g=k,this.h=D}function z(k,D){if(S(D))throw Error("division by zero");if(S(k))return new H(m,m);if(T(k))return D=z(A(k),D),new H(A(D.g),A(D.h));if(T(D))return D=z(k,A(D)),new H(A(D.g),D.h);if(30<k.g.length){if(T(k)||T(D))throw Error("slowDivide_ only works with positive integers.");for(var x=v,L=D;0>=L.l(k);)x=U(x),L=U(L);var M=K(x,1),B=K(L,1);for(L=K(L,2),x=K(x,2);!S(L);){var F=B.add(L);0>=F.l(k)&&(M=M.add(x),B=F),L=K(L,1),x=K(x,1)}return D=O(k,M.j(D)),new H(M,D)}for(M=m;0<=k.l(D);){for(x=Math.max(1,Math.floor(k.m()/D.m())),L=Math.ceil(Math.log(x)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),B=d(x),F=B.j(D);T(F)||0<F.l(k);)x-=L,B=d(x),F=B.j(D);S(B)&&(B=v),M=M.add(B),k=O(k,F)}return new H(M,k)}e.A=function(k){return z(this,k).h},e.and=function(k){for(var D=Math.max(this.g.length,k.g.length),x=[],L=0;L<D;L++)x[L]=this.i(L)&k.i(L);return new a(x,this.h&k.h)},e.or=function(k){for(var D=Math.max(this.g.length,k.g.length),x=[],L=0;L<D;L++)x[L]=this.i(L)|k.i(L);return new a(x,this.h|k.h)},e.xor=function(k){for(var D=Math.max(this.g.length,k.g.length),x=[],L=0;L<D;L++)x[L]=this.i(L)^k.i(L);return new a(x,this.h^k.h)};function U(k){for(var D=k.g.length+1,x=[],L=0;L<D;L++)x[L]=k.i(L)<<1|k.i(L-1)>>>31;return new a(x,k.h)}function K(k,D){var x=D>>5;D%=32;for(var L=k.g.length-x,M=[],B=0;B<L;B++)M[B]=0<D?k.i(B+x)>>>D|k.i(B+x+1)<<32-D:k.i(B+x);return new a(M,k.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,hM=s,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=g,Po=a}).apply(typeof gA<"u"?gA:typeof self<"u"?self:typeof window<"u"?window:{});var Mg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dM,Gh,fM,Yg,lw,gM,pM,mM;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,b,E){return p==Array.prototype||p==Object.prototype||(p[b]=E.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mg=="object"&&Mg];for(var b=0;b<p.length;++b){var E=p[b];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=n(this);function i(p,b){if(b)e:{var E=s;p=p.split(".");for(var P=0;P<p.length-1;P++){var Y=p[P];if(!(Y in E))break e;E=E[Y]}p=p[p.length-1],P=E[p],b=b(P),b!=P&&b!=null&&t(E,p,{configurable:!0,writable:!0,value:b})}}function r(p,b){p instanceof String&&(p+="");var E=0,P=!1,Y={next:function(){if(!P&&E<p.length){var se=E++;return{value:b(se,p[se]),done:!1}}return P=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}i("Array.prototype.values",function(p){return p||function(){return r(this,function(b,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function h(p){var b=typeof p;return b=b!="object"?b:p?Array.isArray(p)?"array":b:"null",b=="array"||b=="object"&&typeof p.length=="number"}function d(p){var b=typeof p;return b=="object"&&p!=null||b=="function"}function g(p,b,E){return p.call.apply(p.bind,arguments)}function m(p,b,E){if(!p)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,P),p.apply(b,Y)}}return function(){return p.apply(b,arguments)}}function v(p,b,E){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:m,v.apply(null,arguments)}function w(p,b){var E=Array.prototype.slice.call(arguments,1);return function(){var P=E.slice();return P.push.apply(P,arguments),p.apply(this,P)}}function S(p,b){function E(){}E.prototype=b.prototype,p.aa=b.prototype,p.prototype=new E,p.prototype.constructor=p,p.Qb=function(P,Y,se){for(var we=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)we[tt-2]=arguments[tt];return b.prototype[Y].apply(P,we)}}function T(p){const b=p.length;if(0<b){const E=Array(b);for(let P=0;P<b;P++)E[P]=p[P];return E}return[]}function A(p,b){for(let E=1;E<arguments.length;E++){const P=arguments[E];if(h(P)){const Y=p.length||0,se=P.length||0;p.length=Y+se;for(let we=0;we<se;we++)p[Y+we]=P[we]}else p.push(P)}}class O{constructor(b,E){this.i=b,this.j=E,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function V(p){return/^[\s\xa0]*$/.test(p)}function H(){var p=u.navigator;return p&&(p=p.userAgent)?p:""}function z(p){return z[" "](p),p}z[" "]=function(){};var U=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function K(p,b,E){for(const P in p)b.call(E,p[P],P,p)}function k(p,b){for(const E in p)b.call(void 0,p[E],E,p)}function D(p){const b={};for(const E in p)b[E]=p[E];return b}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(p,b){let E,P;for(let Y=1;Y<arguments.length;Y++){P=arguments[Y];for(E in P)p[E]=P[E];for(let se=0;se<x.length;se++)E=x[se],Object.prototype.hasOwnProperty.call(P,E)&&(p[E]=P[E])}}function M(p){var b=1;p=p.split(":");const E=[];for(;0<b&&p.length;)E.push(p.shift()),b--;return p.length&&E.push(p.join(":")),E}function B(p){u.setTimeout(()=>{throw p},0)}function F(){var p=Re;let b=null;return p.g&&(b=p.g,p.g=p.g.next,p.g||(p.h=null),b.next=null),b}class ye{constructor(){this.h=this.g=null}add(b,E){const P=ve.get();P.set(b,E),this.h?this.h.next=P:this.g=P,this.h=P}}var ve=new O(()=>new ie,p=>p.reset());class ie{constructor(){this.next=this.g=this.h=null}set(b,E){this.h=b,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,re=!1,Re=new ye,N=()=>{const p=u.Promise.resolve(void 0);Ce=()=>{p.then(W)}};var W=()=>{for(var p;p=F();){try{p.h.call(p.g)}catch(E){B(E)}var b=ve;b.j(p),100>b.h&&(b.h++,p.next=b.g,b.g=p)}re=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(p,b){this.type=p,this.g=this.target=b,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var ue=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,b=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const E=()=>{};u.addEventListener("test",E,b),u.removeEventListener("test",E,b)}catch{}return p}();function xe(p,b){if(oe.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var E=this.type=p.type,P=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=b,b=p.relatedTarget){if(U){e:{try{z(b.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(b=null)}}else E=="mouseover"?b=p.fromElement:E=="mouseout"&&(b=p.toElement);this.relatedTarget=b,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:Ae[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&xe.aa.h.call(this)}}S(xe,oe);var Ae={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var gt="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function St(p,b,E,P,Y){this.listener=p,this.proxy=null,this.src=b,this.type=E,this.capture=!!P,this.ha=Y,this.key=++Ue,this.da=this.fa=!1}function et(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function hn(p){this.src=p,this.g={},this.h=0}hn.prototype.add=function(p,b,E,P,Y){var se=p.toString();p=this.g[se],p||(p=this.g[se]=[],this.h++);var we=qe(p,b,P,Y);return-1<we?(b=p[we],E||(b.fa=!1)):(b=new St(b,this.src,se,!!P,Y),b.fa=E,p.push(b)),b};function os(p,b){var E=b.type;if(E in p.g){var P=p.g[E],Y=Array.prototype.indexOf.call(P,b,void 0),se;(se=0<=Y)&&Array.prototype.splice.call(P,Y,1),se&&(et(b),p.g[E].length==0&&(delete p.g[E],p.h--))}}function qe(p,b,E,P){for(var Y=0;Y<p.length;++Y){var se=p[Y];if(!se.da&&se.listener==b&&se.capture==!!E&&se.ha==P)return Y}return-1}var ft="closure_lm_"+(1e6*Math.random()|0),Dt={};function Ht(p,b,E,P,Y){if(Array.isArray(b)){for(var se=0;se<b.length;se++)Ht(p,b[se],E,P,Y);return null}return E=ea(E),p&&p[gt]?p.K(b,E,d(P)?!!P.capture:!1,Y):Ke(p,b,E,!1,P,Y)}function Ke(p,b,E,P,Y,se){if(!b)throw Error("Invalid event type");var we=d(Y)?!!Y.capture:!!Y,tt=zi(p);if(tt||(p[ft]=tt=new hn(p)),E=tt.add(b,E,P,we,se),E.proxy)return E;if(P=Et(),E.proxy=P,P.src=p,P.listener=E,p.addEventListener)ue||(Y=we),Y===void 0&&(Y=!1),p.addEventListener(b.toString(),P,Y);else if(p.attachEvent)p.attachEvent(_t(b.toString()),P);else if(p.addListener&&p.removeListener)p.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Et(){function p(E){return b.call(p.src,p.listener,E)}const b=ai;return p}function zt(p,b,E,P,Y){if(Array.isArray(b))for(var se=0;se<b.length;se++)zt(p,b[se],E,P,Y);else P=d(P)?!!P.capture:!!P,E=ea(E),p&&p[gt]?(p=p.i,b=String(b).toString(),b in p.g&&(se=p.g[b],E=qe(se,E,P,Y),-1<E&&(et(se[E]),Array.prototype.splice.call(se,E,1),se.length==0&&(delete p.g[b],p.h--)))):p&&(p=zi(p))&&(b=p.g[b.toString()],p=-1,b&&(p=qe(b,E,P,Y)),(E=-1<p?b[p]:null)&&Rt(E))}function Rt(p){if(typeof p!="number"&&p&&!p.da){var b=p.src;if(b&&b[gt])os(b.i,p);else{var E=p.type,P=p.proxy;b.removeEventListener?b.removeEventListener(E,P,p.capture):b.detachEvent?b.detachEvent(_t(E),P):b.addListener&&b.removeListener&&b.removeListener(P),(E=zi(b))?(os(E,p),E.h==0&&(E.src=null,b[ft]=null)):et(p)}}}function _t(p){return p in Dt?Dt[p]:Dt[p]="on"+p}function ai(p,b){if(p.da)p=!0;else{b=new xe(b,this);var E=p.listener,P=p.ha||p.src;p.fa&&Rt(p),p=E.call(P,b)}return p}function zi(p){return p=p[ft],p instanceof hn?p:null}var sn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ea(p){return typeof p=="function"?p:(p[sn]||(p[sn]=function(b){return p.handleEvent(b)}),p[sn])}function Yt(){ee.call(this),this.i=new hn(this),this.M=this,this.F=null}S(Yt,ee),Yt.prototype[gt]=!0,Yt.prototype.removeEventListener=function(p,b,E,P){zt(this,p,b,E,P)};function Qt(p,b){var E,P=p.F;if(P)for(E=[];P;P=P.F)E.push(P);if(p=p.M,P=b.type||b,typeof b=="string")b=new oe(b,p);else if(b instanceof oe)b.target=b.target||p;else{var Y=b;b=new oe(P,p),L(b,Y)}if(Y=!0,E)for(var se=E.length-1;0<=se;se--){var we=b.g=E[se];Y=rt(we,P,!0,b)&&Y}if(we=b.g=p,Y=rt(we,P,!0,b)&&Y,Y=rt(we,P,!1,b)&&Y,E)for(se=0;se<E.length;se++)we=b.g=E[se],Y=rt(we,P,!1,b)&&Y}Yt.prototype.N=function(){if(Yt.aa.N.call(this),this.i){var p=this.i,b;for(b in p.g){for(var E=p.g[b],P=0;P<E.length;P++)et(E[P]);delete p.g[b],p.h--}}this.F=null},Yt.prototype.K=function(p,b,E,P){return this.i.add(String(p),b,!1,E,P)},Yt.prototype.L=function(p,b,E,P){return this.i.add(String(p),b,!0,E,P)};function rt(p,b,E,P){if(b=p.i.g[String(b)],!b)return!0;b=b.concat();for(var Y=!0,se=0;se<b.length;++se){var we=b[se];if(we&&!we.da&&we.capture==E){var tt=we.listener,fn=we.ha||we.src;we.fa&&os(p.i,we),Y=tt.call(fn,P)!==!1&&Y}}return Y&&!P.defaultPrevented}function yn(p,b,E){if(typeof p=="function")E&&(p=v(p,E));else if(p&&typeof p.handleEvent=="function")p=v(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:u.setTimeout(p,b||0)}function ta(p){p.g=yn(()=>{p.g=null,p.i&&(p.i=!1,ta(p))},p.l);const b=p.h;p.h=null,p.m.apply(null,b)}class Gm extends ee{constructor(b,E){super(),this.m=b,this.l=E,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:ta(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function na(p){ee.call(this),this.h=p,this.g={}}S(na,ee);var Lr=[];function Nn(p){K(p.g,function(b,E){this.g.hasOwnProperty(E)&&Rt(b)},p),p.g={}}na.prototype.N=function(){na.aa.N.call(this),Nn(this)},na.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dc=u.JSON.stringify,li=u.JSON.parse,Kn=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function _c(){}_c.prototype.h=null;function Zd(p){return p.h||(p.h=p.i())}function Jd(){}var ui={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Or(){oe.call(this,"d")}S(Or,oe);function Ks(){oe.call(this,"c")}S(Ks,oe);var Rs={},kr=null;function Tl(){return kr=kr||new Yt}Rs.La="serverreachability";function Ic(p){oe.call(this,Rs.La,p)}S(Ic,oe);function Nr(p){const b=Tl();Qt(b,new Ic(b))}Rs.STAT_EVENT="statevent";function Al(p,b){oe.call(this,Rs.STAT_EVENT,p),this.stat=b}S(Al,oe);function Xt(p){const b=Tl();Qt(b,new Al(b,p))}Rs.Ma="timingevent";function ef(p,b){oe.call(this,Rs.Ma,p),this.size=b}S(ef,oe);function Vr(p,b){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},b)}function Br(){this.g=!0}Br.prototype.xa=function(){this.g=!1};function tf(p,b,E,P,Y,se){p.info(function(){if(p.g)if(se)for(var we="",tt=se.split("&"),fn=0;fn<tt.length;fn++){var nt=tt[fn].split("=");if(1<nt.length){var Sn=nt[0];nt=nt[1];var gn=Sn.split("_");we=2<=gn.length&&gn[1]=="type"?we+(Sn+"="+nt+"&"):we+(Sn+"=redacted&")}}else we=null;else we=se;return"XMLHTTP REQ ("+P+") [attempt "+Y+"]: "+b+`
`+E+`
`+we})}function nf(p,b,E,P,Y,se,we){p.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+Y+"]: "+b+`
`+E+`
`+se+" "+we})}function Gr(p,b,E,P){p.info(function(){return"XMLHTTP TEXT ("+b+"): "+wn(p,E)+(P?" "+P:"")})}function ci(p,b){p.info(function(){return"TIMEOUT: "+b})}Br.prototype.info=function(){};function wn(p,b){if(!p.g)return b;if(!b)return null;try{var E=JSON.parse(b);if(E){for(p=0;p<E.length;p++)if(Array.isArray(E[p])){var P=E[p];if(!(2>P.length)){var Y=P[1];if(Array.isArray(Y)&&!(1>Y.length)){var se=Y[0];if(se!="noop"&&se!="stop"&&se!="close")for(var we=1;we<Y.length;we++)Y[we]=""}}}}return Dc(E)}catch{return b}}var dn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ui={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},sa;function xl(){}S(xl,_c),xl.prototype.g=function(){return new XMLHttpRequest},xl.prototype.i=function(){return{}},sa=new xl;function hi(p,b,E,P){this.j=p,this.i=b,this.l=E,this.R=P||1,this.U=new na(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mc}function Mc(){this.i=null,this.g="",this.h=!1}var Hr={},ia={};function Ys(p,b,E){p.L=1,p.v=aa(Ut(b)),p.m=E,p.P=!0,Wi(p,null)}function Wi(p,b){p.F=Date.now(),Ot(p),p.A=Ut(p.v);var E=p.A,P=p.R;Array.isArray(P)||(P=[String(P)]),$i(E.i,"t",P),p.C=0,E=p.j.J,p.h=new Mc,p.g=Cf(p.j,E?b:null,!p.m),0<p.O&&(p.M=new Gm(v(p.Y,p,p.g),p.O)),b=p.U,E=p.g,P=p.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(Lr[0]=Y.toString()),Y=Lr);for(var se=0;se<Y.length;se++){var we=Ht(E,Y[se],P||b.handleEvent,!1,b.h||b);if(!we)break;b.g[we.key]=we}b=p.H?D(p.H):{},p.m?(p.u||(p.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,b)):(p.u="GET",p.g.ea(p.A,p.u,null,b)),Nr(),tf(p.i,p.u,p.A,p.l,p.R,p.m)}hi.prototype.ca=function(p){p=p.target;const b=this.M;b&&_s(p)==3?b.j():this.Y(p)},hi.prototype.Y=function(p){try{if(p==this.g)e:{const gn=_s(this.g);var b=this.g.Ba();const Xi=this.g.Z();if(!(3>gn)&&(gn!=3||this.g&&(this.h.h||this.g.oa()||uf(this.g)))){this.J||gn!=4||b==7||(b==8||0>=Xi?Nr(3):Nr(2)),Dl(this);var E=this.g.Z();this.X=E;t:if(zr(this)){var P=uf(this.g);p="";var Y=P.length,se=_s(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){as(this),gs(this);var we="";break t}this.h.i=new u.TextDecoder}for(b=0;b<Y;b++)this.h.h=!0,p+=this.h.i.decode(P[b],{stream:!(se&&b==Y-1)});P.length=0,this.h.g+=p,this.C=0,we=this.h.g}else we=this.g.oa();if(this.o=E==200,nf(this.i,this.u,this.A,this.l,this.R,gn,E),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,fn=this.g;if((tt=fn.g?fn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(tt)){var nt=tt;break t}}nt=null}if(E=nt)Gr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ps(this,E);else{this.o=!1,this.s=3,Xt(12),as(this),gs(this);break e}}if(this.P){E=!0;let _n;for(;!this.J&&this.C<we.length;)if(_n=Ur(this,we),_n==ia){gn==4&&(this.s=4,Xt(14),E=!1),Gr(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==Hr){this.s=4,Xt(15),Gr(this.i,this.l,we,"[Invalid Chunk]"),E=!1;break}else Gr(this.i,this.l,_n,null),ps(this,_n);if(zr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gn!=4||we.length!=0||this.h.h||(this.s=1,Xt(16),E=!1),this.o=this.o&&E,!E)Gr(this.i,this.l,we,"[Invalid Chunked Response]"),as(this),gs(this);else if(0<we.length&&!this.W){this.W=!0;var Sn=this.j;Sn.g==this&&Sn.ba&&!Sn.M&&(Sn.j.info("Great, no buffering proxy detected. Bytes received: "+we.length),ga(Sn),Sn.M=!0,Xt(11))}}else Gr(this.i,this.l,we,null),ps(this,we);gn==4&&as(this),this.o&&!this.J&&(gn==4?gf(this.j,this):(this.o=!1,Ot(this)))}else qm(this.g),E==400&&0<we.indexOf("Unknown SID")?(this.s=3,Xt(12)):(this.s=0,Xt(13)),as(this),gs(this)}}}catch{}finally{}};function zr(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function Ur(p,b){var E=p.C,P=b.indexOf(`
`,E);return P==-1?ia:(E=Number(b.substring(E,P)),isNaN(E)?Hr:(P+=1,P+E>b.length?ia:(b=b.slice(P,P+E),p.C=P+E,b)))}hi.prototype.cancel=function(){this.J=!0,as(this)};function Ot(p){p.S=Date.now()+p.I,Fc(p,p.I)}function Fc(p,b){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Vr(v(p.ba,p),b)}function Dl(p){p.B&&(u.clearTimeout(p.B),p.B=null)}hi.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(ci(this.i,this.A),this.L!=2&&(Nr(),Xt(17)),as(this),this.s=2,gs(this)):Fc(this,this.S-p)};function gs(p){p.j.G==0||p.J||gf(p.j,p)}function as(p){Dl(p);var b=p.M;b&&typeof b.ma=="function"&&b.ma(),p.M=null,Nn(p.U),p.g&&(b=p.g,p.g=null,b.abort(),b.ma())}function ps(p,b){try{var E=p.j;if(E.G!=0&&(E.g==p||Wr(E.h,p))){if(!p.K&&Wr(E.h,p)&&E.G==3){try{var P=E.Da.g.parse(b)}catch{P=null}if(Array.isArray(P)&&P.length==3){var Y=P;if(Y[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<p.F)Vl(E),kl(E);else break e;Uc(E),Xt(18)}}else E.za=Y[1],0<E.za-E.T&&37500>Y[2]&&E.F&&E.v==0&&!E.C&&(E.C=Vr(v(E.Za,E),6e3));if(1>=sf(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Qi(E,11)}else if((p.K||E.g==p)&&Vl(E),!V(b))for(Y=E.Da.g.parse(b),b=0;b<Y.length;b++){let nt=Y[b];if(E.T=nt[0],nt=nt[1],E.G==2)if(nt[0]=="c"){E.K=nt[1],E.ia=nt[2];const Sn=nt[3];Sn!=null&&(E.la=Sn,E.j.info("VER="+E.la));const gn=nt[4];gn!=null&&(E.Aa=gn,E.j.info("SVER="+E.Aa));const Xi=nt[5];Xi!=null&&typeof Xi=="number"&&0<Xi&&(P=1.5*Xi,E.L=P,E.j.info("backChannelRequestTimeoutMs_="+P)),P=E;const _n=p.g;if(_n){const vi=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vi){var se=P.h;se.g||vi.indexOf("spdy")==-1&&vi.indexOf("quic")==-1&&vi.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(jr(se,se.h),se.h=null))}if(P.D){const jc=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;jc&&(P.ya=jc,lt(P.I,P.D,jc))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-p.F,E.j.info("Handshake RTT: "+E.R+"ms")),P=E;var we=p;if(P.qa=mf(P,P.J?P.ia:null,P.W),we.K){Ts(P.h,we);var tt=we,fn=P.L;fn&&(tt.I=fn),tt.B&&(Dl(tt),Ot(tt)),P.g=we}else df(P);0<E.i.length&&Nl(E)}else nt[0]!="stop"&&nt[0]!="close"||Qi(E,7);else E.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?Qi(E,7):Hc(E):nt[0]!="noop"&&E.l&&E.l.ta(nt),E.v=0)}}Nr(4)}catch{}}var Hm=class{constructor(p,b){this.g=p,this.map=b}};function Pc(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Lc(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function sf(p){return p.h?1:p.g?p.g.size:0}function Wr(p,b){return p.h?p.h==b:p.g?p.g.has(b):!1}function jr(p,b){p.g?p.g.add(b):p.h=b}function Ts(p,b){p.h&&p.h==b?p.h=null:p.g&&p.g.has(b)&&p.g.delete(b)}Pc.prototype.cancel=function(){if(this.i=Yn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Yn(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let b=p.i;for(const E of p.g.values())b=b.concat(E.D);return b}return T(p.i)}function rf(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(h(p)){for(var b=[],E=p.length,P=0;P<E;P++)b.push(p[P]);return b}b=[],E=0;for(P in p)b[E++]=p[P];return b}function zm(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(h(p)||typeof p=="string"){var b=[];p=p.length;for(var E=0;E<p;E++)b.push(E);return b}b=[],E=0;for(const P in p)b[E++]=P;return b}}}function ra(p,b){if(p.forEach&&typeof p.forEach=="function")p.forEach(b,void 0);else if(h(p)||typeof p=="string")Array.prototype.forEach.call(p,b,void 0);else for(var E=zm(p),P=rf(p),Y=P.length,se=0;se<Y;se++)b.call(void 0,P[se],E&&E[se],p)}var Oc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _l(p,b){if(p){p=p.split("&");for(var E=0;E<p.length;E++){var P=p[E].indexOf("="),Y=null;if(0<=P){var se=p[E].substring(0,P);Y=p[E].substring(P+1)}else se=p[E];b(se,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function ji(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof ji){this.h=p.h,qr(this,p.j),this.o=p.o,this.g=p.g,oa(this,p.s),this.l=p.l;var b=p.i,E=new di;E.i=b.i,b.g&&(E.g=new Map(b.g),E.h=b.h),Il(this,E),this.m=p.m}else p&&(b=String(p).match(Oc))?(this.h=!1,qr(this,b[1]||"",!0),this.o=$r(b[2]||""),this.g=$r(b[3]||"",!0),oa(this,b[4]),this.l=$r(b[5]||"",!0),Il(this,b[6]||"",!0),this.m=$r(b[7]||"")):(this.h=!1,this.i=new di(null,this.h))}ji.prototype.toString=function(){var p=[],b=this.j;b&&p.push(As(b,kc,!0),":");var E=this.g;return(E||b=="file")&&(p.push("//"),(b=this.o)&&p.push(As(b,kc,!0),"@"),p.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&p.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&p.push("/"),p.push(As(E,E.charAt(0)=="/"?Nc:of,!0))),(E=this.i.toString())&&p.push("?",E),(E=this.m)&&p.push("#",As(E,jm)),p.join("")};function Ut(p){return new ji(p)}function qr(p,b,E){p.j=E?$r(b,!0):b,p.j&&(p.j=p.j.replace(/:$/,""))}function oa(p,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);p.s=b}else p.s=null}function Il(p,b,E){b instanceof di?(p.i=b,Vc(p.i,p.h)):(E||(b=As(b,Wm)),p.i=new di(b,p.h))}function lt(p,b,E){p.i.set(b,E)}function aa(p){return lt(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function $r(p,b){return p?b?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function As(p,b,E){return typeof p=="string"?(p=encodeURI(p).replace(b,Um),E&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Um(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var kc=/[#\/\?@]/g,of=/[#\?:]/g,Nc=/[#\?]/g,Wm=/[#\?@]/g,jm=/#/g;function di(p,b){this.h=this.g=null,this.i=p||null,this.j=!!b}function xs(p){p.g||(p.g=new Map,p.h=0,p.i&&_l(p.i,function(b,E){p.add(decodeURIComponent(b.replace(/\+/g," ")),E)}))}e=di.prototype,e.add=function(p,b){xs(this),this.i=null,p=Ki(this,p);var E=this.g.get(p);return E||this.g.set(p,E=[]),E.push(b),this.h+=1,this};function Ml(p,b){xs(p),b=Ki(p,b),p.g.has(b)&&(p.i=null,p.h-=p.g.get(b).length,p.g.delete(b))}function qi(p,b){return xs(p),b=Ki(p,b),p.g.has(b)}e.forEach=function(p,b){xs(this),this.g.forEach(function(E,P){E.forEach(function(Y){p.call(b,Y,P,this)},this)},this)},e.na=function(){xs(this);const p=Array.from(this.g.values()),b=Array.from(this.g.keys()),E=[];for(let P=0;P<b.length;P++){const Y=p[P];for(let se=0;se<Y.length;se++)E.push(b[P])}return E},e.V=function(p){xs(this);let b=[];if(typeof p=="string")qi(this,p)&&(b=b.concat(this.g.get(Ki(this,p))));else{p=Array.from(this.g.values());for(let E=0;E<p.length;E++)b=b.concat(p[E])}return b},e.set=function(p,b){return xs(this),this.i=null,p=Ki(this,p),qi(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[b]),this.h+=1,this},e.get=function(p,b){return p?(p=this.V(p),0<p.length?String(p[0]):b):b};function $i(p,b,E){Ml(p,b),0<E.length&&(p.i=null,p.g.set(Ki(p,b),T(E)),p.h+=E.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],b=Array.from(this.g.keys());for(var E=0;E<b.length;E++){var P=b[E];const se=encodeURIComponent(String(P)),we=this.V(P);for(P=0;P<we.length;P++){var Y=se;we[P]!==""&&(Y+="="+encodeURIComponent(String(we[P]))),p.push(Y)}}return this.i=p.join("&")};function Ki(p,b){return b=String(b),p.j&&(b=b.toLowerCase()),b}function Vc(p,b){b&&!p.j&&(xs(p),p.i=null,p.g.forEach(function(E,P){var Y=P.toLowerCase();P!=Y&&(Ml(this,P),$i(this,Y,E))},p)),p.j=b}function af(p,b){const E=new Br;if(u.Image){const P=new Image;P.onload=w(Ds,E,"TestLoadImage: loaded",!0,b,P),P.onerror=w(Ds,E,"TestLoadImage: error",!1,b,P),P.onabort=w(Ds,E,"TestLoadImage: abort",!1,b,P),P.ontimeout=w(Ds,E,"TestLoadImage: timeout",!1,b,P),u.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=p}else b(!1)}function la(p,b){const E=new Br,P=new AbortController,Y=setTimeout(()=>{P.abort(),Ds(E,"TestPingServer: timeout",!1,b)},1e4);fetch(p,{signal:P.signal}).then(se=>{clearTimeout(Y),se.ok?Ds(E,"TestPingServer: ok",!0,b):Ds(E,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(Y),Ds(E,"TestPingServer: error",!1,b)})}function Ds(p,b,E,P,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),P(E)}catch{}}function ua(){this.g=new Kn}function fi(p,b,E){const P=E||"";try{ra(p,function(Y,se){let we=Y;d(Y)&&(we=Dc(Y)),b.push(P+se+"="+encodeURIComponent(we))})}catch(Y){throw b.push(P+"type="+encodeURIComponent("_badmap")),Y}}function Kr(p){this.l=p.Ub||null,this.j=p.eb||!1}S(Kr,_c),Kr.prototype.g=function(){return new Yi(this.l,this.j)},Kr.prototype.i=function(p){return function(){return p}}({});function Yi(p,b){Yt.call(this),this.D=p,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Yi,Yt),e=Yi.prototype,e.open=function(p,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=b,this.readyState=1,pi(this)},e.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(b.body=p),(this.D||u).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gi(this)),this.readyState=0},e.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,pi(this)),this.g&&(this.readyState=3,pi(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bc(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bc(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}e.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var b=p.value?p.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!p.done}))&&(this.response=this.responseText+=b)}p.done?gi(this):pi(this),this.readyState==3&&Bc(this)}},e.Ra=function(p){this.g&&(this.response=this.responseText=p,gi(this))},e.Qa=function(p){this.g&&(this.response=p,gi(this))},e.ga=function(){this.g&&gi(this)};function gi(p){p.readyState=4,p.l=null,p.j=null,p.v=null,pi(p)}e.setRequestHeader=function(p,b){this.u.append(p,b)},e.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],b=this.h.entries();for(var E=b.next();!E.done;)E=E.value,p.push(E[0]+": "+E[1]),E=b.next();return p.join(`\r
`)};function pi(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Yi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Gc(p){let b="";return K(p,function(E,P){b+=P,b+=":",b+=E,b+=`\r
`}),b}function bn(p,b,E){e:{for(P in E){var P=!1;break e}P=!0}P||(E=Gc(E),typeof p=="string"?E!=null&&encodeURIComponent(String(E)):lt(p,b,E))}function pt(p){Yt.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(pt,Yt);var Fl=/^https?$/i,ca=["POST","PUT"];e=pt.prototype,e.Ha=function(p){this.J=p},e.ea=function(p,b,E,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);b=b?b.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sa.g(),this.v=this.o?Zd(this.o):Zd(sa),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(b,String(p),!0),this.B=!1}catch(se){lf(this,se);return}if(p=E||"",E=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var Y in P)E.set(Y,P[Y]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const se of P.keys())E.set(se,P.get(se));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(E.keys()).find(se=>se.toLowerCase()=="content-type"),Y=u.FormData&&p instanceof u.FormData,!(0<=Array.prototype.indexOf.call(ca,b,void 0))||P||Y||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,we]of E)this.g.setRequestHeader(se,we);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ha(this),this.u=!0,this.g.send(p),this.u=!1}catch(se){lf(this,se)}};function lf(p,b){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=b,p.m=5,Pl(p),mi(p)}function Pl(p){p.A||(p.A=!0,Qt(p,"complete"),Qt(p,"error"))}e.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Qt(this,"complete"),Qt(this,"abort"),mi(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mi(this,!0)),pt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ll(this):this.bb())},e.bb=function(){Ll(this)};function Ll(p){if(p.h&&typeof a<"u"&&(!p.v[1]||_s(p)!=4||p.Z()!=2)){if(p.u&&_s(p)==4)yn(p.Ea,0,p);else if(Qt(p,"readystatechange"),_s(p)==4){p.h=!1;try{const we=p.Z();e:switch(we){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var E;if(!(E=b)){var P;if(P=we===0){var Y=String(p.D).match(Oc)[1]||null;!Y&&u.self&&u.self.location&&(Y=u.self.location.protocol.slice(0,-1)),P=!Fl.test(Y?Y.toLowerCase():"")}E=P}if(E)Qt(p,"complete"),Qt(p,"success");else{p.m=6;try{var se=2<_s(p)?p.g.statusText:""}catch{se=""}p.l=se+" ["+p.Z()+"]",Pl(p)}}finally{mi(p)}}}}function mi(p,b){if(p.g){ha(p);const E=p.g,P=p.v[0]?()=>{}:null;p.g=null,p.v=null,b||Qt(p,"ready");try{E.onreadystatechange=P}catch{}}}function ha(p){p.I&&(u.clearTimeout(p.I),p.I=null)}e.isActive=function(){return!!this.g};function _s(p){return p.g?p.g.readyState:0}e.Z=function(){try{return 2<_s(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(p){if(this.g){var b=this.g.responseText;return p&&b.indexOf(p)==0&&(b=b.substring(p.length)),li(b)}};function uf(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function qm(p){const b={};p=(p.g&&2<=_s(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<p.length;P++){if(V(p[P]))continue;var E=M(p[P]);const Y=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const se=b[Y]||[];b[Y]=se,se.push(E)}k(b,function(P){return P.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function da(p,b,E){return E&&E.internalChannelParams&&E.internalChannelParams[p]||b}function Ol(p){this.Aa=0,this.i=[],this.j=new Br,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=da("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=da("baseRetryDelayMs",5e3,p),this.cb=da("retryDelaySeedMs",1e4,p),this.Wa=da("forwardChannelMaxRetries",2,p),this.wa=da("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Pc(p&&p.concurrentRequestLimit),this.Da=new ua,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Ol.prototype,e.la=8,e.G=1,e.connect=function(p,b,E,P){Xt(0),this.W=p,this.H=b||{},E&&P!==void 0&&(this.H.OSID=E,this.H.OAID=P),this.F=this.X,this.I=mf(this,null,this.W),Nl(this)};function Hc(p){if(cf(p),p.G==3){var b=p.U++,E=Ut(p.I);if(lt(E,"SID",p.K),lt(E,"RID",b),lt(E,"TYPE","terminate"),fa(p,E),b=new hi(p,p.j,b),b.L=2,b.v=aa(Ut(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(b.v.toString(),"")}catch{}!E&&u.Image&&(new Image().src=b.v,E=!0),E||(b.g=Cf(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Ot(b)}pf(p)}function kl(p){p.g&&(ga(p),p.g.cancel(),p.g=null)}function cf(p){kl(p),p.u&&(u.clearTimeout(p.u),p.u=null),Vl(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&u.clearTimeout(p.s),p.s=null)}function Nl(p){if(!Lc(p.h)&&!p.s){p.s=!0;var b=p.Ga;Ce||N(),re||(Ce(),re=!0),Re.add(b,p),p.B=0}}function $m(p,b){return sf(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=b.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Vr(v(p.Ga,p,b),Wc(p,p.B)),p.B++,!0)}e.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const Y=new hi(this,this.j,p);let se=this.o;if(this.S&&(se?(se=D(se),L(se,this.S)):se=this.S),this.m!==null||this.O||(Y.H=se,se=null),this.P)e:{for(var b=0,E=0;E<this.i.length;E++){t:{var P=this.i[E];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(b+=P,4096<b){b=E;break e}if(b===4096||E===this.i.length-1){b=E+1;break e}}b=1e3}else b=1e3;b=hf(this,Y,b),E=Ut(this.I),lt(E,"RID",p),lt(E,"CVER",22),this.D&&lt(E,"X-HTTP-Session-Id",this.D),fa(this,E),se&&(this.O?b="headers="+encodeURIComponent(String(Gc(se)))+"&"+b:this.m&&bn(E,this.m,se)),jr(this.h,Y),this.Ua&&lt(E,"TYPE","init"),this.P?(lt(E,"$req",b),lt(E,"SID","null"),Y.T=!0,Ys(Y,E,null)):Ys(Y,E,b),this.G=2}}else this.G==3&&(p?zc(this,p):this.i.length==0||Lc(this.h)||zc(this))};function zc(p,b){var E;b?E=b.l:E=p.U++;const P=Ut(p.I);lt(P,"SID",p.K),lt(P,"RID",E),lt(P,"AID",p.T),fa(p,P),p.m&&p.o&&bn(P,p.m,p.o),E=new hi(p,p.j,E,p.B+1),p.m===null&&(E.H=p.o),b&&(p.i=b.D.concat(p.i)),b=hf(p,E,1e3),E.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),jr(p.h,E),Ys(E,P,b)}function fa(p,b){p.H&&K(p.H,function(E,P){lt(b,P,E)}),p.l&&ra({},function(E,P){lt(b,P,E)})}function hf(p,b,E){E=Math.min(p.i.length,E);var P=p.l?v(p.l.Na,p.l,p):null;e:{var Y=p.i;let se=-1;for(;;){const we=["count="+E];se==-1?0<E?(se=Y[0].g,we.push("ofs="+se)):se=0:we.push("ofs="+se);let tt=!0;for(let fn=0;fn<E;fn++){let nt=Y[fn].g;const Sn=Y[fn].map;if(nt-=se,0>nt)se=Math.max(0,Y[fn].g-100),tt=!1;else try{fi(Sn,we,"req"+nt+"_")}catch{P&&P(Sn)}}if(tt){P=we.join("&");break e}}}return p=p.i.splice(0,E),b.D=p,P}function df(p){if(!p.g&&!p.u){p.Y=1;var b=p.Fa;Ce||N(),re||(Ce(),re=!0),Re.add(b,p),p.v=0}}function Uc(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Vr(v(p.Fa,p),Wc(p,p.v)),p.v++,!0)}e.Fa=function(){if(this.u=null,ff(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Vr(v(this.ab,this),p)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xt(10),kl(this),ff(this))};function ga(p){p.A!=null&&(u.clearTimeout(p.A),p.A=null)}function ff(p){p.g=new hi(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var b=Ut(p.qa);lt(b,"RID","rpc"),lt(b,"SID",p.K),lt(b,"AID",p.T),lt(b,"CI",p.F?"0":"1"),!p.F&&p.ja&&lt(b,"TO",p.ja),lt(b,"TYPE","xmlhttp"),fa(p,b),p.m&&p.o&&bn(b,p.m,p.o),p.L&&(p.g.I=p.L);var E=p.g;p=p.ia,E.L=1,E.v=aa(Ut(b)),E.m=null,E.P=!0,Wi(E,p)}e.Za=function(){this.C!=null&&(this.C=null,kl(this),Uc(this),Xt(19))};function Vl(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function gf(p,b){var E=null;if(p.g==b){Vl(p),ga(p),p.g=null;var P=2}else if(Wr(p.h,b))E=b.D,Ts(p.h,b),P=1;else return;if(p.G!=0){if(b.o)if(P==1){E=b.m?b.m.length:0,b=Date.now()-b.F;var Y=p.B;P=Tl(),Qt(P,new ef(P,E)),Nl(p)}else df(p);else if(Y=b.s,Y==3||Y==0&&0<b.X||!(P==1&&$m(p,b)||P==2&&Uc(p)))switch(E&&0<E.length&&(b=p.h,b.i=b.i.concat(E)),Y){case 1:Qi(p,5);break;case 4:Qi(p,10);break;case 3:Qi(p,6);break;default:Qi(p,2)}}}function Wc(p,b){let E=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(E*=2),E*b}function Qi(p,b){if(p.j.info("Error code "+b),b==2){var E=v(p.fb,p),P=p.Xa;const Y=!P;P=new ji(P||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||qr(P,"https"),aa(P),Y?af(P.toString(),E):la(P.toString(),E)}else Xt(2);p.G=0,p.l&&p.l.sa(b),pf(p),cf(p)}e.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function pf(p){if(p.G=0,p.ka=[],p.l){const b=Yn(p.h);(b.length!=0||p.i.length!=0)&&(A(p.ka,b),A(p.ka,p.i),p.h.i.length=0,T(p.i),p.i.length=0),p.l.ra()}}function mf(p,b,E){var P=E instanceof ji?Ut(E):new ji(E);if(P.g!="")b&&(P.g=b+"."+P.g),oa(P,P.s);else{var Y=u.location;P=Y.protocol,b=b?b+"."+Y.hostname:Y.hostname,Y=+Y.port;var se=new ji(null);P&&qr(se,P),b&&(se.g=b),Y&&oa(se,Y),E&&(se.l=E),P=se}return E=p.D,b=p.ya,E&&b&&lt(P,E,b),lt(P,"VER",p.la),fa(p,P),P}function Cf(p,b,E){if(b&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=p.Ca&&!p.pa?new pt(new Kr({eb:E})):new pt(p.pa),b.Ha(p.J),b}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function vf(){}e=vf.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Bl(){}Bl.prototype.g=function(p,b){return new Qn(p,b)};function Qn(p,b){Yt.call(this),this.g=new Ol(b),this.l=p,this.h=b&&b.messageUrlParams||null,p=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(p?p["X-WebChannel-Content-Type"]=b.messageContentType:p={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(p?p["X-WebChannel-Client-Profile"]=b.va:p={"X-WebChannel-Client-Profile":b.va}),this.g.S=p,(p=b&&b.Sb)&&!V(p)&&(this.g.m=p),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!V(b)&&(this.g.D=b,p=this.h,p!==null&&b in p&&(p=this.h,b in p&&delete p[b])),this.j=new Ci(this)}S(Qn,Yt),Qn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qn.prototype.close=function(){Hc(this.g)},Qn.prototype.o=function(p){var b=this.g;if(typeof p=="string"){var E={};E.__data__=p,p=E}else this.u&&(E={},E.__data__=Dc(p),p=E);b.i.push(new Hm(b.Ya++,p)),b.G==3&&Nl(b)},Qn.prototype.N=function(){this.g.l=null,delete this.j,Hc(this.g),delete this.g,Qn.aa.N.call(this)};function yf(p){Or.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var b=p.__sm__;if(b){e:{for(const E in b){p=E;break e}p=void 0}(this.i=p)&&(p=this.i,b=b!==null&&p in b?b[p]:void 0),this.data=b}else this.data=p}S(yf,Or);function wf(){Ks.call(this),this.status=1}S(wf,Ks);function Ci(p){this.g=p}S(Ci,vf),Ci.prototype.ua=function(){Qt(this.g,"a")},Ci.prototype.ta=function(p){Qt(this.g,new yf(p))},Ci.prototype.sa=function(p){Qt(this.g,new wf)},Ci.prototype.ra=function(){Qt(this.g,"b")},Bl.prototype.createWebChannel=Bl.prototype.g,Qn.prototype.send=Qn.prototype.o,Qn.prototype.open=Qn.prototype.m,Qn.prototype.close=Qn.prototype.close,mM=function(){return new Bl},pM=function(){return Tl()},gM=Rs,lw={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dn.NO_ERROR=0,dn.TIMEOUT=8,dn.HTTP_ERROR=6,Yg=dn,Ui.COMPLETE="complete",fM=Ui,Jd.EventType=ui,ui.OPEN="a",ui.CLOSE="b",ui.ERROR="c",ui.MESSAGE="d",Yt.prototype.listen=Yt.prototype.K,Gh=Jd,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,dM=pt}).apply(typeof Mg<"u"?Mg:typeof self<"u"?self:typeof window<"u"?window:{});const pA="@firebase/firestore",mA="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}xn.UNAUTHENTICATED=new xn(null),xn.GOOGLE_CREDENTIALS=new xn("google-credentials-uid"),xn.FIRST_PARTY=new xn("first-party-uid"),xn.MOCK_USER=new xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wc="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=new Cb("@firebase/firestore");function Su(){return Go.logLevel}function Pj(e){Go.setLogLevel(e)}function ge(e,...t){if(Go.logLevel<=Ze.DEBUG){const n=t.map(Eb);Go.debug(`Firestore (${wc}): ${e}`,...n)}}function en(e,...t){if(Go.logLevel<=Ze.ERROR){const n=t.map(Eb);Go.error(`Firestore (${wc}): ${e}`,...n)}}function Vi(e,...t){if(Go.logLevel<=Ze.WARN){const n=t.map(Eb);Go.warn(`Firestore (${wc}): ${e}`,...n)}}function Eb(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(e="Unexpected state"){const t=`FIRESTORE (${wc}) INTERNAL ASSERTION FAILED: `+e;throw en(t),new Error(t)}function _e(e,t){e||Te()}function Lj(e,t){e||Te()}function Ee(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends wl{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Oj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(xn.UNAUTHENTICATED))}shutdown(){}}class kj{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Nj{constructor(t){this.t=t,this.currentUser=xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){_e(this.o===void 0);let s=this.i;const i=h=>this.i!==s?(s=this.i,n(h)):Promise.resolve();let r=new kn;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new kn,t.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const h=r;t.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},u=h=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new kn)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(_e(typeof s.accessToken=="string"),new CM(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return _e(t===null||typeof t=="string"),new xn(t)}}class Vj{constructor(t,n,s){this.l=t,this.h=n,this.P=s,this.type="FirstParty",this.user=xn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Bj{constructor(t,n,s){this.l=t,this.h=n,this.P=s}getToken(){return Promise.resolve(new Vj(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(xn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CA{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gj{constructor(t,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,iM(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,n){_e(this.o===void 0);const s=r=>{r.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.R;return this.R=r.token,ge("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>s(r))};const i=r=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?i(r):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new CA(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(_e(typeof n.token=="string"),this.R=n.token,new CA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=Hj(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=t.charAt(i[r]%62))}return s}}function Ve(e,t){return e<t?-1:e>t?1:0}function $u(e,t,n){return e.length===t.length&&e.every((s,i)=>n(s,t[i]))}function yM(e){return e+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA=-62135596800,yA=1e6;class Lt{static now(){return Lt.fromMillis(Date.now())}static fromDate(t){return Lt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*yA);return new Lt(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new de(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<vA)throw new de(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new de(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yA}_compareTo(t){return this.seconds===t.seconds?Ve(this.nanoseconds,t.nanoseconds):Ve(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-vA;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(t){return new Fe(t)}static min(){return new Fe(new Lt(0,0))}static max(){return new Fe(new Lt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="__name__";class Ai{constructor(t,n,s){n===void 0?n=0:n>t.length&&Te(),s===void 0?s=t.length-n:s>t.length-n&&Te(),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return Ai.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Ai?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let i=0;i<s;i++){const r=Ai.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return Math.sign(t.length-n.length)}static compareSegments(t,n){const s=Ai.isNumericId(t),i=Ai.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?Ai.extractNumericId(t).compare(Ai.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Po.fromString(t.substring(4,t.length-2))}}class Ye extends Ai{construct(t,n,s){return new Ye(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new de(ne.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new Ye(n)}static emptyPath(){return new Ye([])}}const zj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends Ai{construct(t,n,s){return new Ft(t,n,s)}static isValidIdentifier(t){return zj.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wA}static keyField(){return new Ft([wA])}static fromServerFormat(t){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new de(ne.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let a=!1;for(;i<t.length;){const u=t[i];if(u==="\\"){if(i+1===t.length)throw new de(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const h=t[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new de(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=h,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(s+=u,i++):(r(),i++)}if(r(),a)throw new de(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ft(n)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(t){this.path=t}static fromPath(t){return new Se(Ye.fromString(t))}static fromName(t){return new Se(Ye.fromString(t).popFirst(5))}static empty(){return new Se(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ye.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ye.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Se(new Ye(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku=-1;class Pp{constructor(t,n,s,i){this.indexId=t,this.collectionGroup=n,this.fields=s,this.indexState=i}}function uw(e){return e.fields.find(t=>t.kind===2)}function Va(e){return e.fields.filter(t=>t.kind!==2)}Pp.UNKNOWN_ID=-1;class Qg{constructor(t,n){this.fieldPath=t,this.kind=n}}class gd{constructor(t,n){this.sequenceNumber=t,this.offset=n}static empty(){return new gd(0,Es.min())}}function wM(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,i=Fe.fromTimestamp(s===1e9?new Lt(n+1,0):new Lt(n,s));return new Es(i,Se.empty(),t)}function bM(e){return new Es(e.readTime,e.key,Ku)}class Es{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Es(Fe.min(),Se.empty(),Ku)}static max(){return new Es(Fe.max(),Se.empty(),Ku)}}function Rb(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Se.comparator(e.documentKey,t.documentKey),n!==0?n:Ve(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(e){if(e.code!==ne.FAILED_PRECONDITION||e.message!==SM)throw e;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Q((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Q.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Q.reject(n)}static resolve(t){return new Q((n,s)=>{n(t)})}static reject(t){return new Q((n,s)=>{s(t)})}static waitFor(t){return new Q((n,s)=>{let i=0,r=0,a=!1;t.forEach(u=>{++i,u.next(()=>{++r,a&&r===i&&n()},h=>s(h))}),a=!0,r===i&&n()})}static or(t){let n=Q.resolve(!1);for(const s of t)n=n.next(i=>i?Q.resolve(i):s());return n}static forEach(t,n){const s=[];return t.forEach((i,r)=>{s.push(n.call(this,i,r))}),this.waitFor(s)}static mapArray(t,n){return new Q((s,i)=>{const r=t.length,a=new Array(r);let u=0;for(let h=0;h<r;h++){const d=h;n(t[d]).next(g=>{a[d]=g,++u,u===r&&s(a)},g=>i(g))}})}static doWhile(t,n){return new Q((s,i)=>{const r=()=>{t()===!0?n().next(()=>{r()},i):s()};r()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="SimpleDb";class fm{static open(t,n,s,i){try{return new fm(n,t.transaction(i,s))}catch(r){throw new Xh(n,r)}}constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.m=new kn,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{n.error?this.m.reject(new Xh(t,n.error)):this.m.resolve()},this.transaction.onerror=s=>{const i=Tb(s.target.error);this.m.reject(new Xh(t,i))}}get p(){return this.m.promise}abort(t){t&&this.m.reject(t),this.aborted||(ge(bs,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const n=this.transaction.objectStore(t);return new Wj(n)}}class Pi{static delete(t){return ge(bs,"Removing database:",t),za(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!XI())return!1;if(Pi.v())return!0;const t=Mp(),n=Pi.C(t),s=0<n&&n<10,i=RM(t),r=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||s||r)}static v(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,n){return t.store(n)}static C(t){const n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(t,n,s){this.name=t,this.version=n,this.O=s,Pi.C(Mp())===12.2&&en("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(t){return this.db||(ge(bs,"Opening database:",this.name),this.db=await new Promise((n,s)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=r=>{const a=r.target.result;n(a)},i.onblocked=()=>{s(new Xh(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=r=>{const a=r.target.error;a.name==="VersionError"?s(new de(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?s(new de(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):s(new Xh(t,a))},i.onupgradeneeded=r=>{ge(bs,'Database "'+this.name+'" requires upgrade from version:',r.oldVersion);const a=r.target.result;this.O.B(a,i.transaction,r.oldVersion,this.version).next(()=>{ge(bs,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}k(t){this.L=t,this.db&&(this.db.onversionchange=n=>t(n))}async runTransaction(t,n,s,i){const r=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.N(t);const u=fm.open(this.db,t,r?"readonly":"readwrite",s),h=i(u).next(d=>(u.S(),d)).catch(d=>(u.abort(d),Q.reject(d))).toPromise();return h.catch(()=>{}),await u.p,h}catch(u){const h=u,d=h.name!=="FirebaseError"&&a<3;if(ge(bs,"Transaction failed with error:",h.message,"Retrying:",d),this.close(),!d)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function RM(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Uj{constructor(t){this.q=t,this.$=!1,this.K=null}get isDone(){return this.$}get U(){return this.K}set cursor(t){this.q=t}done(){this.$=!0}W(t){this.K=t}delete(){return za(this.q.delete())}}class Xh extends de{constructor(t,n){super(ne.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Qo(e){return e.name==="IndexedDbTransactionError"}class Wj{constructor(t){this.store=t}put(t,n){let s;return n!==void 0?(ge(bs,"PUT",this.store.name,t,n),s=this.store.put(n,t)):(ge(bs,"PUT",this.store.name,"<auto-key>",t),s=this.store.put(t)),za(s)}add(t){return ge(bs,"ADD",this.store.name,t,t),za(this.store.add(t))}get(t){return za(this.store.get(t)).next(n=>(n===void 0&&(n=null),ge(bs,"GET",this.store.name,t,n),n))}delete(t){return ge(bs,"DELETE",this.store.name,t),za(this.store.delete(t))}count(){return ge(bs,"COUNT",this.store.name),za(this.store.count())}G(t,n){const s=this.options(t,n),i=s.index?this.store.index(s.index):this.store;if(typeof i.getAll=="function"){const r=i.getAll(s.range);return new Q((a,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{a(h.target.result)}})}{const r=this.cursor(s),a=[];return this.j(r,(u,h)=>{a.push(h)}).next(()=>a)}}H(t,n){const s=this.store.getAll(t,n===null?void 0:n);return new Q((i,r)=>{s.onerror=a=>{r(a.target.error)},s.onsuccess=a=>{i(a.target.result)}})}J(t,n){ge(bs,"DELETE ALL",this.store.name);const s=this.options(t,n);s.Y=!1;const i=this.cursor(s);return this.j(i,(r,a,u)=>u.delete())}Z(t,n){let s;n?s=t:(s={},n=t);const i=this.cursor(s);return this.j(i,n)}X(t){const n=this.cursor({});return new Q((s,i)=>{n.onerror=r=>{const a=Tb(r.target.error);i(a)},n.onsuccess=r=>{const a=r.target.result;a?t(a.primaryKey,a.value).next(u=>{u?a.continue():s()}):s()}})}j(t,n){const s=[];return new Q((i,r)=>{t.onerror=a=>{r(a.target.error)},t.onsuccess=a=>{const u=a.target.result;if(!u)return void i();const h=new Uj(u),d=n(u.primaryKey,u.value,h);if(d instanceof Q){const g=d.catch(m=>(h.done(),Q.reject(m)));s.push(g)}h.isDone?i():h.U===null?u.continue():u.continue(h.U)}}).next(()=>Q.waitFor(s))}options(t,n){let s;return t!==void 0&&(typeof t=="string"?s=t:n=t),{index:s,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){const s=this.store.index(t.index);return t.Y?s.openKeyCursor(t.range,n):s.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}}function za(e){return new Q((t,n)=>{e.onsuccess=s=>{const i=s.target.result;t(i)},e.onerror=s=>{const i=Tb(s.target.error);n(i)}})}let bA=!1;function Tb(e){const t=Pi.C(Mp());if(t>=12.2&&t<13){const n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){const s=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bA||(bA=!0,setTimeout(()=>{throw s},0)),s}}return e}const Zh="IndexBackfiller";class jj{constructor(t,n){this.asyncQueue=t,this.ee=n,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(t){ge(Zh,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{const n=await this.ee.ne();ge(Zh,`Documents written: ${n}`)}catch(n){Qo(n)?ge(Zh,"Ignoring IndexedDB error during index backfill: ",n):await Yo(n)}await this.te(6e4)})}}class qj{constructor(t,n){this.localStore=t,this.persistence=n}async ne(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.re(n,t))}re(t,n){const s=new Set;let i=n,r=!0;return Q.doWhile(()=>r===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(a=>{if(a!==null&&!s.has(a))return ge(Zh,`Processing collection: ${a}`),this.ie(t,a,i).next(u=>{i-=u,s.add(a)});r=!1})).next(()=>n-i)}ie(t,n,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,n).next(i=>this.localStore.localDocuments.getNextDocuments(t,n,i,s).next(r=>{const a=r.changes;return this.localStore.indexManager.updateIndexEntries(t,a).next(()=>this.se(i,r)).next(u=>(ge(Zh,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(t,n,u))).next(()=>a.size)}))}se(t,n){let s=t;return n.changes.forEach((i,r)=>{const a=bM(r);Rb(a,s)>0&&(s=a)}),new Es(s.readTime,s.documentKey,Math.max(n.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.oe(s),this._e=s=>n.writeSequenceNumber(s))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}hs.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=-1;function Vd(e){return e==null}function pd(e){return e===0&&1/e==-1/0}function TM(e){return typeof e=="number"&&Number.isInteger(e)&&!pd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp="";function jn(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=SA(t)),t=$j(e.get(n),t);return SA(t)}function $j(e,t){let n=t;const s=e.length;for(let i=0;i<s;i++){const r=e.charAt(i);switch(r){case"\0":n+="";break;case Lp:n+="";break;default:n+=r}}return n}function SA(e){return e+Lp+""}function Ii(e){const t=e.length;if(_e(t>=2),t===2)return _e(e.charAt(0)===Lp&&e.charAt(1)===""),Ye.emptyPath();const n=t-2,s=[];let i="";for(let r=0;r<t;){const a=e.indexOf(Lp,r);switch((a<0||a>n)&&Te(),e.charAt(a+1)){case"":const u=e.substring(r,a);let h;i.length===0?h=u:(i+=u,h=i,i=""),s.push(h);break;case"":i+=e.substring(r,a),i+="\0";break;case"":i+=e.substring(r,a+1);break;default:Te()}r=a+2}return new Ye(s)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba="remoteDocuments",Bd="owner",pu="owner",md="mutationQueues",Kj="userId",ei="mutations",EA="batchId",$a="userMutationsIndex",RA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(e,t){return[e,jn(t)]}function AM(e,t,n){return[e,jn(t),n]}const Yj={},Yu="documentMutations",Op="remoteDocumentsV14",Qj=["prefixPath","collectionGroup","readTime","documentId"],Zg="documentKeyIndex",Xj=["prefixPath","collectionGroup","documentId"],xM="collectionGroupIndex",Zj=["collectionGroup","readTime","prefixPath","documentId"],Cd="remoteDocumentGlobal",cw="remoteDocumentGlobalKey",Qu="targets",DM="queryTargetsIndex",Jj=["canonicalId","targetId"],Xu="targetDocuments",e7=["targetId","path"],Ab="documentTargetsIndex",t7=["path","targetId"],kp="targetGlobalKey",il="targetGlobal",vd="collectionParents",n7=["collectionId","parent"],Zu="clientMetadata",s7="clientId",gm="bundles",i7="bundleId",pm="namedQueries",r7="name",xb="indexConfiguration",o7="indexId",hw="collectionGroupIndex",a7="collectionGroup",Np="indexState",l7=["indexId","uid"],_M="sequenceNumberIndex",u7=["uid","sequenceNumber"],Vp="indexEntries",c7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],IM="documentKeyIndex",h7=["indexId","uid","orderedDocumentKey"],mm="documentOverlays",d7=["userId","collectionPath","documentId"],dw="collectionPathOverlayIndex",f7=["userId","collectionPath","largestBatchId"],MM="collectionGroupOverlayIndex",g7=["userId","collectionGroup","largestBatchId"],Db="globals",p7="name",FM=[md,ei,Yu,Ba,Qu,Bd,il,Xu,Zu,Cd,vd,gm,pm],m7=[...FM,mm],PM=[md,ei,Yu,Op,Qu,Bd,il,Xu,Zu,Cd,vd,gm,pm,mm],LM=PM,_b=[...LM,xb,Np,Vp],C7=_b,v7=[..._b,Db];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw extends EM{constructor(t,n){super(),this.ue=t,this.currentSequenceNumber=n}}function vn(e,t){const n=Ee(e);return Pi.M(n.ue,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Xo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function OM(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t,n){this.comparator=t,this.root=n||Pn.EMPTY}insert(t,n){return new xt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(t){return new xt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(t,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Fg(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Fg(this.root,t,this.comparator,!1)}getReverseIterator(){return new Fg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Fg(this.root,t,this.comparator,!0)}}class Fg{constructor(t,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?s(t.key,n):1,n&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Pn{constructor(t,n,s,i,r){this.key=t,this.value=n,this.color=s??Pn.RED,this.left=i??Pn.EMPTY,this.right=r??Pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,i,r){return new Pn(t??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let i=this;const r=s(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Pn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Pn.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const t=this.left.check();if(t!==this.right.check())throw Te();return t+(this.isRed()?0:1)}}Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1;Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(t,n,s,i,r){return this}insert(t,n,s){return new Pn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(t){this.comparator=t,this.data=new xt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new AA(this.data.getIterator())}getIteratorFrom(t){return new AA(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof Ct)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ct(this.comparator);return n.data=t,n}}class AA{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function mu(e){return e.hasNext()?e.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(t){this.fields=t,t.sort(Ft.comparator)}static empty(){return new ds([])}unionWith(t){let n=new Ct(Ft.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new ds(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return $u(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y7(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new kM("Invalid base64 string: "+r):r}}(t);return new Kt(n)}static fromUint8Array(t){const n=function(i){let r="";for(let a=0;a<i.length;++a)r+=String.fromCharCode(i[a]);return r}(t);return new Kt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ve(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const w7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tr(e){if(_e(!!e),typeof e=="string"){let t=0;const n=w7.exec(e);if(_e(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Mt(e.seconds),nanos:Mt(e.nanos)}}function Mt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Ar(e){return typeof e=="string"?Kt.fromBase64String(e):Kt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM="server_timestamp",VM="__type__",BM="__previous_value__",GM="__local_write_time__";function Cm(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[VM])===null||n===void 0?void 0:n.stringValue)===NM}function vm(e){const t=e.mapValue.fields[BM];return Cm(t)?vm(t):t}function yd(e){const t=Tr(e.mapValue.fields[GM].timestampValue);return new Lt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(t,n,s,i,r,a,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=d}}const Bp="(default)";class Ho{constructor(t,n){this.projectId=t,this.database=n||Bp}static empty(){return new Ho("","")}get isDefaultDatabase(){return this.database===Bp}isEqual(t){return t instanceof Ho&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="__type__",HM="__max__",_o={mapValue:{fields:{__type__:{stringValue:HM}}}},Mb="__vector__",Ju="value",Jg={nullValue:"NULL_VALUE"};function zo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Cm(e)?4:zM(e)?9007199254740991:ym(e)?10:11:Te()}function Bi(e,t){if(e===t)return!0;const n=zo(e);if(n!==zo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return yd(e).isEqual(yd(t));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const a=Tr(i.timestampValue),u=Tr(r.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,r){return Ar(i.bytesValue).isEqual(Ar(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,r){return Mt(i.geoPointValue.latitude)===Mt(r.geoPointValue.latitude)&&Mt(i.geoPointValue.longitude)===Mt(r.geoPointValue.longitude)}(e,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Mt(i.integerValue)===Mt(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const a=Mt(i.doubleValue),u=Mt(r.doubleValue);return a===u?pd(a)===pd(u):isNaN(a)&&isNaN(u)}return!1}(e,t);case 9:return $u(e.arrayValue.values||[],t.arrayValue.values||[],Bi);case 10:case 11:return function(i,r){const a=i.mapValue.fields||{},u=r.mapValue.fields||{};if(TA(a)!==TA(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!Bi(a[h],u[h])))return!1;return!0}(e,t);default:return Te()}}function wd(e,t){return(e.values||[]).find(n=>Bi(n,t))!==void 0}function Uo(e,t){if(e===t)return 0;const n=zo(e),s=zo(t);if(n!==s)return Ve(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(e.booleanValue,t.booleanValue);case 2:return function(r,a){const u=Mt(r.integerValue||r.doubleValue),h=Mt(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(e,t);case 3:return xA(e.timestampValue,t.timestampValue);case 4:return xA(yd(e),yd(t));case 5:return Ve(e.stringValue,t.stringValue);case 6:return function(r,a){const u=Ar(r),h=Ar(a);return u.compareTo(h)}(e.bytesValue,t.bytesValue);case 7:return function(r,a){const u=r.split("/"),h=a.split("/");for(let d=0;d<u.length&&d<h.length;d++){const g=Ve(u[d],h[d]);if(g!==0)return g}return Ve(u.length,h.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,a){const u=Ve(Mt(r.latitude),Mt(a.latitude));return u!==0?u:Ve(Mt(r.longitude),Mt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return DA(e.arrayValue,t.arrayValue);case 10:return function(r,a){var u,h,d,g;const m=r.fields||{},v=a.fields||{},w=(u=m[Ju])===null||u===void 0?void 0:u.arrayValue,S=(h=v[Ju])===null||h===void 0?void 0:h.arrayValue,T=Ve(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((g=S==null?void 0:S.values)===null||g===void 0?void 0:g.length)||0);return T!==0?T:DA(w,S)}(e.mapValue,t.mapValue);case 11:return function(r,a){if(r===_o.mapValue&&a===_o.mapValue)return 0;if(r===_o.mapValue)return 1;if(a===_o.mapValue)return-1;const u=r.fields||{},h=Object.keys(u),d=a.fields||{},g=Object.keys(d);h.sort(),g.sort();for(let m=0;m<h.length&&m<g.length;++m){const v=Ve(h[m],g[m]);if(v!==0)return v;const w=Uo(u[h[m]],d[g[m]]);if(w!==0)return w}return Ve(h.length,g.length)}(e.mapValue,t.mapValue);default:throw Te()}}function xA(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Ve(e,t);const n=Tr(e),s=Tr(t),i=Ve(n.seconds,s.seconds);return i!==0?i:Ve(n.nanos,s.nanos)}function DA(e,t){const n=e.values||[],s=t.values||[];for(let i=0;i<n.length&&i<s.length;++i){const r=Uo(n[i],s[i]);if(r)return r}return Ve(n.length,s.length)}function ec(e){return gw(e)}function gw(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const s=Tr(n);return`time(${s.seconds},${s.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Ar(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Se.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=gw(r);return s+"]"}(e.arrayValue):"mapValue"in e?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const a of s)r?r=!1:i+=",",i+=`${a}:${gw(n.fields[a])}`;return i+"}"}(e.mapValue):Te()}function ep(e){switch(zo(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=vm(e);return t?16+ep(t):16;case 5:return 2*e.stringValue.length;case 6:return Ar(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((i,r)=>i+ep(r),0)}(e.arrayValue);case 10:case 11:return function(s){let i=0;return Xo(s.fields,(r,a)=>{i+=r.length+ep(a)}),i}(e.mapValue);default:throw Te()}}function hl(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function pw(e){return!!e&&"integerValue"in e}function bd(e){return!!e&&"arrayValue"in e}function _A(e){return!!e&&"nullValue"in e}function IA(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function tp(e){return!!e&&"mapValue"in e}function ym(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Ib])===null||n===void 0?void 0:n.stringValue)===Mb}function Jh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Xo(e.mapValue.fields,(n,s)=>t.mapValue.fields[n]=Jh(s)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Jh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function zM(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===HM}const UM={mapValue:{fields:{[Ib]:{stringValue:Mb},[Ju]:{arrayValue:{}}}}};function S7(e){return"nullValue"in e?Jg:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?hl(Ho.empty(),Se.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?ym(e)?UM:{mapValue:{}}:Te()}function E7(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?hl(Ho.empty(),Se.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?UM:"mapValue"in e?ym(e)?{mapValue:{}}:_o:Te()}function MA(e,t){const n=Uo(e.value,t.value);return n!==0?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function FA(e,t){const n=Uo(e.value,t.value);return n!==0?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t){this.value=t}static empty(){return new Ln({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!tp(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Jh(n)}setAll(t){let n=Ft.emptyPath(),s={},i=[];t.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,s,i),s={},i=[],n=u.popLast()}a?s[u.lastSegment()]=Jh(a):i.push(u.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(t){const n=this.field(t.popLast());tp(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Bi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let i=n.mapValue.fields[t.get(s)];tp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,s){Xo(n,(i,r)=>t[i]=r);for(const i of s)delete t[i]}clone(){return new Ln(Jh(this.value))}}function WM(e){const t=[];return Xo(e.fields,(n,s)=>{const i=new Ft([n]);if(tp(s)){const r=WM(s.mapValue).fields;if(r.length===0)t.push(i);else for(const a of r)t.push(i.child(a))}else t.push(i)}),new ds(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(t,n,s,i,r,a,u){this.key=t,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=a,this.documentState=u}static newInvalidDocument(t){return new It(t,0,Fe.min(),Fe.min(),Fe.min(),Ln.empty(),0)}static newFoundDocument(t,n,s,i){return new It(t,1,n,Fe.min(),s,i,0)}static newNoDocument(t,n){return new It(t,2,n,Fe.min(),Fe.min(),Ln.empty(),0)}static newUnknownDocument(t,n){return new It(t,3,n,Fe.min(),Fe.min(),Ln.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof It&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new It(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(t,n){this.position=t,this.inclusive=n}}function PA(e,t,n){let s=0;for(let i=0;i<e.position.length;i++){const r=t[i],a=e.position[i];if(r.field.isKeyField()?s=Se.comparator(Se.fromName(a.referenceValue),n.key):s=Uo(a,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function LA(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Bi(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(t,n="asc"){this.field=t,this.dir=n}}function R7(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{}class Qe extends jM{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new T7(t,n,s):n==="array-contains"?new D7(t,s):n==="in"?new XM(t,s):n==="not-in"?new _7(t,s):n==="array-contains-any"?new I7(t,s):new Qe(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new A7(t,s):new x7(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Uo(n,this.value)):n!==null&&zo(this.value)===zo(n)&&this.matchesComparison(Uo(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mt extends jM{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new mt(t,n)}matches(t){return tc(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function tc(e){return e.op==="and"}function mw(e){return e.op==="or"}function Fb(e){return qM(e)&&tc(e)}function qM(e){for(const t of e.filters)if(t instanceof mt)return!1;return!0}function Cw(e){if(e instanceof Qe)return e.field.canonicalString()+e.op.toString()+ec(e.value);if(Fb(e))return e.filters.map(t=>Cw(t)).join(",");{const t=e.filters.map(n=>Cw(n)).join(",");return`${e.op}(${t})`}}function $M(e,t){return e instanceof Qe?function(s,i){return i instanceof Qe&&s.op===i.op&&s.field.isEqual(i.field)&&Bi(s.value,i.value)}(e,t):e instanceof mt?function(s,i){return i instanceof mt&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((r,a,u)=>r&&$M(a,i.filters[u]),!0):!1}(e,t):void Te()}function KM(e,t){const n=e.filters.concat(t);return mt.create(n,e.op)}function YM(e){return e instanceof Qe?function(n){return`${n.field.canonicalString()} ${n.op} ${ec(n.value)}`}(e):e instanceof mt?function(n){return n.op.toString()+" {"+n.getFilters().map(YM).join(" ,")+"}"}(e):"Filter"}class T7 extends Qe{constructor(t,n,s){super(t,n,s),this.key=Se.fromName(s.referenceValue)}matches(t){const n=Se.comparator(t.key,this.key);return this.matchesComparison(n)}}class A7 extends Qe{constructor(t,n){super(t,"in",n),this.keys=QM("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class x7 extends Qe{constructor(t,n){super(t,"not-in",n),this.keys=QM("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function QM(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Se.fromName(s.referenceValue))}class D7 extends Qe{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return bd(n)&&wd(n.arrayValue,this.value)}}class XM extends Qe{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&wd(this.value.arrayValue,n)}}class _7 extends Qe{constructor(t,n){super(t,"not-in",n)}matches(t){if(wd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!wd(this.value.arrayValue,n)}}class I7 extends Qe{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!bd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>wd(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(t,n=null,s=[],i=[],r=null,a=null,u=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=a,this.endAt=u,this.le=null}}function vw(e,t=null,n=[],s=[],i=null,r=null,a=null){return new M7(e,t,n,s,i,r,a)}function dl(e){const t=Ee(e);if(t.le===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>Cw(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),Vd(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>ec(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>ec(s)).join(",")),t.le=n}return t.le}function Gd(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!R7(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!$M(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!LA(e.startAt,t.startAt)&&LA(e.endAt,t.endAt)}function Gp(e){return Se.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function Hp(e,t){return e.filters.filter(n=>n instanceof Qe&&n.field.isEqual(t))}function OA(e,t,n){let s=Jg,i=!0;for(const r of Hp(e,t)){let a=Jg,u=!0;switch(r.op){case"<":case"<=":a=S7(r.value);break;case"==":case"in":case">=":a=r.value;break;case">":a=r.value,u=!1;break;case"!=":case"not-in":a=Jg}MA({value:s,inclusive:i},{value:a,inclusive:u})<0&&(s=a,i=u)}if(n!==null){for(let r=0;r<e.orderBy.length;++r)if(e.orderBy[r].field.isEqual(t)){const a=n.position[r];MA({value:s,inclusive:i},{value:a,inclusive:n.inclusive})<0&&(s=a,i=n.inclusive);break}}return{value:s,inclusive:i}}function kA(e,t,n){let s=_o,i=!0;for(const r of Hp(e,t)){let a=_o,u=!0;switch(r.op){case">=":case">":a=E7(r.value),u=!1;break;case"==":case"in":case"<=":a=r.value;break;case"<":a=r.value,u=!1;break;case"!=":case"not-in":a=_o}FA({value:s,inclusive:i},{value:a,inclusive:u})>0&&(s=a,i=u)}if(n!==null){for(let r=0;r<e.orderBy.length;++r)if(e.orderBy[r].field.isEqual(t)){const a=n.position[r];FA({value:s,inclusive:i},{value:a,inclusive:n.inclusive})>0&&(s=a,i=n.inclusive);break}}return{value:s,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(t,n=null,s=[],i=[],r=null,a="F",u=null,h=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=a,this.startAt=u,this.endAt=h,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function ZM(e,t,n,s,i,r,a,u){return new Ir(e,t,n,s,i,r,a,u)}function bc(e){return new Ir(e)}function NA(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Pb(e){return e.collectionGroup!==null}function Ou(e){const t=Ee(e);if(t.he===null){t.he=[];const n=new Set;for(const r of t.explicitOrderBy)t.he.push(r),n.add(r.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Ct(Ft.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.he.push(new Sd(r,s))}),n.has(Ft.keyField().canonicalString())||t.he.push(new Sd(Ft.keyField(),s))}return t.he}function ss(e){const t=Ee(e);return t.Pe||(t.Pe=F7(t,Ou(e))),t.Pe}function F7(e,t){if(e.limitType==="F")return vw(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const r=i.dir==="desc"?"asc":"desc";return new Sd(i.field,r)});const n=e.endAt?new Wo(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Wo(e.startAt.position,e.startAt.inclusive):null;return vw(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}function yw(e,t){const n=e.filters.concat([t]);return new Ir(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function zp(e,t,n){return new Ir(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Hd(e,t){return Gd(ss(e),ss(t))&&e.limitType===t.limitType}function JM(e){return`${dl(ss(e))}|lt:${e.limitType}`}function Eu(e){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>YM(i)).join(", ")}]`),Vd(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>ec(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>ec(i)).join(",")),`Target(${s})`}(ss(e))}; limitType=${e.limitType})`}function zd(e,t){return t.isFoundDocument()&&function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):Se.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)}(e,t)&&function(s,i){for(const r of Ou(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(e,t)&&function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0}(e,t)&&function(s,i){return!(s.startAt&&!function(a,u,h){const d=PA(a,u,h);return a.inclusive?d<=0:d<0}(s.startAt,Ou(s),i)||s.endAt&&!function(a,u,h){const d=PA(a,u,h);return a.inclusive?d>=0:d>0}(s.endAt,Ou(s),i))}(e,t)}function eF(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function tF(e){return(t,n)=>{let s=!1;for(const i of Ou(e)){const r=P7(i,t,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function P7(e,t,n){const s=e.field.isKeyField()?Se.comparator(t.key,n.key):function(r,a,u){const h=a.data.field(r),d=u.data.field(r);return h!==null&&d!==null?Uo(h,d):Te()}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),i=this.inner[s];if(i===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Xo(this.inner,(n,s)=>{for(const[i,r]of s)t(i,r)})}isEmpty(){return OM(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7=new xt(Se.comparator);function fs(){return L7}const nF=new xt(Se.comparator);function Hh(...e){let t=nF;for(const n of e)t=t.insert(n.key,n);return t}function sF(e){let t=nF;return e.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function Mi(){return ed()}function iF(){return ed()}function ed(){return new Mr(e=>e.toString(),(e,t)=>e.isEqual(t))}const O7=new xt(Se.comparator),k7=new Ct(Se.comparator);function He(...e){let t=k7;for(const n of e)t=t.add(n);return t}const N7=new Ct(Ve);function Lb(){return N7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pd(t)?"-0":t}}function rF(e){return{integerValue:""+e}}function oF(e,t){return TM(t)?rF(t):Ob(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this._=void 0}}function V7(e,t,n){return e instanceof nc?function(i,r){const a={fields:{[VM]:{stringValue:NM},[GM]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&Cm(r)&&(r=vm(r)),r&&(a.fields[BM]=r),{mapValue:a}}(n,t):e instanceof fl?lF(e,t):e instanceof gl?uF(e,t):function(i,r){const a=aF(i,r),u=VA(a)+VA(i.Ie);return pw(a)&&pw(i.Ie)?rF(u):Ob(i.serializer,u)}(e,t)}function B7(e,t,n){return e instanceof fl?lF(e,t):e instanceof gl?uF(e,t):n}function aF(e,t){return e instanceof sc?function(s){return pw(s)||function(r){return!!r&&"doubleValue"in r}(s)}(t)?t:{integerValue:0}:null}class nc extends wm{}class fl extends wm{constructor(t){super(),this.elements=t}}function lF(e,t){const n=cF(t);for(const s of e.elements)n.some(i=>Bi(i,s))||n.push(s);return{arrayValue:{values:n}}}class gl extends wm{constructor(t){super(),this.elements=t}}function uF(e,t){let n=cF(t);for(const s of e.elements)n=n.filter(i=>!Bi(i,s));return{arrayValue:{values:n}}}class sc extends wm{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function VA(e){return Mt(e.integerValue||e.doubleValue)}function cF(e){return bd(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(t,n){this.field=t,this.transform=n}}function G7(e,t){return e.field.isEqual(t.field)&&function(s,i){return s instanceof fl&&i instanceof fl||s instanceof gl&&i instanceof gl?$u(s.elements,i.elements,Bi):s instanceof sc&&i instanceof sc?Bi(s.Ie,i.Ie):s instanceof nc&&i instanceof nc}(e.transform,t.transform)}class H7{constructor(t,n){this.version=t,this.transformResults=n}}class Pt{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Pt}static exists(t){return new Pt(void 0,t)}static updateTime(t){return new Pt(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function np(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class bm{}function hF(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Ec(e.key,Pt.none()):new Sc(e.key,e.data,Pt.none());{const n=e.data,s=Ln.empty();let i=new Ct(Ft.comparator);for(let r of t.fields)if(!i.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?s.delete(r):s.set(r,a),i=i.add(r)}return new Fr(e.key,s,new ds(i.toArray()),Pt.none())}}function z7(e,t,n){e instanceof Sc?function(i,r,a){const u=i.value.clone(),h=GA(i.fieldTransforms,r,a.transformResults);u.setAll(h),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):e instanceof Fr?function(i,r,a){if(!np(i.precondition,r))return void r.convertToUnknownDocument(a.version);const u=GA(i.fieldTransforms,r,a.transformResults),h=r.data;h.setAll(dF(i)),h.setAll(u),r.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(e,t,n):function(i,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function td(e,t,n,s){return e instanceof Sc?function(r,a,u,h){if(!np(r.precondition,a))return u;const d=r.value.clone(),g=HA(r.fieldTransforms,h,a);return d.setAll(g),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(e,t,n,s):e instanceof Fr?function(r,a,u,h){if(!np(r.precondition,a))return u;const d=HA(r.fieldTransforms,h,a),g=a.data;return g.setAll(dF(r)),g.setAll(d),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),u===null?null:u.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(m=>m.field))}(e,t,n,s):function(r,a,u){return np(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(e,t,n)}function U7(e,t){let n=null;for(const s of e.fieldTransforms){const i=t.data.field(s.field),r=aF(s.transform,i||null);r!=null&&(n===null&&(n=Ln.empty()),n.set(s.field,r))}return n||null}function BA(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&$u(s,i,(r,a)=>G7(r,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Sc extends bm{constructor(t,n,s,i=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Fr extends bm{constructor(t,n,s,i,r=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function dF(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}}),t}function GA(e,t,n){const s=new Map;_e(e.length===n.length);for(let i=0;i<n.length;i++){const r=e[i],a=r.transform,u=t.data.field(r.field);s.set(r.field,B7(a,u,n[i]))}return s}function HA(e,t,n){const s=new Map;for(const i of e){const r=i.transform,a=n.data.field(i.field);s.set(i.field,V7(r,a,t))}return s}class Ec extends bm{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kb extends bm{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(t,n,s,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(t.key)&&z7(r,t,s[i])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=td(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=td(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=iF();return this.mutations.forEach(i=>{const r=t.get(i.key),a=r.overlayedDocument;let u=this.applyToLocalView(a,r.mutatedFields);u=n.has(i.key)?null:u;const h=hF(a,u);h!==null&&s.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(Fe.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),He())}isEqual(t){return this.batchId===t.batchId&&$u(this.mutations,t.mutations,(n,s)=>BA(n,s))&&$u(this.baseMutations,t.baseMutations,(n,s)=>BA(n,s))}}class Vb{constructor(t,n,s,i){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(t,n,s){_e(t.mutations.length===s.length);let i=function(){return O7}();const r=t.mutations;for(let a=0;a<r.length;a++)i=i.insert(r[a].key,s[a].version);return new Vb(t,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln,it;function fF(e){switch(e){case ne.OK:return Te();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Te()}}function gF(e){if(e===void 0)return en("GRPC error has no .code"),ne.UNKNOWN;switch(e){case ln.OK:return ne.OK;case ln.CANCELLED:return ne.CANCELLED;case ln.UNKNOWN:return ne.UNKNOWN;case ln.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case ln.INTERNAL:return ne.INTERNAL;case ln.UNAVAILABLE:return ne.UNAVAILABLE;case ln.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case ln.NOT_FOUND:return ne.NOT_FOUND;case ln.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case ln.ABORTED:return ne.ABORTED;case ln.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case ln.DATA_LOSS:return ne.DATA_LOSS;default:return Te()}}(it=ln||(ln={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7=new Po([4294967295,4294967295],0);function zA(e){const t=pF().encode(e),n=new hM;return n.update(t),new Uint8Array(n.digest())}function UA(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Po([n,s],0),new Po([i,r],0)]}class Gb{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new zh(`Invalid padding: ${n}`);if(s<0)throw new zh(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new zh(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new zh(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*t.length-n,this.de=Po.fromNumber(this.Ee)}Ae(t,n,s){let i=t.add(n.multiply(Po.fromNumber(s)));return i.compare(j7)===1&&(i=new Po([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const n=zA(t),[s,i]=UA(n);for(let r=0;r<this.hashCount;r++){const a=this.Ae(s,i,r);if(!this.Re(a))return!1}return!0}static create(t,n,s){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),a=new Gb(r,i,n);return s.forEach(u=>a.insert(u)),a}insert(t){if(this.Ee===0)return;const n=zA(t),[s,i]=UA(n);for(let r=0;r<this.hashCount;r++){const a=this.Ae(s,i,r);this.Ve(a)}}Ve(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class zh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(t,n,s,i,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const i=new Map;return i.set(t,jd.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Wd(Fe.min(),i,new xt(Ve),fs(),He())}}class jd{constructor(t,n,s,i,r){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new jd(s,n,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(t,n,s,i){this.me=t,this.removedTargetIds=n,this.key=s,this.fe=i}}class mF{constructor(t,n){this.targetId=t,this.ge=n}}class CF{constructor(t,n,s=Kt.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=i}}class WA{constructor(){this.pe=0,this.ye=jA(),this.we=Kt.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.we=t)}Fe(){let t=He(),n=He(),s=He();return this.ye.forEach((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:Te()}}),new jd(this.we,this.be,t,n,s)}Me(){this.Se=!1,this.ye=jA()}xe(t,n){this.Se=!0,this.ye=this.ye.insert(t,n)}Oe(t){this.Se=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,_e(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class q7{constructor(t){this.ke=t,this.qe=new Map,this.Qe=fs(),this.$e=Pg(),this.Ke=Pg(),this.Ue=new xt(Ve)}We(t){for(const n of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(n,t.fe):this.ze(n,t.key,t.fe);for(const n of t.removedTargetIds)this.ze(n,t.key,t.fe)}je(t){this.forEachTarget(t,n=>{const s=this.He(n);switch(t.state){case 0:this.Je(n)&&s.Ce(t.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(t.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(n);break;case 3:this.Je(n)&&(s.Le(),s.Ce(t.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),s.Ce(t.resumeToken));break;default:Te()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.qe.forEach((s,i)=>{this.Je(i)&&n(i)})}Ze(t){const n=t.targetId,s=t.ge.count,i=this.Xe(n);if(i){const r=i.target;if(Gp(r))if(s===0){const a=new Se(r.path);this.ze(n,a,It.newNoDocument(a,Fe.min()))}else _e(s===1);else{const a=this.et(n);if(a!==s){const u=this.tt(t),h=u?this.nt(u,t,a):1;if(h!==0){this.Ye(n);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(n,d)}}}}}tt(t){const n=t.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let a,u;try{a=Ar(s).toUint8Array()}catch(h){if(h instanceof kM)return Vi("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new Gb(a,i,r)}catch(h){return Vi(h instanceof zh?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.Ee===0?null:u}nt(t,n,s){return n.ge.count===s-this.st(t,n.targetId)?0:2}st(t,n){const s=this.ke.getRemoteKeysForTarget(n);let i=0;return s.forEach(r=>{const a=this.ke.it(),u=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;t.mightContain(u)||(this.ze(n,r,null),i++)}),i}ot(t){const n=new Map;this.qe.forEach((r,a)=>{const u=this.Xe(a);if(u){if(r.current&&Gp(u.target)){const h=new Se(u.target.path);this._t(h).has(a)||this.ut(a,h)||this.ze(a,h,It.newNoDocument(h,t))}r.ve&&(n.set(a,r.Fe()),r.Me())}});let s=He();this.Ke.forEach((r,a)=>{let u=!0;a.forEachWhile(h=>{const d=this.Xe(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(s=s.add(r))}),this.Qe.forEach((r,a)=>a.setReadTime(t));const i=new Wd(t,n,this.Ue,this.Qe,s);return this.Qe=fs(),this.$e=Pg(),this.Ke=Pg(),this.Ue=new xt(Ve),i}Ge(t,n){if(!this.Je(t))return;const s=this.ut(t,n.key)?2:0;this.He(t).xe(n.key,s),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(t)),this.Ke=this.Ke.insert(n.key,this.ct(n.key).add(t))}ze(t,n,s){if(!this.Je(t))return;const i=this.He(t);this.ut(t,n)?i.xe(n,1):i.Oe(n),this.Ke=this.Ke.insert(n,this.ct(n).delete(t)),this.Ke=this.Ke.insert(n,this.ct(n).add(t)),s&&(this.Qe=this.Qe.insert(n,s))}removeTarget(t){this.qe.delete(t)}et(t){const n=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let n=this.qe.get(t);return n||(n=new WA,this.qe.set(t,n)),n}ct(t){let n=this.Ke.get(t);return n||(n=new Ct(Ve),this.Ke=this.Ke.insert(t,n)),n}_t(t){let n=this.$e.get(t);return n||(n=new Ct(Ve),this.$e=this.$e.insert(t,n)),n}Je(t){const n=this.Xe(t)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",t),n}Xe(t){const n=this.qe.get(t);return n&&n.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new WA),this.ke.getRemoteKeysForTarget(t).forEach(n=>{this.ze(t,n,null)})}ut(t,n){return this.ke.getRemoteKeysForTarget(t).has(n)}}function Pg(){return new xt(Se.comparator)}function jA(){return new xt(Se.comparator)}const $7={asc:"ASCENDING",desc:"DESCENDING"},K7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y7={and:"AND",or:"OR"};class Q7{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function ww(e,t){return e.useProto3Json||Vd(t)?t:{value:t}}function ic(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function vF(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function X7(e,t){return ic(e,t.toTimestamp())}function tn(e){return _e(!!e),Fe.fromTimestamp(function(n){const s=Tr(n);return new Lt(s.seconds,s.nanos)}(e))}function Hb(e,t){return bw(e,t).canonicalString()}function bw(e,t){const n=function(i){return new Ye(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function yF(e){const t=Ye.fromString(e);return _e(_F(t)),t}function Ed(e,t){return Hb(e.databaseId,t.path)}function Li(e,t){const n=yF(t);if(n.get(1)!==e.databaseId.projectId)throw new de(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new de(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Se(SF(n))}function wF(e,t){return Hb(e.databaseId,t)}function bF(e){const t=yF(e);return t.length===4?Ye.emptyPath():SF(t)}function Sw(e){return new Ye(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function SF(e){return _e(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function qA(e,t,n){return{name:Ed(e,t),fields:n.value.mapValue.fields}}function EF(e,t,n){const s=Li(e,t.name),i=tn(t.updateTime),r=t.createTime?tn(t.createTime):Fe.min(),a=new Ln({mapValue:{fields:t.fields}}),u=It.newFoundDocument(s,i,r,a);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Z7(e,t){return"found"in t?function(s,i){_e(!!i.found),i.found.name,i.found.updateTime;const r=Li(s,i.found.name),a=tn(i.found.updateTime),u=i.found.createTime?tn(i.found.createTime):Fe.min(),h=new Ln({mapValue:{fields:i.found.fields}});return It.newFoundDocument(r,a,u,h)}(e,t):"missing"in t?function(s,i){_e(!!i.missing),_e(!!i.readTime);const r=Li(s,i.missing),a=tn(i.readTime);return It.newNoDocument(r,a)}(e,t):Te()}function J7(e,t){let n;if("targetChange"in t){t.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Te()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],r=function(d,g){return d.useProto3Json?(_e(g===void 0||typeof g=="string"),Kt.fromBase64String(g||"")):(_e(g===void 0||g instanceof Buffer||g instanceof Uint8Array),Kt.fromUint8Array(g||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,u=a&&function(d){const g=d.code===void 0?ne.UNKNOWN:gF(d.code);return new de(g,d.message||"")}(a);n=new CF(s,i,r,u||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const i=Li(e,s.document.name),r=tn(s.document.updateTime),a=s.document.createTime?tn(s.document.createTime):Fe.min(),u=new Ln({mapValue:{fields:s.document.fields}}),h=It.newFoundDocument(i,r,a,u),d=s.targetIds||[],g=s.removedTargetIds||[];n=new sp(d,g,h.key,h)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const i=Li(e,s.document),r=s.readTime?tn(s.readTime):Fe.min(),a=It.newNoDocument(i,r),u=s.removedTargetIds||[];n=new sp([],u,a.key,a)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const i=Li(e,s.document),r=s.removedTargetIds||[];n=new sp([],r,i,null)}else{if(!("filter"in t))return Te();{t.filter;const s=t.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,a=new W7(i,r),u=s.targetId;n=new mF(u,a)}}return n}function Rd(e,t){let n;if(t instanceof Sc)n={update:qA(e,t.key,t.value)};else if(t instanceof Ec)n={delete:Ed(e,t.key)};else if(t instanceof Fr)n={update:qA(e,t.key,t.data),updateMask:r8(t.fieldMask)};else{if(!(t instanceof kb))return Te();n={verify:Ed(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(r,a){const u=a.transform;if(u instanceof nc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof fl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof gl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof sc)return{fieldPath:a.field.canonicalString(),increment:u.Ie};throw Te()}(0,s))),t.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:X7(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Te()}(e,t.precondition)),n}function Ew(e,t){const n=t.currentDocument?function(r){return r.updateTime!==void 0?Pt.updateTime(tn(r.updateTime)):r.exists!==void 0?Pt.exists(r.exists):Pt.none()}(t.currentDocument):Pt.none(),s=t.updateTransforms?t.updateTransforms.map(i=>function(a,u){let h=null;if("setToServerValue"in u)_e(u.setToServerValue==="REQUEST_TIME"),h=new nc;else if("appendMissingElements"in u){const g=u.appendMissingElements.values||[];h=new fl(g)}else if("removeAllFromArray"in u){const g=u.removeAllFromArray.values||[];h=new gl(g)}else"increment"in u?h=new sc(a,u.increment):Te();const d=Ft.fromServerFormat(u.fieldPath);return new Ud(d,h)}(e,i)):[];if(t.update){t.update.name;const i=Li(e,t.update.name),r=new Ln({mapValue:{fields:t.update.fields}});if(t.updateMask){const a=function(h){const d=h.fieldPaths||[];return new ds(d.map(g=>Ft.fromServerFormat(g)))}(t.updateMask);return new Fr(i,r,a,n,s)}return new Sc(i,r,n,s)}if(t.delete){const i=Li(e,t.delete);return new Ec(i,n)}if(t.verify){const i=Li(e,t.verify);return new kb(i,n)}return Te()}function e8(e,t){return e&&e.length>0?(_e(t!==void 0),e.map(n=>function(i,r){let a=i.updateTime?tn(i.updateTime):tn(r);return a.isEqual(Fe.min())&&(a=tn(r)),new H7(a,i.transformResults||[])}(n,t))):[]}function RF(e,t){return{documents:[wF(e,t.path)]}}function TF(e,t){const n={structuredQuery:{}},s=t.path;let i;t.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=wF(e,i);const r=function(d){if(d.length!==0)return DF(mt.create(d,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const a=function(d){if(d.length!==0)return d.map(g=>function(v){return{field:Ru(v.field),direction:n8(v.dir)}}(g))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const u=ww(e,t.limit);return u!==null&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(t.endAt)),{ht:n,parent:i}}function AF(e){let t=bF(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){_e(s===1);const g=n.from[0];g.allDescendants?i=g.collectionId:t=t.child(g.collectionId)}let r=[];n.where&&(r=function(m){const v=xF(m);return v instanceof mt&&Fb(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(v=>function(S){return new Sd(Tu(S.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(m){let v;return v=typeof m=="object"?m.value:m,Vd(v)?null:v}(n.limit));let h=null;n.startAt&&(h=function(m){const v=!!m.before,w=m.values||[];return new Wo(w,v)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const v=!m.before,w=m.values||[];return new Wo(w,v)}(n.endAt)),ZM(t,i,a,r,u,"F",h,d)}function t8(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function xF(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Tu(n.unaryFilter.field);return Qe.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=Tu(n.unaryFilter.field);return Qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Tu(n.unaryFilter.field);return Qe.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Tu(n.unaryFilter.field);return Qe.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(e):e.fieldFilter!==void 0?function(n){return Qe.create(Tu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return mt.create(n.compositeFilter.filters.map(s=>xF(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Te()}}(n.compositeFilter.op))}(e):Te()}function n8(e){return $7[e]}function s8(e){return K7[e]}function i8(e){return Y7[e]}function Ru(e){return{fieldPath:e.canonicalString()}}function Tu(e){return Ft.fromServerFormat(e.fieldPath)}function DF(e){return e instanceof Qe?function(n){if(n.op==="=="){if(IA(n.value))return{unaryFilter:{field:Ru(n.field),op:"IS_NAN"}};if(_A(n.value))return{unaryFilter:{field:Ru(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(IA(n.value))return{unaryFilter:{field:Ru(n.field),op:"IS_NOT_NAN"}};if(_A(n.value))return{unaryFilter:{field:Ru(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ru(n.field),op:s8(n.op),value:n.value}}}(e):e instanceof mt?function(n){const s=n.getFilters().map(i=>DF(i));return s.length===1?s[0]:{compositeFilter:{op:i8(n.op),filters:s}}}(e):Te()}function r8(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function _F(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(t,n,s,i,r=Fe.min(),a=Fe.min(),u=Kt.EMPTY_BYTE_STRING,h=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(t){return new pr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(t){this.Tt=t}}function o8(e,t){let n;if(t.document)n=EF(e.Tt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const s=Se.fromSegments(t.noDocument.path),i=ml(t.noDocument.readTime);n=It.newNoDocument(s,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Te();{const s=Se.fromSegments(t.unknownDocument.path),i=ml(t.unknownDocument.version);n=It.newUnknownDocument(s,i)}}return t.readTime&&n.setReadTime(function(i){const r=new Lt(i[0],i[1]);return Fe.fromTimestamp(r)}(t.readTime)),n}function $A(e,t){const n=t.key,s={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Up(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())s.document=function(r,a){return{name:Ed(r,a.key),fields:a.data.value.mapValue.fields,updateTime:ic(r,a.version.toTimestamp()),createTime:ic(r,a.createTime.toTimestamp())}}(e.Tt,t);else if(t.isNoDocument())s.noDocument={path:n.path.toArray(),readTime:pl(t.version)};else{if(!t.isUnknownDocument())return Te();s.unknownDocument={path:n.path.toArray(),version:pl(t.version)}}return s}function Up(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function pl(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ml(e){const t=new Lt(e.seconds,e.nanoseconds);return Fe.fromTimestamp(t)}function Ua(e,t){const n=(t.baseMutations||[]).map(r=>Ew(e.Tt,r));for(let r=0;r<t.mutations.length-1;++r){const a=t.mutations[r];if(r+1<t.mutations.length&&t.mutations[r+1].transform!==void 0){const u=t.mutations[r+1];a.updateTransforms=u.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}const s=t.mutations.map(r=>Ew(e.Tt,r)),i=Lt.fromMillis(t.localWriteTimeMs);return new Nb(t.batchId,i,n,s)}function Uh(e){const t=ml(e.readTime),n=e.lastLimboFreeSnapshotVersion!==void 0?ml(e.lastLimboFreeSnapshotVersion):Fe.min();let s;return s=function(r){return r.documents!==void 0}(e.query)?function(r){return _e(r.documents.length===1),ss(bc(bF(r.documents[0])))}(e.query):function(r){return ss(AF(r))}(e.query),new pr(s,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Kt.fromBase64String(e.resumeToken))}function MF(e,t){const n=pl(t.snapshotVersion),s=pl(t.lastLimboFreeSnapshotVersion);let i;i=Gp(t.target)?RF(e.Tt,t.target):TF(e.Tt,t.target).ht;const r=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:dl(t.target),readTime:n,resumeToken:r,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:i}}function zb(e){const t=AF({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?zp(t,t.limit,"L"):t}function Ry(e,t){return new Bb(t.largestBatchId,Ew(e.Tt,t.overlayMutation))}function KA(e,t){const n=t.path.lastSegment();return[e,jn(t.path.popLast()),n]}function YA(e,t,n,s){return{indexId:e,uid:t,sequenceNumber:n,readTime:pl(s.readTime),documentKey:jn(s.documentKey.path),largestBatchId:s.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{getBundleMetadata(t,n){return QA(t).get(n).next(s=>{if(s)return function(r){return{id:r.bundleId,createTime:ml(r.createTime),version:r.version}}(s)})}saveBundleMetadata(t,n){return QA(t).put(function(i){return{bundleId:i.id,createTime:pl(tn(i.createTime)),version:i.version}}(n))}getNamedQuery(t,n){return XA(t).get(n).next(s=>{if(s)return function(r){return{name:r.name,query:zb(r.bundledQuery),readTime:ml(r.readTime)}}(s)})}saveNamedQuery(t,n){return XA(t).put(function(i){return{name:i.name,readTime:pl(tn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function QA(e){return vn(e,gm)}function XA(e){return vn(e,pm)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(t,n){this.serializer=t,this.userId=n}static It(t,n){const s=n.uid||"";return new Sm(t,s)}getOverlay(t,n){return Lh(t).get(KA(this.userId,n)).next(s=>s?Ry(this.serializer,s):null)}getOverlays(t,n){const s=Mi();return Q.forEach(n,i=>this.getOverlay(t,i).next(r=>{r!==null&&s.set(i,r)})).next(()=>s)}saveOverlays(t,n,s){const i=[];return s.forEach((r,a)=>{const u=new Bb(n,a);i.push(this.Et(t,u))}),Q.waitFor(i)}removeOverlaysForBatchId(t,n,s){const i=new Set;n.forEach(a=>i.add(jn(a.getCollectionPath())));const r=[];return i.forEach(a=>{const u=IDBKeyRange.bound([this.userId,a,s],[this.userId,a,s+1],!1,!0);r.push(Lh(t).J(dw,u))}),Q.waitFor(r)}getOverlaysForCollection(t,n,s){const i=Mi(),r=jn(n),a=IDBKeyRange.bound([this.userId,r,s],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Lh(t).G(dw,a).next(u=>{for(const h of u){const d=Ry(this.serializer,h);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(t,n,s,i){const r=Mi();let a;const u=IDBKeyRange.bound([this.userId,n,s],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Lh(t).Z({index:MM,range:u},(h,d,g)=>{const m=Ry(this.serializer,d);r.size()<i||m.largestBatchId===a?(r.set(m.getKey(),m),a=m.largestBatchId):g.done()}).next(()=>r)}Et(t,n){return Lh(t).put(function(i,r,a){const[u,h,d]=KA(r,a.mutation.key);return{userId:r,collectionPath:h,documentId:d,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Rd(i.Tt,a.mutation)}}(this.serializer,this.userId,n))}}function Lh(e){return vn(e,mm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{dt(t){return vn(t,Db)}getSessionToken(t){return this.dt(t).get("sessionToken").next(n=>{const s=n==null?void 0:n.value;return s?Kt.fromUint8Array(s):Kt.EMPTY_BYTE_STRING})}setSessionToken(t,n){return this.dt(t).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){}At(t,n){this.Rt(t,n),n.Vt()}Rt(t,n){if("nullValue"in t)this.ft(n,5);else if("booleanValue"in t)this.ft(n,10),n.gt(t.booleanValue?1:0);else if("integerValue"in t)this.ft(n,15),n.gt(Mt(t.integerValue));else if("doubleValue"in t){const s=Mt(t.doubleValue);isNaN(s)?this.ft(n,13):(this.ft(n,15),pd(s)?n.gt(0):n.gt(s))}else if("timestampValue"in t){let s=t.timestampValue;this.ft(n,20),typeof s=="string"&&(s=Tr(s)),n.yt(`${s.seconds||""}`),n.gt(s.nanos||0)}else if("stringValue"in t)this.wt(t.stringValue,n),this.bt(n);else if("bytesValue"in t)this.ft(n,30),n.St(Ar(t.bytesValue)),this.bt(n);else if("referenceValue"in t)this.Dt(t.referenceValue,n);else if("geoPointValue"in t){const s=t.geoPointValue;this.ft(n,45),n.gt(s.latitude||0),n.gt(s.longitude||0)}else"mapValue"in t?zM(t)?this.ft(n,Number.MAX_SAFE_INTEGER):ym(t)?this.vt(t.mapValue,n):(this.Ct(t.mapValue,n),this.bt(n)):"arrayValue"in t?(this.Ft(t.arrayValue,n),this.bt(n)):Te()}wt(t,n){this.ft(n,25),this.Mt(t,n)}Mt(t,n){n.yt(t)}Ct(t,n){const s=t.fields||{};this.ft(n,55);for(const i of Object.keys(s))this.wt(i,n),this.Rt(s[i],n)}vt(t,n){var s,i;const r=t.fields||{};this.ft(n,53);const a=Ju,u=((i=(s=r[a].arrayValue)===null||s===void 0?void 0:s.values)===null||i===void 0?void 0:i.length)||0;this.ft(n,15),n.gt(Mt(u)),this.wt(a,n),this.Rt(r[a],n)}Ft(t,n){const s=t.values||[];this.ft(n,50);for(const i of s)this.Rt(i,n)}Dt(t,n){this.ft(n,37),Se.fromName(t).path.forEach(s=>{this.ft(n,60),this.Mt(s,n)})}ft(t,n){t.gt(n)}bt(t){t.gt(2)}}Wa.xt=new Wa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=255;function u8(e){if(e===0)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function ZA(e){const t=64-function(s){let i=0;for(let r=0;r<8;++r){const a=u8(255&s[r]);if(i+=a,a!==8)break}return i}(e);return Math.ceil(t/8)}class c8{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(t){const n=t[Symbol.iterator]();let s=n.next();for(;!s.done;)this.Nt(s.value),s=n.next();this.Bt()}Lt(t){const n=t[Symbol.iterator]();let s=n.next();for(;!s.done;)this.kt(s.value),s=n.next();this.qt()}Qt(t){for(const n of t){const s=n.charCodeAt(0);if(s<128)this.Nt(s);else if(s<2048)this.Nt(960|s>>>6),this.Nt(128|63&s);else if(n<"\uD800"||"\uDBFF"<n)this.Nt(480|s>>>12),this.Nt(128|63&s>>>6),this.Nt(128|63&s);else{const i=n.codePointAt(0);this.Nt(240|i>>>18),this.Nt(128|63&i>>>12),this.Nt(128|63&i>>>6),this.Nt(128|63&i)}}this.Bt()}$t(t){for(const n of t){const s=n.charCodeAt(0);if(s<128)this.kt(s);else if(s<2048)this.kt(960|s>>>6),this.kt(128|63&s);else if(n<"\uD800"||"\uDBFF"<n)this.kt(480|s>>>12),this.kt(128|63&s>>>6),this.kt(128|63&s);else{const i=n.codePointAt(0);this.kt(240|i>>>18),this.kt(128|63&i>>>12),this.kt(128|63&i>>>6),this.kt(128|63&i)}}this.qt()}Kt(t){const n=this.Ut(t),s=ZA(n);this.Wt(1+s),this.buffer[this.position++]=255&s;for(let i=n.length-s;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Gt(t){const n=this.Ut(t),s=ZA(n);this.Wt(1+s),this.buffer[this.position++]=~(255&s);for(let i=n.length-s;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}zt(){this.jt(Cu),this.jt(255)}Ht(){this.Jt(Cu),this.Jt(255)}reset(){this.position=0}seed(t){this.Wt(t.length),this.buffer.set(t,this.position),this.position+=t.length}Yt(){return this.buffer.slice(0,this.position)}Ut(t){const n=function(r){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,r,!1),new Uint8Array(a.buffer)}(t),s=!!(128&n[0]);n[0]^=s?255:128;for(let i=1;i<n.length;++i)n[i]^=s?255:0;return n}Nt(t){const n=255&t;n===0?(this.jt(0),this.jt(255)):n===Cu?(this.jt(Cu),this.jt(0)):this.jt(n)}kt(t){const n=255&t;n===0?(this.Jt(0),this.Jt(255)):n===Cu?(this.Jt(Cu),this.Jt(0)):this.Jt(t)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(t){this.Wt(1),this.buffer[this.position++]=t}Jt(t){this.Wt(1),this.buffer[this.position++]=~t}Wt(t){const n=t+this.position;if(n<=this.buffer.length)return;let s=2*this.buffer.length;s<n&&(s=n);const i=new Uint8Array(s);i.set(this.buffer),this.buffer=i}}class h8{constructor(t){this.Zt=t}St(t){this.Zt.Ot(t)}yt(t){this.Zt.Qt(t)}gt(t){this.Zt.Kt(t)}Vt(){this.Zt.zt()}}class d8{constructor(t){this.Zt=t}St(t){this.Zt.Lt(t)}yt(t){this.Zt.$t(t)}gt(t){this.Zt.Gt(t)}Vt(){this.Zt.Ht()}}class Oh{constructor(){this.Zt=new c8,this.Xt=new h8(this.Zt),this.en=new d8(this.Zt)}seed(t){this.Zt.seed(t)}tn(t){return t===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(t,n,s,i){this.indexId=t,this.documentKey=n,this.arrayValue=s,this.directionalValue=i}nn(){const t=this.directionalValue.length,n=t===0||this.directionalValue[t-1]===255?t+1:t,s=new Uint8Array(n);return s.set(this.directionalValue,0),n!==t?s.set([0],this.directionalValue.length):++s[s.length-1],new ja(this.indexId,this.documentKey,this.arrayValue,s)}}function vo(e,t){let n=e.indexId-t.indexId;return n!==0?n:(n=JA(e.arrayValue,t.arrayValue),n!==0?n:(n=JA(e.directionalValue,t.directionalValue),n!==0?n:Se.comparator(e.documentKey,t.documentKey)))}function JA(e,t){for(let n=0;n<e.length&&n<t.length;++n){const s=e[n]-t[n];if(s!==0)return s}return e.length-t.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(t){this.rn=new Ct((n,s)=>Ft.comparator(n.field,s.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.sn=t.orderBy,this._n=[];for(const n of t.filters){const s=n;s.isInequality()?this.rn=this.rn.add(s):this._n.push(s)}}get an(){return this.rn.size>1}un(t){if(_e(t.collectionGroup===this.collectionId),this.an)return!1;const n=uw(t);if(n!==void 0&&!this.cn(n))return!1;const s=Va(t);let i=new Set,r=0,a=0;for(;r<s.length&&this.cn(s[r]);++r)i=i.add(s[r].fieldPath.canonicalString());if(r===s.length)return!0;if(this.rn.size>0){const u=this.rn.getIterator().getNext();if(!i.has(u.field.canonicalString())){const h=s[r];if(!this.ln(u,h)||!this.hn(this.sn[a++],h))return!1}++r}for(;r<s.length;++r){const u=s[r];if(a>=this.sn.length||!this.hn(this.sn[a++],u))return!1}return!0}Pn(){if(this.an)return null;let t=new Ct(Ft.comparator);const n=[];for(const s of this._n)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")n.push(new Qg(s.field,2));else{if(t.has(s.field))continue;t=t.add(s.field),n.push(new Qg(s.field,0))}for(const s of this.sn)s.field.isKeyField()||t.has(s.field)||(t=t.add(s.field),n.push(new Qg(s.field,s.dir==="asc"?0:1)));return new Pp(Pp.UNKNOWN_ID,this.collectionId,n,gd.empty())}cn(t){for(const n of this._n)if(this.ln(n,t))return!0;return!1}ln(t,n){if(t===void 0||!t.field.isEqual(n.fieldPath))return!1;const s=t.op==="array-contains"||t.op==="array-contains-any";return n.kind===2===s}hn(t,n){return!!t.field.isEqual(n.fieldPath)&&(n.kind===0&&t.dir==="asc"||n.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(e){var t,n;if(_e(e instanceof Qe||e instanceof mt),e instanceof Qe){if(e instanceof XM){const i=((n=(t=e.value.arrayValue)===null||t===void 0?void 0:t.values)===null||n===void 0?void 0:n.map(r=>Qe.create(e.field,"==",r)))||[];return mt.create(i,"or")}return e}const s=e.filters.map(i=>FF(i));return mt.create(s,e.op)}function f8(e){if(e.getFilters().length===0)return[];const t=Aw(FF(e));return _e(PF(t)),Rw(t)||Tw(t)?[t]:t.getFilters()}function Rw(e){return e instanceof Qe}function Tw(e){return e instanceof mt&&Fb(e)}function PF(e){return Rw(e)||Tw(e)||function(n){if(n instanceof mt&&mw(n)){for(const s of n.getFilters())if(!Rw(s)&&!Tw(s))return!1;return!0}return!1}(e)}function Aw(e){if(_e(e instanceof Qe||e instanceof mt),e instanceof Qe)return e;if(e.filters.length===1)return Aw(e.filters[0]);const t=e.filters.map(s=>Aw(s));let n=mt.create(t,e.op);return n=Wp(n),PF(n)?n:(_e(n instanceof mt),_e(tc(n)),_e(n.filters.length>1),n.filters.reduce((s,i)=>Ub(s,i)))}function Ub(e,t){let n;return _e(e instanceof Qe||e instanceof mt),_e(t instanceof Qe||t instanceof mt),n=e instanceof Qe?t instanceof Qe?function(i,r){return mt.create([i,r],"and")}(e,t):tx(e,t):t instanceof Qe?tx(t,e):function(i,r){if(_e(i.filters.length>0&&r.filters.length>0),tc(i)&&tc(r))return KM(i,r.getFilters());const a=mw(i)?i:r,u=mw(i)?r:i,h=a.filters.map(d=>Ub(d,u));return mt.create(h,"or")}(e,t),Wp(n)}function tx(e,t){if(tc(t))return KM(t,e.getFilters());{const n=t.filters.map(s=>Ub(e,s));return mt.create(n,"or")}}function Wp(e){if(_e(e instanceof Qe||e instanceof mt),e instanceof Qe)return e;const t=e.getFilters();if(t.length===1)return Wp(t[0]);if(qM(e))return e;const n=t.map(i=>Wp(i)),s=[];return n.forEach(i=>{i instanceof Qe?s.push(i):i instanceof mt&&(i.op===e.op?s.push(...i.filters):s.push(i))}),s.length===1?s[0]:mt.create(s,e.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(){this.Tn=new Wb}addToCollectionParentIndex(t,n){return this.Tn.add(n),Q.resolve()}getCollectionParents(t,n){return Q.resolve(this.Tn.getEntries(n))}addFieldIndex(t,n){return Q.resolve()}deleteFieldIndex(t,n){return Q.resolve()}deleteAllFieldIndexes(t){return Q.resolve()}createTargetIndexes(t,n){return Q.resolve()}getDocumentsMatchingTarget(t,n){return Q.resolve(null)}getIndexType(t,n){return Q.resolve(0)}getFieldIndexes(t,n){return Q.resolve([])}getNextCollectionGroupToUpdate(t){return Q.resolve(null)}getMinOffset(t,n){return Q.resolve(Es.min())}getMinOffsetFromCollectionGroup(t,n){return Q.resolve(Es.min())}updateCollectionGroup(t,n,s){return Q.resolve()}updateIndexEntries(t,n){return Q.resolve()}}class Wb{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n]||new Ct(Ye.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(t){return(this.index[t]||new Ct(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx="IndexedDbIndexManager",Lg=new Uint8Array(0);class p8{constructor(t,n){this.databaseId=n,this.In=new Wb,this.En=new Mr(s=>dl(s),(s,i)=>Gd(s,i)),this.uid=t.uid||""}addToCollectionParentIndex(t,n){if(!this.In.has(n)){const s=n.lastSegment(),i=n.popLast();t.addOnCommittedListener(()=>{this.In.add(n)});const r={collectionId:s,parent:jn(i)};return sx(t).put(r)}return Q.resolve()}getCollectionParents(t,n){const s=[],i=IDBKeyRange.bound([n,""],[yM(n),""],!1,!0);return sx(t).G(i).next(r=>{for(const a of r){if(a.collectionId!==n)break;s.push(Ii(a.parent))}return s})}addFieldIndex(t,n){const s=kh(t),i=function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])}}(n);delete i.indexId;const r=s.add(i);if(n.indexState){const a=yu(t);return r.next(u=>{a.put(YA(u,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return r.next()}deleteFieldIndex(t,n){const s=kh(t),i=yu(t),r=vu(t);return s.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const n=kh(t),s=vu(t),i=yu(t);return n.J().next(()=>s.J()).next(()=>i.J())}createTargetIndexes(t,n){return Q.forEach(this.dn(n),s=>this.getIndexType(t,s).next(i=>{if(i===0||i===1){const r=new ex(s).Pn();if(r!=null)return this.addFieldIndex(t,r)}}))}getDocumentsMatchingTarget(t,n){const s=vu(t);let i=!0;const r=new Map;return Q.forEach(this.dn(n),a=>this.An(t,a).next(u=>{i&&(i=!!u),r.set(a,u)})).next(()=>{if(i){let a=He();const u=[];return Q.forEach(r,(h,d)=>{ge(nx,`Using index ${function(H){return`id=${H.indexId}|cg=${H.collectionGroup}|f=${H.fields.map(z=>`${z.fieldPath}:${z.kind}`).join(",")}`}(h)} to execute ${dl(n)}`);const g=function(H,z){const U=uw(z);if(U===void 0)return null;for(const K of Hp(H,U.fieldPath))switch(K.op){case"array-contains-any":return K.value.arrayValue.values||[];case"array-contains":return[K.value]}return null}(d,h),m=function(H,z){const U=new Map;for(const K of Va(z))for(const k of Hp(H,K.fieldPath))switch(k.op){case"==":case"in":U.set(K.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return U.set(K.fieldPath.canonicalString(),k.value),Array.from(U.values())}return null}(d,h),v=function(H,z){const U=[];let K=!0;for(const k of Va(z)){const D=k.kind===0?OA(H,k.fieldPath,H.startAt):kA(H,k.fieldPath,H.startAt);U.push(D.value),K&&(K=D.inclusive)}return new Wo(U,K)}(d,h),w=function(H,z){const U=[];let K=!0;for(const k of Va(z)){const D=k.kind===0?kA(H,k.fieldPath,H.endAt):OA(H,k.fieldPath,H.endAt);U.push(D.value),K&&(K=D.inclusive)}return new Wo(U,K)}(d,h),S=this.Rn(h,d,v),T=this.Rn(h,d,w),A=this.Vn(h,d,m),O=this.mn(h.indexId,g,S,v.inclusive,T,w.inclusive,A);return Q.forEach(O,V=>s.H(V,n.limit).next(H=>{H.forEach(z=>{const U=Se.fromSegments(z.documentKey);a.has(U)||(a=a.add(U),u.push(U))})}))}).next(()=>u)}return Q.resolve(null)})}dn(t){let n=this.En.get(t);return n||(t.filters.length===0?n=[t]:n=f8(mt.create(t.filters,"and")).map(s=>vw(t.path,t.collectionGroup,t.orderBy,s.getFilters(),t.limit,t.startAt,t.endAt)),this.En.set(t,n),n)}mn(t,n,s,i,r,a,u){const h=(n!=null?n.length:1)*Math.max(s.length,r.length),d=h/(n!=null?n.length:1),g=[];for(let m=0;m<h;++m){const v=n?this.fn(n[m/d]):Lg,w=this.gn(t,v,s[m%d],i),S=this.pn(t,v,r[m%d],a),T=u.map(A=>this.gn(t,v,A,!0));g.push(...this.createRange(w,S,T))}return g}gn(t,n,s,i){const r=new ja(t,Se.empty(),n,s);return i?r:r.nn()}pn(t,n,s,i){const r=new ja(t,Se.empty(),n,s);return i?r.nn():r}An(t,n){const s=new ex(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(t,i).next(r=>{let a=null;for(const u of r)s.un(u)&&(!a||u.fields.length>a.fields.length)&&(a=u);return a})}getIndexType(t,n){let s=2;const i=this.dn(n);return Q.forEach(i,r=>this.An(t,r).next(a=>{a?s!==0&&a.fields.length<function(h){let d=new Ct(Ft.comparator),g=!1;for(const m of h.filters)for(const v of m.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?g=!0:d=d.add(v.field));for(const m of h.orderBy)m.field.isKeyField()||(d=d.add(m.field));return d.size+(g?1:0)}(r)&&(s=1):s=0})).next(()=>function(a){return a.limit!==null}(n)&&i.length>1&&s===2?1:s)}yn(t,n){const s=new Oh;for(const i of Va(t)){const r=n.data.field(i.fieldPath);if(r==null)return null;const a=s.tn(i.kind);Wa.xt.At(r,a)}return s.Yt()}fn(t){const n=new Oh;return Wa.xt.At(t,n.tn(0)),n.Yt()}wn(t,n){const s=new Oh;return Wa.xt.At(hl(this.databaseId,n),s.tn(function(r){const a=Va(r);return a.length===0?0:a[a.length-1].kind}(t))),s.Yt()}Vn(t,n,s){if(s===null)return[];let i=[];i.push(new Oh);let r=0;for(const a of Va(t)){const u=s[r++];for(const h of i)if(this.bn(n,a.fieldPath)&&bd(u))i=this.Sn(i,a,u);else{const d=h.tn(a.kind);Wa.xt.At(u,d)}}return this.Dn(i)}Rn(t,n,s){return this.Vn(t,n,s.position)}Dn(t){const n=[];for(let s=0;s<t.length;++s)n[s]=t[s].Yt();return n}Sn(t,n,s){const i=[...t],r=[];for(const a of s.arrayValue.values||[])for(const u of i){const h=new Oh;h.seed(u.Yt()),Wa.xt.At(a,h.tn(n.kind)),r.push(h)}return r}bn(t,n){return!!t.filters.find(s=>s instanceof Qe&&s.field.isEqual(n)&&(s.op==="in"||s.op==="not-in"))}getFieldIndexes(t,n){const s=kh(t),i=yu(t);return(n?s.G(hw,IDBKeyRange.bound(n,n)):s.G()).next(r=>{const a=[];return Q.forEach(r,u=>i.get([u.indexId,this.uid]).next(h=>{a.push(function(g,m){const v=m?new gd(m.sequenceNumber,new Es(ml(m.readTime),new Se(Ii(m.documentKey)),m.largestBatchId)):gd.empty(),w=g.fields.map(([S,T])=>new Qg(Ft.fromServerFormat(S),T));return new Pp(g.indexId,g.collectionGroup,w,v)}(u,h))})).next(()=>a)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(n=>n.length===0?null:(n.sort((s,i)=>{const r=s.indexState.sequenceNumber-i.indexState.sequenceNumber;return r!==0?r:Ve(s.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(t,n,s){const i=kh(t),r=yu(t);return this.vn(t).next(a=>i.G(hw,IDBKeyRange.bound(n,n)).next(u=>Q.forEach(u,h=>r.put(YA(h.indexId,this.uid,a,s)))))}updateIndexEntries(t,n){const s=new Map;return Q.forEach(n,(i,r)=>{const a=s.get(i.collectionGroup);return(a?Q.resolve(a):this.getFieldIndexes(t,i.collectionGroup)).next(u=>(s.set(i.collectionGroup,u),Q.forEach(u,h=>this.Cn(t,i,h).next(d=>{const g=this.Fn(r,h);return d.isEqual(g)?Q.resolve():this.Mn(t,r,h,d,g)}))))})}xn(t,n,s,i){return vu(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.wn(s,n.key),documentKey:n.key.path.toArray()})}On(t,n,s,i){return vu(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.wn(s,n.key),n.key.path.toArray()])}Cn(t,n,s){const i=vu(t);let r=new Ct(vo);return i.Z({index:IM,range:IDBKeyRange.only([s.indexId,this.uid,this.wn(s,n)])},(a,u)=>{r=r.add(new ja(s.indexId,n,u.arrayValue,u.directionalValue))}).next(()=>r)}Fn(t,n){let s=new Ct(vo);const i=this.yn(n,t);if(i==null)return s;const r=uw(n);if(r!=null){const a=t.data.field(r.fieldPath);if(bd(a))for(const u of a.arrayValue.values||[])s=s.add(new ja(n.indexId,t.key,this.fn(u),i))}else s=s.add(new ja(n.indexId,t.key,Lg,i));return s}Mn(t,n,s,i,r){ge(nx,"Updating index entries for document '%s'",n.key);const a=[];return function(h,d,g,m,v){const w=h.getIterator(),S=d.getIterator();let T=mu(w),A=mu(S);for(;T||A;){let O=!1,V=!1;if(T&&A){const H=g(T,A);H<0?V=!0:H>0&&(O=!0)}else T!=null?V=!0:O=!0;O?(m(A),A=mu(S)):V?(v(T),T=mu(w)):(T=mu(w),A=mu(S))}}(i,r,vo,u=>{a.push(this.xn(t,n,s,u))},u=>{a.push(this.On(t,n,s,u))}),Q.waitFor(a)}vn(t){let n=1;return yu(t).Z({index:_M,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,i,r)=>{r.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(t,n,s){s=s.sort((a,u)=>vo(a,u)).filter((a,u,h)=>!u||vo(a,h[u-1])!==0);const i=[];i.push(t);for(const a of s){const u=vo(a,t),h=vo(a,n);if(u===0)i[0]=t.nn();else if(u>0&&h<0)i.push(a),i.push(a.nn());else if(h>0)break}i.push(n);const r=[];for(let a=0;a<i.length;a+=2){if(this.Nn(i[a],i[a+1]))return[];const u=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,Lg,[]],h=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,Lg,[]];r.push(IDBKeyRange.bound(u,h))}return r}Nn(t,n){return vo(t,n)>0}getMinOffsetFromCollectionGroup(t,n){return this.getFieldIndexes(t,n).next(ix)}getMinOffset(t,n){return Q.mapArray(this.dn(n),s=>this.An(t,s).next(i=>i||Te())).next(ix)}}function sx(e){return vn(e,vd)}function vu(e){return vn(e,Vp)}function kh(e){return vn(e,xb)}function yu(e){return vn(e,Np)}function ix(e){_e(e.length!==0);let t=e[0].indexState.offset,n=t.largestBatchId;for(let s=1;s<e.length;s++){const i=e[s].indexState.offset;Rb(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Es(t.readTime,t.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LF=41943040;class zn{static withCacheSize(t){return new zn(t,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OF(e,t,n){const s=e.store(ei),i=e.store(Yu),r=[],a=IDBKeyRange.only(n.batchId);let u=0;const h=s.Z({range:a},(g,m,v)=>(u++,v.delete()));r.push(h.next(()=>{_e(u===1)}));const d=[];for(const g of n.mutations){const m=AM(t,g.key.path,n.batchId);r.push(i.delete(m)),d.push(g.key)}return Q.waitFor(r).next(()=>d)}function jp(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Te();t=e.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(LF,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);class Em{constructor(t,n,s,i){this.userId=t,this.serializer=n,this.indexManager=s,this.referenceDelegate=i,this.Bn={}}static It(t,n,s,i){_e(t.uid!=="");const r=t.isAuthenticated()?t.uid:"";return new Em(r,n,s,i)}checkEmpty(t){let n=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yo(t).Z({index:$a,range:s},(i,r,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(t,n,s,i){const r=Au(t),a=yo(t);return a.add({}).next(u=>{_e(typeof u=="number");const h=new Nb(u,n,s,i),d=function(w,S,T){const A=T.baseMutations.map(V=>Rd(w.Tt,V)),O=T.mutations.map(V=>Rd(w.Tt,V));return{userId:S,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:A,mutations:O}}(this.serializer,this.userId,h),g=[];let m=new Ct((v,w)=>Ve(v.canonicalString(),w.canonicalString()));for(const v of i){const w=AM(this.userId,v.key.path,u);m=m.add(v.key.path.popLast()),g.push(a.put(d)),g.push(r.put(w,Yj))}return m.forEach(v=>{g.push(this.indexManager.addToCollectionParentIndex(t,v))}),t.addOnCommittedListener(()=>{this.Bn[u]=h.keys()}),Q.waitFor(g).next(()=>h)})}lookupMutationBatch(t,n){return yo(t).get(n).next(s=>s?(_e(s.userId===this.userId),Ua(this.serializer,s)):null)}Ln(t,n){return this.Bn[n]?Q.resolve(this.Bn[n]):this.lookupMutationBatch(t,n).next(s=>{if(s){const i=s.keys();return this.Bn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(t,n){const s=n+1,i=IDBKeyRange.lowerBound([this.userId,s]);let r=null;return yo(t).Z({index:$a,range:i},(a,u,h)=>{u.userId===this.userId&&(_e(u.batchId>=s),r=Ua(this.serializer,u)),h.done()}).next(()=>r)}getHighestUnacknowledgedBatchId(t){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=Lo;return yo(t).Z({index:$a,range:n,reverse:!0},(i,r,a)=>{s=r.batchId,a.done()}).next(()=>s)}getAllMutationBatches(t){const n=IDBKeyRange.bound([this.userId,Lo],[this.userId,Number.POSITIVE_INFINITY]);return yo(t).G($a,n).next(s=>s.map(i=>Ua(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(t,n){const s=Xg(this.userId,n.path),i=IDBKeyRange.lowerBound(s),r=[];return Au(t).Z({range:i},(a,u,h)=>{const[d,g,m]=a,v=Ii(g);if(d===this.userId&&n.path.isEqual(v))return yo(t).get(m).next(w=>{if(!w)throw Te();_e(w.userId===this.userId),r.push(Ua(this.serializer,w))});h.done()}).next(()=>r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Ct(Ve);const i=[];return n.forEach(r=>{const a=Xg(this.userId,r.path),u=IDBKeyRange.lowerBound(a),h=Au(t).Z({range:u},(d,g,m)=>{const[v,w,S]=d,T=Ii(w);v===this.userId&&r.path.isEqual(T)?s=s.add(S):m.done()});i.push(h)}),Q.waitFor(i).next(()=>this.kn(t,s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,i=s.length+1,r=Xg(this.userId,s),a=IDBKeyRange.lowerBound(r);let u=new Ct(Ve);return Au(t).Z({range:a},(h,d,g)=>{const[m,v,w]=h,S=Ii(v);m===this.userId&&s.isPrefixOf(S)?S.length===i&&(u=u.add(w)):g.done()}).next(()=>this.kn(t,u))}kn(t,n){const s=[],i=[];return n.forEach(r=>{i.push(yo(t).get(r).next(a=>{if(a===null)throw Te();_e(a.userId===this.userId),s.push(Ua(this.serializer,a))}))}),Q.waitFor(i).next(()=>s)}removeMutationBatch(t,n){return OF(t.ue,this.userId,n).next(s=>(t.addOnCommittedListener(()=>{this.qn(n.batchId)}),Q.forEach(s,i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))}qn(t){delete this.Bn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(n=>{if(!n)return Q.resolve();const s=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),i=[];return Au(t).Z({range:s},(r,a,u)=>{if(r[0]===this.userId){const h=Ii(r[1]);i.push(h)}else u.done()}).next(()=>{_e(i.length===0)})})}containsKey(t,n){return kF(t,this.userId,n)}Qn(t){return NF(t).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Lo,lastStreamToken:""})}}function kF(e,t,n){const s=Xg(t,n.path),i=s[1],r=IDBKeyRange.lowerBound(s);let a=!1;return Au(e).Z({range:r,Y:!0},(u,h,d)=>{const[g,m,v]=u;g===t&&m===i&&(a=!0),d.done()}).next(()=>a)}function yo(e){return vn(e,ei)}function Au(e){return vn(e,Yu)}function NF(e){return vn(e,md)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Kn(){return new Cl(0)}static Un(){return new Cl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(t,n){this.referenceDelegate=t,this.serializer=n}allocateTargetId(t){return this.Wn(t).next(n=>{const s=new Cl(n.highestTargetId);return n.highestTargetId=s.next(),this.Gn(t,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Wn(t).next(n=>Fe.fromTimestamp(new Lt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Wn(t).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(t,n,s){return this.Wn(t).next(i=>(i.highestListenSequenceNumber=n,s&&(i.lastRemoteSnapshotVersion=s.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Gn(t,i)))}addTargetData(t,n){return this.zn(t,n).next(()=>this.Wn(t).next(s=>(s.targetCount+=1,this.jn(n,s),this.Gn(t,s))))}updateTargetData(t,n){return this.zn(t,n)}removeTargetData(t,n){return this.removeMatchingKeysForTargetId(t,n.targetId).next(()=>wu(t).delete(n.targetId)).next(()=>this.Wn(t)).next(s=>(_e(s.targetCount>0),s.targetCount-=1,this.Gn(t,s)))}removeTargets(t,n,s){let i=0;const r=[];return wu(t).Z((a,u)=>{const h=Uh(u);h.sequenceNumber<=n&&s.get(h.targetId)===null&&(i++,r.push(this.removeTargetData(t,h)))}).next(()=>Q.waitFor(r)).next(()=>i)}forEachTarget(t,n){return wu(t).Z((s,i)=>{const r=Uh(i);n(r)})}Wn(t){return ox(t).get(kp).next(n=>(_e(n!==null),n))}Gn(t,n){return ox(t).put(kp,n)}zn(t,n){return wu(t).put(MF(this.serializer,n))}jn(t,n){let s=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,s=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,s=!0),s}getTargetCount(t){return this.Wn(t).next(n=>n.targetCount)}getTargetData(t,n){const s=dl(n),i=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let r=null;return wu(t).Z({range:i,index:DM},(a,u,h)=>{const d=Uh(u);Gd(n,d.target)&&(r=d,h.done())}).next(()=>r)}addMatchingKeys(t,n,s){const i=[],r=xo(t);return n.forEach(a=>{const u=jn(a.path);i.push(r.put({targetId:s,path:u})),i.push(this.referenceDelegate.addReference(t,s,a))}),Q.waitFor(i)}removeMatchingKeys(t,n,s){const i=xo(t);return Q.forEach(n,r=>{const a=jn(r.path);return Q.waitFor([i.delete([s,a]),this.referenceDelegate.removeReference(t,s,r)])})}removeMatchingKeysForTargetId(t,n){const s=xo(t),i=IDBKeyRange.bound([n],[n+1],!1,!0);return s.delete(i)}getMatchingKeysForTargetId(t,n){const s=IDBKeyRange.bound([n],[n+1],!1,!0),i=xo(t);let r=He();return i.Z({range:s,Y:!0},(a,u,h)=>{const d=Ii(a[1]),g=new Se(d);r=r.add(g)}).next(()=>r)}containsKey(t,n){const s=jn(n.path),i=IDBKeyRange.bound([s],[yM(s)],!1,!0);let r=0;return xo(t).Z({index:Ab,Y:!0,range:i},([a,u],h,d)=>{a!==0&&(r++,d.done())}).next(()=>r>0)}lt(t,n){return wu(t).get(n).next(s=>s?Uh(s):null)}}function wu(e){return vn(e,Qu)}function ox(e){return vn(e,il)}function xo(e){return vn(e,Xu)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="LruGarbageCollector",C8=1048576;function lx([e,t],[n,s]){const i=Ve(e,n);return i===0?Ve(t,s):i}class v8{constructor(t){this.Hn=t,this.buffer=new Ct(lx),this.Jn=0}Yn(){return++this.Jn}Zn(t){const n=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();lx(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class VF{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){ge(ax,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Qo(n)?ge(ax,"Ignoring IndexedDB error during garbage collection: ",n):await Yo(n)}await this.er(3e5)})}}class y8{constructor(t,n){this.tr=t,this.params=n}calculateTargetCount(t,n){return this.tr.nr(t).next(s=>Math.floor(n/100*s))}nthSequenceNumber(t,n){if(n===0)return Q.resolve(hs.ae);const s=new v8(n);return this.tr.forEachTarget(t,i=>s.Zn(i.sequenceNumber)).next(()=>this.tr.rr(t,i=>s.Zn(i))).next(()=>s.maxValue)}removeTargets(t,n,s){return this.tr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.tr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(rx)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rx):this.ir(t,n))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,n){let s,i,r,a,u,h,d;const g=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,a=Date.now(),this.nthSequenceNumber(t,i))).next(m=>(s=m,u=Date.now(),this.removeTargets(t,s,n))).next(m=>(r=m,h=Date.now(),this.removeOrphanedDocuments(t,s))).next(m=>(d=Date.now(),Su()<=Ze.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-g}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${r} targets in `+(h-u)+`ms
	Removed ${m} documents in `+(d-h)+`ms
Total Duration: ${d-g}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:m})))}}function BF(e,t){return new y8(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(t,n){this.db=t,this.garbageCollector=BF(this,n)}nr(t){const n=this.sr(t);return this.db.getTargetCache().getTargetCount(t).next(s=>n.next(i=>s+i))}sr(t){let n=0;return this.rr(t,s=>{n++}).next(()=>n)}forEachTarget(t,n){return this.db.getTargetCache().forEachTarget(t,n)}rr(t,n){return this._r(t,(s,i)=>n(i))}addReference(t,n,s){return Og(t,s)}removeReference(t,n,s){return Og(t,s)}removeTargets(t,n,s){return this.db.getTargetCache().removeTargets(t,n,s)}markPotentiallyOrphaned(t,n){return Og(t,n)}ar(t,n){return function(i,r){let a=!1;return NF(i).X(u=>kF(i,u,r).next(h=>(h&&(a=!0),Q.resolve(!h)))).next(()=>a)}(t,n)}removeOrphanedDocuments(t,n){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let r=0;return this._r(t,(a,u)=>{if(u<=n){const h=this.ar(t,a).next(d=>{if(!d)return r++,s.getEntry(t,a).next(()=>(s.removeEntry(a,Fe.min()),xo(t).delete(function(m){return[0,jn(m.path)]}(a))))});i.push(h)}}).next(()=>Q.waitFor(i)).next(()=>s.apply(t)).next(()=>r)}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,s)}updateLimboDocument(t,n){return Og(t,n)}_r(t,n){const s=xo(t);let i,r=hs.ae;return s.Z({index:Ab},([a,u],{path:h,sequenceNumber:d})=>{a===0?(r!==hs.ae&&n(new Se(Ii(i)),r),r=d,i=h):r=hs.ae}).next(()=>{r!==hs.ae&&n(new Se(Ii(i)),r)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Og(e,t){return xo(e).put(function(s,i){return{targetId:0,path:jn(s.path),sequenceNumber:i}}(t,e.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(){this.changes=new Mr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,It.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?Q.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,n,s){return Pa(t).put(s)}removeEntry(t,n,s){return Pa(t).delete(function(r,a){const u=r.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],Up(a),u[u.length-1]]}(n,s))}updateMetadata(t,n){return this.getMetadata(t).next(s=>(s.byteSize+=n,this.ur(t,s)))}getEntry(t,n){let s=It.newInvalidDocument(n);return Pa(t).Z({index:Zg,range:IDBKeyRange.only(Nh(n))},(i,r)=>{s=this.cr(n,r)}).next(()=>s)}lr(t,n){let s={size:0,document:It.newInvalidDocument(n)};return Pa(t).Z({index:Zg,range:IDBKeyRange.only(Nh(n))},(i,r)=>{s={document:this.cr(n,r),size:jp(r)}}).next(()=>s)}getEntries(t,n){let s=fs();return this.hr(t,n,(i,r)=>{const a=this.cr(i,r);s=s.insert(i,a)}).next(()=>s)}Pr(t,n){let s=fs(),i=new xt(Se.comparator);return this.hr(t,n,(r,a)=>{const u=this.cr(r,a);s=s.insert(r,u),i=i.insert(r,jp(a))}).next(()=>({documents:s,Tr:i}))}hr(t,n,s){if(n.isEmpty())return Q.resolve();let i=new Ct(hx);n.forEach(h=>i=i.add(h));const r=IDBKeyRange.bound(Nh(i.first()),Nh(i.last())),a=i.getIterator();let u=a.getNext();return Pa(t).Z({index:Zg,range:r},(h,d,g)=>{const m=Se.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;u&&hx(u,m)<0;)s(u,null),u=a.getNext();u&&u.isEqual(m)&&(s(u,d),u=a.hasNext()?a.getNext():null),u?g.W(Nh(u)):g.done()}).next(()=>{for(;u;)s(u,null),u=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(t,n,s,i,r){const a=n.path,u=[a.popLast().toArray(),a.lastSegment(),Up(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],h=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Pa(t).G(IDBKeyRange.bound(u,h,!0)).next(d=>{r==null||r.incrementDocumentReadCount(d.length);let g=fs();for(const m of d){const v=this.cr(Se.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);v.isFoundDocument()&&(zd(n,v)||i.has(v.key))&&(g=g.insert(v.key,v))}return g})}getAllFromCollectionGroup(t,n,s,i){let r=fs();const a=cx(n,s),u=cx(n,Es.max());return Pa(t).Z({index:xM,range:IDBKeyRange.bound(a,u,!0)},(h,d,g)=>{const m=this.cr(Se.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);r=r.insert(m.key,m),r.size===i&&g.done()}).next(()=>r)}newChangeBuffer(t){return new S8(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(n=>n.byteSize)}getMetadata(t){return ux(t).get(cw).next(n=>(_e(!!n),n))}ur(t,n){return ux(t).put(cw,n)}cr(t,n){if(n){const s=o8(this.serializer,n);if(!(s.isNoDocument()&&s.version.isEqual(Fe.min())))return s}return It.newInvalidDocument(t)}}function HF(e){return new b8(e)}class S8 extends GF{constructor(t,n){super(),this.Ir=t,this.trackRemovals=n,this.Er=new Mr(s=>s.toString(),(s,i)=>s.isEqual(i))}applyChanges(t){const n=[];let s=0,i=new Ct((r,a)=>Ve(r.canonicalString(),a.canonicalString()));return this.changes.forEach((r,a)=>{const u=this.Er.get(r);if(n.push(this.Ir.removeEntry(t,r,u.readTime)),a.isValidDocument()){const h=$A(this.Ir.serializer,a);i=i.add(r.path.popLast());const d=jp(h);s+=d-u.size,n.push(this.Ir.addEntry(t,r,h))}else if(s-=u.size,this.trackRemovals){const h=$A(this.Ir.serializer,a.convertToNoDocument(Fe.min()));n.push(this.Ir.addEntry(t,r,h))}}),i.forEach(r=>{n.push(this.Ir.indexManager.addToCollectionParentIndex(t,r))}),n.push(this.Ir.updateMetadata(t,s)),Q.waitFor(n)}getFromCache(t,n){return this.Ir.lr(t,n).next(s=>(this.Er.set(n,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(t,n){return this.Ir.Pr(t,n).next(({documents:s,Tr:i})=>(i.forEach((r,a)=>{this.Er.set(r,{size:a,readTime:s.get(r).readTime})}),s))}}function ux(e){return vn(e,Cd)}function Pa(e){return vn(e,Op)}function Nh(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function cx(e,t){const n=t.documentKey.path.toArray();return[e,Up(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function hx(e,t){const n=e.path.toArray(),s=t.path.toArray();let i=0;for(let r=0;r<n.length-2&&r<s.length-2;++r)if(i=Ve(n[r],s[r]),i)return i;return i=Ve(n.length,s.length),i||(i=Ve(n[n.length-2],s[s.length-2]),i||Ve(n[n.length-1],s[s.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(t,n,s,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(s!==null&&td(s.mutation,i,ds.empty(),Lt.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,He()).next(()=>s))}getLocalViewOfDocuments(t,n,s=He()){const i=Mi();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,s).next(r=>{let a=Hh();return r.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const s=Mi();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,He()))}populateOverlays(t,n,s){const i=[];return s.forEach(r=>{n.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(t,i).next(r=>{r.forEach((a,u)=>{n.set(a,u)})})}computeViews(t,n,s,i){let r=fs();const a=ed(),u=function(){return ed()}();return n.forEach((h,d)=>{const g=s.get(d.key);i.has(d.key)&&(g===void 0||g.mutation instanceof Fr)?r=r.insert(d.key,d):g!==void 0?(a.set(d.key,g.mutation.getFieldMask()),td(g.mutation,d,g.mutation.getFieldMask(),Lt.now())):a.set(d.key,ds.empty())}),this.recalculateAndSaveOverlays(t,r).next(h=>(h.forEach((d,g)=>a.set(d,g)),n.forEach((d,g)=>{var m;return u.set(d,new E8(g,(m=a.get(d))!==null&&m!==void 0?m:null))}),u))}recalculateAndSaveOverlays(t,n){const s=ed();let i=new xt((a,u)=>a-u),r=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const u of a)u.keys().forEach(h=>{const d=n.get(h);if(d===null)return;let g=s.get(h)||ds.empty();g=u.applyToLocalView(d,g),s.set(h,g);const m=(i.get(u.batchId)||He()).add(h);i=i.insert(u.batchId,m)})}).next(()=>{const a=[],u=i.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),d=h.key,g=h.value,m=iF();g.forEach(v=>{if(!r.has(v)){const w=hF(n.get(v),s.get(v));w!==null&&m.set(v,w),r=r.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(t,d,m))}return Q.waitFor(a)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,i){return function(a){return Se.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Pb(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,i):this.getDocumentsMatchingCollectionQuery(t,n,s,i)}getNextDocuments(t,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,i).next(r=>{const a=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,i-r.size):Q.resolve(Mi());let u=Ku,h=r;return a.next(d=>Q.forEach(d,(g,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),r.get(g)?Q.resolve():this.remoteDocumentCache.getEntry(t,g).next(v=>{h=h.insert(g,v)}))).next(()=>this.populateOverlays(t,d,r)).next(()=>this.computeViews(t,h,d,He())).next(g=>({batchId:u,changes:sF(g)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Se(n)).next(s=>{let i=Hh();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,s,i){const r=n.collectionGroup;let a=Hh();return this.indexManager.getCollectionParents(t,r).next(u=>Q.forEach(u,h=>{const d=function(m,v){return new Ir(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,h.child(r));return this.getDocumentsMatchingCollectionQuery(t,d,s,i).next(g=>{g.forEach((m,v)=>{a=a.insert(m,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,r,i))).next(a=>{r.forEach((h,d)=>{const g=d.getKey();a.get(g)===null&&(a=a.insert(g,It.newInvalidDocument(g)))});let u=Hh();return a.forEach((h,d)=>{const g=r.get(h);g!==void 0&&td(g.mutation,d,ds.empty(),Lt.now()),zd(n,d)&&(u=u.insert(h,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,n){return Q.resolve(this.dr.get(n))}saveBundleMetadata(t,n){return this.dr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:tn(i.createTime)}}(n)),Q.resolve()}getNamedQuery(t,n){return Q.resolve(this.Ar.get(n))}saveNamedQuery(t,n){return this.Ar.set(n.name,function(i){return{name:i.name,query:zb(i.bundledQuery),readTime:tn(i.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(){this.overlays=new xt(Se.comparator),this.Rr=new Map}getOverlay(t,n){return Q.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Mi();return Q.forEach(n,i=>this.getOverlay(t,i).next(r=>{r!==null&&s.set(i,r)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((i,r)=>{this.Et(t,n,r)}),Q.resolve()}removeOverlaysForBatchId(t,n,s){const i=this.Rr.get(s);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.Rr.delete(s)),Q.resolve()}getOverlaysForCollection(t,n,s){const i=Mi(),r=n.length+1,a=new Se(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,d=h.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===r&&h.largestBatchId>s&&i.set(h.getKey(),h)}return Q.resolve(i)}getOverlaysForCollectionGroup(t,n,s,i){let r=new xt((d,g)=>d-g);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let g=r.get(d.largestBatchId);g===null&&(g=Mi(),r=r.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}const u=Mi(),h=r.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((d,g)=>u.set(d,g)),!(u.size()>=i)););return Q.resolve(u)}Et(t,n,s){const i=this.overlays.get(s.key);if(i!==null){const a=this.Rr.get(i.largestBatchId).delete(s.key);this.Rr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(s.key,new Bb(n,s));let r=this.Rr.get(n);r===void 0&&(r=He(),this.Rr.set(n,r)),this.Rr.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(t){return Q.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(){this.Vr=new Ct(An.mr),this.gr=new Ct(An.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,n){const s=new An(t,n);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.wr(new An(t,n))}br(t,n){t.forEach(s=>this.removeReference(s,n))}Sr(t){const n=new Se(new Ye([])),s=new An(n,t),i=new An(n,t+1),r=[];return this.gr.forEachInRange([s,i],a=>{this.wr(a),r.push(a.key)}),r}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const n=new Se(new Ye([])),s=new An(n,t),i=new An(n,t+1);let r=He();return this.gr.forEachInRange([s,i],a=>{r=r.add(a.key)}),r}containsKey(t){const n=new An(t,0),s=this.Vr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class An{constructor(t,n){this.key=t,this.Cr=n}static mr(t,n){return Se.comparator(t.key,n.key)||Ve(t.Cr,n.Cr)}static pr(t,n){return Ve(t.Cr,n.Cr)||Se.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Ct(An.mr)}checkEmpty(t){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,i){const r=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Nb(r,n,s,i);this.mutationQueue.push(a);for(const u of i)this.Mr=this.Mr.add(new An(u.key,r)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast());return Q.resolve(a)}lookupMutationBatch(t,n){return Q.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,i=this.Nr(s),r=i<0?0:i;return Q.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?Lo:this.Fr-1)}getAllMutationBatches(t){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new An(n,0),i=new An(n,Number.POSITIVE_INFINITY),r=[];return this.Mr.forEachInRange([s,i],a=>{const u=this.Or(a.Cr);r.push(u)}),Q.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Ct(Ve);return n.forEach(i=>{const r=new An(i,0),a=new An(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([r,a],u=>{s=s.add(u.Cr)})}),Q.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,i=s.length+1;let r=s;Se.isDocumentKey(r)||(r=r.child(""));const a=new An(new Se(r),0);let u=new Ct(Ve);return this.Mr.forEachWhile(h=>{const d=h.key.path;return!!s.isPrefixOf(d)&&(d.length===i&&(u=u.add(h.Cr)),!0)},a),Q.resolve(this.Br(u))}Br(t){const n=[];return t.forEach(s=>{const i=this.Or(s);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){_e(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return Q.forEach(n.mutations,i=>{const r=new An(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Mr=s})}qn(t){}containsKey(t,n){const s=new An(n,0),i=this.Mr.firstAfterOrEqual(s);return Q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Q.resolve()}Lr(t,n){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const n=this.Nr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(t){this.kr=t,this.docs=function(){return new xt(Se.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,a=this.kr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return Q.resolve(s?s.document.mutableCopy():It.newInvalidDocument(n))}getEntries(t,n){let s=fs();return n.forEach(i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():It.newInvalidDocument(i))}),Q.resolve(s)}getDocumentsMatchingQuery(t,n,s,i){let r=fs();const a=n.path,u=new Se(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:d,value:{document:g}}=h.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||Rb(bM(g),s)<=0||(i.has(g.key)||zd(n,g))&&(r=r.insert(g.key,g.mutableCopy()))}return Q.resolve(r)}getAllFromCollectionGroup(t,n,s,i){Te()}qr(t,n){return Q.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new _8(this)}getSize(t){return Q.resolve(this.size)}}class _8 extends GF{constructor(t){super(),this.Ir=t}applyChanges(t){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.Ir.addEntry(t,i)):this.Ir.removeEntry(s)}),Q.waitFor(n)}getFromCache(t,n){return this.Ir.getEntry(t,n)}getAllFromCache(t,n){return this.Ir.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(t){this.persistence=t,this.Qr=new Mr(n=>dl(n),Gd),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.$r=0,this.Kr=new jb,this.targetCount=0,this.Ur=Cl.Kn()}forEachTarget(t,n){return this.Qr.forEach((s,i)=>n(i)),Q.resolve()}getLastRemoteSnapshotVersion(t){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Q.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Ur.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.$r&&(this.$r=n),Q.resolve()}zn(t){this.Qr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Ur=new Cl(n),this.highestTargetId=n),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,n){return this.zn(n),this.targetCount+=1,Q.resolve()}updateTargetData(t,n){return this.zn(n),Q.resolve()}removeTargetData(t,n){return this.Qr.delete(n.target),this.Kr.Sr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(t,n,s){let i=0;const r=[];return this.Qr.forEach((a,u)=>{u.sequenceNumber<=n&&s.get(u.targetId)===null&&(this.Qr.delete(a),r.push(this.removeMatchingKeysForTargetId(t,u.targetId)),i++)}),Q.waitFor(r).next(()=>i)}getTargetCount(t){return Q.resolve(this.targetCount)}getTargetData(t,n){const s=this.Qr.get(n)||null;return Q.resolve(s)}addMatchingKeys(t,n,s){return this.Kr.yr(n,s),Q.resolve()}removeMatchingKeys(t,n,s){this.Kr.br(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach(a=>{r.push(i.markPotentiallyOrphaned(t,a))}),Q.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this.Kr.Sr(n),Q.resolve()}getMatchingKeysForTargetId(t,n){const s=this.Kr.vr(n);return Q.resolve(s)}containsKey(t,n){return Q.resolve(this.Kr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(t,n){this.Wr={},this.overlays={},this.Gr=new hs(0),this.zr=!1,this.zr=!0,this.jr=new A8,this.referenceDelegate=t(this),this.Hr=new I8(this),this.indexManager=new g8,this.remoteDocumentCache=function(i){return new D8(i)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new IF(n),this.Yr=new R8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new T8,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.Wr[t.toKey()];return s||(s=new x8(n,this.referenceDelegate),this.Wr[t.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,n,s){ge("MemoryPersistence","Starting transaction:",t);const i=new M8(this.Gr.next());return this.referenceDelegate.Zr(),s(i).next(r=>this.referenceDelegate.Xr(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}ei(t,n){return Q.or(Object.values(this.Wr).map(s=>()=>s.containsKey(t,n)))}}class M8 extends EM{constructor(t){super(),this.currentSequenceNumber=t}}class Rm{constructor(t){this.persistence=t,this.ti=new jb,this.ni=null}static ri(t){return new Rm(t)}get ii(){if(this.ni)return this.ni;throw Te()}addReference(t,n,s){return this.ti.addReference(s,n),this.ii.delete(s.toString()),Q.resolve()}removeReference(t,n,s){return this.ti.removeReference(s,n),this.ii.add(s.toString()),Q.resolve()}markPotentiallyOrphaned(t,n){return this.ii.add(n.toString()),Q.resolve()}removeTarget(t,n){this.ti.Sr(n.targetId).forEach(i=>this.ii.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(r=>this.ii.add(r.toString()))}).next(()=>s.removeTargetData(t,n))}Zr(){this.ni=new Set}Xr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.ii,s=>{const i=Se.fromPath(s);return this.si(t,i).next(r=>{r||n.removeEntry(i,Fe.min())})}).next(()=>(this.ni=null,n.apply(t)))}updateLimboDocument(t,n){return this.si(t,n).next(s=>{s?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(t){return 0}si(t,n){return Q.or([()=>Q.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.ei(t,n)])}}class qp{constructor(t,n){this.persistence=t,this.oi=new Mr(s=>jn(s.path),(s,i)=>s.isEqual(i)),this.garbageCollector=BF(this,n)}static ri(t,n){return new qp(t,n)}Zr(){}Xr(t){return Q.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}nr(t){const n=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>n.next(i=>s+i))}sr(t){let n=0;return this.rr(t,s=>{n++}).next(()=>n)}rr(t,n){return Q.forEach(this.oi,(s,i)=>this.ar(t,s,i).next(r=>r?Q.resolve():n(i)))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.qr(t,a=>this.ar(t,a,n).next(u=>{u||(s++,r.removeEntry(a,Fe.min()))})).next(()=>r.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,n){return this.oi.set(n,t.currentSequenceNumber),Q.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.oi.set(s,t.currentSequenceNumber),Q.resolve()}removeReference(t,n,s){return this.oi.set(s,t.currentSequenceNumber),Q.resolve()}updateLimboDocument(t,n){return this.oi.set(n,t.currentSequenceNumber),Q.resolve()}Jr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=ep(t.data.value)),n}ar(t,n,s){return Q.or([()=>this.persistence.ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.oi.get(n);return Q.resolve(i!==void 0&&i>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(t){this.serializer=t}B(t,n,s,i){const r=new fm("createOrUpgrade",n);s<1&&i>=1&&(function(h){h.createObjectStore(Bd)}(t),function(h){h.createObjectStore(md,{keyPath:Kj}),h.createObjectStore(ei,{keyPath:EA,autoIncrement:!0}).createIndex($a,RA,{unique:!0}),h.createObjectStore(Yu)}(t),dx(t),function(h){h.createObjectStore(Ba)}(t));let a=Q.resolve();return s<3&&i>=3&&(s!==0&&(function(h){h.deleteObjectStore(Xu),h.deleteObjectStore(Qu),h.deleteObjectStore(il)}(t),dx(t)),a=a.next(()=>function(h){const d=h.store(il),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Fe.min().toTimestamp(),targetCount:0};return d.put(kp,g)}(r))),s<4&&i>=4&&(s!==0&&(a=a.next(()=>function(h,d){return d.store(ei).G().next(m=>{h.deleteObjectStore(ei),h.createObjectStore(ei,{keyPath:EA,autoIncrement:!0}).createIndex($a,RA,{unique:!0});const v=d.store(ei),w=m.map(S=>v.put(S));return Q.waitFor(w)})}(t,r))),a=a.next(()=>{(function(h){h.createObjectStore(Zu,{keyPath:s7})})(t)})),s<5&&i>=5&&(a=a.next(()=>this._i(r))),s<6&&i>=6&&(a=a.next(()=>(function(h){h.createObjectStore(Cd)}(t),this.ai(r)))),s<7&&i>=7&&(a=a.next(()=>this.ui(r))),s<8&&i>=8&&(a=a.next(()=>this.ci(t,r))),s<9&&i>=9&&(a=a.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(t)})),s<10&&i>=10&&(a=a.next(()=>this.li(r))),s<11&&i>=11&&(a=a.next(()=>{(function(h){h.createObjectStore(gm,{keyPath:i7})})(t),function(h){h.createObjectStore(pm,{keyPath:r7})}(t)})),s<12&&i>=12&&(a=a.next(()=>{(function(h){const d=h.createObjectStore(mm,{keyPath:d7});d.createIndex(dw,f7,{unique:!1}),d.createIndex(MM,g7,{unique:!1})})(t)})),s<13&&i>=13&&(a=a.next(()=>function(h){const d=h.createObjectStore(Op,{keyPath:Qj});d.createIndex(Zg,Xj),d.createIndex(xM,Zj)}(t)).next(()=>this.hi(t,r)).next(()=>t.deleteObjectStore(Ba))),s<14&&i>=14&&(a=a.next(()=>this.Pi(t,r))),s<15&&i>=15&&(a=a.next(()=>function(h){h.createObjectStore(xb,{keyPath:o7,autoIncrement:!0}).createIndex(hw,a7,{unique:!1}),h.createObjectStore(Np,{keyPath:l7}).createIndex(_M,u7,{unique:!1}),h.createObjectStore(Vp,{keyPath:c7}).createIndex(IM,h7,{unique:!1})}(t))),s<16&&i>=16&&(a=a.next(()=>{n.objectStore(Np).clear()}).next(()=>{n.objectStore(Vp).clear()})),s<17&&i>=17&&(a=a.next(()=>{(function(h){h.createObjectStore(Db,{keyPath:p7})})(t)})),a}ai(t){let n=0;return t.store(Ba).Z((s,i)=>{n+=jp(i)}).next(()=>{const s={byteSize:n};return t.store(Cd).put(cw,s)})}_i(t){const n=t.store(md),s=t.store(ei);return n.G().next(i=>Q.forEach(i,r=>{const a=IDBKeyRange.bound([r.userId,Lo],[r.userId,r.lastAcknowledgedBatchId]);return s.G($a,a).next(u=>Q.forEach(u,h=>{_e(h.userId===r.userId);const d=Ua(this.serializer,h);return OF(t,r.userId,d).next(()=>{})}))}))}ui(t){const n=t.store(Xu),s=t.store(Ba);return t.store(il).get(kp).next(i=>{const r=[];return s.Z((a,u)=>{const h=new Ye(a),d=function(m){return[0,jn(m)]}(h);r.push(n.get(d).next(g=>g?Q.resolve():(m=>n.put({targetId:0,path:jn(m),sequenceNumber:i.highestListenSequenceNumber}))(h)))}).next(()=>Q.waitFor(r))})}ci(t,n){t.createObjectStore(vd,{keyPath:n7});const s=n.store(vd),i=new Wb,r=a=>{if(i.add(a)){const u=a.lastSegment(),h=a.popLast();return s.put({collectionId:u,parent:jn(h)})}};return n.store(Ba).Z({Y:!0},(a,u)=>{const h=new Ye(a);return r(h.popLast())}).next(()=>n.store(Yu).Z({Y:!0},([a,u,h],d)=>{const g=Ii(u);return r(g.popLast())}))}li(t){const n=t.store(Qu);return n.Z((s,i)=>{const r=Uh(i),a=MF(this.serializer,r);return n.put(a)})}hi(t,n){const s=n.store(Ba),i=[];return s.Z((r,a)=>{const u=n.store(Op),h=function(m){return m.document?new Se(Ye.fromString(m.document.name).popFirst(5)):m.noDocument?Se.fromSegments(m.noDocument.path):m.unknownDocument?Se.fromSegments(m.unknownDocument.path):Te()}(a).path.toArray(),d={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(u.put(d))}).next(()=>Q.waitFor(i))}Pi(t,n){const s=n.store(ei),i=HF(this.serializer),r=new qb(Rm.ri,this.serializer.Tt);return s.G().next(a=>{const u=new Map;return a.forEach(h=>{var d;let g=(d=u.get(h.userId))!==null&&d!==void 0?d:He();Ua(this.serializer,h).keys().forEach(m=>g=g.add(m)),u.set(h.userId,g)}),Q.forEach(u,(h,d)=>{const g=new xn(d),m=Sm.It(this.serializer,g),v=r.getIndexManager(g),w=Em.It(g,this.serializer,v,r.referenceDelegate);return new zF(i,w,m,v).recalculateAndSaveOverlaysForDocumentKeys(new fw(n,hs.ae),h).next()})})}}function dx(e){e.createObjectStore(Xu,{keyPath:e7}).createIndex(Ab,t7,{unique:!0}),e.createObjectStore(Qu,{keyPath:"targetId"}).createIndex(DM,Jj,{unique:!0}),e.createObjectStore(il)}const wo="IndexedDbPersistence",Ty=18e5,Ay=5e3,xy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",UF="main";class $b{constructor(t,n,s,i,r,a,u,h,d,g,m=17){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=s,this.Ti=r,this.window=a,this.document=u,this.Ii=d,this.Ei=g,this.di=m,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=v=>Promise.resolve(),!$b.D())throw new de(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new w8(this,i),this.gi=n+UF,this.serializer=new IF(h),this.pi=new Pi(this.gi,this.di,new F8(this.serializer)),this.jr=new l8,this.Hr=new m8(this.referenceDelegate,this.serializer),this.remoteDocumentCache=HF(this.serializer),this.Yr=new a8,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,g===!1&&en(wo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new de(ne.FAILED_PRECONDITION,xy);return this.bi(),this.Si(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Hr.getHighestSequenceNumber(t))}).then(t=>{this.Gr=new hs(t,this.Ii)}).then(()=>{this.zr=!0}).catch(t=>(this.pi&&this.pi.close(),Promise.reject(t)))}Ci(t){return this.fi=async n=>{if(this.started)return t(n)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.pi.k(async n=>{n.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>kg(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(t).next(n=>{n||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(t)).next(n=>this.isPrimary&&!n?this.xi(t).next(()=>!1):!!n&&this.Oi(t).next(()=>!0))).catch(t=>{if(Qo(t))return ge(wo,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return ge(wo,"Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Ti.enqueueRetryable(()=>this.fi(t)),this.isPrimary=t})}Fi(t){return Vh(t).get(pu).next(n=>Q.resolve(this.Ni(n)))}Bi(t){return kg(t).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,Ty)){this.mi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const s=vn(n,Zu);return s.G().next(i=>{const r=this.qi(i,Ty),a=i.filter(u=>r.indexOf(u)===-1);return Q.forEach(a,u=>s.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(this.yi)for(const n of t)this.yi.removeItem(this.Qi(n.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(t){return!!t&&t.ownerId===this.clientId}Mi(t){return this.Ei?Q.resolve(!0):Vh(t).get(pu).next(n=>{if(n!==null&&this.ki(n.leaseTimestampMs,Ay)&&!this.$i(n.ownerId)){if(this.Ni(n)&&this.networkEnabled)return!0;if(!this.Ni(n)){if(!n.allowTabSynchronization)throw new de(ne.FAILED_PRECONDITION,xy);return!1}}return!(!this.networkEnabled||!this.inForeground)||kg(t).G().next(s=>this.qi(s,Ay).find(i=>{if(this.clientId!==i.clientId){const r=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,u=this.networkEnabled===i.networkEnabled;if(r||a&&u)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&ge(wo,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.zr=!1,this.Ki(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ui(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[Bd,Zu],t=>{const n=new fw(t,hs.ae);return this.xi(n).next(()=>this.Bi(n))}),this.pi.close(),this.Gi()}qi(t,n){return t.filter(s=>this.ki(s.updateTimeMs,n)&&!this.$i(s.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",t=>kg(t).G().next(n=>this.qi(n,Ty).map(s=>s.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(t,n){return Em.It(t,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new p8(t,this.serializer.Tt.databaseId)}getDocumentOverlayCache(t){return Sm.It(this.serializer,t)}getBundleCache(){return this.Yr}runTransaction(t,n,s){ge(wo,"Starting transaction:",t);const i=n==="readonly"?"readonly":"readwrite",r=function(h){return h===17?v7:h===16?C7:h===15?_b:h===14?LM:h===13?PM:h===12?m7:h===11?FM:void Te()}(this.di);let a;return this.pi.runTransaction(t,i,r,u=>(a=new fw(u,this.Gr?this.Gr.next():hs.ae),n==="readwrite-primary"?this.Fi(a).next(h=>!!h||this.Mi(a)).next(h=>{if(!h)throw en(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new de(ne.FAILED_PRECONDITION,SM);return s(a)}).next(h=>this.Oi(a).next(()=>h)):this.ji(a).next(()=>s(a)))).then(u=>(a.raiseOnCommittedEvent(),u))}ji(t){return Vh(t).get(pu).next(n=>{if(n!==null&&this.ki(n.leaseTimestampMs,Ay)&&!this.$i(n.ownerId)&&!this.Ni(n)&&!(this.Ei||this.allowTabSynchronization&&n.allowTabSynchronization))throw new de(ne.FAILED_PRECONDITION,xy)})}Oi(t){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vh(t).put(pu,n)}static D(){return Pi.D()}xi(t){const n=Vh(t);return n.get(pu).next(s=>this.Ni(s)?(ge(wo,"Releasing primary lease."),n.delete(pu)):Q.resolve())}ki(t,n){const s=Date.now();return!(t<s-n)&&(!(t>s)||(en(`Detected an update time that is in the future: ${t} > ${s}`),!1))}bi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ui(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}Si(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.Ai=()=>{this.Ki();const n=/(?:Version|Mobile)\/1[456]/;QI()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(t){var n;try{const s=((n=this.yi)===null||n===void 0?void 0:n.getItem(this.Qi(t)))!==null;return ge(wo,`Client '${t}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return en(wo,"Failed to get zombied client id.",s),!1}}Ki(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(t){en("Failed to set zombie client id.",t)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Vh(e){return vn(e,Bd)}function kg(e){return vn(e,Zu)}function Kb(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(t,n,s,i){this.targetId=t,this.fromCache=n,this.Hi=s,this.Ji=i}static Yi(t,n){let s=He(),i=He();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Yb(t,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return QI()?8:RM(Mp())>0?6:4}()}initialize(t,n){this.ns=t,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(t,n,s,i){const r={result:null};return this.rs(t,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ss(t,n,i,s).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new P8;return this._s(t,n,a).next(u=>{if(r.result=u,this.Xi)return this.us(t,n,a,u.size)})}).next(()=>r.result)}us(t,n,s,i){return s.documentReadCount<this.es?(Su()<=Ze.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Eu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Q.resolve()):(Su()<=Ze.DEBUG&&ge("QueryEngine","Query:",Eu(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.ts*i?(Su()<=Ze.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Eu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ss(n))):Q.resolve())}rs(t,n){if(NA(n))return Q.resolve(null);let s=ss(n);return this.indexManager.getIndexType(t,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=zp(n,null,"F"),s=ss(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(r=>{const a=He(...r);return this.ns.getDocuments(t,a).next(u=>this.indexManager.getMinOffset(t,s).next(h=>{const d=this.cs(n,u);return this.ls(n,d,a,h.readTime)?this.rs(t,zp(n,null,"F")):this.hs(t,d,n,h)}))})))}ss(t,n,s,i){return NA(n)||i.isEqual(Fe.min())?Q.resolve(null):this.ns.getDocuments(t,s).next(r=>{const a=this.cs(n,r);return this.ls(n,a,s,i)?Q.resolve(null):(Su()<=Ze.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Eu(n)),this.hs(t,a,n,wM(i,Ku)).next(u=>u))})}cs(t,n){let s=new Ct(tF(t));return n.forEach((i,r)=>{zd(t,r)&&(s=s.add(r))}),s}ls(t,n,s,i){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}_s(t,n,s){return Su()<=Ze.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Eu(n)),this.ns.getDocumentsMatchingQuery(t,n,Es.min(),s)}hs(t,n,s,i){return this.ns.getDocumentsMatchingQuery(t,s,i).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="LocalStore",L8=3e8;class O8{constructor(t,n,s,i){this.persistence=t,this.Ps=n,this.serializer=i,this.Ts=new xt(Ve),this.Is=new Mr(r=>dl(r),Gd),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(s)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new zF(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ts))}}function jF(e,t,n,s){return new O8(e,t,n,s)}async function qF(e,t){const n=Ee(e);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(r=>(i=r,n.As(t),n.mutationQueue.getAllMutationBatches(s))).next(r=>{const a=[],u=[];let h=He();for(const d of i){a.push(d.batchId);for(const g of d.mutations)h=h.add(g.key)}for(const d of r){u.push(d.batchId);for(const g of d.mutations)h=h.add(g.key)}return n.localDocuments.getDocuments(s,h).next(d=>({Rs:d,removedBatchIds:a,addedBatchIds:u}))})})}function k8(e,t){const n=Ee(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=t.batch.keys(),r=n.ds.newChangeBuffer({trackRemovals:!0});return function(u,h,d,g){const m=d.batch,v=m.keys();let w=Q.resolve();return v.forEach(S=>{w=w.next(()=>g.getEntry(h,S)).next(T=>{const A=d.docVersions.get(S);_e(A!==null),T.version.compareTo(A)<0&&(m.applyToRemoteDocument(T,d),T.isValidDocument()&&(T.setReadTime(d.commitVersion),g.addEntry(T)))})}),w.next(()=>u.mutationQueue.removeMutationBatch(h,m))}(n,s,t,r).next(()=>r.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(u){let h=He();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(h=h.add(u.batch.mutations[d].key));return h}(t))).next(()=>n.localDocuments.getDocuments(s,i))})}function $F(e){const t=Ee(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Hr.getLastRemoteSnapshotVersion(n))}function N8(e,t){const n=Ee(e),s=t.snapshotVersion;let i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;const u=[];t.targetChanges.forEach((g,m)=>{const v=i.get(m);if(!v)return;u.push(n.Hr.removeMatchingKeys(r,g.removedDocuments,m).next(()=>n.Hr.addMatchingKeys(r,g.addedDocuments,m)));let w=v.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(m)!==null?w=w.withResumeToken(Kt.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,s)),i=i.insert(m,w),function(T,A,O){return T.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=L8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(v,w,g)&&u.push(n.Hr.updateTargetData(r,w))});let h=fs(),d=He();if(t.documentUpdates.forEach(g=>{t.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(r,g))}),u.push(KF(r,a,t.documentUpdates).next(g=>{h=g.Vs,d=g.fs})),!s.isEqual(Fe.min())){const g=n.Hr.getLastRemoteSnapshotVersion(r).next(m=>n.Hr.setTargetsMetadata(r,r.currentSequenceNumber,s));u.push(g)}return Q.waitFor(u).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,h,d)).next(()=>h)}).then(r=>(n.Ts=i,r))}function KF(e,t,n){let s=He(),i=He();return n.forEach(r=>s=s.add(r)),t.getEntries(e,s).next(r=>{let a=fs();return n.forEach((u,h)=>{const d=r.get(u);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(Fe.min())?(t.removeEntry(u,h.readTime),a=a.insert(u,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(h),a=a.insert(u,h)):ge(Qb,"Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",h.version)}),{Vs:a,fs:i}})}function V8(e,t){const n=Ee(e);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=Lo),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function rc(e,t){const n=Ee(e);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.Hr.getTargetData(s,t).next(r=>r?(i=r,Q.resolve(i)):n.Hr.allocateTargetId(s).next(a=>(i=new pr(t,a,"TargetPurposeListen",s.currentSequenceNumber),n.Hr.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.Ts.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(s.targetId,s),n.Is.set(t,s.targetId)),s})}async function oc(e,t,n){const s=Ee(e),i=s.Ts.get(t),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,a=>s.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Qo(a))throw a;ge(Qb,`Failed to update sequence numbers for target ${t}: ${a}`)}s.Ts=s.Ts.remove(t),s.Is.delete(i.target)}function $p(e,t,n){const s=Ee(e);let i=Fe.min(),r=He();return s.persistence.runTransaction("Execute query","readwrite",a=>function(h,d,g){const m=Ee(h),v=m.Is.get(g);return v!==void 0?Q.resolve(m.Ts.get(v)):m.Hr.getTargetData(d,g)}(s,a,ss(t)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(a,u.targetId).next(h=>{r=h})}).next(()=>s.Ps.getDocumentsMatchingQuery(a,t,n?i:Fe.min(),n?r:He())).next(u=>(XF(s,eF(t),u),{documents:u,gs:r})))}function YF(e,t){const n=Ee(e),s=Ee(n.Hr),i=n.Ts.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",r=>s.lt(r,t).next(a=>a?a.target:null))}function QF(e,t){const n=Ee(e),s=n.Es.get(t)||Fe.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ds.getAllFromCollectionGroup(i,t,wM(s,Ku),Number.MAX_SAFE_INTEGER)).then(i=>(XF(n,t,i),i))}function XF(e,t,n){let s=e.Es.get(t)||Fe.min();n.forEach((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)}),e.Es.set(t,s)}async function B8(e,t,n,s){const i=Ee(e);let r=He(),a=fs();for(const d of n){const g=t.ps(d.metadata.name);d.document&&(r=r.add(g));const m=t.ys(d);m.setReadTime(t.ws(d.metadata.readTime)),a=a.insert(g,m)}const u=i.ds.newChangeBuffer({trackRemovals:!0}),h=await rc(i,function(g){return ss(bc(Ye.fromString(`__bundle__/docs/${g}`)))}(s));return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>KF(d,u,a).next(g=>(u.apply(d),g)).next(g=>i.Hr.removeMatchingKeysForTargetId(d,h.targetId).next(()=>i.Hr.addMatchingKeys(d,r,h.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,g.Vs,g.fs)).next(()=>g.Vs)))}async function G8(e,t,n=He()){const s=await rc(e,ss(zb(t.bundledQuery))),i=Ee(e);return i.persistence.runTransaction("Save named query","readwrite",r=>{const a=tn(t.readTime);if(s.snapshotVersion.compareTo(a)>=0)return i.Yr.saveNamedQuery(r,t);const u=s.withResumeToken(Kt.EMPTY_BYTE_STRING,a);return i.Ts=i.Ts.insert(u.targetId,u),i.Hr.updateTargetData(r,u).next(()=>i.Hr.removeMatchingKeysForTargetId(r,s.targetId)).next(()=>i.Hr.addMatchingKeys(r,n,s.targetId)).next(()=>i.Yr.saveNamedQuery(r,t))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF="firestore_clients";function fx(e,t){return`${ZF}_${e}_${t}`}const JF="firestore_mutations";function gx(e,t,n){let s=`${JF}_${e}_${n}`;return t.isAuthenticated()&&(s+=`_${t.uid}`),s}const eP="firestore_targets";function Dy(e,t){return`${eP}_${e}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="SharedClientState";class Kp{constructor(t,n,s,i){this.user=t,this.batchId=n,this.state=s,this.error=i}static bs(t,n,s){const i=JSON.parse(s);let r,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(r=new de(i.error.code,i.error.message))),a?new Kp(t,n,i.state,r):(en(xi,`Failed to parse mutation state for ID '${n}': ${s}`),null)}Ss(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class nd{constructor(t,n,s){this.targetId=t,this.state=n,this.error=s}static bs(t,n){const s=JSON.parse(n);let i,r=typeof s=="object"&&["not-current","current","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return r&&s.error&&(r=typeof s.error.message=="string"&&typeof s.error.code=="string",r&&(i=new de(s.error.code,s.error.message))),r?new nd(t,s.state,i):(en(xi,`Failed to parse target state for ID '${t}': ${n}`),null)}Ss(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Yp{constructor(t,n){this.clientId=t,this.activeTargetIds=n}static bs(t,n){const s=JSON.parse(n);let i=typeof s=="object"&&s.activeTargetIds instanceof Array,r=Lb();for(let a=0;i&&a<s.activeTargetIds.length;++a)i=TM(s.activeTargetIds[a]),r=r.add(s.activeTargetIds[a]);return i?new Yp(t,r):(en(xi,`Failed to parse client data for instance '${t}': ${n}`),null)}}class Xb{constructor(t,n){this.clientId=t,this.onlineState=n}static bs(t){const n=JSON.parse(t);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Xb(n.clientId,n.onlineState):(en(xi,`Failed to parse online state: ${t}`),null)}}class xw{constructor(){this.activeTargetIds=Lb()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ss(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class _y{constructor(t,n,s,i,r){this.window=t,this.Ti=n,this.persistenceKey=s,this.Cs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new xt(Ve),this.started=!1,this.Os=[];const a=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.Ns=fx(this.persistenceKey,this.Cs),this.Bs=function(h){return`firestore_sequence_number_${h}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new xw),this.Ls=new RegExp(`^${ZF}_${a}_([^_]*)$`),this.ks=new RegExp(`^${JF}_${a}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${eP}_${a}_(\\d+)$`),this.Qs=function(h){return`firestore_online_state_${h}`}(this.persistenceKey),this.$s=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.zi();for(const s of t){if(s===this.Cs)continue;const i=this.getItem(fx(this.persistenceKey,s));if(i){const r=Yp.bs(s,i);r&&(this.xs=this.xs.insert(r.clientId,r))}}this.Ks();const n=this.storage.getItem(this.Qs);if(n){const s=this.Us(n);s&&this.Ws(s)}for(const s of this.Os)this.Ms(s);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(t){this.setItem(this.Bs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(t){let n=!1;return this.xs.forEach((s,i)=>{i.activeTargetIds.has(t)&&(n=!0)}),n}addPendingMutation(t){this.zs(t,"pending")}updateMutationState(t,n,s){this.zs(t,n,s),this.js(t)}addLocalQueryTarget(t,n=!0){let s="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(Dy(this.persistenceKey,t));if(i){const r=nd.bs(t,i);r&&(s=r.state)}}return n&&this.Hs.Ds(t),this.Ks(),s}removeLocalQueryTarget(t){this.Hs.vs(t),this.Ks()}isLocalQueryTarget(t){return this.Hs.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Dy(this.persistenceKey,t))}updateQueryState(t,n,s){this.Js(t,n,s)}handleUserChange(t,n,s){n.forEach(i=>{this.js(i)}),this.currentUser=t,s.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(t){this.Ys(t)}notifyBundleLoaded(t){this.Zs(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(t){const n=this.storage.getItem(t);return ge(xi,"READ",t,n),n}setItem(t,n){ge(xi,"SET",t,n),this.storage.setItem(t,n)}removeItem(t){ge(xi,"REMOVE",t),this.storage.removeItem(t)}Ms(t){const n=t;if(n.storageArea===this.storage){if(ge(xi,"EVENT",n.key,n.newValue),n.key===this.Ns)return void en("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Ls.test(n.key)){if(n.newValue==null){const s=this.Xs(n.key);return this.eo(s,null)}{const s=this.no(n.key,n.newValue);if(s)return this.eo(s.clientId,s)}}else if(this.ks.test(n.key)){if(n.newValue!==null){const s=this.ro(n.key,n.newValue);if(s)return this.io(s)}}else if(this.qs.test(n.key)){if(n.newValue!==null){const s=this.so(n.key,n.newValue);if(s)return this.oo(s)}}else if(n.key===this.Qs){if(n.newValue!==null){const s=this.Us(n.newValue);if(s)return this.Ws(s)}}else if(n.key===this.Bs){const s=function(r){let a=hs.ae;if(r!=null)try{const u=JSON.parse(r);_e(typeof u=="number"),a=u}catch(u){en(xi,"Failed to read sequence number from WebStorage",u)}return a}(n.newValue);s!==hs.ae&&this.sequenceNumberHandler(s)}else if(n.key===this.$s){const s=this._o(n.newValue);await Promise.all(s.map(i=>this.syncEngine.ao(i)))}}}else this.Os.push(n)})}}get Hs(){return this.xs.get(this.Cs)}Ks(){this.setItem(this.Ns,this.Hs.Ss())}zs(t,n,s){const i=new Kp(this.currentUser,t,n,s),r=gx(this.persistenceKey,this.currentUser,t);this.setItem(r,i.Ss())}js(t){const n=gx(this.persistenceKey,this.currentUser,t);this.removeItem(n)}Ys(t){const n={clientId:this.Cs,onlineState:t};this.storage.setItem(this.Qs,JSON.stringify(n))}Js(t,n,s){const i=Dy(this.persistenceKey,t),r=new nd(t,n,s);this.setItem(i,r.Ss())}Zs(t){const n=JSON.stringify(Array.from(t));this.setItem(this.$s,n)}Xs(t){const n=this.Ls.exec(t);return n?n[1]:null}no(t,n){const s=this.Xs(t);return Yp.bs(s,n)}ro(t,n){const s=this.ks.exec(t),i=Number(s[1]),r=s[2]!==void 0?s[2]:null;return Kp.bs(new xn(r),i,n)}so(t,n){const s=this.qs.exec(t),i=Number(s[1]);return nd.bs(i,n)}Us(t){return Xb.bs(t)}_o(t){return JSON.parse(t)}async io(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.uo(t.batchId,t.state,t.error);ge(xi,`Ignoring mutation for non-active user ${t.user.uid}`)}oo(t){return this.syncEngine.co(t.targetId,t.state,t.error)}eo(t,n){const s=n?this.xs.insert(t,n):this.xs.remove(t),i=this.Gs(this.xs),r=this.Gs(s),a=[],u=[];return r.forEach(h=>{i.has(h)||a.push(h)}),i.forEach(h=>{r.has(h)||u.push(h)}),this.syncEngine.lo(a,u).then(()=>{this.xs=s})}Ws(t){this.xs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Gs(t){let n=Lb();return t.forEach((s,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class tP{constructor(){this.ho=new xw,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,n,s){this.Po[t]=n}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new xw,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="ConnectivityMonitor";class mx{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ge(px,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){ge(px,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ng=null;function Dw(){return Ng===null?Ng=function(){return 268435456+Math.round(2147483648*Math.random())}():Ng++,"0x"+Ng.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy="RestConnection",z8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class U8{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo=`projects/${s}/databases/${i}`,this.wo=this.databaseId.database===Bp?`project_id=${s}`:`project_id=${s}&database_id=${i}`}bo(t,n,s,i,r){const a=Dw(),u=this.So(t,n.toUriEncodedString());ge(Iy,`Sending RPC '${t}' ${a}:`,u,s);const h={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(h,i,r),this.vo(t,u,h,s).then(d=>(ge(Iy,`Received RPC '${t}' ${a}: `,d),d),d=>{throw Vi(Iy,`RPC '${t}' ${a} failed with error: `,d,"url: ",u,"request:",s),d})}Co(t,n,s,i,r,a){return this.bo(t,n,s,i,r)}Do(t,n,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,r)=>t[r]=i),s&&s.headers.forEach((i,r)=>t[r]=i)}So(t,n){const s=z8[t];return`${this.po}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Ko(t){this.ko(t)}Uo(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn="WebChannelConnection";class j8 extends U8{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,n,s,i){const r=Dw();return new Promise((a,u)=>{const h=new dM;h.setWithCredentials(!0),h.listenOnce(fM.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Yg.NO_ERROR:const g=h.getResponseJson();ge(Gn,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(g)),a(g);break;case Yg.TIMEOUT:ge(Gn,`RPC '${t}' ${r} timed out`),u(new de(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Yg.HTTP_ERROR:const m=h.getStatus();if(ge(Gn,`RPC '${t}' ${r} failed with status:`,m,"response text:",h.getResponseText()),m>0){let v=h.getResponseJson();Array.isArray(v)&&(v=v[0]);const w=v==null?void 0:v.error;if(w&&w.status&&w.message){const S=function(A){const O=A.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(O)>=0?O:ne.UNKNOWN}(w.status);u(new de(S,w.message))}else u(new de(ne.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new de(ne.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{ge(Gn,`RPC '${t}' ${r} completed.`)}});const d=JSON.stringify(i);ge(Gn,`RPC '${t}' ${r} sending request:`,i),h.send(n,"POST",d,s,15)})}Wo(t,n,s){const i=Dw(),r=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=mM(),u=pM(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Do(h.initMessageHeaders,n,s),h.encodeInitMessageHeaders=!0;const g=r.join("");ge(Gn,`Creating RPC '${t}' stream ${i}: ${g}`,h);const m=a.createWebChannel(g,h);let v=!1,w=!1;const S=new W8({Fo:A=>{w?ge(Gn,`Not sending because RPC '${t}' stream ${i} is closed:`,A):(v||(ge(Gn,`Opening RPC '${t}' stream ${i} transport.`),m.open(),v=!0),ge(Gn,`RPC '${t}' stream ${i} sending:`,A),m.send(A))},Mo:()=>m.close()}),T=(A,O,V)=>{A.listen(O,H=>{try{V(H)}catch(z){setTimeout(()=>{throw z},0)}})};return T(m,Gh.EventType.OPEN,()=>{w||(ge(Gn,`RPC '${t}' stream ${i} transport opened.`),S.Qo())}),T(m,Gh.EventType.CLOSE,()=>{w||(w=!0,ge(Gn,`RPC '${t}' stream ${i} transport closed`),S.Ko())}),T(m,Gh.EventType.ERROR,A=>{w||(w=!0,Vi(Gn,`RPC '${t}' stream ${i} transport errored:`,A),S.Ko(new de(ne.UNAVAILABLE,"The operation could not be completed")))}),T(m,Gh.EventType.MESSAGE,A=>{var O;if(!w){const V=A.data[0];_e(!!V);const H=V,z=(H==null?void 0:H.error)||((O=H[0])===null||O===void 0?void 0:O.error);if(z){ge(Gn,`RPC '${t}' stream ${i} received error:`,z);const U=z.status;let K=function(x){const L=ln[x];if(L!==void 0)return gF(L)}(U),k=z.message;K===void 0&&(K=ne.INTERNAL,k="Unknown error status: "+U+" with message "+z.message),w=!0,S.Ko(new de(K,k)),m.close()}else ge(Gn,`RPC '${t}' stream ${i} received:`,V),S.Uo(V)}}),T(u,gM.STAT_EVENT,A=>{A.stat===lw.PROXY?ge(Gn,`RPC '${t}' stream ${i} detected buffering proxy`):A.stat===lw.NOPROXY&&ge(Gn,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.$o()},0),S}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(){return typeof window<"u"?window:null}function ip(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(e){return new Q7(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(t,n,s=1e3,i=1.5,r=6e4){this.Ti=t,this.timerId=n,this.Go=s,this.zo=i,this.jo=r,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const n=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),i=Math.max(0,n-s);i>0&&ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="PersistentStream";class sP{constructor(t,n,s,i,r,a,u,h){this.Ti=t,this.n_=s,this.r_=i,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Zb(t,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(en(n.toString()),en("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.i_===n&&this.V_(s,i)},s=>{t(()=>{const i=new de(ne.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(i)})})}V_(t,n){const s=this.R_(this.i_);this.stream=this.f_(t,n),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{s(()=>this.m_(i))}),this.stream.onMessage(i=>{s(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return ge(Cx,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return n=>{this.Ti.enqueueAndForget(()=>this.i_===t?n():(ge(Cx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class q8 extends sP{constructor(t,n,s,i,r,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,a),this.serializer=r}f_(t,n){return this.connection.Wo("Listen",t,n)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const n=J7(this.serializer,t),s=function(r){if(!("targetChange"in r))return Fe.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?Fe.min():a.readTime?tn(a.readTime):Fe.min()}(t);return this.listener.p_(n,s)}y_(t){const n={};n.database=Sw(this.serializer),n.addTarget=function(r,a){let u;const h=a.target;if(u=Gp(h)?{documents:RF(r,h)}:{query:TF(r,h).ht},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=vF(r,a.resumeToken);const d=ww(r,a.expectedCount);d!==null&&(u.expectedCount=d)}else if(a.snapshotVersion.compareTo(Fe.min())>0){u.readTime=ic(r,a.snapshotVersion.toTimestamp());const d=ww(r,a.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,t);const s=t8(this.serializer,t);s&&(n.labels=s),this.I_(n)}w_(t){const n={};n.database=Sw(this.serializer),n.removeTarget=t,this.I_(n)}}class $8 extends sP{constructor(t,n,s,i,r,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,a),this.serializer=r}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(t,n){return this.connection.Wo("Write",t,n)}g_(t){return _e(!!t.streamToken),this.lastStreamToken=t.streamToken,_e(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){_e(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const n=e8(t.writeResults,t.commitTime),s=tn(t.commitTime);return this.listener.v_(s,n)}C_(){const t={};t.database=Sw(this.serializer),this.I_(t)}S_(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>Rd(this.serializer,s))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{}class Y8 extends K8{constructor(t,n,s,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new de(ne.FAILED_PRECONDITION,"The client has already been terminated.")}bo(t,n,s,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.bo(t,bw(n,s),i,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new de(ne.UNKNOWN,r.toString())})}Co(t,n,s,i,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Co(t,bw(n,s),i,a,u,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(ne.UNKNOWN,a.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Q8{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(en(n),this.N_=!1):ge("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl="RemoteStore";class X8{constructor(t,n,s,i,r){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=r,this.z_.To(a=>{s.enqueueAndForget(async()=>{Zo(this)&&(ge(vl,"Restarting streams for network reachability change."),await async function(h){const d=Ee(h);d.W_.add(4),await Rc(d),d.j_.set("Unknown"),d.W_.delete(4),await $d(d)}(this))})}),this.j_=new Q8(s,i)}}async function $d(e){if(Zo(e))for(const t of e.G_)await t(!0)}async function Rc(e){for(const t of e.G_)await t(!1)}function Tm(e,t){const n=Ee(e);n.U_.has(t.targetId)||(n.U_.set(t.targetId,t),tS(n)?eS(n):Ac(n).c_()&&Jb(n,t))}function ac(e,t){const n=Ee(e),s=Ac(n);n.U_.delete(t),s.c_()&&iP(n,t),n.U_.size===0&&(s.c_()?s.P_():Zo(n)&&n.j_.set("Unknown"))}function Jb(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Fe.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ac(e).y_(t)}function iP(e,t){e.H_.Ne(t),Ac(e).w_(t)}function eS(e){e.H_=new q7({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.U_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),Ac(e).start(),e.j_.B_()}function tS(e){return Zo(e)&&!Ac(e).u_()&&e.U_.size>0}function Zo(e){return Ee(e).W_.size===0}function rP(e){e.H_=void 0}async function Z8(e){e.j_.set("Online")}async function J8(e){e.U_.forEach((t,n)=>{Jb(e,t)})}async function eq(e,t){rP(e),tS(e)?(e.j_.q_(t),eS(e)):e.j_.set("Unknown")}async function tq(e,t,n){if(e.j_.set("Online"),t instanceof CF&&t.state===2&&t.cause)try{await async function(i,r){const a=r.cause;for(const u of r.targetIds)i.U_.has(u)&&(await i.remoteSyncer.rejectListen(u,a),i.U_.delete(u),i.H_.removeTarget(u))}(e,t)}catch(s){ge(vl,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Qp(e,s)}else if(t instanceof sp?e.H_.We(t):t instanceof mF?e.H_.Ze(t):e.H_.je(t),!n.isEqual(Fe.min()))try{const s=await $F(e.localStore);n.compareTo(s)>=0&&await function(r,a){const u=r.H_.ot(a);return u.targetChanges.forEach((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const g=r.U_.get(d);g&&r.U_.set(d,g.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,d)=>{const g=r.U_.get(h);if(!g)return;r.U_.set(h,g.withResumeToken(Kt.EMPTY_BYTE_STRING,g.snapshotVersion)),iP(r,h);const m=new pr(g.target,h,d,g.sequenceNumber);Jb(r,m)}),r.remoteSyncer.applyRemoteEvent(u)}(e,n)}catch(s){ge(vl,"Failed to raise snapshot:",s),await Qp(e,s)}}async function Qp(e,t,n){if(!Qo(t))throw t;e.W_.add(1),await Rc(e),e.j_.set("Offline"),n||(n=()=>$F(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ge(vl,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await $d(e)})}function oP(e,t){return t().catch(n=>Qp(e,n,t))}async function Tc(e){const t=Ee(e),n=jo(t);let s=t.K_.length>0?t.K_[t.K_.length-1].batchId:Lo;for(;nq(t);)try{const i=await V8(t.localStore,s);if(i===null){t.K_.length===0&&n.P_();break}s=i.batchId,sq(t,i)}catch(i){await Qp(t,i)}aP(t)&&lP(t)}function nq(e){return Zo(e)&&e.K_.length<10}function sq(e,t){e.K_.push(t);const n=jo(e);n.c_()&&n.b_&&n.S_(t.mutations)}function aP(e){return Zo(e)&&!jo(e).u_()&&e.K_.length>0}function lP(e){jo(e).start()}async function iq(e){jo(e).C_()}async function rq(e){const t=jo(e);for(const n of e.K_)t.S_(n.mutations)}async function oq(e,t,n){const s=e.K_.shift(),i=Vb.from(s,t,n);await oP(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Tc(e)}async function aq(e,t){t&&jo(e).b_&&await async function(s,i){if(function(a){return fF(a)&&a!==ne.ABORTED}(i.code)){const r=s.K_.shift();jo(s).h_(),await oP(s,()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i)),await Tc(s)}}(e,t),aP(e)&&lP(e)}async function vx(e,t){const n=Ee(e);n.asyncQueue.verifyOperationInProgress(),ge(vl,"RemoteStore received new credentials");const s=Zo(n);n.W_.add(3),await Rc(n),s&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await $d(n)}async function _w(e,t){const n=Ee(e);t?(n.W_.delete(2),await $d(n)):t||(n.W_.add(2),await Rc(n),n.j_.set("Unknown"))}function Ac(e){return e.J_||(e.J_=function(n,s,i){const r=Ee(n);return r.M_(),new q8(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(e.datastore,e.asyncQueue,{xo:Z8.bind(null,e),No:J8.bind(null,e),Lo:eq.bind(null,e),p_:tq.bind(null,e)}),e.G_.push(async t=>{t?(e.J_.h_(),tS(e)?eS(e):e.j_.set("Unknown")):(await e.J_.stop(),rP(e))})),e.J_}function jo(e){return e.Y_||(e.Y_=function(n,s,i){const r=Ee(n);return r.M_(),new $8(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(e.datastore,e.asyncQueue,{xo:()=>Promise.resolve(),No:iq.bind(null,e),Lo:aq.bind(null,e),D_:rq.bind(null,e),v_:oq.bind(null,e)}),e.G_.push(async t=>{t?(e.Y_.h_(),await Tc(e)):(await e.Y_.stop(),e.K_.length>0&&(ge(vl,`Stopping write stream with ${e.K_.length} pending writes`),e.K_=[]))})),e.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(t,n,s,i,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,i,r){const a=Date.now()+s,u=new nS(t,n,a,i,r);return u.start(s),u}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ne.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xc(e,t){if(en("AsyncQueue",`${t}: ${e}`),Qo(e))return new de(ne.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{static emptySet(t){return new ku(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||Se.comparator(n.key,s.key):(n,s)=>Se.comparator(n.key,s.key),this.keyedMap=Hh(),this.sortedSet=new xt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof ku)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new ku;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(){this.Z_=new xt(Se.comparator)}track(t){const n=t.doc.key,s=this.Z_.get(n);s?t.type!==0&&s.type===3?this.Z_=this.Z_.insert(n,t):t.type===3&&s.type!==1?this.Z_=this.Z_.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.Z_=this.Z_.remove(n):t.type===1&&s.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):Te():this.Z_=this.Z_.insert(n,t)}X_(){const t=[];return this.Z_.inorderTraversal((n,s)=>{t.push(s)}),t}}class lc{constructor(t,n,s,i,r,a,u,h,d){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(t,n,s,i,r){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new lc(t,n,ku.emptySet(n),a,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Hd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lq{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class uq{constructor(){this.queries=wx(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,s){const i=Ee(n),r=i.queries;i.queries=wx(),r.forEach((a,u)=>{for(const h of u.ta)h.onError(s)})})(this,new de(ne.ABORTED,"Firestore shutting down"))}}function wx(){return new Mr(e=>JM(e),Hd)}async function sS(e,t){const n=Ee(e);let s=3;const i=t.query;let r=n.queries.get(i);r?!r.na()&&t.ra()&&(s=2):(r=new lq,s=t.ra()?0:1);try{switch(s){case 0:r.ea=await n.onListen(i,!0);break;case 1:r.ea=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const u=xc(a,`Initialization of query '${Eu(t.query)}' failed`);return void t.onError(u)}n.queries.set(i,r),r.ta.push(t),t.sa(n.onlineState),r.ea&&t.oa(r.ea)&&rS(n)}async function iS(e,t){const n=Ee(e),s=t.query;let i=3;const r=n.queries.get(s);if(r){const a=r.ta.indexOf(t);a>=0&&(r.ta.splice(a,1),r.ta.length===0?i=t.ra()?0:1:!r.na()&&t.ra()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function cq(e,t){const n=Ee(e);let s=!1;for(const i of t){const r=i.query,a=n.queries.get(r);if(a){for(const u of a.ta)u.oa(i)&&(s=!0);a.ea=i}}s&&rS(n)}function hq(e,t,n){const s=Ee(e),i=s.queries.get(t);if(i)for(const r of i.ta)r.onError(n);s.queries.delete(t)}function rS(e){e.ia.forEach(t=>{t.next()})}var Iw,bx;(bx=Iw||(Iw={}))._a="default",bx.Cache="cache";class oS{constructor(t,n,s){this.query=t,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(t){if(!this.options.includeMetadataChanges){const s=[];for(const i of t.docChanges)i.type!==3&&s.push(i);t=new lc(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ua?this.la(t)&&(this.aa.next(t),n=!0):this.ha(t,this.onlineState)&&(this.Pa(t),n=!0),this.ca=t,n}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),n=!0),n}ha(t,n){if(!t.fromCache||!this.ra())return!0;const s=n!=="Offline";return(!this.options.Ta||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}la(t){if(t.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(t){t=lc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==Iw.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dq{constructor(t,n){this.Ia=t,this.byteLength=n}Ea(){return"metadata"in this.Ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(t){this.serializer=t}ps(t){return Li(this.serializer,t)}ys(t){return t.metadata.exists?EF(this.serializer,t.document,!1):It.newNoDocument(this.ps(t.metadata.name),this.ws(t.metadata.readTime))}ws(t){return tn(t)}}class fq{constructor(t,n,s){this.da=t,this.localStore=n,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=uP(t)}Aa(t){this.progress.bytesLoaded+=t.byteLength;let n=this.progress.documentsLoaded;if(t.Ia.namedQuery)this.queries.push(t.Ia.namedQuery);else if(t.Ia.documentMetadata){this.documents.push({metadata:t.Ia.documentMetadata}),t.Ia.documentMetadata.exists||++n;const s=Ye.fromString(t.Ia.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else t.Ia.document&&(this.documents[this.documents.length-1].document=t.Ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Ra(t){const n=new Map,s=new Sx(this.serializer);for(const i of t)if(i.metadata.queries){const r=s.ps(i.metadata.name);for(const a of i.metadata.queries){const u=(n.get(a)||He()).add(r);n.set(a,u)}}return n}async complete(){const t=await B8(this.localStore,new Sx(this.serializer),this.documents,this.da.id),n=this.Ra(this.documents);for(const s of this.queries)await G8(this.localStore,s,n.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:t}}}function uP(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(t){this.key=t}}class hP{constructor(t){this.key=t}}class dP{constructor(t,n){this.query=t,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=He(),this.mutatedKeys=He(),this.ya=tF(t),this.wa=new ku(this.ya)}get ba(){return this.fa}Sa(t,n){const s=n?n.Da:new yx,i=n?n.wa:this.wa;let r=n?n.mutatedKeys:this.mutatedKeys,a=i,u=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((g,m)=>{const v=i.get(g),w=zd(this.query,m)?m:null,S=!!v&&this.mutatedKeys.has(v.key),T=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let A=!1;v&&w?v.data.isEqual(w.data)?S!==T&&(s.track({type:3,doc:w}),A=!0):this.va(v,w)||(s.track({type:2,doc:w}),A=!0,(h&&this.ya(w,h)>0||d&&this.ya(w,d)<0)&&(u=!0)):!v&&w?(s.track({type:0,doc:w}),A=!0):v&&!w&&(s.track({type:1,doc:v}),A=!0,(h||d)&&(u=!0)),A&&(w?(a=a.add(w),r=T?r.add(g):r.delete(g)):(a=a.delete(g),r=r.delete(g)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const g=this.query.limitType==="F"?a.last():a.first();a=a.delete(g.key),r=r.delete(g.key),s.track({type:1,doc:g})}return{wa:a,Da:s,ls:u,mutatedKeys:r}}va(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,i){const r=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const a=t.Da.X_();a.sort((g,m)=>function(w,S){const T=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return T(w)-T(S)}(g.type,m.type)||this.ya(g.doc,m.doc)),this.Ca(s),i=i!=null&&i;const u=n&&!i?this.Fa():[],h=this.pa.size===0&&this.current&&!i?1:0,d=h!==this.ga;return this.ga=h,a.length!==0||d?{snapshot:new lc(this.query,t.wa,r,a,t.mutatedKeys,h===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:u}:{Ma:u}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new yx,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=He(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const n=[];return t.forEach(s=>{this.pa.has(s)||n.push(new hP(s))}),this.pa.forEach(s=>{t.has(s)||n.push(new cP(s))}),n}Oa(t){this.fa=t.gs,this.pa=He();const n=this.Sa(t.documents);return this.applyChanges(n,!0)}Na(){return lc.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Jo="SyncEngine";class gq{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class pq{constructor(t){this.key=t,this.Ba=!1}}class mq{constructor(t,n,s,i,r,a){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new Mr(u=>JM(u),Hd),this.qa=new Map,this.Qa=new Set,this.$a=new xt(Se.comparator),this.Ka=new Map,this.Ua=new jb,this.Wa={},this.Ga=new Map,this.za=Cl.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function Cq(e,t,n=!0){const s=Am(e);let i;const r=s.ka.get(t);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.Na()):i=await fP(s,t,n,!0),i}async function vq(e,t){const n=Am(e);await fP(n,t,!0,!1)}async function fP(e,t,n,s){const i=await rc(e.localStore,ss(t)),r=i.targetId,a=e.sharedClientState.addLocalQueryTarget(r,n);let u;return s&&(u=await aS(e,t,r,a==="current",i.resumeToken)),e.isPrimaryClient&&n&&Tm(e.remoteStore,i),u}async function aS(e,t,n,s,i){e.Ha=(m,v,w)=>async function(T,A,O,V){let H=A.view.Sa(O);H.ls&&(H=await $p(T.localStore,A.query,!1).then(({documents:k})=>A.view.Sa(k,H)));const z=V&&V.targetChanges.get(A.targetId),U=V&&V.targetMismatches.get(A.targetId)!=null,K=A.view.applyChanges(H,T.isPrimaryClient,z,U);return Mw(T,A.targetId,K.Ma),K.snapshot}(e,m,v,w);const r=await $p(e.localStore,t,!0),a=new dP(t,r.gs),u=a.Sa(r.documents),h=jd.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline",i),d=a.applyChanges(u,e.isPrimaryClient,h);Mw(e,n,d.Ma);const g=new gq(t,n,a);return e.ka.set(t,g),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),d.snapshot}async function yq(e,t,n){const s=Ee(e),i=s.ka.get(t),r=s.qa.get(i.targetId);if(r.length>1)return s.qa.set(i.targetId,r.filter(a=>!Hd(a,t))),void s.ka.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await oc(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),n&&ac(s.remoteStore,i.targetId),uc(s,i.targetId)}).catch(Yo)):(uc(s,i.targetId),await oc(s.localStore,i.targetId,!0))}async function wq(e,t){const n=Ee(e),s=n.ka.get(t),i=n.qa.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),ac(n.remoteStore,s.targetId))}async function bq(e,t,n){const s=hS(e);try{const i=await function(a,u){const h=Ee(a),d=Lt.now(),g=u.reduce((w,S)=>w.add(S.key),He());let m,v;return h.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=fs(),T=He();return h.ds.getEntries(w,g).next(A=>{S=A,S.forEach((O,V)=>{V.isValidDocument()||(T=T.add(O))})}).next(()=>h.localDocuments.getOverlayedDocuments(w,S)).next(A=>{m=A;const O=[];for(const V of u){const H=U7(V,m.get(V.key).overlayedDocument);H!=null&&O.push(new Fr(V.key,H,WM(H.value.mapValue),Pt.exists(!0)))}return h.mutationQueue.addMutationBatch(w,d,O,u)}).next(A=>{v=A;const O=A.applyToLocalDocumentSet(m,T);return h.documentOverlayCache.saveOverlays(w,A.batchId,O)})}).then(()=>({batchId:v.batchId,changes:sF(m)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(i.batchId),function(a,u,h){let d=a.Wa[a.currentUser.toKey()];d||(d=new xt(Ve)),d=d.insert(u,h),a.Wa[a.currentUser.toKey()]=d}(s,i.batchId,n),await Pr(s,i.changes),await Tc(s.remoteStore)}catch(i){const r=xc(i,"Failed to persist write");n.reject(r)}}async function gP(e,t){const n=Ee(e);try{const s=await N8(n.localStore,t);t.targetChanges.forEach((i,r)=>{const a=n.Ka.get(r);a&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.Ba=!0:i.modifiedDocuments.size>0?_e(a.Ba):i.removedDocuments.size>0&&(_e(a.Ba),a.Ba=!1))}),await Pr(n,s,t)}catch(s){await Yo(s)}}function Ex(e,t,n){const s=Ee(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.ka.forEach((r,a)=>{const u=a.view.sa(t);u.snapshot&&i.push(u.snapshot)}),function(a,u){const h=Ee(a);h.onlineState=u;let d=!1;h.queries.forEach((g,m)=>{for(const v of m.ta)v.sa(u)&&(d=!0)}),d&&rS(h)}(s.eventManager,t),i.length&&s.La.p_(i),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function Sq(e,t,n){const s=Ee(e);s.sharedClientState.updateQueryState(t,"rejected",n);const i=s.Ka.get(t),r=i&&i.key;if(r){let a=new xt(Se.comparator);a=a.insert(r,It.newNoDocument(r,Fe.min()));const u=He().add(r),h=new Wd(Fe.min(),new Map,new xt(Ve),a,u);await gP(s,h),s.$a=s.$a.remove(r),s.Ka.delete(t),cS(s)}else await oc(s.localStore,t,!1).then(()=>uc(s,t,n)).catch(Yo)}async function Eq(e,t){const n=Ee(e),s=t.batch.batchId;try{const i=await k8(n.localStore,t);uS(n,s,null),lS(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Pr(n,i)}catch(i){await Yo(i)}}async function Rq(e,t,n){const s=Ee(e);try{const i=await function(a,u){const h=Ee(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let g;return h.mutationQueue.lookupMutationBatch(d,u).next(m=>(_e(m!==null),g=m.keys(),h.mutationQueue.removeMutationBatch(d,m))).next(()=>h.mutationQueue.performConsistencyCheck(d)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(d,g,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g)).next(()=>h.localDocuments.getDocuments(d,g))})}(s.localStore,t);uS(s,t,n),lS(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Pr(s,i)}catch(i){await Yo(i)}}async function Tq(e,t){const n=Ee(e);Zo(n.remoteStore)||ge(Jo,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=await function(a){const u=Ee(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.mutationQueue.getHighestUnacknowledgedBatchId(h))}(n.localStore);if(s===Lo)return void t.resolve();const i=n.Ga.get(s)||[];i.push(t),n.Ga.set(s,i)}catch(s){const i=xc(s,"Initialization of waitForPendingWrites() operation failed");t.reject(i)}}function lS(e,t){(e.Ga.get(t)||[]).forEach(n=>{n.resolve()}),e.Ga.delete(t)}function uS(e,t,n){const s=Ee(e);let i=s.Wa[s.currentUser.toKey()];if(i){const r=i.get(t);r&&(n?r.reject(n):r.resolve(),i=i.remove(t)),s.Wa[s.currentUser.toKey()]=i}}function uc(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.qa.get(t))e.ka.delete(s),n&&e.La.Ja(s,n);e.qa.delete(t),e.isPrimaryClient&&e.Ua.Sr(t).forEach(s=>{e.Ua.containsKey(s)||pP(e,s)})}function pP(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);n!==null&&(ac(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ka.delete(n),cS(e))}function Mw(e,t,n){for(const s of n)s instanceof cP?(e.Ua.addReference(s.key,t),Aq(e,s)):s instanceof hP?(ge(Jo,"Document no longer in limbo: "+s.key),e.Ua.removeReference(s.key,t),e.Ua.containsKey(s.key)||pP(e,s.key)):Te()}function Aq(e,t){const n=t.key,s=n.path.canonicalString();e.$a.get(n)||e.Qa.has(s)||(ge(Jo,"New document in limbo: "+n),e.Qa.add(s),cS(e))}function cS(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new Se(Ye.fromString(t)),s=e.za.next();e.Ka.set(s,new pq(n)),e.$a=e.$a.insert(n,s),Tm(e.remoteStore,new pr(ss(bc(n.path)),s,"TargetPurposeLimboResolution",hs.ae))}}async function Pr(e,t,n){const s=Ee(e),i=[],r=[],a=[];s.ka.isEmpty()||(s.ka.forEach((u,h)=>{a.push(s.Ha(h,t,n).then(d=>{var g;if((d||n)&&s.isPrimaryClient){const m=d?!d.fromCache:(g=n==null?void 0:n.targetChanges.get(h.targetId))===null||g===void 0?void 0:g.current;s.sharedClientState.updateQueryState(h.targetId,m?"current":"not-current")}if(d){i.push(d);const m=Yb.Yi(h.targetId,d);r.push(m)}}))}),await Promise.all(a),s.La.p_(i),await async function(h,d){const g=Ee(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>Q.forEach(d,v=>Q.forEach(v.Hi,w=>g.persistence.referenceDelegate.addReference(m,v.targetId,w)).next(()=>Q.forEach(v.Ji,w=>g.persistence.referenceDelegate.removeReference(m,v.targetId,w)))))}catch(m){if(!Qo(m))throw m;ge(Qb,"Failed to update sequence numbers: "+m)}for(const m of d){const v=m.targetId;if(!m.fromCache){const w=g.Ts.get(v),S=w.snapshotVersion,T=w.withLastLimboFreeSnapshotVersion(S);g.Ts=g.Ts.insert(v,T)}}}(s.localStore,r))}async function xq(e,t){const n=Ee(e);if(!n.currentUser.isEqual(t)){ge(Jo,"User change. New user:",t.toKey());const s=await qF(n.localStore,t);n.currentUser=t,function(r,a){r.Ga.forEach(u=>{u.forEach(h=>{h.reject(new de(ne.CANCELLED,a))})}),r.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Pr(n,s.Rs)}}function Dq(e,t){const n=Ee(e),s=n.Ka.get(t);if(s&&s.Ba)return He().add(s.key);{let i=He();const r=n.qa.get(t);if(!r)return i;for(const a of r){const u=n.ka.get(a);i=i.unionWith(u.view.ba)}return i}}async function _q(e,t){const n=Ee(e),s=await $p(n.localStore,t.query,!0),i=t.view.Oa(s);return n.isPrimaryClient&&Mw(n,t.targetId,i.Ma),i}async function Iq(e,t){const n=Ee(e);return QF(n.localStore,t).then(s=>Pr(n,s))}async function Mq(e,t,n,s){const i=Ee(e),r=await function(u,h){const d=Ee(u),g=Ee(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",m=>g.Ln(m,h).next(v=>v?d.localDocuments.getDocuments(m,v):Q.resolve(null)))}(i.localStore,t);r!==null?(n==="pending"?await Tc(i.remoteStore):n==="acknowledged"||n==="rejected"?(uS(i,t,s||null),lS(i,t),function(u,h){Ee(Ee(u).mutationQueue).qn(h)}(i.localStore,t)):Te(),await Pr(i,r)):ge(Jo,"Cannot apply mutation batch with id: "+t)}async function Fq(e,t){const n=Ee(e);if(Am(n),hS(n),t===!0&&n.ja!==!0){const s=n.sharedClientState.getAllActiveQueryTargets(),i=await Rx(n,s.toArray());n.ja=!0,await _w(n.remoteStore,!0);for(const r of i)Tm(n.remoteStore,r)}else if(t===!1&&n.ja!==!1){const s=[];let i=Promise.resolve();n.qa.forEach((r,a)=>{n.sharedClientState.isLocalQueryTarget(a)?s.push(a):i=i.then(()=>(uc(n,a),oc(n.localStore,a,!0))),ac(n.remoteStore,a)}),await i,await Rx(n,s),function(a){const u=Ee(a);u.Ka.forEach((h,d)=>{ac(u.remoteStore,d)}),u.Ua.Dr(),u.Ka=new Map,u.$a=new xt(Se.comparator)}(n),n.ja=!1,await _w(n.remoteStore,!1)}}async function Rx(e,t,n){const s=Ee(e),i=[],r=[];for(const a of t){let u;const h=s.qa.get(a);if(h&&h.length!==0){u=await rc(s.localStore,ss(h[0]));for(const d of h){const g=s.ka.get(d),m=await _q(s,g);m.snapshot&&r.push(m.snapshot)}}else{const d=await YF(s.localStore,a);u=await rc(s.localStore,d),await aS(s,mP(d),a,!1,u.resumeToken)}i.push(u)}return s.La.p_(r),i}function mP(e){return ZM(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Pq(e){return function(n){return Ee(Ee(n).persistence).zi()}(Ee(e).localStore)}async function Lq(e,t,n,s){const i=Ee(e);if(i.ja)return void ge(Jo,"Ignoring unexpected query state notification.");const r=i.qa.get(t);if(r&&r.length>0)switch(n){case"current":case"not-current":{const a=await QF(i.localStore,eF(r[0])),u=Wd.createSynthesizedRemoteEventForCurrentChange(t,n==="current",Kt.EMPTY_BYTE_STRING);await Pr(i,a,u);break}case"rejected":await oc(i.localStore,t,!0),uc(i,t,s);break;default:Te()}}async function Oq(e,t,n){const s=Am(e);if(s.ja){for(const i of t){if(s.qa.has(i)&&s.sharedClientState.isActiveQueryTarget(i)){ge(Jo,"Adding an already active target "+i);continue}const r=await YF(s.localStore,i),a=await rc(s.localStore,r);await aS(s,mP(r),a.targetId,!1,a.resumeToken),Tm(s.remoteStore,a)}for(const i of n)s.qa.has(i)&&await oc(s.localStore,i,!1).then(()=>{ac(s.remoteStore,i),uc(s,i)}).catch(Yo)}}function Am(e){const t=Ee(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gP.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dq.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Sq.bind(null,t),t.La.p_=cq.bind(null,t.eventManager),t.La.Ja=hq.bind(null,t.eventManager),t}function hS(e){const t=Ee(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Eq.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Rq.bind(null,t),t}function kq(e,t,n){const s=Ee(e);(async function(r,a,u){try{const h=await a.getMetadata();if(await function(w,S){const T=Ee(w),A=tn(S.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",O=>T.Yr.getBundleMetadata(O,S.id)).then(O=>!!O&&O.createTime.compareTo(A)>=0)}(r.localStore,h))return await a.close(),u._completeWith(function(w){return{taskState:"Success",documentsLoaded:w.totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}}(h)),Promise.resolve(new Set);u._updateProgress(uP(h));const d=new fq(h,r.localStore,a.serializer);let g=await a.Ya();for(;g;){const v=await d.Aa(g);v&&u._updateProgress(v),g=await a.Ya()}const m=await d.complete();return await Pr(r,m.ma,void 0),await function(w,S){const T=Ee(w);return T.persistence.runTransaction("Save bundle","readwrite",A=>T.Yr.saveBundleMetadata(A,S))}(r.localStore,h),u._completeWith(m.progress),Promise.resolve(m.Va)}catch(h){return Vi(Jo,`Loading bundle failed with ${h}`),u._failWith(h),Promise.resolve(new Set)}})(s,t,n).then(i=>{s.sharedClientState.notifyBundleLoaded(i)})}class Td{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=qd(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,n){return null}nu(t,n){return null}eu(t){return jF(this.persistence,new WF,t.initialUser,this.serializer)}Xa(t){return new qb(Rm.ri,this.serializer)}Za(t){return new tP}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Td.provider={build:()=>new Td};class Nq extends Td{constructor(t){super(),this.cacheSizeBytes=t}tu(t,n){_e(this.persistence.referenceDelegate instanceof qp);const s=this.persistence.referenceDelegate.garbageCollector;return new VF(s,t.asyncQueue,n)}Xa(t){const n=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new qb(s=>qp.ri(s,n),this.serializer)}}class CP extends Td{constructor(t,n,s){super(),this.ru=t,this.cacheSizeBytes=n,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.ru.initialize(this,t),await hS(this.ru.syncEngine),await Tc(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(t){return jF(this.persistence,new WF,t.initialUser,this.serializer)}tu(t,n){const s=this.persistence.referenceDelegate.garbageCollector;return new VF(s,t.asyncQueue,n)}nu(t,n){const s=new qj(n,this.persistence);return new jj(t.asyncQueue,s)}Xa(t){const n=Kb(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new $b(this.synchronizeTabs,n,t.clientId,s,t.asyncQueue,nP(),ip(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(t){return new tP}}class Vq extends CP{constructor(t,n){super(t,n,!1),this.ru=t,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const n=this.ru.syncEngine;this.sharedClientState instanceof _y&&(this.sharedClientState.syncEngine={uo:Mq.bind(null,n),co:Lq.bind(null,n),lo:Oq.bind(null,n),zi:Pq.bind(null,n),ao:Iq.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ci(async s=>{await Fq(this.ru.syncEngine,s),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start():s||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(s&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():s||this.indexBackfillerScheduler.stop())})}Za(t){const n=nP();if(!_y.D(n))throw new de(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Kb(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new _y(n,t.asyncQueue,s,t.clientId,t.initialUser)}}class Ad{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Ex(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=xq.bind(null,this.syncEngine),await _w(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new uq}()}createDatastore(t){const n=qd(t.databaseInfo.databaseId),s=function(r){return new j8(r)}(t.databaseInfo);return function(r,a,u,h){return new Y8(r,a,u,h)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,i,r,a,u){return new X8(s,i,r,a,u)}(this.localStore,this.datastore,t.asyncQueue,n=>Ex(this.syncEngine,n,0),function(){return mx.D()?new mx:new H8}())}createSyncEngine(t,n){return function(i,r,a,u,h,d,g){const m=new mq(i,r,a,u,h,d);return g&&(m.ja=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const r=Ee(i);ge(vl,"RemoteStore shutting down."),r.W_.add(5),await Rc(r),r.z_.shutdown(),r.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ad.provider={build:()=>new Ad};function Tx(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const s={value:e.slice(n,n+t),done:!1};return n+=t,s}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):en("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(t,n){this.ou=t,this.serializer=n,this.metadata=new kn,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(s=>{s&&s.Ea()?this.metadata.resolve(s.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(s==null?void 0:s.Ia)}`))},s=>this.metadata.reject(s))}close(){return this.ou.cancel()}async getMetadata(){return this.metadata.promise}async Ya(){return await this.getMetadata(),this.au()}async au(){const t=await this.uu();if(t===null)return null;const n=this._u.decode(t),s=Number(n);isNaN(s)&&this.cu(`length string (${n}) is not valid number`);const i=await this.lu(s);return new dq(JSON.parse(i),t.length+s)}hu(){return this.buffer.findIndex(t=>t===123)}async uu(){for(;this.hu()<0&&!await this.Pu(););if(this.buffer.length===0)return null;const t=this.hu();t<0&&this.cu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),n}async lu(t){for(;this.buffer.length<t;)await this.Pu()&&this.cu("Reached the end of bundle when more is expected.");const n=this._u.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),n}cu(t){throw this.ou.cancel(),new Error(`Invalid bundle format: ${t}`)}async Pu(){const t=await this.ou.read();if(!t.done){const n=new Uint8Array(this.buffer.length+t.value.length);n.set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n}return t.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gq{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new de(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,r){const a=Ee(i),u={documents:r.map(m=>Ed(a.serializer,m))},h=await a.Co("BatchGetDocuments",a.serializer.databaseId,Ye.emptyPath(),u,r.length),d=new Map;h.forEach(m=>{const v=Z7(a.serializer,m);d.set(v.key.toString(),v)});const g=[];return r.forEach(m=>{const v=d.get(m.toString());_e(!!v),g.push(v)}),g}(this.datastore,t);return n.forEach(s=>this.recordVersion(s)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(t.toString())}delete(t){this.write(new Ec(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,s)=>{const i=Se.fromPath(s);this.mutations.push(new kb(i,this.precondition(i)))}),await async function(s,i){const r=Ee(s),a={writes:i.map(u=>Rd(r.serializer,u))};await r.bo("Commit",r.serializer.databaseId,Ye.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Te();n=Fe.min()}const s=this.readVersions.get(t.key.toString());if(s){if(!n.isEqual(s))throw new de(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(Fe.min())?Pt.exists(!1):Pt.updateTime(n):Pt.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(Fe.min()))throw new de(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pt.updateTime(n)}return Pt.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hq{constructor(t,n,s,i,r){this.asyncQueue=t,this.datastore=n,this.options=s,this.updateFunction=i,this.deferred=r,this.Tu=s.maxAttempts,this.a_=new Zb(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const t=new Gq(this.datastore),n=this.du(t);n&&n.then(s=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(s)}).catch(i=>{this.Au(i)}))}).catch(s=>{this.Au(s)})})}du(t){try{const n=this.updateFunction(t);return!Vd(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!fF(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="FirestoreClient";class zq{constructor(t,n,s,i,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=xn.UNAUTHENTICATED,this.clientId=vM.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,async a=>{ge(qo,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(s,a=>(ge(qo,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=xc(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function My(e,t){e.asyncQueue.verifyOperationInProgress(),ge(qo,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener(async i=>{s.isEqual(i)||(await qF(t.localStore,i),s=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Ax(e,t){e.asyncQueue.verifyOperationInProgress();const n=await dS(e);ge(qo,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(s=>vx(t.remoteStore,s)),e.setAppCheckTokenChangeListener((s,i)=>vx(t.remoteStore,i)),e._onlineComponents=t}async function dS(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ge(qo,"Using user provided OfflineComponentProvider");try{await My(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===ne.FAILED_PRECONDITION||i.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Vi("Error using user provided cache. Falling back to memory cache: "+n),await My(e,new Td)}}else ge(qo,"Using default OfflineComponentProvider"),await My(e,new Nq(void 0));return e._offlineComponents}async function Dm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ge(qo,"Using user provided OnlineComponentProvider"),await Ax(e,e._uninitializedComponentsProvider._online)):(ge(qo,"Using default OnlineComponentProvider"),await Ax(e,new Ad))),e._onlineComponents}function vP(e){return dS(e).then(t=>t.persistence)}function fS(e){return dS(e).then(t=>t.localStore)}function yP(e){return Dm(e).then(t=>t.remoteStore)}function gS(e){return Dm(e).then(t=>t.syncEngine)}function Uq(e){return Dm(e).then(t=>t.datastore)}async function cc(e){const t=await Dm(e),n=t.eventManager;return n.onListen=Cq.bind(null,t.syncEngine),n.onUnlisten=yq.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=vq.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=wq.bind(null,t.syncEngine),n}function Wq(e){return e.asyncQueue.enqueue(async()=>{const t=await vP(e),n=await yP(e);return t.setNetworkEnabled(!0),function(i){const r=Ee(i);return r.W_.delete(0),$d(r)}(n)})}function jq(e){return e.asyncQueue.enqueue(async()=>{const t=await vP(e),n=await yP(e);return t.setNetworkEnabled(!1),async function(i){const r=Ee(i);r.W_.add(0),await Rc(r),r.j_.set("Offline")}(n)})}function qq(e,t){const n=new kn;return e.asyncQueue.enqueueAndForget(async()=>async function(i,r,a){try{const u=await function(d,g){const m=Ee(d);return m.persistence.runTransaction("read document","readonly",v=>m.localDocuments.getDocument(v,g))}(i,r);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new de(ne.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const h=xc(u,`Failed to get document '${r} from cache`);a.reject(h)}}(await fS(e),t,n)),n.promise}function wP(e,t,n={}){const s=new kn;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,u,h,d){const g=new xm({next:v=>{g.su(),a.enqueueAndForget(()=>iS(r,m));const w=v.docs.has(u);!w&&v.fromCache?d.reject(new de(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&h&&h.source==="server"?d.reject(new de(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new oS(bc(u.path),g,{includeMetadataChanges:!0,Ta:!0});return sS(r,m)}(await cc(e),e.asyncQueue,t,n,s)),s.promise}function $q(e,t){const n=new kn;return e.asyncQueue.enqueueAndForget(async()=>async function(i,r,a){try{const u=await $p(i,r,!0),h=new dP(r,u.gs),d=h.Sa(u.documents),g=h.applyChanges(d,!1);a.resolve(g.snapshot)}catch(u){const h=xc(u,`Failed to execute query '${r} against cache`);a.reject(h)}}(await fS(e),t,n)),n.promise}function bP(e,t,n={}){const s=new kn;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,u,h,d){const g=new xm({next:v=>{g.su(),a.enqueueAndForget(()=>iS(r,m)),v.fromCache&&h.source==="server"?d.reject(new de(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new oS(u,g,{includeMetadataChanges:!0,Ta:!0});return sS(r,m)}(await cc(e),e.asyncQueue,t,n,s)),s.promise}function Kq(e,t){const n=new xm(t);return e.asyncQueue.enqueueAndForget(async()=>function(i,r){Ee(i).ia.add(r),r.next()}(await cc(e),n)),()=>{n.su(),e.asyncQueue.enqueueAndForget(async()=>function(i,r){Ee(i).ia.delete(r)}(await cc(e),n))}}function Yq(e,t,n,s){const i=function(a,u){let h;return h=typeof a=="string"?pF().encode(a):a,function(g,m){return new Bq(g,m)}(function(g,m){if(g instanceof Uint8Array)return Tx(g,m);if(g instanceof ArrayBuffer)return Tx(new Uint8Array(g),m);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),u)}(n,qd(t));e.asyncQueue.enqueueAndForget(async()=>{kq(await gS(e),i,s)})}function Qq(e,t){return e.asyncQueue.enqueue(async()=>function(s,i){const r=Ee(s);return r.persistence.runTransaction("Get named query","readonly",a=>r.Yr.getNamedQuery(a,i))}(await fS(e),t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(e,t,n){if(!n)throw new de(ne.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function EP(e,t,n,s){if(t===!0&&s===!0)throw new de(ne.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Dx(e){if(!Se.isDocumentKey(e))throw new de(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function _x(e){if(Se.isDocumentKey(e))throw new de(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function _m(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Te()}function dt(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new de(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_m(e);throw new de(ne.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function RP(e,t){if(t<=0)throw new de(ne.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP="firestore.googleapis.com",Ix=!0;class Mx{constructor(t){var n,s;if(t.host===void 0){if(t.ssl!==void 0)throw new de(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TP,this.ssl=Ix}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:Ix;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=LF;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<C8)throw new de(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}EP("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SP((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Kd{constructor(t,n,s,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new de(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mx(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Oj;switch(s.type){case"firstParty":return new Bj(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new de(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=xx.get(n);s&&(ge("ComponentProvider","Removing Datastore"),xx.delete(n),s.terminate())}(this),Promise.resolve()}}function AP(e,t,n,s={}){var i;const r=(e=dt(e,Kd))._getSettings(),a=Object.assign(Object.assign({},r),{emulatorOptions:e._getEmulatorOptions()}),u=`${t}:${n}`;r.host!==TP&&r.host!==u&&Vi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},r),{host:u,ssl:!1,emulatorOptions:s});if(!Uu(h,a)&&(e._setSettings(h),s.mockUserToken)){let d,g;if(typeof s.mockUserToken=="string")d=s.mockUserToken,g=xn.MOCK_USER;else{d=h9(s.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const m=s.mockUserToken.sub||s.mockUserToken.user_id;if(!m)throw new de(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new xn(m)}e._authCredentials=new kj(new CM(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let is=class xP{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new xP(this.firestore,t,this._query)}},Gt=class DP{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new DP(this.firestore,t,this._key)}},Oo=class _P extends is{constructor(t,n,s){super(t,n,bc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Gt(this.firestore,null,new Se(t))}withConverter(t){return new _P(this.firestore,t,this._path)}};function Xp(e,t,...n){if(e=cn(e),pS("collection","path",t),e instanceof Kd){const s=Ye.fromString(t,...n);return _x(s),new Oo(e,null,s)}{if(!(e instanceof Gt||e instanceof Oo))throw new de(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Ye.fromString(t,...n));return _x(s),new Oo(e.firestore,null,s)}}function Xq(e,t){if(e=dt(e,Kd),pS("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new de(ne.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new is(e,null,function(s){return new Ir(Ye.emptyPath(),s)}(t))}function hc(e,t,...n){if(e=cn(e),arguments.length===1&&(t=vM.newId()),pS("doc","path",t),e instanceof Kd){const s=Ye.fromString(t,...n);return Dx(s),new Gt(e,null,new Se(s))}{if(!(e instanceof Gt||e instanceof Oo))throw new de(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Ye.fromString(t,...n));return Dx(s),new Gt(e.firestore,e instanceof Oo?e.converter:null,new Se(s))}}function IP(e,t){return e=cn(e),t=cn(t),(e instanceof Gt||e instanceof Oo)&&(t instanceof Gt||t instanceof Oo)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function MP(e,t){return e=cn(e),t=cn(t),e instanceof is&&t instanceof is&&e.firestore===t.firestore&&Hd(e._query,t._query)&&e.converter===t.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="AsyncQueue";class Px{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Zb(this,"async_queue_retry"),this.bu=()=>{const s=ip();s&&ge(Fx,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.Su=t;const n=ip();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const n=ip();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.bu)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const n=new kn;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!Qo(t))throw t;ge(Fx,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const n=this.Su.then(()=>(this.pu=!0,t().catch(s=>{this.gu=s,this.pu=!1;const i=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(s);throw en("INTERNAL UNHANDLED ERROR: ",i),s}).then(s=>(this.pu=!1,s))));return this.Su=n,n}enqueueAfterDelay(t,n,s){this.Du(),this.wu.indexOf(t)>-1&&(n=0);const i=nS.createAndSchedule(this,t,n,s,r=>this.Fu(r));return this.fu.push(i),i}Du(){this.gu&&Te()}verifyOperationInProgress(){}async Mu(){let t;do t=this.Su,await t;while(t!==this.Su)}xu(t){for(const n of this.fu)if(n.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const n=this.fu.indexOf(t);this.fu.splice(n,1)}}function Fw(e){return function(n,s){if(typeof n!="object"||n===null)return!1;const i=n;for(const r of s)if(r in i&&typeof i[r]=="function")return!0;return!1}(e,["next","error","complete"])}class Zq{constructor(){this._progressObserver={},this._taskCompletionResolver=new kn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,n,s){this._progressObserver={next:t,error:n,complete:s}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,n){return this._taskCompletionResolver.promise.then(t,n)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jq=-1;let nn=class extends Kd{constructor(t,n,s,i){super(t,n,s,i),this.type="firestore",this._queue=new Px,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Px(t),this._firestoreClient=void 0,await t}}};function e$(e,t){const n=typeof e=="object"?e:oM(),s=typeof e=="string"?e:Bp,i=yb(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=u9("firestore");r&&AP(i,...r)}return i}function $n(e){if(e._terminated)throw new de(ne.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||FP(e),e._firestoreClient}function FP(e){var t,n,s;const i=e._freezeSettings(),r=function(u,h,d,g){return new b7(u,h,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,SP(g.experimentalLongPollingOptions),g.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=i.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new zq(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(e._componentsProvider))}function t$(e,t){Vi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings();return PP(e,Ad.provider,{build:s=>new CP(s,n.cacheSizeBytes,t==null?void 0:t.forceOwnership)}),Promise.resolve()}async function n$(e){Vi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=e._freezeSettings();PP(e,Ad.provider,{build:n=>new Vq(n,t.cacheSizeBytes)})}function PP(e,t,n){if((e=dt(e,nn))._firestoreClient||e._terminated)throw new de(ne.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new de(ne.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},FP(e)}function s$(e){if(e._initialized&&!e._terminated)throw new de(ne.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new kn;return e._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(s){if(!Pi.D())return Promise.resolve();const i=s+UF;await Pi.delete(i)}(Kb(e._databaseId,e._persistenceKey)),t.resolve()}catch(n){t.reject(n)}}),t.promise}function i$(e){return function(n){const s=new kn;return n.asyncQueue.enqueueAndForget(async()=>Tq(await gS(n),s)),s.promise}($n(e=dt(e,nn)))}function r$(e){return Wq($n(e=dt(e,nn)))}function o$(e){return jq($n(e=dt(e,nn)))}function a$(e,t){const n=$n(e=dt(e,nn)),s=new Zq;return Yq(n,e._databaseId,t,s),s}function l$(e,t){return Qq($n(e=dt(e,nn)),t).then(n=>n?new is(e,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Gi(Kt.fromBase64String(t))}catch(n){throw new de(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Gi(Kt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $o=class{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new de(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bl=class{constructor(t){this._methodName=t}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new de(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new de(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ve(this._lat,t._lat)||Ve(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(s[r]!==i[r])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$=/^__.*__$/;class c${constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Fr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Sc(t,this.data,n,this.fieldTransforms)}}class LP{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new Fr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function OP(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class Mm{constructor(t,n,s,i,r,a){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.Bu(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new Mm(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.ku({path:s,Qu:!1});return i.$u(t),i}Ku(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.ku({path:s,Qu:!1});return i.Bu(),i}Uu(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return Zp(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(OP(this.Lu)&&u$.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class h${constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||qd(t)}ju(t,n,s,i=!1){return new Mm({Lu:t,methodName:n,zu:s,path:Ft.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sl(e){const t=e._freezeSettings(),n=qd(e._databaseId);return new h$(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Fm(e,t,n,s,i,r={}){const a=e.ju(r.merge||r.mergeFields?2:0,t,n,i);ES("Data must be an object, but it was:",a,s);const u=VP(s,a);let h,d;if(r.merge)h=new ds(a.fieldMask),d=a.fieldTransforms;else if(r.mergeFields){const g=[];for(const m of r.mergeFields){const v=Pw(t,m,n);if(!a.contains(v))throw new de(ne.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);GP(g,v)||g.push(v)}h=new ds(g),d=a.fieldTransforms.filter(m=>h.covers(m.field))}else h=null,d=a.fieldTransforms;return new c$(new Ln(u),h,d)}class Yd extends bl{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Yd}}function kP(e,t,n){return new Mm({Lu:3,zu:t.settings.zu,methodName:e._methodName,Qu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class CS extends bl{_toFieldTransform(t){return new Ud(t.path,new nc)}isEqual(t){return t instanceof CS}}class vS extends bl{constructor(t,n){super(t),this.Hu=n}_toFieldTransform(t){const n=kP(this,t,!0),s=this.Hu.map(r=>El(r,n)),i=new fl(s);return new Ud(t.path,i)}isEqual(t){return t instanceof vS&&Uu(this.Hu,t.Hu)}}class yS extends bl{constructor(t,n){super(t),this.Hu=n}_toFieldTransform(t){const n=kP(this,t,!0),s=this.Hu.map(r=>El(r,n)),i=new gl(s);return new Ud(t.path,i)}isEqual(t){return t instanceof yS&&Uu(this.Hu,t.Hu)}}class wS extends bl{constructor(t,n){super(t),this.Ju=n}_toFieldTransform(t){const n=new sc(t.serializer,oF(t.serializer,this.Ju));return new Ud(t.path,n)}isEqual(t){return t instanceof wS&&this.Ju===t.Ju}}function bS(e,t,n,s){const i=e.ju(1,t,n);ES("Data must be an object, but it was:",i,s);const r=[],a=Ln.empty();Xo(s,(h,d)=>{const g=RS(t,h,n);d=cn(d);const m=i.Ku(g);if(d instanceof Yd)r.push(g);else{const v=El(d,m);v!=null&&(r.push(g),a.set(g,v))}});const u=new ds(r);return new LP(a,u,i.fieldTransforms)}function SS(e,t,n,s,i,r){const a=e.ju(1,t,n),u=[Pw(t,s,n)],h=[i];if(r.length%2!=0)throw new de(ne.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<r.length;v+=2)u.push(Pw(t,r[v])),h.push(r[v+1]);const d=[],g=Ln.empty();for(let v=u.length-1;v>=0;--v)if(!GP(d,u[v])){const w=u[v];let S=h[v];S=cn(S);const T=a.Ku(w);if(S instanceof Yd)d.push(w);else{const A=El(S,T);A!=null&&(d.push(w),g.set(w,A))}}const m=new ds(d);return new LP(g,m,a.fieldTransforms)}function NP(e,t,n,s=!1){return El(n,e.ju(s?4:3,t))}function El(e,t){if(BP(e=cn(e)))return ES("Unsupported field value:",t,e),VP(e,t);if(e instanceof bl)return function(s,i){if(!OP(i.Lu))throw i.Wu(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(s,i){const r=[];let a=0;for(const u of s){let h=El(u,i.Uu(a));h==null&&(h={nullValue:"NULL_VALUE"}),r.push(h),a++}return{arrayValue:{values:r}}}(e,t)}return function(s,i){if((s=cn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return oF(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=Lt.fromDate(s);return{timestampValue:ic(i.serializer,r)}}if(s instanceof Lt){const r=new Lt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ic(i.serializer,r)}}if(s instanceof Im)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Gi)return{bytesValue:vF(i.serializer,s._byteString)};if(s instanceof Gt){const r=i.databaseId,a=s.firestore._databaseId;if(!a.isEqual(r))throw i.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Hb(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof mS)return function(a,u){return{mapValue:{fields:{[Ib]:{stringValue:Mb},[Ju]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw u.Wu("VectorValues must only contain numeric values.");return Ob(u.serializer,d)})}}}}}}(s,i);throw i.Wu(`Unsupported field value: ${_m(s)}`)}(e,t)}function VP(e,t){const n={};return OM(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xo(e,(s,i)=>{const r=El(i,t.qu(s));r!=null&&(n[s]=r)}),{mapValue:{fields:n}}}function BP(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Lt||e instanceof Im||e instanceof Gi||e instanceof Gt||e instanceof bl||e instanceof mS)}function ES(e,t,n){if(!BP(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const s=_m(n);throw s==="an object"?t.Wu(e+" a custom object"):t.Wu(e+" "+s)}}function Pw(e,t,n){if((t=cn(t))instanceof $o)return t._internalPath;if(typeof t=="string")return RS(e,t);throw Zp("Field path arguments must be of type string or ",e,!1,void 0,n)}const d$=new RegExp("[~\\*/\\[\\]]");function RS(e,t,n){if(t.search(d$)>=0)throw Zp(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new $o(...t.split("."))._internalPath}catch{throw Zp(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Zp(e,t,n,s,i){const r=s&&!s.isEmpty(),a=i!==void 0;let u=`Function ${t}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(r||a)&&(h+=" (found",r&&(h+=` in field ${s}`),a&&(h+=` in document ${i}`),h+=")"),new de(ne.INVALID_ARGUMENT,u+e+h)}function GP(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(t,n,s,i,r){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new f$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Pm("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class f$ extends xd{data(){return super.data()}}function Pm(e,t){return typeof t=="string"?RS(e,t):t instanceof $o?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new de(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class TS{}class Qd extends TS{}function bo(e,t,...n){let s=[];t instanceof TS&&s.push(t),s=s.concat(n),function(r){const a=r.filter(h=>h instanceof AS).length,u=r.filter(h=>h instanceof Lm).length;if(a>1||a>0&&u>0)throw new de(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)e=i._apply(e);return e}class Lm extends Qd{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new Lm(t,n,s)}_apply(t){const n=this._parse(t);return UP(t._query,n),new is(t.firestore,t.converter,yw(t._query,n))}_parse(t){const n=Sl(t.firestore);return function(r,a,u,h,d,g,m){let v;if(d.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new de(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Ox(m,g);const S=[];for(const T of m)S.push(Lx(h,r,T));v={arrayValue:{values:S}}}else v=Lx(h,r,m)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Ox(m,g),v=NP(u,a,m,g==="in"||g==="not-in");return Qe.create(d,g,v)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function g$(e,t,n){const s=t,i=Pm("where",e);return Lm._create(i,s,n)}class AS extends TS{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new AS(t,n)}_parse(t){const n=this._queryConstraints.map(s=>s._parse(t)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:mt.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,r){let a=i;const u=r.getFlattenedFilters();for(const h of u)UP(a,h),a=yw(a,h)}(t._query,n),new is(t.firestore,t.converter,yw(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xS extends Qd{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new xS(t,n)}_apply(t){const n=function(i,r,a){if(i.startAt!==null)throw new de(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new de(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sd(r,a)}(t._query,this._field,this._direction);return new is(t.firestore,t.converter,function(i,r){const a=i.explicitOrderBy.concat([r]);return new Ir(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function p$(e,t="asc"){const n=t,s=Pm("orderBy",e);return xS._create(s,n)}class Om extends Qd{constructor(t,n,s){super(),this.type=t,this._limit=n,this._limitType=s}static _create(t,n,s){return new Om(t,n,s)}_apply(t){return new is(t.firestore,t.converter,zp(t._query,this._limit,this._limitType))}}function m$(e){return RP("limit",e),Om._create("limit",e,"F")}function C$(e){return RP("limitToLast",e),Om._create("limitToLast",e,"L")}class km extends Qd{constructor(t,n,s){super(),this.type=t,this._docOrFields=n,this._inclusive=s}static _create(t,n,s){return new km(t,n,s)}_apply(t){const n=zP(t,this.type,this._docOrFields,this._inclusive);return new is(t.firestore,t.converter,function(i,r){return new Ir(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)}(t._query,n))}}function v$(...e){return km._create("startAt",e,!0)}function y$(...e){return km._create("startAfter",e,!1)}class Nm extends Qd{constructor(t,n,s){super(),this.type=t,this._docOrFields=n,this._inclusive=s}static _create(t,n,s){return new Nm(t,n,s)}_apply(t){const n=zP(t,this.type,this._docOrFields,this._inclusive);return new is(t.firestore,t.converter,function(i,r){return new Ir(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)}(t._query,n))}}function w$(...e){return Nm._create("endBefore",e,!1)}function b$(...e){return Nm._create("endAt",e,!0)}function zP(e,t,n,s){if(n[0]=cn(n[0]),n[0]instanceof xd)return function(r,a,u,h,d){if(!h)throw new de(ne.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const g=[];for(const m of Ou(r))if(m.field.isKeyField())g.push(hl(a,h.key));else{const v=h.data.field(m.field);if(Cm(v))throw new de(ne.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const w=m.field.canonicalString();throw new de(ne.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}g.push(v)}return new Wo(g,d)}(e._query,e.firestore._databaseId,t,n[0]._document,s);{const i=Sl(e.firestore);return function(a,u,h,d,g,m){const v=a.explicitOrderBy;if(g.length>v.length)throw new de(ne.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let S=0;S<g.length;S++){const T=g[S];if(v[S].field.isKeyField()){if(typeof T!="string")throw new de(ne.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof T}`);if(!Pb(a)&&T.indexOf("/")!==-1)throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${T}' contains a slash.`);const A=a.path.child(Ye.fromString(T));if(!Se.isDocumentKey(A))throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const O=new Se(A);w.push(hl(u,O))}else{const A=NP(h,d,T);w.push(A)}}return new Wo(w,m)}(e._query,e.firestore._databaseId,i,t,n,s)}}function Lx(e,t,n){if(typeof(n=cn(n))=="string"){if(n==="")throw new de(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pb(t)&&n.indexOf("/")!==-1)throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(Ye.fromString(n));if(!Se.isDocumentKey(s))throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return hl(e,new Se(s))}if(n instanceof Gt)return hl(e,n._key);throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_m(n)}.`)}function Ox(e,t){if(!Array.isArray(e)||e.length===0)throw new de(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function UP(e,t){const n=function(i,r){for(const a of i)for(const u of a.getFlattenedFilters())if(r.indexOf(u.op)>=0)return u.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new de(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new de(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class DS{convertValue(t,n="none"){switch(zo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Mt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Ar(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Te()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Xo(t,(i,r)=>{s[i]=this.convertValue(r,n)}),s}convertVectorValue(t){var n,s,i;const r=(i=(s=(n=t.fields)===null||n===void 0?void 0:n[Ju].arrayValue)===null||s===void 0?void 0:s.values)===null||i===void 0?void 0:i.map(a=>Mt(a.doubleValue));return new mS(r)}convertGeoPoint(t){return new Im(Mt(t.latitude),Mt(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=vm(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(yd(t));default:return null}}convertTimestamp(t){const n=Tr(t);return new Lt(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=Ye.fromString(t);_e(_F(s));const i=new Ho(s.get(1),s.get(3)),r=new Se(s.popFirst(5));return i.isEqual(n)||en(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,s}class S$ extends DS{constructor(t){super(),this.firestore=t}convertBytes(t){return new Gi(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Gt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}let xr=class extends xd{constructor(t,n,s,i,r,a){super(t,n,s,i,a),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new sd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(Pm("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}},sd=class extends xr{data(t={}){return super.data(t)}},Ko=class{constructor(t,n,s,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ka(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(s=>{t.call(n,new sd(this._firestore,this._userDataWriter,s.key,s,new Ka(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(u=>{const h=new sd(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Ka(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>r||u.type!==3).map(u=>{const h=new sd(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Ka(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,g=-1;return u.type!==0&&(d=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),g=a.indexOf(u.doc.key)),{type:E$(u.type),doc:h,oldIndex:d,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function E$(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}function WP(e,t){return e instanceof xr&&t instanceof xr?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(e._document===null?t._document===null:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Ko&&t instanceof Ko&&e._firestore===t._firestore&&MP(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R$(e){e=dt(e,Gt);const t=dt(e.firestore,nn);return wP($n(t),e._key).then(n=>_S(t,e,n))}class Rl extends DS{constructor(t){super(),this.firestore=t}convertBytes(t){return new Gi(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Gt(this.firestore,null,n)}}function T$(e){e=dt(e,Gt);const t=dt(e.firestore,nn),n=$n(t),s=new Rl(t);return qq(n,e._key).then(i=>new xr(t,s,e._key,i,new Ka(i!==null&&i.hasLocalMutations,!0),e.converter))}function A$(e){e=dt(e,Gt);const t=dt(e.firestore,nn);return wP($n(t),e._key,{source:"server"}).then(n=>_S(t,e,n))}function jP(e){e=dt(e,is);const t=dt(e.firestore,nn),n=$n(t),s=new Rl(t);return HP(e._query),bP(n,e._query).then(i=>new Ko(t,s,e,i))}function x$(e){e=dt(e,is);const t=dt(e.firestore,nn),n=$n(t),s=new Rl(t);return $q(n,e._query).then(i=>new Ko(t,s,e,i))}function D$(e){e=dt(e,is);const t=dt(e.firestore,nn),n=$n(t),s=new Rl(t);return bP(n,e._query,{source:"server"}).then(i=>new Ko(t,s,e,i))}function kx(e,t,n){e=dt(e,Gt);const s=dt(e.firestore,nn),i=Vm(e.converter,t,n);return Xd(s,[Fm(Sl(s),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Pt.none())])}function Lw(e,t,n,...s){e=dt(e,Gt);const i=dt(e.firestore,nn),r=Sl(i);let a;return a=typeof(t=cn(t))=="string"||t instanceof $o?SS(r,"updateDoc",e._key,t,n,s):bS(r,"updateDoc",e._key,t),Xd(i,[a.toMutation(e._key,Pt.exists(!0))])}function qP(e){return Xd(dt(e.firestore,nn),[new Ec(e._key,Pt.none())])}function $P(e,t){const n=dt(e.firestore,nn),s=hc(e),i=Vm(e.converter,t);return Xd(n,[Fm(Sl(e.firestore),"addDoc",s._key,i,e.converter!==null,{}).toMutation(s._key,Pt.exists(!1))]).then(()=>s)}function KP(e,...t){var n,s,i;e=cn(e);let r={includeMetadataChanges:!1,source:"default"},a=0;typeof t[a]!="object"||Fw(t[a])||(r=t[a],a++);const u={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(Fw(t[a])){const m=t[a];t[a]=(n=m.next)===null||n===void 0?void 0:n.bind(m),t[a+1]=(s=m.error)===null||s===void 0?void 0:s.bind(m),t[a+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let h,d,g;if(e instanceof Gt)d=dt(e.firestore,nn),g=bc(e._key.path),h={next:m=>{t[a]&&t[a](_S(d,e,m))},error:t[a+1],complete:t[a+2]};else{const m=dt(e,is);d=dt(m.firestore,nn),g=m._query;const v=new Rl(d);h={next:w=>{t[a]&&t[a](new Ko(d,v,m,w))},error:t[a+1],complete:t[a+2]},HP(e._query)}return function(v,w,S,T){const A=new xm(T),O=new oS(w,A,S);return v.asyncQueue.enqueueAndForget(async()=>sS(await cc(v),O)),()=>{A.su(),v.asyncQueue.enqueueAndForget(async()=>iS(await cc(v),O))}}($n(d),g,u,h)}function _$(e,t){return Kq($n(e=dt(e,nn)),Fw(t)?t:{next:t})}function Xd(e,t){return function(s,i){const r=new kn;return s.asyncQueue.enqueueAndForget(async()=>bq(await gS(s),i,r)),r.promise}($n(e),t)}function _S(e,t,n){const s=n.docs.get(t._key),i=new Rl(e);return new xr(e,i,t._key,s,new Ka(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I$={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M$=class{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Sl(t)}set(t,n,s){this._verifyNotCommitted();const i=Io(t,this._firestore),r=Vm(i.converter,n,s),a=Fm(this._dataReader,"WriteBatch.set",i._key,r,i.converter!==null,s);return this._mutations.push(a.toMutation(i._key,Pt.none())),this}update(t,n,s,...i){this._verifyNotCommitted();const r=Io(t,this._firestore);let a;return a=typeof(n=cn(n))=="string"||n instanceof $o?SS(this._dataReader,"WriteBatch.update",r._key,n,s,i):bS(this._dataReader,"WriteBatch.update",r._key,n),this._mutations.push(a.toMutation(r._key,Pt.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=Io(t,this._firestore);return this._mutations=this._mutations.concat(new Ec(n._key,Pt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Io(e,t){if((e=cn(e)).firestore!==t)throw new de(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=Sl(t)}get(t){const n=Io(t,this._firestore),s=new S$(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return Te();const r=i[0];if(r.isFoundDocument())return new xd(this._firestore,s,r.key,r,n.converter);if(r.isNoDocument())return new xd(this._firestore,s,n._key,null,n.converter);throw Te()})}set(t,n,s){const i=Io(t,this._firestore),r=Vm(i.converter,n,s),a=Fm(this._dataReader,"Transaction.set",i._key,r,i.converter!==null,s);return this._transaction.set(i._key,a),this}update(t,n,s,...i){const r=Io(t,this._firestore);let a;return a=typeof(n=cn(n))=="string"||n instanceof $o?SS(this._dataReader,"Transaction.update",r._key,n,s,i):bS(this._dataReader,"Transaction.update",r._key,n),this._transaction.update(r._key,a),this}delete(t){const n=Io(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P$=class extends F${constructor(t,n){super(t,n),this._firestore=t}get(t){const n=Io(t,this._firestore),s=new Rl(this._firestore);return super.get(t).then(i=>new xr(this._firestore,s,n._key,i._document,new Ka(!1,!1),n.converter))}};function L$(e,t,n){e=dt(e,nn);const s=Object.assign(Object.assign({},I$),n);return function(r){if(r.maxAttempts<1)throw new de(ne.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(r,a,u){const h=new kn;return r.asyncQueue.enqueueAndForget(async()=>{const d=await Uq(r);new Hq(r.asyncQueue,d,u,a,h).Iu()}),h.promise}($n(e),i=>t(new P$(e,i)),s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O$(){return new Yd("deleteField")}function k$(){return new CS("serverTimestamp")}function N$(...e){return new vS("arrayUnion",e)}function V$(...e){return new yS("arrayRemove",e)}function B$(e){return new wS("increment",e)}(function(t,n=!0){(function(i){wc=i})(wb),qu(new cl("firestore",(s,{instanceIdentifier:i,options:r})=>{const a=s.getProvider("app").getImmediate(),u=new nn(new Nj(s.getProvider("auth-internal")),new Gj(a,s.getProvider("app-check-internal")),function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new de(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ho(d.options.projectId,g)}(a,i),a);return r=Object.assign({useFetchStreams:n},r),u._setSettings(r),u},"PUBLIC").setMultipleInstances(!0)),yr(pA,mA,t),yr(pA,mA,"esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G${constructor(t,n){this._delegate=t,this.firebase=n,dd(t,new cl("app-compat",()=>this,"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(t=>{this._delegate.checkDestroyed(),t()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Sb(this._delegate)))}_getService(t,n=Vo){var s;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(t);return!i.isInitialized()&&((s=i.getComponent())===null||s===void 0?void 0:s.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(t,n=Vo){this._delegate.container.getProvider(t).clearInstance(n)}_addComponent(t){dd(this._delegate,t)}_addOrOverwriteComponent(t){nM(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Nx=new dm("app-compat","Firebase",H$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z$(e){const t={},n={__esModule:!0,initializeApp:r,app:i,registerVersion:yr,setLogLevel:lM,onLog:aM,apps:null,SDK_VERSION:wb,INTERNAL:{registerComponent:u,removeApp:s,useAsService:h,modularAPIs:Fj}};n.default=n,Object.defineProperty(n,"apps",{get:a});function s(d){delete t[d]}function i(d){if(d=d||Vo,!rA(t,d))throw Nx.create("no-app",{appName:d});return t[d]}i.App=e;function r(d,g={}){const m=bb(d,g);if(rA(t,m.name))return t[m.name];const v=new e(m,n);return t[m.name]=v,v}function a(){return Object.keys(t).map(d=>t[d])}function u(d){const g=d.name,m=g.replace("-compat","");if(qu(d)&&d.type==="PUBLIC"){const v=(w=i())=>{if(typeof w[m]!="function")throw Nx.create("invalid-app-argument",{appName:g});return w[m]()};d.serviceProps!==void 0&&Ip(v,d.serviceProps),n[m]=v,e.prototype[m]=function(...w){return this._getService.bind(this,g).apply(this,d.multipleInstances?w:[])}}return d.type==="PUBLIC"?n[m]:null}function h(d,g){return g==="serverAuth"?null:g}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(){const e=z$(G$);e.INTERNAL=Object.assign(Object.assign({},e.INTERNAL),{createFirebaseNamespace:YP,extendNamespace:t,createSubscribe:v9,ErrorFactory:dm,deepExtend:Ip});function t(n){Ip(e,n)}return e}const U$=YP();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=new Cb("@firebase/app-compat"),W$="@firebase/app-compat",j$="0.2.51";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q$(e){yr(W$,j$,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const e=$I();if(e.firebase!==void 0){Vx.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const t=e.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&Vx.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const IS=U$;q$();var $$="firebase",K$="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */IS.registerVersion($$,K$,"app-compat");const Y$="@firebase/firestore-compat",Q$="0.3.44";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(e,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new de("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(){if(typeof Uint8Array>"u")throw new de("unimplemented","Uint8Arrays are not available in this environment.")}function Gx(){if(!y7())throw new de("unimplemented","Blobs are unavailable in Firestore in this environment.")}let QP=class Ow{constructor(t){this._delegate=t}static fromBase64String(t){return Gx(),new Ow(Gi.fromBase64String(t))}static fromUint8Array(t){return Bx(),new Ow(Gi.fromUint8Array(t))}toBase64(){return Gx(),this._delegate.toBase64()}toUint8Array(){return Bx(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(e){return X$(e,["next","error","complete"])}function X$(e,t){if(typeof e!="object"||e===null)return!1;const n=e;for(const s of t)if(s in n&&typeof n[s]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${enableIndexedDbPersistence(t,n){return t$(t._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(t){return n$(t._delegate)}clearIndexedDbPersistence(t){return s$(t._delegate)}}class XP{constructor(t,n,s){this._delegate=n,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},t instanceof Ho||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const n=this._delegate._getSettings();!t.merge&&n.host!==t.host&&Vi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},n),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,n,s={}){AP(this._delegate,t,n,s)}enableNetwork(){return r$(this._delegate)}disableNetwork(){return o$(this._delegate)}enablePersistence(t){let n=!1,s=!1;return t&&(n=!!t.synchronizeTabs,s=!!t.experimentalForceOwningTab,EP("synchronizeTabs",n,"experimentalForceOwningTab",s)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return i$(this._delegate)}onSnapshotsInSync(t){return _$(this._delegate,t)}get app(){if(!this._appCompat)throw new de("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new dc(this,Xp(this._delegate,t))}catch(n){throw ts(n,"collection()","Firestore.collection()")}}doc(t){try{return new Ws(this,hc(this._delegate,t))}catch(n){throw ts(n,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new es(this,Xq(this._delegate,t))}catch(n){throw ts(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return L$(this._delegate,n=>t(new ZP(this,n)))}batch(){return $n(this._delegate),new JP(new M$(this._delegate,t=>Xd(this._delegate,t)))}loadBundle(t){return a$(this._delegate,t)}namedQuery(t){return l$(this._delegate,t).then(n=>n?new es(this,n):null)}}class Bm extends DS{constructor(t){super(),this.firestore=t}convertBytes(t){return new QP(new Gi(t))}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return Ws.forKey(n,this.firestore,null)}}function J$(e){Pj(e)}class ZP{constructor(t,n){this._firestore=t,this._delegate=n,this._userDataWriter=new Bm(t)}get(t){const n=Ya(t);return this._delegate.get(n).then(s=>new Dd(this._firestore,new xr(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,n.converter)))}set(t,n,s){const i=Ya(t);return s?(MS("Transaction.set",s),this._delegate.set(i,n,s)):this._delegate.set(i,n),this}update(t,n,s,...i){const r=Ya(t);return arguments.length===2?this._delegate.update(r,n):this._delegate.update(r,n,s,...i),this}delete(t){const n=Ya(t);return this._delegate.delete(n),this}}class JP{constructor(t){this._delegate=t}set(t,n,s){const i=Ya(t);return s?(MS("WriteBatch.set",s),this._delegate.set(i,n,s)):this._delegate.set(i,n),this}update(t,n,s,...i){const r=Ya(t);return arguments.length===2?this._delegate.update(r,n):this._delegate.update(r,n,s,...i),this}delete(t){const n=Ya(t);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class yl{constructor(t,n,s){this._firestore=t,this._userDataWriter=n,this._delegate=s}fromFirestore(t,n){const s=new sd(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new _d(this._firestore,s),n??{})}toFirestore(t,n){return n?this._delegate.toFirestore(t,n):this._delegate.toFirestore(t)}static getInstance(t,n){const s=yl.INSTANCES;let i=s.get(t);i||(i=new WeakMap,s.set(t,i));let r=i.get(n);return r||(r=new yl(t,new Bm(t),n),i.set(n,r)),r}}yl.INSTANCES=new WeakMap;class Ws{constructor(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new Bm(t)}static forPath(t,n,s){if(t.length%2!==0)throw new de("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Ws(n,new Gt(n._delegate,s,new Se(t)))}static forKey(t,n,s){return new Ws(n,new Gt(n._delegate,s,t))}get id(){return this._delegate.id}get parent(){return new dc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new dc(this.firestore,Xp(this._delegate,t))}catch(n){throw ts(n,"collection()","DocumentReference.collection()")}}isEqual(t){return t=cn(t),t instanceof Gt?IP(this._delegate,t):!1}set(t,n){n=MS("DocumentReference.set",n);try{return n?kx(this._delegate,t,n):kx(this._delegate,t)}catch(s){throw ts(s,"setDoc()","DocumentReference.set()")}}update(t,n,...s){try{return arguments.length===1?Lw(this._delegate,t):Lw(this._delegate,t,n,...s)}catch(i){throw ts(i,"updateDoc()","DocumentReference.update()")}}delete(){return qP(this._delegate)}onSnapshot(...t){const n=e1(t),s=t1(t,i=>new Dd(this.firestore,new xr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return KP(this._delegate,n,s)}get(t){let n;return(t==null?void 0:t.source)==="cache"?n=T$(this._delegate):(t==null?void 0:t.source)==="server"?n=A$(this._delegate):n=R$(this._delegate),n.then(s=>new Dd(this.firestore,new xr(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(t){return new Ws(this.firestore,t?this._delegate.withConverter(yl.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function ts(e,t,n){return e.message=e.message.replace(t,n),e}function e1(e){for(const t of e)if(typeof t=="object"&&!kw(t))return t;return{}}function t1(e,t){var n,s;let i;return kw(e[0])?i=e[0]:kw(e[1])?i=e[1]:typeof e[0]=="function"?i={next:e[0],error:e[1],complete:e[2]}:i={next:e[1],error:e[2],complete:e[3]},{next:r=>{i.next&&i.next(t(r))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(s=i.complete)===null||s===void 0?void 0:s.bind(i)}}class Dd{constructor(t,n){this._firestore=t,this._delegate=n}get ref(){return new Ws(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,n){return this._delegate.get(t,n)}isEqual(t){return WP(this._delegate,t._delegate)}}class _d extends Dd{data(t){const n=this._delegate.data(t);return this._delegate._converter||Lj(n!==void 0),n}}class es{constructor(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new Bm(t)}where(t,n,s){try{return new es(this.firestore,bo(this._delegate,g$(t,n,s)))}catch(i){throw ts(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,n){try{return new es(this.firestore,bo(this._delegate,p$(t,n)))}catch(s){throw ts(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new es(this.firestore,bo(this._delegate,m$(t)))}catch(n){throw ts(n,"limit()","Query.limit()")}}limitToLast(t){try{return new es(this.firestore,bo(this._delegate,C$(t)))}catch(n){throw ts(n,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new es(this.firestore,bo(this._delegate,v$(...t)))}catch(n){throw ts(n,"startAt()","Query.startAt()")}}startAfter(...t){try{return new es(this.firestore,bo(this._delegate,y$(...t)))}catch(n){throw ts(n,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new es(this.firestore,bo(this._delegate,w$(...t)))}catch(n){throw ts(n,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new es(this.firestore,bo(this._delegate,b$(...t)))}catch(n){throw ts(n,"endAt()","Query.endAt()")}}isEqual(t){return MP(this._delegate,t._delegate)}get(t){let n;return(t==null?void 0:t.source)==="cache"?n=x$(this._delegate):(t==null?void 0:t.source)==="server"?n=D$(this._delegate):n=jP(this._delegate),n.then(s=>new Nw(this.firestore,new Ko(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...t){const n=e1(t),s=t1(t,i=>new Nw(this.firestore,new Ko(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return KP(this._delegate,n,s)}withConverter(t){return new es(this.firestore,t?this._delegate.withConverter(yl.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}class eK{constructor(t,n){this._firestore=t,this._delegate=n}get type(){return this._delegate.type}get doc(){return new _d(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Nw{constructor(t,n){this._firestore=t,this._delegate=n}get query(){return new es(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new _d(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(n=>new eK(this._firestore,n))}forEach(t,n){this._delegate.forEach(s=>{t.call(n,new _d(this._firestore,s))})}isEqual(t){return WP(this._delegate,t._delegate)}}class dc extends es{constructor(t,n){super(t,n),this.firestore=t,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Ws(this.firestore,t):null}doc(t){try{return t===void 0?new Ws(this.firestore,hc(this._delegate)):new Ws(this.firestore,hc(this._delegate,t))}catch(n){throw ts(n,"doc()","CollectionReference.doc()")}}add(t){return $P(this._delegate,t).then(n=>new Ws(this.firestore,n))}isEqual(t){return IP(this._delegate,t._delegate)}withConverter(t){return new dc(this.firestore,t?this._delegate.withConverter(yl.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function Ya(e){return dt(e,Gt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(...t){this._delegate=new $o(...t)}static documentId(){return new FS(Ft.keyField().canonicalString())}isEqual(t){return t=cn(t),t instanceof $o?this._delegate._internalPath.isEqual(t._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{static serverTimestamp(){const t=k$();return t._methodName="FieldValue.serverTimestamp",new qa(t)}static delete(){const t=O$();return t._methodName="FieldValue.delete",new qa(t)}static arrayUnion(...t){const n=N$(...t);return n._methodName="FieldValue.arrayUnion",new qa(n)}static arrayRemove(...t){const n=V$(...t);return n._methodName="FieldValue.arrayRemove",new qa(n)}static increment(t){const n=B$(t);return n._methodName="FieldValue.increment",new qa(n)}constructor(t){this._delegate=t}isEqual(t){return this._delegate.isEqual(t._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tK={Firestore:XP,GeoPoint:Im,Timestamp:Lt,Blob:QP,Transaction:ZP,WriteBatch:JP,DocumentReference:Ws,DocumentSnapshot:Dd,Query:es,QueryDocumentSnapshot:_d,QuerySnapshot:Nw,CollectionReference:dc,FieldPath:FS,FieldValue:qa,setLogLevel:J$,CACHE_SIZE_UNLIMITED:Jq};function nK(e,t){e.INTERNAL.registerComponent(new cl("firestore-compat",n=>{const s=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return t(s,i)},"PUBLIC").setServiceProps(Object.assign({},tK)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sK(e){nK(e,(t,n)=>new XP(t,n,new Z$)),e.registerVersion(Y$,Q$)}sK(IS);const iK=IS.initializeApp({apiKey:"AIzaSyB2F4R4KkxUwb4GFKs7twRhiHS5i-i51D4",authDomain:"scopic-73416.firebaseapp.com",projectId:"scopic-73416",storageBucket:"scopic-73416.appspot.com",messagingSenderId:"475263107333",appId:"1:475263107333:web:27180a036864e16618376c"}),Vg=e$(iK);function rK(){const[e,t]=_.useState([]),n=Xp(Vg,"sociosCaza"),[s,i]=_.useState(!0);_.useEffect(()=>{localStorage.userSocio!==void 0&&jP(n).then(W=>{W.size===0&&console.log("No results!");const ee=W.docs.map(oe=>({idDB:oe.id,...oe.data()}));t(ee)}).catch(W=>{console.log("Error searching items",W)})},[s]);const[r,a]=_.useState({nombreDelSocio:"",apellidoPaterno:"",apellidoMaterno:"",curp:"",domicilioDelSocio:"",clase:"",calibre:"",marca:"",modelo:"",matricula:"",folio:"",armasCortas:"",armasLargas:"",fechaDeInscripcion:0}),[u,h]=_.useState(null),[d,g,m,v,w]=Z6(),[S,T,A,O,V,H]=J6();_.useEffect(()=>{d!==null&&(d.length===1&&v.length>3?T("Encontrado"):T(`${d.length} Resultados`),v.length===0&&(g(null),T(`${e.length}, Todos las Socios`)))},[v]),e.map(W=>{W.armasArr.map(ee=>{ee.armasCortas,ee.armasLargas})});const z=Xp(Vg,"sociosCaza"),U=W=>{$P(z,W).then(()=>{console.log("wuuu!!")}).catch(ee=>console.log(ee))},K=async W=>{const ee=hc(Vg,"sociosCaza",W);try{await qP(ee),console.log(W,"Fue Eliminado")}catch(oe){console.error(oe)}},k=async(W,ee)=>{const oe=hc(Vg,"sociosCaza",W);try{await Lw(oe,ee)}catch(ue){console.error(ue)}};e.sort((W,ee)=>{const oe=W.nombreDelSocio.localeCompare(ee.nombreDelSocio);return oe===0?oe:W.apellidoPaterno.localeCompare(ee.apellidoPaterno)});const[D,x]=_.useState(0);let L=7;const[M,B]=_.useState(""),[F,ye]=_.useState(!0);let ve=[],ie=[],Ce=[],re=[];e.forEach((W,ee)=>{ve.push(Number(W.armasArr.filter(oe=>oe.armasCortas==1).length)),ie.push(Number(W.armasArr.filter(oe=>oe.armasLargas==1).length)),W.armasCortas==1&&Ce.push(W.armasCortas),W.armasLargas==1&&re.push(W.armasLargas)});let Re=re.reduce((W,ee)=>W+ee,0)+ie.reduce((W,ee)=>W+ee,0),N=Ce.reduce((W,ee)=>W+ee,0)+ve.reduce((W,ee)=>W+ee,0);return Z.jsxs("div",{children:[O?Z.jsx("p",{className:"msg",children:O}):"",Z.jsx(X6,{}),Z.jsx(kL,{editMode:u,error:V,msg:S,items:e,setMsg:T,setFinder:g,setError:H,setFinderMsg:A,setState:a,state:r,setEdit:h,setSearchTXT:w,postSocio:U,setGetDB:i,getDB:s,updateByIdDB:k}),Z.jsxs("div",{className:"totalesGenerales",children:[Z.jsxs("span",{children:["Armas Cortas: ",N]}),Z.jsxs("span",{children:["Armas Largas: ",Re]}),Z.jsxs("span",{children:["Total de Armas: ",N+Re]})]}),Z.jsx(OL,{items:e,handleSearch:m,searchTXT:v}),Z.jsx("br",{}),Z.jsx(Q6,{setError:H,setMsg:T,setFinder:g,items:e,btnDisplayState:F,setBtnDisplayState:ye}),d===null?e.slice(D,D+L).map((W,ee)=>Z.jsx(WR,{i:ee,setEdit:h,setState:a,state:r,el:W,setFinder:g,setMsg:T,deleteByIdDB:K,setGetDB:i,getDB:s,updateByIdDB:k,items:e,setBtnDisplayState:ye},ee)):d.slice(D,D+L).map((W,ee)=>Z.jsx(WR,{i:ee,setEdit:h,setState:a,state:r,el:W,setFinder:g,setMsg:T,deleteByIdDB:K,setGetDB:i,getDB:s,updateByIdDB:k,items:e,setBtnDisplayState:ye},ee)),Z.jsx("hr",{}),Z.jsxs("div",{className:"",children:[Z.jsx("button",{className:D===0?"dn":"button",onClick:()=>{D>0&&x(D-L)},children:" Anterior"}),Z.jsx("button",{className:D===L||D===0?"dn":"button",onClick:()=>{x(0)},children:""}),Z.jsx("button",{className:"button",onClick:()=>{e.filter(W=>W).length>D+L?x(D+L):(B(" No hay mas Socios en esta Lista"),setTimeout(()=>{B("")},2500))},children:"Siguiente "}),Z.jsx("span",{className:"sliceAlert",children:M}),Z.jsxs("p",{className:"sliceButtonsP",children:["De: ",D+1," a: ",e.length>D+L?D+L:e.length]}),Z.jsxs("p",{className:"sliceButtonsP",children:["Paginas de ",L," Socios. c/u "]})]}),e.length===0?Z.jsx("p",{className:"check",children:"No hay Socios Escritos"}):null]})}LL.createRoot(document.getElementById("root")).render(Z.jsx(_.StrictMode,{children:Z.jsx(rK,{})}));
